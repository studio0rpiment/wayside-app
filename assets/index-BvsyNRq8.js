function oz(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function Hw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var qx={exports:{}},Ff={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DI;function lz(){if(DI)return Ff;DI=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,s){var a=null;if(s!==void 0&&(a=""+s),r.key!==void 0&&(a=""+r.key),"key"in r){s={};for(var o in r)o!=="key"&&(s[o]=r[o])}else s=r;return r=s.ref,{$$typeof:n,type:i,key:a,ref:r!==void 0?r:null,props:s}}return Ff.Fragment=e,Ff.jsx=t,Ff.jsxs=t,Ff}var LI;function cz(){return LI||(LI=1,qx.exports=lz()),qx.exports}var de=cz(),jx={exports:{}},Qf={},Xx={exports:{}},Yx={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OI;function uz(){return OI||(OI=1,function(n){function e(z,j){var Z=z.length;z.push(j);e:for(;0<Z;){var ce=Z-1>>>1,U=z[ce];if(0<r(U,j))z[ce]=j,z[Z]=U,Z=ce;else break e}}function t(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var j=z[0],Z=z.pop();if(Z!==j){z[0]=Z;e:for(var ce=0,U=z.length,se=U>>>1;ce<se;){var me=2*(ce+1)-1,be=z[me],xe=me+1,Ue=z[xe];if(0>r(be,Z))xe<U&&0>r(Ue,be)?(z[ce]=Ue,z[xe]=Z,ce=xe):(z[ce]=be,z[me]=Z,ce=me);else if(xe<U&&0>r(Ue,Z))z[ce]=Ue,z[xe]=Z,ce=xe;else break e}}return j}function r(z,j){var Z=z.sortIndex-j.sortIndex;return Z!==0?Z:z.id-j.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var c=[],h=[],d=1,p=null,m=3,A=!1,v=!1,y=!1,E=!1,b=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function w(z){for(var j=t(h);j!==null;){if(j.callback===null)i(h);else if(j.startTime<=z)i(h),j.sortIndex=j.expirationTime,e(c,j);else break;j=t(h)}}function T(z){if(y=!1,w(z),!v)if(t(c)!==null)v=!0,L||(L=!0,V());else{var j=t(h);j!==null&&ae(T,j.startTime-z)}}var L=!1,R=-1,P=5,D=-1;function M(){return E?!0:!(n.unstable_now()-D<P)}function k(){if(E=!1,L){var z=n.unstable_now();D=z;var j=!0;try{e:{v=!1,y&&(y=!1,C(R),R=-1),A=!0;var Z=m;try{t:{for(w(z),p=t(c);p!==null&&!(p.expirationTime>z&&M());){var ce=p.callback;if(typeof ce=="function"){p.callback=null,m=p.priorityLevel;var U=ce(p.expirationTime<=z);if(z=n.unstable_now(),typeof U=="function"){p.callback=U,w(z),j=!0;break t}p===t(c)&&i(c),w(z)}else i(c);p=t(c)}if(p!==null)j=!0;else{var se=t(h);se!==null&&ae(T,se.startTime-z),j=!1}}break e}finally{p=null,m=Z,A=!1}j=void 0}}finally{j?V():L=!1}}}var V;if(typeof _=="function")V=function(){_(k)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,$=X.port2;X.port1.onmessage=k,V=function(){$.postMessage(null)}}else V=function(){b(k,0)};function ae(z,j){R=b(function(){z(n.unstable_now())},j)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_next=function(z){switch(m){case 1:case 2:case 3:var j=3;break;default:j=m}var Z=m;m=j;try{return z()}finally{m=Z}},n.unstable_requestPaint=function(){E=!0},n.unstable_runWithPriority=function(z,j){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Z=m;m=z;try{return j()}finally{m=Z}},n.unstable_scheduleCallback=function(z,j,Z){var ce=n.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ce+Z:ce):Z=ce,z){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=Z+U,z={id:d++,callback:j,priorityLevel:z,startTime:Z,expirationTime:U,sortIndex:-1},Z>ce?(z.sortIndex=Z,e(h,z),t(c)===null&&z===t(h)&&(y?(C(R),R=-1):y=!0,ae(T,Z-ce))):(z.sortIndex=U,e(c,z),v||A||(v=!0,L||(L=!0,V()))),z},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(z){var j=m;return function(){var Z=m;m=j;try{return z.apply(this,arguments)}finally{m=Z}}}}(Yx)),Yx}var PI;function hz(){return PI||(PI=1,Xx.exports=uz()),Xx.exports}var Kx={exports:{}},Ht={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UI;function dz(){if(UI)return Ht;UI=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;function m(U){return U===null||typeof U!="object"?null:(U=p&&U[p]||U["@@iterator"],typeof U=="function"?U:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function E(U,se,me){this.props=U,this.context=se,this.refs=y,this.updater=me||A}E.prototype.isReactComponent={},E.prototype.setState=function(U,se){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,se,"setState")},E.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function b(){}b.prototype=E.prototype;function C(U,se,me){this.props=U,this.context=se,this.refs=y,this.updater=me||A}var _=C.prototype=new b;_.constructor=C,v(_,E.prototype),_.isPureReactComponent=!0;var w=Array.isArray,T={H:null,A:null,T:null,S:null,V:null},L=Object.prototype.hasOwnProperty;function R(U,se,me,be,xe,Ue){return me=Ue.ref,{$$typeof:n,type:U,key:se,ref:me!==void 0?me:null,props:Ue}}function P(U,se){return R(U.type,se,void 0,void 0,void 0,U.props)}function D(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function M(U){var se={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(me){return se[me]})}var k=/\/+/g;function V(U,se){return typeof U=="object"&&U!==null&&U.key!=null?M(""+U.key):se.toString(36)}function X(){}function $(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(X,X):(U.status="pending",U.then(function(se){U.status==="pending"&&(U.status="fulfilled",U.value=se)},function(se){U.status==="pending"&&(U.status="rejected",U.reason=se)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function ae(U,se,me,be,xe){var Ue=typeof U;(Ue==="undefined"||Ue==="boolean")&&(U=null);var Ne=!1;if(U===null)Ne=!0;else switch(Ue){case"bigint":case"string":case"number":Ne=!0;break;case"object":switch(U.$$typeof){case n:case e:Ne=!0;break;case d:return Ne=U._init,ae(Ne(U._payload),se,me,be,xe)}}if(Ne)return xe=xe(U),Ne=be===""?"."+V(U,0):be,w(xe)?(me="",Ne!=null&&(me=Ne.replace(k,"$&/")+"/"),ae(xe,se,me,"",function(Oe){return Oe})):xe!=null&&(D(xe)&&(xe=P(xe,me+(xe.key==null||U&&U.key===xe.key?"":(""+xe.key).replace(k,"$&/")+"/")+Ne)),se.push(xe)),1;Ne=0;var Le=be===""?".":be+":";if(w(U))for(var ue=0;ue<U.length;ue++)be=U[ue],Ue=Le+V(be,ue),Ne+=ae(be,se,me,Ue,xe);else if(ue=m(U),typeof ue=="function")for(U=ue.call(U),ue=0;!(be=U.next()).done;)be=be.value,Ue=Le+V(be,ue++),Ne+=ae(be,se,me,Ue,xe);else if(Ue==="object"){if(typeof U.then=="function")return ae($(U),se,me,be,xe);throw se=String(U),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return Ne}function z(U,se,me){if(U==null)return U;var be=[],xe=0;return ae(U,be,"","",function(Ue){return se.call(me,Ue,xe++)}),be}function j(U){if(U._status===-1){var se=U._result;se=se(),se.then(function(me){(U._status===0||U._status===-1)&&(U._status=1,U._result=me)},function(me){(U._status===0||U._status===-1)&&(U._status=2,U._result=me)}),U._status===-1&&(U._status=0,U._result=se)}if(U._status===1)return U._result.default;throw U._result}var Z=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)};function ce(){}return Ht.Children={map:z,forEach:function(U,se,me){z(U,function(){se.apply(this,arguments)},me)},count:function(U){var se=0;return z(U,function(){se++}),se},toArray:function(U){return z(U,function(se){return se})||[]},only:function(U){if(!D(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Ht.Component=E,Ht.Fragment=t,Ht.Profiler=r,Ht.PureComponent=C,Ht.StrictMode=i,Ht.Suspense=c,Ht.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,Ht.__COMPILER_RUNTIME={__proto__:null,c:function(U){return T.H.useMemoCache(U)}},Ht.cache=function(U){return function(){return U.apply(null,arguments)}},Ht.cloneElement=function(U,se,me){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var be=v({},U.props),xe=U.key,Ue=void 0;if(se!=null)for(Ne in se.ref!==void 0&&(Ue=void 0),se.key!==void 0&&(xe=""+se.key),se)!L.call(se,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&se.ref===void 0||(be[Ne]=se[Ne]);var Ne=arguments.length-2;if(Ne===1)be.children=me;else if(1<Ne){for(var Le=Array(Ne),ue=0;ue<Ne;ue++)Le[ue]=arguments[ue+2];be.children=Le}return R(U.type,xe,void 0,void 0,Ue,be)},Ht.createContext=function(U){return U={$$typeof:a,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:s,_context:U},U},Ht.createElement=function(U,se,me){var be,xe={},Ue=null;if(se!=null)for(be in se.key!==void 0&&(Ue=""+se.key),se)L.call(se,be)&&be!=="key"&&be!=="__self"&&be!=="__source"&&(xe[be]=se[be]);var Ne=arguments.length-2;if(Ne===1)xe.children=me;else if(1<Ne){for(var Le=Array(Ne),ue=0;ue<Ne;ue++)Le[ue]=arguments[ue+2];xe.children=Le}if(U&&U.defaultProps)for(be in Ne=U.defaultProps,Ne)xe[be]===void 0&&(xe[be]=Ne[be]);return R(U,Ue,void 0,void 0,null,xe)},Ht.createRef=function(){return{current:null}},Ht.forwardRef=function(U){return{$$typeof:o,render:U}},Ht.isValidElement=D,Ht.lazy=function(U){return{$$typeof:d,_payload:{_status:-1,_result:U},_init:j}},Ht.memo=function(U,se){return{$$typeof:h,type:U,compare:se===void 0?null:se}},Ht.startTransition=function(U){var se=T.T,me={};T.T=me;try{var be=U(),xe=T.S;xe!==null&&xe(me,be),typeof be=="object"&&be!==null&&typeof be.then=="function"&&be.then(ce,Z)}catch(Ue){Z(Ue)}finally{T.T=se}},Ht.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},Ht.use=function(U){return T.H.use(U)},Ht.useActionState=function(U,se,me){return T.H.useActionState(U,se,me)},Ht.useCallback=function(U,se){return T.H.useCallback(U,se)},Ht.useContext=function(U){return T.H.useContext(U)},Ht.useDebugValue=function(){},Ht.useDeferredValue=function(U,se){return T.H.useDeferredValue(U,se)},Ht.useEffect=function(U,se,me){var be=T.H;if(typeof me=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return be.useEffect(U,se)},Ht.useId=function(){return T.H.useId()},Ht.useImperativeHandle=function(U,se,me){return T.H.useImperativeHandle(U,se,me)},Ht.useInsertionEffect=function(U,se){return T.H.useInsertionEffect(U,se)},Ht.useLayoutEffect=function(U,se){return T.H.useLayoutEffect(U,se)},Ht.useMemo=function(U,se){return T.H.useMemo(U,se)},Ht.useOptimistic=function(U,se){return T.H.useOptimistic(U,se)},Ht.useReducer=function(U,se,me){return T.H.useReducer(U,se,me)},Ht.useRef=function(U){return T.H.useRef(U)},Ht.useState=function(U){return T.H.useState(U)},Ht.useSyncExternalStore=function(U,se,me){return T.H.useSyncExternalStore(U,se,me)},Ht.useTransition=function(){return T.H.useTransition()},Ht.version="19.1.0",Ht}var kI;function Gw(){return kI||(kI=1,Kx.exports=dz()),Kx.exports}var Jx={exports:{}},ar={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NI;function fz(){if(NI)return ar;NI=1;var n=Gw();function e(c){var h="https://react.dev/errors/"+c;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)h+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function s(c,h,d){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:p==null?null:""+p,children:c,containerInfo:h,implementation:d}}var a=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,h){if(c==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return ar.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ar.createPortal=function(c,h){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return s(c,h,null,d)},ar.flushSync=function(c){var h=a.T,d=i.p;try{if(a.T=null,i.p=2,c)return c()}finally{a.T=h,i.p=d,i.d.f()}},ar.preconnect=function(c,h){typeof c=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(c,h))},ar.prefetchDNS=function(c){typeof c=="string"&&i.d.D(c)},ar.preinit=function(c,h){if(typeof c=="string"&&h&&typeof h.as=="string"){var d=h.as,p=o(d,h.crossOrigin),m=typeof h.integrity=="string"?h.integrity:void 0,A=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;d==="style"?i.d.S(c,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:p,integrity:m,fetchPriority:A}):d==="script"&&i.d.X(c,{crossOrigin:p,integrity:m,fetchPriority:A,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},ar.preinitModule=function(c,h){if(typeof c=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var d=o(h.as,h.crossOrigin);i.d.M(c,{crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(c)},ar.preload=function(c,h){if(typeof c=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var d=h.as,p=o(d,h.crossOrigin);i.d.L(c,d,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},ar.preloadModule=function(c,h){if(typeof c=="string")if(h){var d=o(h.as,h.crossOrigin);i.d.m(c,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(c)},ar.requestFormReset=function(c){i.d.r(c)},ar.unstable_batchedUpdates=function(c,h){return c(h)},ar.useFormState=function(c,h,d){return a.H.useFormState(c,h,d)},ar.useFormStatus=function(){return a.H.useHostTransitionStatus()},ar.version="19.1.0",ar}var FI;function pz(){if(FI)return Jx.exports;FI=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Jx.exports=fz(),Jx.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QI;function mz(){if(QI)return Qf;QI=1;var n=hz(),e=Gw(),t=pz();function i(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function s(l){var u=l,f=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(f=u.return),l=u.return;while(l)}return u.tag===3?f:null}function a(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function o(l){if(s(l)!==l)throw Error(i(188))}function c(l){var u=l.alternate;if(!u){if(u=s(l),u===null)throw Error(i(188));return u!==l?null:l}for(var f=l,g=u;;){var x=f.return;if(x===null)break;var S=x.alternate;if(S===null){if(g=x.return,g!==null){f=g;continue}break}if(x.child===S.child){for(S=x.child;S;){if(S===f)return o(x),l;if(S===g)return o(x),u;S=S.sibling}throw Error(i(188))}if(f.return!==g.return)f=x,g=S;else{for(var F=!1,H=x.child;H;){if(H===f){F=!0,f=x,g=S;break}if(H===g){F=!0,g=x,f=S;break}H=H.sibling}if(!F){for(H=S.child;H;){if(H===f){F=!0,f=S,g=x;break}if(H===g){F=!0,g=S,f=x;break}H=H.sibling}if(!F)throw Error(i(189))}}if(f.alternate!==g)throw Error(i(190))}if(f.tag!==3)throw Error(i(188));return f.stateNode.current===f?l:u}function h(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=h(l),u!==null)return u;l=l.sibling}return null}var d=Object.assign,p=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),_=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function V(l){return l===null||typeof l!="object"?null:(l=k&&l[k]||l["@@iterator"],typeof l=="function"?l:null)}var X=Symbol.for("react.client.reference");function $(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===X?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case v:return"Fragment";case E:return"Profiler";case y:return"StrictMode";case T:return"Suspense";case L:return"SuspenseList";case D:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case A:return"Portal";case _:return(l.displayName||"Context")+".Provider";case C:return(l._context.displayName||"Context")+".Consumer";case w:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case R:return u=l.displayName||null,u!==null?u:$(l.type)||"Memo";case P:u=l._payload,l=l._init;try{return $(l(u))}catch{}}return null}var ae=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},ce=[],U=-1;function se(l){return{current:l}}function me(l){0>U||(l.current=ce[U],ce[U]=null,U--)}function be(l,u){U++,ce[U]=l.current,l.current=u}var xe=se(null),Ue=se(null),Ne=se(null),Le=se(null);function ue(l,u){switch(be(Ne,u),be(Ue,l),be(xe,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?aI(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=aI(u),l=oI(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}me(xe),be(xe,l)}function Oe(){me(xe),me(Ue),me(Ne)}function Ge(l){l.memoizedState!==null&&be(Le,l);var u=xe.current,f=oI(u,l.type);u!==f&&(be(Ue,l),be(xe,f))}function je(l){Ue.current===l&&(me(xe),me(Ue)),Le.current===l&&(me(Le),Of._currentValue=Z)}var Me=Object.prototype.hasOwnProperty,Ce=n.unstable_scheduleCallback,Be=n.unstable_cancelCallback,Y=n.unstable_shouldYield,ze=n.unstable_requestPaint,ne=n.unstable_now,I=n.unstable_getCurrentPriorityLevel,O=n.unstable_ImmediatePriority,Q=n.unstable_UserBlockingPriority,W=n.unstable_NormalPriority,ee=n.unstable_LowPriority,he=n.unstable_IdlePriority,Te=n.log,Ye=n.unstable_setDisableYieldValue,q=null,N=null;function re(l){if(typeof Te=="function"&&Ye(l),N&&typeof N.setStrictMode=="function")try{N.setStrictMode(q,l)}catch{}}var ge=Math.clz32?Math.clz32:Ke,Ie=Math.log,we=Math.LN2;function Ke(l){return l>>>=0,l===0?32:31-(Ie(l)/we|0)|0}var Fe=256,Xe=4194304;function ht(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Ze(l,u,f){var g=l.pendingLanes;if(g===0)return 0;var x=0,S=l.suspendedLanes,F=l.pingedLanes;l=l.warmLanes;var H=g&134217727;return H!==0?(g=H&~S,g!==0?x=ht(g):(F&=H,F!==0?x=ht(F):f||(f=H&~l,f!==0&&(x=ht(f))))):(H=g&~S,H!==0?x=ht(H):F!==0?x=ht(F):f||(f=g&~l,f!==0&&(x=ht(f)))),x===0?0:u!==0&&u!==x&&(u&S)===0&&(S=x&-x,f=u&-u,S>=f||S===32&&(f&4194048)!==0)?u:x}function ct(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function Dt(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function J(){var l=Fe;return Fe<<=1,(Fe&4194048)===0&&(Fe=256),l}function Re(){var l=Xe;return Xe<<=1,(Xe&62914560)===0&&(Xe=4194304),l}function Ve(l){for(var u=[],f=0;31>f;f++)u.push(l);return u}function $e(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function et(l,u,f,g,x,S){var F=l.pendingLanes;l.pendingLanes=f,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=f,l.entangledLanes&=f,l.errorRecoveryDisabledLanes&=f,l.shellSuspendCounter=0;var H=l.entanglements,te=l.expirationTimes,ye=l.hiddenUpdates;for(f=F&~f;0<f;){var Pe=31-ge(f),Qe=1<<Pe;H[Pe]=0,te[Pe]=-1;var _e=ye[Pe];if(_e!==null)for(ye[Pe]=null,Pe=0;Pe<_e.length;Pe++){var Se=_e[Pe];Se!==null&&(Se.lane&=-536870913)}f&=~Qe}g!==0&&at(l,g,0),S!==0&&x===0&&l.tag!==0&&(l.suspendedLanes|=S&~(F&~u))}function at(l,u,f){l.pendingLanes|=u,l.suspendedLanes&=~u;var g=31-ge(u);l.entangledLanes|=u,l.entanglements[g]=l.entanglements[g]|1073741824|f&4194090}function Et(l,u){var f=l.entangledLanes|=u;for(l=l.entanglements;f;){var g=31-ge(f),x=1<<g;x&u|l[g]&u&&(l[g]|=u),f&=~x}}function tt(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function it(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function We(){var l=j.p;return l!==0?l:(l=window.event,l===void 0?32:SI(l.type))}function nt(l,u){var f=j.p;try{return j.p=l,u()}finally{j.p=f}}var At=Math.random().toString(36).slice(2),Je="__reactFiber$"+At,gt="__reactProps$"+At,pt="__reactContainer$"+At,Tt="__reactEvents$"+At,Mn="__reactListeners$"+At,zt="__reactHandles$"+At,Tn="__reactResources$"+At,zn="__reactMarker$"+At;function An(l){delete l[Je],delete l[gt],delete l[Tt],delete l[Mn],delete l[zt]}function sn(l){var u=l[Je];if(u)return u;for(var f=l.parentNode;f;){if(u=f[pt]||f[Je]){if(f=u.alternate,u.child!==null||f!==null&&f.child!==null)for(l=hI(l);l!==null;){if(f=l[Je])return f;l=hI(l)}return u}l=f,f=l.parentNode}return null}function Wt(l){if(l=l[Je]||l[pt]){var u=l.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return l}return null}function vi(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(i(33))}function un(l){var u=l[Tn];return u||(u=l[Tn]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function an(l){l[zn]=!0}var br=new Set,ti={};function On(l,u){Hn(l,u),Hn(l+"Capture",u)}function Hn(l,u){for(ti[l]=u,l=0;l<u.length;l++)br.add(u[l])}var na=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),G={},oe={};function Ae(l){return Me.call(oe,l)?!0:Me.call(G,l)?!1:na.test(l)?oe[l]=!0:(G[l]=!0,!1)}function Ee(l,u,f){if(Ae(u))if(f===null)l.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var g=u.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+f)}}function fe(l,u,f){if(f===null)l.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+f)}}function qe(l,u,f,g){if(g===null)l.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(f);return}l.setAttributeNS(u,f,""+g)}}var rt,st;function ot(l){if(rt===void 0)try{throw Error()}catch(f){var u=f.stack.trim().match(/\n( *(at )?)/);rt=u&&u[1]||"",st=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+rt+l+st}var Ct=!1;function _t(l,u){if(!l||Ct)return"";Ct=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(u){var Qe=function(){throw Error()};if(Object.defineProperty(Qe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Qe,[])}catch(Se){var _e=Se}Reflect.construct(l,[],Qe)}else{try{Qe.call()}catch(Se){_e=Se}l.call(Qe.prototype)}}else{try{throw Error()}catch(Se){_e=Se}(Qe=l())&&typeof Qe.catch=="function"&&Qe.catch(function(){})}}catch(Se){if(Se&&_e&&typeof Se.stack=="string")return[Se.stack,_e.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=g.DetermineComponentFrameRoot(),F=S[0],H=S[1];if(F&&H){var te=F.split(`
`),ye=H.split(`
`);for(x=g=0;g<te.length&&!te[g].includes("DetermineComponentFrameRoot");)g++;for(;x<ye.length&&!ye[x].includes("DetermineComponentFrameRoot");)x++;if(g===te.length||x===ye.length)for(g=te.length-1,x=ye.length-1;1<=g&&0<=x&&te[g]!==ye[x];)x--;for(;1<=g&&0<=x;g--,x--)if(te[g]!==ye[x]){if(g!==1||x!==1)do if(g--,x--,0>x||te[g]!==ye[x]){var Pe=`
`+te[g].replace(" at new "," at ");return l.displayName&&Pe.includes("<anonymous>")&&(Pe=Pe.replace("<anonymous>",l.displayName)),Pe}while(1<=g&&0<=x);break}}}finally{Ct=!1,Error.prepareStackTrace=f}return(f=l?l.displayName||l.name:"")?ot(f):""}function wt(l){switch(l.tag){case 26:case 27:case 5:return ot(l.type);case 16:return ot("Lazy");case 13:return ot("Suspense");case 19:return ot("SuspenseList");case 0:case 15:return _t(l.type,!1);case 11:return _t(l.type.render,!1);case 1:return _t(l.type,!0);case 31:return ot("Activity");default:return""}}function nn(l){try{var u="";do u+=wt(l),l=l.return;while(l);return u}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function kt(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function jn(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Xn(l){var u=jn(l)?"checked":"value",f=Object.getOwnPropertyDescriptor(l.constructor.prototype,u),g=""+l[u];if(!l.hasOwnProperty(u)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var x=f.get,S=f.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return x.call(this)},set:function(F){g=""+F,S.call(this,F)}}),Object.defineProperty(l,u,{enumerable:f.enumerable}),{getValue:function(){return g},setValue:function(F){g=""+F},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function Xt(l){l._valueTracker||(l._valueTracker=Xn(l))}function Ti(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var f=u.getValue(),g="";return l&&(g=jn(l)?l.checked?"true":"false":l.value),l=g,l!==f?(u.setValue(l),!0):!1}function yt(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var dc=/[\n"\\]/g;function Ot(l){return l.replace(dc,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function qi(l,u,f,g,x,S,F,H){l.name="",F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?l.type=F:l.removeAttribute("type"),u!=null?F==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+kt(u)):l.value!==""+kt(u)&&(l.value=""+kt(u)):F!=="submit"&&F!=="reset"||l.removeAttribute("value"),u!=null?ia(l,F,kt(u)):f!=null?ia(l,F,kt(f)):g!=null&&l.removeAttribute("value"),x==null&&S!=null&&(l.defaultChecked=!!S),x!=null&&(l.checked=x&&typeof x!="function"&&typeof x!="symbol"),H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?l.name=""+kt(H):l.removeAttribute("name")}function os(l,u,f,g,x,S,F,H){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(l.type=S),u!=null||f!=null){if(!(S!=="submit"&&S!=="reset"||u!=null))return;f=f!=null?""+kt(f):"",u=u!=null?""+kt(u):f,H||u===l.value||(l.value=u),l.defaultValue=u}g=g??x,g=typeof g!="function"&&typeof g!="symbol"&&!!g,l.checked=H?l.checked:!!g,l.defaultChecked=!!g,F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"&&(l.name=F)}function ia(l,u,f){u==="number"&&yt(l.ownerDocument)===l||l.defaultValue===""+f||(l.defaultValue=""+f)}function ls(l,u,f,g){if(l=l.options,u){u={};for(var x=0;x<f.length;x++)u["$"+f[x]]=!0;for(f=0;f<l.length;f++)x=u.hasOwnProperty("$"+l[f].value),l[f].selected!==x&&(l[f].selected=x),x&&g&&(l[f].defaultSelected=!0)}else{for(f=""+kt(f),u=null,x=0;x<l.length;x++){if(l[x].value===f){l[x].selected=!0,g&&(l[x].defaultSelected=!0);return}u!==null||l[x].disabled||(u=l[x])}u!==null&&(u.selected=!0)}}function gn(l,u,f){if(u!=null&&(u=""+kt(u),u!==l.value&&(l.value=u),f==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=f!=null?""+kt(f):""}function yi(l,u,f,g){if(u==null){if(g!=null){if(f!=null)throw Error(i(92));if(ae(g)){if(1<g.length)throw Error(i(93));g=g[0]}f=g}f==null&&(f=""),u=f}f=kt(u),l.defaultValue=f,g=l.textContent,g===f&&g!==""&&g!==null&&(l.value=g)}function Er(l,u){if(u){var f=l.firstChild;if(f&&f===l.lastChild&&f.nodeType===3){f.nodeValue=u;return}}l.textContent=u}var ni=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function io(l,u,f){var g=u.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?g?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":g?l.setProperty(u,f):typeof f!="number"||f===0||ni.has(u)?u==="float"?l.cssFloat=f:l[u]=(""+f).trim():l[u]=f+"px"}function ro(l,u,f){if(u!=null&&typeof u!="object")throw Error(i(62));if(l=l.style,f!=null){for(var g in f)!f.hasOwnProperty(g)||u!=null&&u.hasOwnProperty(g)||(g.indexOf("--")===0?l.setProperty(g,""):g==="float"?l.cssFloat="":l[g]="");for(var x in u)g=u[x],u.hasOwnProperty(x)&&f[x]!==g&&io(l,x,g)}else for(var S in u)u.hasOwnProperty(S)&&io(l,S,u[S])}function Hu(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var s8=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),a8=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function oA(l){return a8.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var qb=null;function jb(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Gu=null,Vu=null;function lM(l){var u=Wt(l);if(u&&(l=u.stateNode)){var f=l[gt]||null;e:switch(l=u.stateNode,u.type){case"input":if(qi(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),u=f.name,f.type==="radio"&&u!=null){for(f=l;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Ot(""+u)+'"][type="radio"]'),u=0;u<f.length;u++){var g=f[u];if(g!==l&&g.form===l.form){var x=g[gt]||null;if(!x)throw Error(i(90));qi(g,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(u=0;u<f.length;u++)g=f[u],g.form===l.form&&Ti(g)}break e;case"textarea":gn(l,f.value,f.defaultValue);break e;case"select":u=f.value,u!=null&&ls(l,!!f.multiple,u,!1)}}}var Xb=!1;function cM(l,u,f){if(Xb)return l(u,f);Xb=!0;try{var g=l(u);return g}finally{if(Xb=!1,(Gu!==null||Vu!==null)&&(qA(),Gu&&(u=Gu,l=Vu,Vu=Gu=null,lM(u),l)))for(u=0;u<l.length;u++)lM(l[u])}}function qd(l,u){var f=l.stateNode;if(f===null)return null;var g=f[gt]||null;if(g===null)return null;f=g[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(l=l.type,g=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!g;break e;default:l=!1}if(l)return null;if(f&&typeof f!="function")throw Error(i(231,u,typeof f));return f}var so=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yb=!1;if(so)try{var jd={};Object.defineProperty(jd,"passive",{get:function(){Yb=!0}}),window.addEventListener("test",jd,jd),window.removeEventListener("test",jd,jd)}catch{Yb=!1}var rl=null,Kb=null,lA=null;function uM(){if(lA)return lA;var l,u=Kb,f=u.length,g,x="value"in rl?rl.value:rl.textContent,S=x.length;for(l=0;l<f&&u[l]===x[l];l++);var F=f-l;for(g=1;g<=F&&u[f-g]===x[S-g];g++);return lA=x.slice(l,1<g?1-g:void 0)}function cA(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function uA(){return!0}function hM(){return!1}function Hr(l){function u(f,g,x,S,F){this._reactName=f,this._targetInst=x,this.type=g,this.nativeEvent=S,this.target=F,this.currentTarget=null;for(var H in l)l.hasOwnProperty(H)&&(f=l[H],this[H]=f?f(S):S[H]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?uA:hM,this.isPropagationStopped=hM,this}return d(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=uA)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=uA)},persist:function(){},isPersistent:uA}),u}var fc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hA=Hr(fc),Xd=d({},fc,{view:0,detail:0}),o8=Hr(Xd),Jb,Zb,Yd,dA=d({},Xd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eE,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Yd&&(Yd&&l.type==="mousemove"?(Jb=l.screenX-Yd.screenX,Zb=l.screenY-Yd.screenY):Zb=Jb=0,Yd=l),Jb)},movementY:function(l){return"movementY"in l?l.movementY:Zb}}),dM=Hr(dA),l8=d({},dA,{dataTransfer:0}),c8=Hr(l8),u8=d({},Xd,{relatedTarget:0}),$b=Hr(u8),h8=d({},fc,{animationName:0,elapsedTime:0,pseudoElement:0}),d8=Hr(h8),f8=d({},fc,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),p8=Hr(f8),m8=d({},fc,{data:0}),fM=Hr(m8),A8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},g8={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},v8={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function y8(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=v8[l])?!!u[l]:!1}function eE(){return y8}var b8=d({},Xd,{key:function(l){if(l.key){var u=A8[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=cA(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?g8[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eE,charCode:function(l){return l.type==="keypress"?cA(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?cA(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),E8=Hr(b8),x8=d({},dA,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pM=Hr(x8),C8=d({},Xd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eE}),_8=Hr(C8),w8=d({},fc,{propertyName:0,elapsedTime:0,pseudoElement:0}),S8=Hr(w8),M8=d({},dA,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),T8=Hr(M8),B8=d({},fc,{newState:0,oldState:0}),I8=Hr(B8),R8=[9,13,27,32],tE=so&&"CompositionEvent"in window,Kd=null;so&&"documentMode"in document&&(Kd=document.documentMode);var D8=so&&"TextEvent"in window&&!Kd,mM=so&&(!tE||Kd&&8<Kd&&11>=Kd),AM=" ",gM=!1;function vM(l,u){switch(l){case"keyup":return R8.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yM(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Wu=!1;function L8(l,u){switch(l){case"compositionend":return yM(u);case"keypress":return u.which!==32?null:(gM=!0,AM);case"textInput":return l=u.data,l===AM&&gM?null:l;default:return null}}function O8(l,u){if(Wu)return l==="compositionend"||!tE&&vM(l,u)?(l=uM(),lA=Kb=rl=null,Wu=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return mM&&u.locale!=="ko"?null:u.data;default:return null}}var P8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bM(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!P8[l.type]:u==="textarea"}function EM(l,u,f,g){Gu?Vu?Vu.push(g):Vu=[g]:Gu=g,u=ZA(u,"onChange"),0<u.length&&(f=new hA("onChange","change",null,f,g),l.push({event:f,listeners:u}))}var Jd=null,Zd=null;function U8(l){tI(l,0)}function fA(l){var u=vi(l);if(Ti(u))return l}function xM(l,u){if(l==="change")return u}var CM=!1;if(so){var nE;if(so){var iE="oninput"in document;if(!iE){var _M=document.createElement("div");_M.setAttribute("oninput","return;"),iE=typeof _M.oninput=="function"}nE=iE}else nE=!1;CM=nE&&(!document.documentMode||9<document.documentMode)}function wM(){Jd&&(Jd.detachEvent("onpropertychange",SM),Zd=Jd=null)}function SM(l){if(l.propertyName==="value"&&fA(Zd)){var u=[];EM(u,Zd,l,jb(l)),cM(U8,u)}}function k8(l,u,f){l==="focusin"?(wM(),Jd=u,Zd=f,Jd.attachEvent("onpropertychange",SM)):l==="focusout"&&wM()}function N8(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return fA(Zd)}function F8(l,u){if(l==="click")return fA(u)}function Q8(l,u){if(l==="input"||l==="change")return fA(u)}function z8(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var cs=typeof Object.is=="function"?Object.is:z8;function $d(l,u){if(cs(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var f=Object.keys(l),g=Object.keys(u);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var x=f[g];if(!Me.call(u,x)||!cs(l[x],u[x]))return!1}return!0}function MM(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function TM(l,u){var f=MM(l);l=0;for(var g;f;){if(f.nodeType===3){if(g=l+f.textContent.length,l<=u&&g>=u)return{node:f,offset:u-l};l=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=MM(f)}}function BM(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?BM(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function IM(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=yt(l.document);u instanceof l.HTMLIFrameElement;){try{var f=typeof u.contentWindow.location.href=="string"}catch{f=!1}if(f)l=u.contentWindow;else break;u=yt(l.document)}return u}function rE(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var H8=so&&"documentMode"in document&&11>=document.documentMode,qu=null,sE=null,ef=null,aE=!1;function RM(l,u,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;aE||qu==null||qu!==yt(g)||(g=qu,"selectionStart"in g&&rE(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),ef&&$d(ef,g)||(ef=g,g=ZA(sE,"onSelect"),0<g.length&&(u=new hA("onSelect","select",null,u,f),l.push({event:u,listeners:g}),u.target=qu)))}function pc(l,u){var f={};return f[l.toLowerCase()]=u.toLowerCase(),f["Webkit"+l]="webkit"+u,f["Moz"+l]="moz"+u,f}var ju={animationend:pc("Animation","AnimationEnd"),animationiteration:pc("Animation","AnimationIteration"),animationstart:pc("Animation","AnimationStart"),transitionrun:pc("Transition","TransitionRun"),transitionstart:pc("Transition","TransitionStart"),transitioncancel:pc("Transition","TransitionCancel"),transitionend:pc("Transition","TransitionEnd")},oE={},DM={};so&&(DM=document.createElement("div").style,"AnimationEvent"in window||(delete ju.animationend.animation,delete ju.animationiteration.animation,delete ju.animationstart.animation),"TransitionEvent"in window||delete ju.transitionend.transition);function mc(l){if(oE[l])return oE[l];if(!ju[l])return l;var u=ju[l],f;for(f in u)if(u.hasOwnProperty(f)&&f in DM)return oE[l]=u[f];return l}var LM=mc("animationend"),OM=mc("animationiteration"),PM=mc("animationstart"),G8=mc("transitionrun"),V8=mc("transitionstart"),W8=mc("transitioncancel"),UM=mc("transitionend"),kM=new Map,lE="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");lE.push("scrollEnd");function ra(l,u){kM.set(l,u),On(u,[l])}var NM=new WeakMap;function Us(l,u){if(typeof l=="object"&&l!==null){var f=NM.get(l);return f!==void 0?f:(u={value:l,source:u,stack:nn(u)},NM.set(l,u),u)}return{value:l,source:u,stack:nn(u)}}var ks=[],Xu=0,cE=0;function pA(){for(var l=Xu,u=cE=Xu=0;u<l;){var f=ks[u];ks[u++]=null;var g=ks[u];ks[u++]=null;var x=ks[u];ks[u++]=null;var S=ks[u];if(ks[u++]=null,g!==null&&x!==null){var F=g.pending;F===null?x.next=x:(x.next=F.next,F.next=x),g.pending=x}S!==0&&FM(f,x,S)}}function mA(l,u,f,g){ks[Xu++]=l,ks[Xu++]=u,ks[Xu++]=f,ks[Xu++]=g,cE|=g,l.lanes|=g,l=l.alternate,l!==null&&(l.lanes|=g)}function uE(l,u,f,g){return mA(l,u,f,g),AA(l)}function Yu(l,u){return mA(l,null,null,u),AA(l)}function FM(l,u,f){l.lanes|=f;var g=l.alternate;g!==null&&(g.lanes|=f);for(var x=!1,S=l.return;S!==null;)S.childLanes|=f,g=S.alternate,g!==null&&(g.childLanes|=f),S.tag===22&&(l=S.stateNode,l===null||l._visibility&1||(x=!0)),l=S,S=S.return;return l.tag===3?(S=l.stateNode,x&&u!==null&&(x=31-ge(f),l=S.hiddenUpdates,g=l[x],g===null?l[x]=[u]:g.push(u),u.lane=f|536870912),S):null}function AA(l){if(50<Sf)throw Sf=0,Ax=null,Error(i(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var Ku={};function q8(l,u,f,g){this.tag=l,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function us(l,u,f,g){return new q8(l,u,f,g)}function hE(l){return l=l.prototype,!(!l||!l.isReactComponent)}function ao(l,u){var f=l.alternate;return f===null?(f=us(l.tag,u,l.key,l.mode),f.elementType=l.elementType,f.type=l.type,f.stateNode=l.stateNode,f.alternate=l,l.alternate=f):(f.pendingProps=u,f.type=l.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=l.flags&65011712,f.childLanes=l.childLanes,f.lanes=l.lanes,f.child=l.child,f.memoizedProps=l.memoizedProps,f.memoizedState=l.memoizedState,f.updateQueue=l.updateQueue,u=l.dependencies,f.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},f.sibling=l.sibling,f.index=l.index,f.ref=l.ref,f.refCleanup=l.refCleanup,f}function QM(l,u){l.flags&=65011714;var f=l.alternate;return f===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=f.childLanes,l.lanes=f.lanes,l.child=f.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=f.memoizedProps,l.memoizedState=f.memoizedState,l.updateQueue=f.updateQueue,l.type=f.type,u=f.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function gA(l,u,f,g,x,S){var F=0;if(g=l,typeof l=="function")hE(l)&&(F=1);else if(typeof l=="string")F=XQ(l,f,xe.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case D:return l=us(31,f,u,x),l.elementType=D,l.lanes=S,l;case v:return Ac(f.children,x,S,u);case y:F=8,x|=24;break;case E:return l=us(12,f,u,x|2),l.elementType=E,l.lanes=S,l;case T:return l=us(13,f,u,x),l.elementType=T,l.lanes=S,l;case L:return l=us(19,f,u,x),l.elementType=L,l.lanes=S,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case b:case _:F=10;break e;case C:F=9;break e;case w:F=11;break e;case R:F=14;break e;case P:F=16,g=null;break e}F=29,f=Error(i(130,l===null?"null":typeof l,"")),g=null}return u=us(F,f,u,x),u.elementType=l,u.type=g,u.lanes=S,u}function Ac(l,u,f,g){return l=us(7,l,g,u),l.lanes=f,l}function dE(l,u,f){return l=us(6,l,null,u),l.lanes=f,l}function fE(l,u,f){return u=us(4,l.children!==null?l.children:[],l.key,u),u.lanes=f,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var Ju=[],Zu=0,vA=null,yA=0,Ns=[],Fs=0,gc=null,oo=1,lo="";function vc(l,u){Ju[Zu++]=yA,Ju[Zu++]=vA,vA=l,yA=u}function zM(l,u,f){Ns[Fs++]=oo,Ns[Fs++]=lo,Ns[Fs++]=gc,gc=l;var g=oo;l=lo;var x=32-ge(g)-1;g&=~(1<<x),f+=1;var S=32-ge(u)+x;if(30<S){var F=x-x%5;S=(g&(1<<F)-1).toString(32),g>>=F,x-=F,oo=1<<32-ge(u)+x|f<<x|g,lo=S+l}else oo=1<<S|f<<x|g,lo=l}function pE(l){l.return!==null&&(vc(l,1),zM(l,1,0))}function mE(l){for(;l===vA;)vA=Ju[--Zu],Ju[Zu]=null,yA=Ju[--Zu],Ju[Zu]=null;for(;l===gc;)gc=Ns[--Fs],Ns[Fs]=null,lo=Ns[--Fs],Ns[Fs]=null,oo=Ns[--Fs],Ns[Fs]=null}var xr=null,ii=null,vn=!1,yc=null,_a=!1,AE=Error(i(519));function bc(l){var u=Error(i(418,""));throw rf(Us(u,l)),AE}function HM(l){var u=l.stateNode,f=l.type,g=l.memoizedProps;switch(u[Je]=l,u[gt]=g,f){case"dialog":$t("cancel",u),$t("close",u);break;case"iframe":case"object":case"embed":$t("load",u);break;case"video":case"audio":for(f=0;f<Tf.length;f++)$t(Tf[f],u);break;case"source":$t("error",u);break;case"img":case"image":case"link":$t("error",u),$t("load",u);break;case"details":$t("toggle",u);break;case"input":$t("invalid",u),os(u,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),Xt(u);break;case"select":$t("invalid",u);break;case"textarea":$t("invalid",u),yi(u,g.value,g.defaultValue,g.children),Xt(u)}f=g.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||u.textContent===""+f||g.suppressHydrationWarning===!0||sI(u.textContent,f)?(g.popover!=null&&($t("beforetoggle",u),$t("toggle",u)),g.onScroll!=null&&$t("scroll",u),g.onScrollEnd!=null&&$t("scrollend",u),g.onClick!=null&&(u.onclick=$A),u=!0):u=!1,u||bc(l)}function GM(l){for(xr=l.return;xr;)switch(xr.tag){case 5:case 13:_a=!1;return;case 27:case 3:_a=!0;return;default:xr=xr.return}}function tf(l){if(l!==xr)return!1;if(!vn)return GM(l),vn=!0,!1;var u=l.tag,f;if((f=u!==3&&u!==27)&&((f=u===5)&&(f=l.type,f=!(f!=="form"&&f!=="button")||Dx(l.type,l.memoizedProps)),f=!f),f&&ii&&bc(l),GM(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(i(317));e:{for(l=l.nextSibling,u=0;l;){if(l.nodeType===8)if(f=l.data,f==="/$"){if(u===0){ii=aa(l.nextSibling);break e}u--}else f!=="$"&&f!=="$!"&&f!=="$?"||u++;l=l.nextSibling}ii=null}}else u===27?(u=ii,bl(l.type)?(l=Ux,Ux=null,ii=l):ii=u):ii=xr?aa(l.stateNode.nextSibling):null;return!0}function nf(){ii=xr=null,vn=!1}function VM(){var l=yc;return l!==null&&(Wr===null?Wr=l:Wr.push.apply(Wr,l),yc=null),l}function rf(l){yc===null?yc=[l]:yc.push(l)}var gE=se(null),Ec=null,co=null;function sl(l,u,f){be(gE,u._currentValue),u._currentValue=f}function uo(l){l._currentValue=gE.current,me(gE)}function vE(l,u,f){for(;l!==null;){var g=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,g!==null&&(g.childLanes|=u)):g!==null&&(g.childLanes&u)!==u&&(g.childLanes|=u),l===f)break;l=l.return}}function yE(l,u,f,g){var x=l.child;for(x!==null&&(x.return=l);x!==null;){var S=x.dependencies;if(S!==null){var F=x.child;S=S.firstContext;e:for(;S!==null;){var H=S;S=x;for(var te=0;te<u.length;te++)if(H.context===u[te]){S.lanes|=f,H=S.alternate,H!==null&&(H.lanes|=f),vE(S.return,f,l),g||(F=null);break e}S=H.next}}else if(x.tag===18){if(F=x.return,F===null)throw Error(i(341));F.lanes|=f,S=F.alternate,S!==null&&(S.lanes|=f),vE(F,f,l),F=null}else F=x.child;if(F!==null)F.return=x;else for(F=x;F!==null;){if(F===l){F=null;break}if(x=F.sibling,x!==null){x.return=F.return,F=x;break}F=F.return}x=F}}function sf(l,u,f,g){l=null;for(var x=u,S=!1;x!==null;){if(!S){if((x.flags&524288)!==0)S=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var F=x.alternate;if(F===null)throw Error(i(387));if(F=F.memoizedProps,F!==null){var H=x.type;cs(x.pendingProps.value,F.value)||(l!==null?l.push(H):l=[H])}}else if(x===Le.current){if(F=x.alternate,F===null)throw Error(i(387));F.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(l!==null?l.push(Of):l=[Of])}x=x.return}l!==null&&yE(u,l,f,g),u.flags|=262144}function bA(l){for(l=l.firstContext;l!==null;){if(!cs(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function xc(l){Ec=l,co=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function sr(l){return WM(Ec,l)}function EA(l,u){return Ec===null&&xc(l),WM(l,u)}function WM(l,u){var f=u._currentValue;if(u={context:u,memoizedValue:f,next:null},co===null){if(l===null)throw Error(i(308));co=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else co=co.next=u;return f}var j8=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(f,g){l.push(g)}};this.abort=function(){u.aborted=!0,l.forEach(function(f){return f()})}},X8=n.unstable_scheduleCallback,Y8=n.unstable_NormalPriority,Bi={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bE(){return{controller:new j8,data:new Map,refCount:0}}function af(l){l.refCount--,l.refCount===0&&X8(Y8,function(){l.controller.abort()})}var of=null,EE=0,$u=0,eh=null;function K8(l,u){if(of===null){var f=of=[];EE=0,$u=Cx(),eh={status:"pending",value:void 0,then:function(g){f.push(g)}}}return EE++,u.then(qM,qM),u}function qM(){if(--EE===0&&of!==null){eh!==null&&(eh.status="fulfilled");var l=of;of=null,$u=0,eh=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function J8(l,u){var f=[],g={status:"pending",value:null,reason:null,then:function(x){f.push(x)}};return l.then(function(){g.status="fulfilled",g.value=u;for(var x=0;x<f.length;x++)(0,f[x])(u)},function(x){for(g.status="rejected",g.reason=x,x=0;x<f.length;x++)(0,f[x])(void 0)}),g}var jM=z.S;z.S=function(l,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&K8(l,u),jM!==null&&jM(l,u)};var Cc=se(null);function xE(){var l=Cc.current;return l!==null?l:Fn.pooledCache}function xA(l,u){u===null?be(Cc,Cc.current):be(Cc,u.pool)}function XM(){var l=xE();return l===null?null:{parent:Bi._currentValue,pool:l}}var lf=Error(i(460)),YM=Error(i(474)),CA=Error(i(542)),CE={then:function(){}};function KM(l){return l=l.status,l==="fulfilled"||l==="rejected"}function _A(){}function JM(l,u,f){switch(f=l[f],f===void 0?l.push(u):f!==u&&(u.then(_A,_A),u=f),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,$M(l),l;default:if(typeof u.status=="string")u.then(_A,_A);else{if(l=Fn,l!==null&&100<l.shellSuspendCounter)throw Error(i(482));l=u,l.status="pending",l.then(function(g){if(u.status==="pending"){var x=u;x.status="fulfilled",x.value=g}},function(g){if(u.status==="pending"){var x=u;x.status="rejected",x.reason=g}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,$M(l),l}throw cf=u,lf}}var cf=null;function ZM(){if(cf===null)throw Error(i(459));var l=cf;return cf=null,l}function $M(l){if(l===lf||l===CA)throw Error(i(483))}var al=!1;function _E(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wE(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function ol(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function ll(l,u,f){var g=l.updateQueue;if(g===null)return null;if(g=g.shared,(_n&2)!==0){var x=g.pending;return x===null?u.next=u:(u.next=x.next,x.next=u),g.pending=u,u=AA(l),FM(l,null,f),u}return mA(l,g,u,f),AA(l)}function uf(l,u,f){if(u=u.updateQueue,u!==null&&(u=u.shared,(f&4194048)!==0)){var g=u.lanes;g&=l.pendingLanes,f|=g,u.lanes=f,Et(l,f)}}function SE(l,u){var f=l.updateQueue,g=l.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var x=null,S=null;if(f=f.firstBaseUpdate,f!==null){do{var F={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};S===null?x=S=F:S=S.next=F,f=f.next}while(f!==null);S===null?x=S=u:S=S.next=u}else x=S=u;f={baseState:g.baseState,firstBaseUpdate:x,lastBaseUpdate:S,shared:g.shared,callbacks:g.callbacks},l.updateQueue=f;return}l=f.lastBaseUpdate,l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=u}var ME=!1;function hf(){if(ME){var l=eh;if(l!==null)throw l}}function df(l,u,f,g){ME=!1;var x=l.updateQueue;al=!1;var S=x.firstBaseUpdate,F=x.lastBaseUpdate,H=x.shared.pending;if(H!==null){x.shared.pending=null;var te=H,ye=te.next;te.next=null,F===null?S=ye:F.next=ye,F=te;var Pe=l.alternate;Pe!==null&&(Pe=Pe.updateQueue,H=Pe.lastBaseUpdate,H!==F&&(H===null?Pe.firstBaseUpdate=ye:H.next=ye,Pe.lastBaseUpdate=te))}if(S!==null){var Qe=x.baseState;F=0,Pe=ye=te=null,H=S;do{var _e=H.lane&-536870913,Se=_e!==H.lane;if(Se?(on&_e)===_e:(g&_e)===_e){_e!==0&&_e===$u&&(ME=!0),Pe!==null&&(Pe=Pe.next={lane:0,tag:H.tag,payload:H.payload,callback:null,next:null});e:{var Rt=l,Mt=H;_e=u;var Rn=f;switch(Mt.tag){case 1:if(Rt=Mt.payload,typeof Rt=="function"){Qe=Rt.call(Rn,Qe,_e);break e}Qe=Rt;break e;case 3:Rt.flags=Rt.flags&-65537|128;case 0:if(Rt=Mt.payload,_e=typeof Rt=="function"?Rt.call(Rn,Qe,_e):Rt,_e==null)break e;Qe=d({},Qe,_e);break e;case 2:al=!0}}_e=H.callback,_e!==null&&(l.flags|=64,Se&&(l.flags|=8192),Se=x.callbacks,Se===null?x.callbacks=[_e]:Se.push(_e))}else Se={lane:_e,tag:H.tag,payload:H.payload,callback:H.callback,next:null},Pe===null?(ye=Pe=Se,te=Qe):Pe=Pe.next=Se,F|=_e;if(H=H.next,H===null){if(H=x.shared.pending,H===null)break;Se=H,H=Se.next,Se.next=null,x.lastBaseUpdate=Se,x.shared.pending=null}}while(!0);Pe===null&&(te=Qe),x.baseState=te,x.firstBaseUpdate=ye,x.lastBaseUpdate=Pe,S===null&&(x.shared.lanes=0),Al|=F,l.lanes=F,l.memoizedState=Qe}}function eT(l,u){if(typeof l!="function")throw Error(i(191,l));l.call(u)}function tT(l,u){var f=l.callbacks;if(f!==null)for(l.callbacks=null,l=0;l<f.length;l++)eT(f[l],u)}var th=se(null),wA=se(0);function nT(l,u){l=vo,be(wA,l),be(th,u),vo=l|u.baseLanes}function TE(){be(wA,vo),be(th,th.current)}function BE(){vo=wA.current,me(th),me(wA)}var cl=0,qt=null,Bn=null,bi=null,SA=!1,nh=!1,_c=!1,MA=0,ff=0,ih=null,Z8=0;function ui(){throw Error(i(321))}function IE(l,u){if(u===null)return!1;for(var f=0;f<u.length&&f<l.length;f++)if(!cs(l[f],u[f]))return!1;return!0}function RE(l,u,f,g,x,S){return cl=S,qt=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,z.H=l===null||l.memoizedState===null?FT:QT,_c=!1,S=f(g,x),_c=!1,nh&&(S=rT(u,f,g,x)),iT(l),S}function iT(l){z.H=LA;var u=Bn!==null&&Bn.next!==null;if(cl=0,bi=Bn=qt=null,SA=!1,ff=0,ih=null,u)throw Error(i(300));l===null||Fi||(l=l.dependencies,l!==null&&bA(l)&&(Fi=!0))}function rT(l,u,f,g){qt=l;var x=0;do{if(nh&&(ih=null),ff=0,nh=!1,25<=x)throw Error(i(301));if(x+=1,bi=Bn=null,l.updateQueue!=null){var S=l.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}z.H=sQ,S=u(f,g)}while(nh);return S}function $8(){var l=z.H,u=l.useState()[0];return u=typeof u.then=="function"?pf(u):u,l=l.useState()[0],(Bn!==null?Bn.memoizedState:null)!==l&&(qt.flags|=1024),u}function DE(){var l=MA!==0;return MA=0,l}function LE(l,u,f){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~f}function OE(l){if(SA){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}SA=!1}cl=0,bi=Bn=qt=null,nh=!1,ff=MA=0,ih=null}function Gr(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bi===null?qt.memoizedState=bi=l:bi=bi.next=l,bi}function Ei(){if(Bn===null){var l=qt.alternate;l=l!==null?l.memoizedState:null}else l=Bn.next;var u=bi===null?qt.memoizedState:bi.next;if(u!==null)bi=u,Bn=l;else{if(l===null)throw qt.alternate===null?Error(i(467)):Error(i(310));Bn=l,l={memoizedState:Bn.memoizedState,baseState:Bn.baseState,baseQueue:Bn.baseQueue,queue:Bn.queue,next:null},bi===null?qt.memoizedState=bi=l:bi=bi.next=l}return bi}function PE(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pf(l){var u=ff;return ff+=1,ih===null&&(ih=[]),l=JM(ih,l,u),u=qt,(bi===null?u.memoizedState:bi.next)===null&&(u=u.alternate,z.H=u===null||u.memoizedState===null?FT:QT),l}function TA(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return pf(l);if(l.$$typeof===_)return sr(l)}throw Error(i(438,String(l)))}function UE(l){var u=null,f=qt.updateQueue;if(f!==null&&(u=f.memoCache),u==null){var g=qt.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(u={data:g.data.map(function(x){return x.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),f===null&&(f=PE(),qt.updateQueue=f),f.memoCache=u,f=u.data[u.index],f===void 0)for(f=u.data[u.index]=Array(l),g=0;g<l;g++)f[g]=M;return u.index++,f}function ho(l,u){return typeof u=="function"?u(l):u}function BA(l){var u=Ei();return kE(u,Bn,l)}function kE(l,u,f){var g=l.queue;if(g===null)throw Error(i(311));g.lastRenderedReducer=f;var x=l.baseQueue,S=g.pending;if(S!==null){if(x!==null){var F=x.next;x.next=S.next,S.next=F}u.baseQueue=x=S,g.pending=null}if(S=l.baseState,x===null)l.memoizedState=S;else{u=x.next;var H=F=null,te=null,ye=u,Pe=!1;do{var Qe=ye.lane&-536870913;if(Qe!==ye.lane?(on&Qe)===Qe:(cl&Qe)===Qe){var _e=ye.revertLane;if(_e===0)te!==null&&(te=te.next={lane:0,revertLane:0,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null}),Qe===$u&&(Pe=!0);else if((cl&_e)===_e){ye=ye.next,_e===$u&&(Pe=!0);continue}else Qe={lane:0,revertLane:ye.revertLane,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null},te===null?(H=te=Qe,F=S):te=te.next=Qe,qt.lanes|=_e,Al|=_e;Qe=ye.action,_c&&f(S,Qe),S=ye.hasEagerState?ye.eagerState:f(S,Qe)}else _e={lane:Qe,revertLane:ye.revertLane,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null},te===null?(H=te=_e,F=S):te=te.next=_e,qt.lanes|=Qe,Al|=Qe;ye=ye.next}while(ye!==null&&ye!==u);if(te===null?F=S:te.next=H,!cs(S,l.memoizedState)&&(Fi=!0,Pe&&(f=eh,f!==null)))throw f;l.memoizedState=S,l.baseState=F,l.baseQueue=te,g.lastRenderedState=S}return x===null&&(g.lanes=0),[l.memoizedState,g.dispatch]}function NE(l){var u=Ei(),f=u.queue;if(f===null)throw Error(i(311));f.lastRenderedReducer=l;var g=f.dispatch,x=f.pending,S=u.memoizedState;if(x!==null){f.pending=null;var F=x=x.next;do S=l(S,F.action),F=F.next;while(F!==x);cs(S,u.memoizedState)||(Fi=!0),u.memoizedState=S,u.baseQueue===null&&(u.baseState=S),f.lastRenderedState=S}return[S,g]}function sT(l,u,f){var g=qt,x=Ei(),S=vn;if(S){if(f===void 0)throw Error(i(407));f=f()}else f=u();var F=!cs((Bn||x).memoizedState,f);F&&(x.memoizedState=f,Fi=!0),x=x.queue;var H=lT.bind(null,g,x,l);if(mf(2048,8,H,[l]),x.getSnapshot!==u||F||bi!==null&&bi.memoizedState.tag&1){if(g.flags|=2048,rh(9,IA(),oT.bind(null,g,x,f,u),null),Fn===null)throw Error(i(349));S||(cl&124)!==0||aT(g,u,f)}return f}function aT(l,u,f){l.flags|=16384,l={getSnapshot:u,value:f},u=qt.updateQueue,u===null?(u=PE(),qt.updateQueue=u,u.stores=[l]):(f=u.stores,f===null?u.stores=[l]:f.push(l))}function oT(l,u,f,g){u.value=f,u.getSnapshot=g,cT(u)&&uT(l)}function lT(l,u,f){return f(function(){cT(u)&&uT(l)})}function cT(l){var u=l.getSnapshot;l=l.value;try{var f=u();return!cs(l,f)}catch{return!0}}function uT(l){var u=Yu(l,2);u!==null&&ms(u,l,2)}function FE(l){var u=Gr();if(typeof l=="function"){var f=l;if(l=f(),_c){re(!0);try{f()}finally{re(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ho,lastRenderedState:l},u}function hT(l,u,f,g){return l.baseState=f,kE(l,Bn,typeof g=="function"?g:ho)}function eQ(l,u,f,g,x){if(DA(l))throw Error(i(485));if(l=u.action,l!==null){var S={payload:x,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(F){S.listeners.push(F)}};z.T!==null?f(!0):S.isTransition=!1,g(S),f=u.pending,f===null?(S.next=u.pending=S,dT(u,S)):(S.next=f.next,u.pending=f.next=S)}}function dT(l,u){var f=u.action,g=u.payload,x=l.state;if(u.isTransition){var S=z.T,F={};z.T=F;try{var H=f(x,g),te=z.S;te!==null&&te(F,H),fT(l,u,H)}catch(ye){QE(l,u,ye)}finally{z.T=S}}else try{S=f(x,g),fT(l,u,S)}catch(ye){QE(l,u,ye)}}function fT(l,u,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(g){pT(l,u,g)},function(g){return QE(l,u,g)}):pT(l,u,f)}function pT(l,u,f){u.status="fulfilled",u.value=f,mT(u),l.state=f,u=l.pending,u!==null&&(f=u.next,f===u?l.pending=null:(f=f.next,u.next=f,dT(l,f)))}function QE(l,u,f){var g=l.pending;if(l.pending=null,g!==null){g=g.next;do u.status="rejected",u.reason=f,mT(u),u=u.next;while(u!==g)}l.action=null}function mT(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function AT(l,u){return u}function gT(l,u){if(vn){var f=Fn.formState;if(f!==null){e:{var g=qt;if(vn){if(ii){t:{for(var x=ii,S=_a;x.nodeType!==8;){if(!S){x=null;break t}if(x=aa(x.nextSibling),x===null){x=null;break t}}S=x.data,x=S==="F!"||S==="F"?x:null}if(x){ii=aa(x.nextSibling),g=x.data==="F!";break e}}bc(g)}g=!1}g&&(u=f[0])}}return f=Gr(),f.memoizedState=f.baseState=u,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:AT,lastRenderedState:u},f.queue=g,f=UT.bind(null,qt,g),g.dispatch=f,g=FE(!1),S=WE.bind(null,qt,!1,g.queue),g=Gr(),x={state:u,dispatch:null,action:l,pending:null},g.queue=x,f=eQ.bind(null,qt,x,S,f),x.dispatch=f,g.memoizedState=l,[u,f,!1]}function vT(l){var u=Ei();return yT(u,Bn,l)}function yT(l,u,f){if(u=kE(l,u,AT)[0],l=BA(ho)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var g=pf(u)}catch(F){throw F===lf?CA:F}else g=u;u=Ei();var x=u.queue,S=x.dispatch;return f!==u.memoizedState&&(qt.flags|=2048,rh(9,IA(),tQ.bind(null,x,f),null)),[g,S,l]}function tQ(l,u){l.action=u}function bT(l){var u=Ei(),f=Bn;if(f!==null)return yT(u,f,l);Ei(),u=u.memoizedState,f=Ei();var g=f.queue.dispatch;return f.memoizedState=l,[u,g,!1]}function rh(l,u,f,g){return l={tag:l,create:f,deps:g,inst:u,next:null},u=qt.updateQueue,u===null&&(u=PE(),qt.updateQueue=u),f=u.lastEffect,f===null?u.lastEffect=l.next=l:(g=f.next,f.next=l,l.next=g,u.lastEffect=l),l}function IA(){return{destroy:void 0,resource:void 0}}function ET(){return Ei().memoizedState}function RA(l,u,f,g){var x=Gr();g=g===void 0?null:g,qt.flags|=l,x.memoizedState=rh(1|u,IA(),f,g)}function mf(l,u,f,g){var x=Ei();g=g===void 0?null:g;var S=x.memoizedState.inst;Bn!==null&&g!==null&&IE(g,Bn.memoizedState.deps)?x.memoizedState=rh(u,S,f,g):(qt.flags|=l,x.memoizedState=rh(1|u,S,f,g))}function xT(l,u){RA(8390656,8,l,u)}function CT(l,u){mf(2048,8,l,u)}function _T(l,u){return mf(4,2,l,u)}function wT(l,u){return mf(4,4,l,u)}function ST(l,u){if(typeof u=="function"){l=l();var f=u(l);return function(){typeof f=="function"?f():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function MT(l,u,f){f=f!=null?f.concat([l]):null,mf(4,4,ST.bind(null,u,l),f)}function zE(){}function TT(l,u){var f=Ei();u=u===void 0?null:u;var g=f.memoizedState;return u!==null&&IE(u,g[1])?g[0]:(f.memoizedState=[l,u],l)}function BT(l,u){var f=Ei();u=u===void 0?null:u;var g=f.memoizedState;if(u!==null&&IE(u,g[1]))return g[0];if(g=l(),_c){re(!0);try{l()}finally{re(!1)}}return f.memoizedState=[g,u],g}function HE(l,u,f){return f===void 0||(cl&1073741824)!==0?l.memoizedState=u:(l.memoizedState=f,l=DB(),qt.lanes|=l,Al|=l,f)}function IT(l,u,f,g){return cs(f,u)?f:th.current!==null?(l=HE(l,f,g),cs(l,u)||(Fi=!0),l):(cl&42)===0?(Fi=!0,l.memoizedState=f):(l=DB(),qt.lanes|=l,Al|=l,u)}function RT(l,u,f,g,x){var S=j.p;j.p=S!==0&&8>S?S:8;var F=z.T,H={};z.T=H,WE(l,!1,u,f);try{var te=x(),ye=z.S;if(ye!==null&&ye(H,te),te!==null&&typeof te=="object"&&typeof te.then=="function"){var Pe=J8(te,g);Af(l,u,Pe,ps(l))}else Af(l,u,g,ps(l))}catch(Qe){Af(l,u,{then:function(){},status:"rejected",reason:Qe},ps())}finally{j.p=S,z.T=F}}function nQ(){}function GE(l,u,f,g){if(l.tag!==5)throw Error(i(476));var x=DT(l).queue;RT(l,x,u,Z,f===null?nQ:function(){return LT(l),f(g)})}function DT(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ho,lastRenderedState:Z},next:null};var f={};return u.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ho,lastRenderedState:f},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function LT(l){var u=DT(l).next.queue;Af(l,u,{},ps())}function VE(){return sr(Of)}function OT(){return Ei().memoizedState}function PT(){return Ei().memoizedState}function iQ(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var f=ps();l=ol(f);var g=ll(u,l,f);g!==null&&(ms(g,u,f),uf(g,u,f)),u={cache:bE()},l.payload=u;return}u=u.return}}function rQ(l,u,f){var g=ps();f={lane:g,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},DA(l)?kT(u,f):(f=uE(l,u,f,g),f!==null&&(ms(f,l,g),NT(f,u,g)))}function UT(l,u,f){var g=ps();Af(l,u,f,g)}function Af(l,u,f,g){var x={lane:g,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(DA(l))kT(u,x);else{var S=l.alternate;if(l.lanes===0&&(S===null||S.lanes===0)&&(S=u.lastRenderedReducer,S!==null))try{var F=u.lastRenderedState,H=S(F,f);if(x.hasEagerState=!0,x.eagerState=H,cs(H,F))return mA(l,u,x,0),Fn===null&&pA(),!1}catch{}finally{}if(f=uE(l,u,x,g),f!==null)return ms(f,l,g),NT(f,u,g),!0}return!1}function WE(l,u,f,g){if(g={lane:2,revertLane:Cx(),action:g,hasEagerState:!1,eagerState:null,next:null},DA(l)){if(u)throw Error(i(479))}else u=uE(l,f,g,2),u!==null&&ms(u,l,2)}function DA(l){var u=l.alternate;return l===qt||u!==null&&u===qt}function kT(l,u){nh=SA=!0;var f=l.pending;f===null?u.next=u:(u.next=f.next,f.next=u),l.pending=u}function NT(l,u,f){if((f&4194048)!==0){var g=u.lanes;g&=l.pendingLanes,f|=g,u.lanes=f,Et(l,f)}}var LA={readContext:sr,use:TA,useCallback:ui,useContext:ui,useEffect:ui,useImperativeHandle:ui,useLayoutEffect:ui,useInsertionEffect:ui,useMemo:ui,useReducer:ui,useRef:ui,useState:ui,useDebugValue:ui,useDeferredValue:ui,useTransition:ui,useSyncExternalStore:ui,useId:ui,useHostTransitionStatus:ui,useFormState:ui,useActionState:ui,useOptimistic:ui,useMemoCache:ui,useCacheRefresh:ui},FT={readContext:sr,use:TA,useCallback:function(l,u){return Gr().memoizedState=[l,u===void 0?null:u],l},useContext:sr,useEffect:xT,useImperativeHandle:function(l,u,f){f=f!=null?f.concat([l]):null,RA(4194308,4,ST.bind(null,u,l),f)},useLayoutEffect:function(l,u){return RA(4194308,4,l,u)},useInsertionEffect:function(l,u){RA(4,2,l,u)},useMemo:function(l,u){var f=Gr();u=u===void 0?null:u;var g=l();if(_c){re(!0);try{l()}finally{re(!1)}}return f.memoizedState=[g,u],g},useReducer:function(l,u,f){var g=Gr();if(f!==void 0){var x=f(u);if(_c){re(!0);try{f(u)}finally{re(!1)}}}else x=u;return g.memoizedState=g.baseState=x,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:x},g.queue=l,l=l.dispatch=rQ.bind(null,qt,l),[g.memoizedState,l]},useRef:function(l){var u=Gr();return l={current:l},u.memoizedState=l},useState:function(l){l=FE(l);var u=l.queue,f=UT.bind(null,qt,u);return u.dispatch=f,[l.memoizedState,f]},useDebugValue:zE,useDeferredValue:function(l,u){var f=Gr();return HE(f,l,u)},useTransition:function(){var l=FE(!1);return l=RT.bind(null,qt,l.queue,!0,!1),Gr().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,f){var g=qt,x=Gr();if(vn){if(f===void 0)throw Error(i(407));f=f()}else{if(f=u(),Fn===null)throw Error(i(349));(on&124)!==0||aT(g,u,f)}x.memoizedState=f;var S={value:f,getSnapshot:u};return x.queue=S,xT(lT.bind(null,g,S,l),[l]),g.flags|=2048,rh(9,IA(),oT.bind(null,g,S,f,u),null),f},useId:function(){var l=Gr(),u=Fn.identifierPrefix;if(vn){var f=lo,g=oo;f=(g&~(1<<32-ge(g)-1)).toString(32)+f,u=""+u+"R"+f,f=MA++,0<f&&(u+="H"+f.toString(32)),u+=""}else f=Z8++,u=""+u+"r"+f.toString(32)+"";return l.memoizedState=u},useHostTransitionStatus:VE,useFormState:gT,useActionState:gT,useOptimistic:function(l){var u=Gr();u.memoizedState=u.baseState=l;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=f,u=WE.bind(null,qt,!0,f),f.dispatch=u,[l,u]},useMemoCache:UE,useCacheRefresh:function(){return Gr().memoizedState=iQ.bind(null,qt)}},QT={readContext:sr,use:TA,useCallback:TT,useContext:sr,useEffect:CT,useImperativeHandle:MT,useInsertionEffect:_T,useLayoutEffect:wT,useMemo:BT,useReducer:BA,useRef:ET,useState:function(){return BA(ho)},useDebugValue:zE,useDeferredValue:function(l,u){var f=Ei();return IT(f,Bn.memoizedState,l,u)},useTransition:function(){var l=BA(ho)[0],u=Ei().memoizedState;return[typeof l=="boolean"?l:pf(l),u]},useSyncExternalStore:sT,useId:OT,useHostTransitionStatus:VE,useFormState:vT,useActionState:vT,useOptimistic:function(l,u){var f=Ei();return hT(f,Bn,l,u)},useMemoCache:UE,useCacheRefresh:PT},sQ={readContext:sr,use:TA,useCallback:TT,useContext:sr,useEffect:CT,useImperativeHandle:MT,useInsertionEffect:_T,useLayoutEffect:wT,useMemo:BT,useReducer:NE,useRef:ET,useState:function(){return NE(ho)},useDebugValue:zE,useDeferredValue:function(l,u){var f=Ei();return Bn===null?HE(f,l,u):IT(f,Bn.memoizedState,l,u)},useTransition:function(){var l=NE(ho)[0],u=Ei().memoizedState;return[typeof l=="boolean"?l:pf(l),u]},useSyncExternalStore:sT,useId:OT,useHostTransitionStatus:VE,useFormState:bT,useActionState:bT,useOptimistic:function(l,u){var f=Ei();return Bn!==null?hT(f,Bn,l,u):(f.baseState=l,[l,f.queue.dispatch])},useMemoCache:UE,useCacheRefresh:PT},sh=null,gf=0;function OA(l){var u=gf;return gf+=1,sh===null&&(sh=[]),JM(sh,l,u)}function vf(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function PA(l,u){throw u.$$typeof===p?Error(i(525)):(l=Object.prototype.toString.call(u),Error(i(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function zT(l){var u=l._init;return u(l._payload)}function HT(l){function u(pe,le){if(l){var ve=pe.deletions;ve===null?(pe.deletions=[le],pe.flags|=16):ve.push(le)}}function f(pe,le){if(!l)return null;for(;le!==null;)u(pe,le),le=le.sibling;return null}function g(pe){for(var le=new Map;pe!==null;)pe.key!==null?le.set(pe.key,pe):le.set(pe.index,pe),pe=pe.sibling;return le}function x(pe,le){return pe=ao(pe,le),pe.index=0,pe.sibling=null,pe}function S(pe,le,ve){return pe.index=ve,l?(ve=pe.alternate,ve!==null?(ve=ve.index,ve<le?(pe.flags|=67108866,le):ve):(pe.flags|=67108866,le)):(pe.flags|=1048576,le)}function F(pe){return l&&pe.alternate===null&&(pe.flags|=67108866),pe}function H(pe,le,ve,ke){return le===null||le.tag!==6?(le=dE(ve,pe.mode,ke),le.return=pe,le):(le=x(le,ve),le.return=pe,le)}function te(pe,le,ve,ke){var ft=ve.type;return ft===v?Pe(pe,le,ve.props.children,ke,ve.key):le!==null&&(le.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===P&&zT(ft)===le.type)?(le=x(le,ve.props),vf(le,ve),le.return=pe,le):(le=gA(ve.type,ve.key,ve.props,null,pe.mode,ke),vf(le,ve),le.return=pe,le)}function ye(pe,le,ve,ke){return le===null||le.tag!==4||le.stateNode.containerInfo!==ve.containerInfo||le.stateNode.implementation!==ve.implementation?(le=fE(ve,pe.mode,ke),le.return=pe,le):(le=x(le,ve.children||[]),le.return=pe,le)}function Pe(pe,le,ve,ke,ft){return le===null||le.tag!==7?(le=Ac(ve,pe.mode,ke,ft),le.return=pe,le):(le=x(le,ve),le.return=pe,le)}function Qe(pe,le,ve){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return le=dE(""+le,pe.mode,ve),le.return=pe,le;if(typeof le=="object"&&le!==null){switch(le.$$typeof){case m:return ve=gA(le.type,le.key,le.props,null,pe.mode,ve),vf(ve,le),ve.return=pe,ve;case A:return le=fE(le,pe.mode,ve),le.return=pe,le;case P:var ke=le._init;return le=ke(le._payload),Qe(pe,le,ve)}if(ae(le)||V(le))return le=Ac(le,pe.mode,ve,null),le.return=pe,le;if(typeof le.then=="function")return Qe(pe,OA(le),ve);if(le.$$typeof===_)return Qe(pe,EA(pe,le),ve);PA(pe,le)}return null}function _e(pe,le,ve,ke){var ft=le!==null?le.key:null;if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return ft!==null?null:H(pe,le,""+ve,ke);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case m:return ve.key===ft?te(pe,le,ve,ke):null;case A:return ve.key===ft?ye(pe,le,ve,ke):null;case P:return ft=ve._init,ve=ft(ve._payload),_e(pe,le,ve,ke)}if(ae(ve)||V(ve))return ft!==null?null:Pe(pe,le,ve,ke,null);if(typeof ve.then=="function")return _e(pe,le,OA(ve),ke);if(ve.$$typeof===_)return _e(pe,le,EA(pe,ve),ke);PA(pe,ve)}return null}function Se(pe,le,ve,ke,ft){if(typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint")return pe=pe.get(ve)||null,H(le,pe,""+ke,ft);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case m:return pe=pe.get(ke.key===null?ve:ke.key)||null,te(le,pe,ke,ft);case A:return pe=pe.get(ke.key===null?ve:ke.key)||null,ye(le,pe,ke,ft);case P:var Yt=ke._init;return ke=Yt(ke._payload),Se(pe,le,ve,ke,ft)}if(ae(ke)||V(ke))return pe=pe.get(ve)||null,Pe(le,pe,ke,ft,null);if(typeof ke.then=="function")return Se(pe,le,ve,OA(ke),ft);if(ke.$$typeof===_)return Se(pe,le,ve,EA(le,ke),ft);PA(le,ke)}return null}function Rt(pe,le,ve,ke){for(var ft=null,Yt=null,bt=le,Bt=le=0,zi=null;bt!==null&&Bt<ve.length;Bt++){bt.index>Bt?(zi=bt,bt=null):zi=bt.sibling;var pn=_e(pe,bt,ve[Bt],ke);if(pn===null){bt===null&&(bt=zi);break}l&&bt&&pn.alternate===null&&u(pe,bt),le=S(pn,le,Bt),Yt===null?ft=pn:Yt.sibling=pn,Yt=pn,bt=zi}if(Bt===ve.length)return f(pe,bt),vn&&vc(pe,Bt),ft;if(bt===null){for(;Bt<ve.length;Bt++)bt=Qe(pe,ve[Bt],ke),bt!==null&&(le=S(bt,le,Bt),Yt===null?ft=bt:Yt.sibling=bt,Yt=bt);return vn&&vc(pe,Bt),ft}for(bt=g(bt);Bt<ve.length;Bt++)zi=Se(bt,pe,Bt,ve[Bt],ke),zi!==null&&(l&&zi.alternate!==null&&bt.delete(zi.key===null?Bt:zi.key),le=S(zi,le,Bt),Yt===null?ft=zi:Yt.sibling=zi,Yt=zi);return l&&bt.forEach(function(wl){return u(pe,wl)}),vn&&vc(pe,Bt),ft}function Mt(pe,le,ve,ke){if(ve==null)throw Error(i(151));for(var ft=null,Yt=null,bt=le,Bt=le=0,zi=null,pn=ve.next();bt!==null&&!pn.done;Bt++,pn=ve.next()){bt.index>Bt?(zi=bt,bt=null):zi=bt.sibling;var wl=_e(pe,bt,pn.value,ke);if(wl===null){bt===null&&(bt=zi);break}l&&bt&&wl.alternate===null&&u(pe,bt),le=S(wl,le,Bt),Yt===null?ft=wl:Yt.sibling=wl,Yt=wl,bt=zi}if(pn.done)return f(pe,bt),vn&&vc(pe,Bt),ft;if(bt===null){for(;!pn.done;Bt++,pn=ve.next())pn=Qe(pe,pn.value,ke),pn!==null&&(le=S(pn,le,Bt),Yt===null?ft=pn:Yt.sibling=pn,Yt=pn);return vn&&vc(pe,Bt),ft}for(bt=g(bt);!pn.done;Bt++,pn=ve.next())pn=Se(bt,pe,Bt,pn.value,ke),pn!==null&&(l&&pn.alternate!==null&&bt.delete(pn.key===null?Bt:pn.key),le=S(pn,le,Bt),Yt===null?ft=pn:Yt.sibling=pn,Yt=pn);return l&&bt.forEach(function(az){return u(pe,az)}),vn&&vc(pe,Bt),ft}function Rn(pe,le,ve,ke){if(typeof ve=="object"&&ve!==null&&ve.type===v&&ve.key===null&&(ve=ve.props.children),typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case m:e:{for(var ft=ve.key;le!==null;){if(le.key===ft){if(ft=ve.type,ft===v){if(le.tag===7){f(pe,le.sibling),ke=x(le,ve.props.children),ke.return=pe,pe=ke;break e}}else if(le.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===P&&zT(ft)===le.type){f(pe,le.sibling),ke=x(le,ve.props),vf(ke,ve),ke.return=pe,pe=ke;break e}f(pe,le);break}else u(pe,le);le=le.sibling}ve.type===v?(ke=Ac(ve.props.children,pe.mode,ke,ve.key),ke.return=pe,pe=ke):(ke=gA(ve.type,ve.key,ve.props,null,pe.mode,ke),vf(ke,ve),ke.return=pe,pe=ke)}return F(pe);case A:e:{for(ft=ve.key;le!==null;){if(le.key===ft)if(le.tag===4&&le.stateNode.containerInfo===ve.containerInfo&&le.stateNode.implementation===ve.implementation){f(pe,le.sibling),ke=x(le,ve.children||[]),ke.return=pe,pe=ke;break e}else{f(pe,le);break}else u(pe,le);le=le.sibling}ke=fE(ve,pe.mode,ke),ke.return=pe,pe=ke}return F(pe);case P:return ft=ve._init,ve=ft(ve._payload),Rn(pe,le,ve,ke)}if(ae(ve))return Rt(pe,le,ve,ke);if(V(ve)){if(ft=V(ve),typeof ft!="function")throw Error(i(150));return ve=ft.call(ve),Mt(pe,le,ve,ke)}if(typeof ve.then=="function")return Rn(pe,le,OA(ve),ke);if(ve.$$typeof===_)return Rn(pe,le,EA(pe,ve),ke);PA(pe,ve)}return typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint"?(ve=""+ve,le!==null&&le.tag===6?(f(pe,le.sibling),ke=x(le,ve),ke.return=pe,pe=ke):(f(pe,le),ke=dE(ve,pe.mode,ke),ke.return=pe,pe=ke),F(pe)):f(pe,le)}return function(pe,le,ve,ke){try{gf=0;var ft=Rn(pe,le,ve,ke);return sh=null,ft}catch(bt){if(bt===lf||bt===CA)throw bt;var Yt=us(29,bt,null,pe.mode);return Yt.lanes=ke,Yt.return=pe,Yt}finally{}}}var ah=HT(!0),GT=HT(!1),Qs=se(null),wa=null;function ul(l){var u=l.alternate;be(Ii,Ii.current&1),be(Qs,l),wa===null&&(u===null||th.current!==null||u.memoizedState!==null)&&(wa=l)}function VT(l){if(l.tag===22){if(be(Ii,Ii.current),be(Qs,l),wa===null){var u=l.alternate;u!==null&&u.memoizedState!==null&&(wa=l)}}else hl()}function hl(){be(Ii,Ii.current),be(Qs,Qs.current)}function fo(l){me(Qs),wa===l&&(wa=null),me(Ii)}var Ii=se(0);function UA(l){for(var u=l;u!==null;){if(u.tag===13){var f=u.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||Px(f)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function qE(l,u,f,g){u=l.memoizedState,f=f(g,u),f=f==null?u:d({},u,f),l.memoizedState=f,l.lanes===0&&(l.updateQueue.baseState=f)}var jE={enqueueSetState:function(l,u,f){l=l._reactInternals;var g=ps(),x=ol(g);x.payload=u,f!=null&&(x.callback=f),u=ll(l,x,g),u!==null&&(ms(u,l,g),uf(u,l,g))},enqueueReplaceState:function(l,u,f){l=l._reactInternals;var g=ps(),x=ol(g);x.tag=1,x.payload=u,f!=null&&(x.callback=f),u=ll(l,x,g),u!==null&&(ms(u,l,g),uf(u,l,g))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var f=ps(),g=ol(f);g.tag=2,u!=null&&(g.callback=u),u=ll(l,g,f),u!==null&&(ms(u,l,f),uf(u,l,f))}};function WT(l,u,f,g,x,S,F){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(g,S,F):u.prototype&&u.prototype.isPureReactComponent?!$d(f,g)||!$d(x,S):!0}function qT(l,u,f,g){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(f,g),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(f,g),u.state!==l&&jE.enqueueReplaceState(u,u.state,null)}function wc(l,u){var f=u;if("ref"in u){f={};for(var g in u)g!=="ref"&&(f[g]=u[g])}if(l=l.defaultProps){f===u&&(f=d({},f));for(var x in l)f[x]===void 0&&(f[x]=l[x])}return f}var kA=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function jT(l){kA(l)}function XT(l){console.error(l)}function YT(l){kA(l)}function NA(l,u){try{var f=l.onUncaughtError;f(u.value,{componentStack:u.stack})}catch(g){setTimeout(function(){throw g})}}function KT(l,u,f){try{var g=l.onCaughtError;g(f.value,{componentStack:f.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function XE(l,u,f){return f=ol(f),f.tag=3,f.payload={element:null},f.callback=function(){NA(l,u)},f}function JT(l){return l=ol(l),l.tag=3,l}function ZT(l,u,f,g){var x=f.type.getDerivedStateFromError;if(typeof x=="function"){var S=g.value;l.payload=function(){return x(S)},l.callback=function(){KT(u,f,g)}}var F=f.stateNode;F!==null&&typeof F.componentDidCatch=="function"&&(l.callback=function(){KT(u,f,g),typeof x!="function"&&(gl===null?gl=new Set([this]):gl.add(this));var H=g.stack;this.componentDidCatch(g.value,{componentStack:H!==null?H:""})})}function aQ(l,u,f,g,x){if(f.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(u=f.alternate,u!==null&&sf(u,f,x,!0),f=Qs.current,f!==null){switch(f.tag){case 13:return wa===null?vx():f.alternate===null&&ri===0&&(ri=3),f.flags&=-257,f.flags|=65536,f.lanes=x,g===CE?f.flags|=16384:(u=f.updateQueue,u===null?f.updateQueue=new Set([g]):u.add(g),bx(l,g,x)),!1;case 22:return f.flags|=65536,g===CE?f.flags|=16384:(u=f.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([g])},f.updateQueue=u):(f=u.retryQueue,f===null?u.retryQueue=new Set([g]):f.add(g)),bx(l,g,x)),!1}throw Error(i(435,f.tag))}return bx(l,g,x),vx(),!1}if(vn)return u=Qs.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=x,g!==AE&&(l=Error(i(422),{cause:g}),rf(Us(l,f)))):(g!==AE&&(u=Error(i(423),{cause:g}),rf(Us(u,f))),l=l.current.alternate,l.flags|=65536,x&=-x,l.lanes|=x,g=Us(g,f),x=XE(l.stateNode,g,x),SE(l,x),ri!==4&&(ri=2)),!1;var S=Error(i(520),{cause:g});if(S=Us(S,f),wf===null?wf=[S]:wf.push(S),ri!==4&&(ri=2),u===null)return!0;g=Us(g,f),f=u;do{switch(f.tag){case 3:return f.flags|=65536,l=x&-x,f.lanes|=l,l=XE(f.stateNode,g,l),SE(f,l),!1;case 1:if(u=f.type,S=f.stateNode,(f.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(gl===null||!gl.has(S))))return f.flags|=65536,x&=-x,f.lanes|=x,x=JT(x),ZT(x,l,f,g),SE(f,x),!1}f=f.return}while(f!==null);return!1}var $T=Error(i(461)),Fi=!1;function ji(l,u,f,g){u.child=l===null?GT(u,null,f,g):ah(u,l.child,f,g)}function eB(l,u,f,g,x){f=f.render;var S=u.ref;if("ref"in g){var F={};for(var H in g)H!=="ref"&&(F[H]=g[H])}else F=g;return xc(u),g=RE(l,u,f,F,S,x),H=DE(),l!==null&&!Fi?(LE(l,u,x),po(l,u,x)):(vn&&H&&pE(u),u.flags|=1,ji(l,u,g,x),u.child)}function tB(l,u,f,g,x){if(l===null){var S=f.type;return typeof S=="function"&&!hE(S)&&S.defaultProps===void 0&&f.compare===null?(u.tag=15,u.type=S,nB(l,u,S,g,x)):(l=gA(f.type,null,g,u,u.mode,x),l.ref=u.ref,l.return=u,u.child=l)}if(S=l.child,!nx(l,x)){var F=S.memoizedProps;if(f=f.compare,f=f!==null?f:$d,f(F,g)&&l.ref===u.ref)return po(l,u,x)}return u.flags|=1,l=ao(S,g),l.ref=u.ref,l.return=u,u.child=l}function nB(l,u,f,g,x){if(l!==null){var S=l.memoizedProps;if($d(S,g)&&l.ref===u.ref)if(Fi=!1,u.pendingProps=g=S,nx(l,x))(l.flags&131072)!==0&&(Fi=!0);else return u.lanes=l.lanes,po(l,u,x)}return YE(l,u,f,g,x)}function iB(l,u,f){var g=u.pendingProps,x=g.children,S=l!==null?l.memoizedState:null;if(g.mode==="hidden"){if((u.flags&128)!==0){if(g=S!==null?S.baseLanes|f:f,l!==null){for(x=u.child=l.child,S=0;x!==null;)S=S|x.lanes|x.childLanes,x=x.sibling;u.childLanes=S&~g}else u.childLanes=0,u.child=null;return rB(l,u,g,f)}if((f&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&xA(u,S!==null?S.cachePool:null),S!==null?nT(u,S):TE(),VT(u);else return u.lanes=u.childLanes=536870912,rB(l,u,S!==null?S.baseLanes|f:f,f)}else S!==null?(xA(u,S.cachePool),nT(u,S),hl(),u.memoizedState=null):(l!==null&&xA(u,null),TE(),hl());return ji(l,u,x,f),u.child}function rB(l,u,f,g){var x=xE();return x=x===null?null:{parent:Bi._currentValue,pool:x},u.memoizedState={baseLanes:f,cachePool:x},l!==null&&xA(u,null),TE(),VT(u),l!==null&&sf(l,u,g,!0),null}function FA(l,u){var f=u.ref;if(f===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(i(284));(l===null||l.ref!==f)&&(u.flags|=4194816)}}function YE(l,u,f,g,x){return xc(u),f=RE(l,u,f,g,void 0,x),g=DE(),l!==null&&!Fi?(LE(l,u,x),po(l,u,x)):(vn&&g&&pE(u),u.flags|=1,ji(l,u,f,x),u.child)}function sB(l,u,f,g,x,S){return xc(u),u.updateQueue=null,f=rT(u,g,f,x),iT(l),g=DE(),l!==null&&!Fi?(LE(l,u,S),po(l,u,S)):(vn&&g&&pE(u),u.flags|=1,ji(l,u,f,S),u.child)}function aB(l,u,f,g,x){if(xc(u),u.stateNode===null){var S=Ku,F=f.contextType;typeof F=="object"&&F!==null&&(S=sr(F)),S=new f(g,S),u.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=jE,u.stateNode=S,S._reactInternals=u,S=u.stateNode,S.props=g,S.state=u.memoizedState,S.refs={},_E(u),F=f.contextType,S.context=typeof F=="object"&&F!==null?sr(F):Ku,S.state=u.memoizedState,F=f.getDerivedStateFromProps,typeof F=="function"&&(qE(u,f,F,g),S.state=u.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(F=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),F!==S.state&&jE.enqueueReplaceState(S,S.state,null),df(u,g,S,x),hf(),S.state=u.memoizedState),typeof S.componentDidMount=="function"&&(u.flags|=4194308),g=!0}else if(l===null){S=u.stateNode;var H=u.memoizedProps,te=wc(f,H);S.props=te;var ye=S.context,Pe=f.contextType;F=Ku,typeof Pe=="object"&&Pe!==null&&(F=sr(Pe));var Qe=f.getDerivedStateFromProps;Pe=typeof Qe=="function"||typeof S.getSnapshotBeforeUpdate=="function",H=u.pendingProps!==H,Pe||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(H||ye!==F)&&qT(u,S,g,F),al=!1;var _e=u.memoizedState;S.state=_e,df(u,g,S,x),hf(),ye=u.memoizedState,H||_e!==ye||al?(typeof Qe=="function"&&(qE(u,f,Qe,g),ye=u.memoizedState),(te=al||WT(u,f,te,g,_e,ye,F))?(Pe||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(u.flags|=4194308)):(typeof S.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=g,u.memoizedState=ye),S.props=g,S.state=ye,S.context=F,g=te):(typeof S.componentDidMount=="function"&&(u.flags|=4194308),g=!1)}else{S=u.stateNode,wE(l,u),F=u.memoizedProps,Pe=wc(f,F),S.props=Pe,Qe=u.pendingProps,_e=S.context,ye=f.contextType,te=Ku,typeof ye=="object"&&ye!==null&&(te=sr(ye)),H=f.getDerivedStateFromProps,(ye=typeof H=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(F!==Qe||_e!==te)&&qT(u,S,g,te),al=!1,_e=u.memoizedState,S.state=_e,df(u,g,S,x),hf();var Se=u.memoizedState;F!==Qe||_e!==Se||al||l!==null&&l.dependencies!==null&&bA(l.dependencies)?(typeof H=="function"&&(qE(u,f,H,g),Se=u.memoizedState),(Pe=al||WT(u,f,Pe,g,_e,Se,te)||l!==null&&l.dependencies!==null&&bA(l.dependencies))?(ye||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(g,Se,te),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(g,Se,te)),typeof S.componentDidUpdate=="function"&&(u.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof S.componentDidUpdate!="function"||F===l.memoizedProps&&_e===l.memoizedState||(u.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||F===l.memoizedProps&&_e===l.memoizedState||(u.flags|=1024),u.memoizedProps=g,u.memoizedState=Se),S.props=g,S.state=Se,S.context=te,g=Pe):(typeof S.componentDidUpdate!="function"||F===l.memoizedProps&&_e===l.memoizedState||(u.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||F===l.memoizedProps&&_e===l.memoizedState||(u.flags|=1024),g=!1)}return S=g,FA(l,u),g=(u.flags&128)!==0,S||g?(S=u.stateNode,f=g&&typeof f.getDerivedStateFromError!="function"?null:S.render(),u.flags|=1,l!==null&&g?(u.child=ah(u,l.child,null,x),u.child=ah(u,null,f,x)):ji(l,u,f,x),u.memoizedState=S.state,l=u.child):l=po(l,u,x),l}function oB(l,u,f,g){return nf(),u.flags|=256,ji(l,u,f,g),u.child}var KE={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function JE(l){return{baseLanes:l,cachePool:XM()}}function ZE(l,u,f){return l=l!==null?l.childLanes&~f:0,u&&(l|=zs),l}function lB(l,u,f){var g=u.pendingProps,x=!1,S=(u.flags&128)!==0,F;if((F=S)||(F=l!==null&&l.memoizedState===null?!1:(Ii.current&2)!==0),F&&(x=!0,u.flags&=-129),F=(u.flags&32)!==0,u.flags&=-33,l===null){if(vn){if(x?ul(u):hl(),vn){var H=ii,te;if(te=H){e:{for(te=H,H=_a;te.nodeType!==8;){if(!H){H=null;break e}if(te=aa(te.nextSibling),te===null){H=null;break e}}H=te}H!==null?(u.memoizedState={dehydrated:H,treeContext:gc!==null?{id:oo,overflow:lo}:null,retryLane:536870912,hydrationErrors:null},te=us(18,null,null,0),te.stateNode=H,te.return=u,u.child=te,xr=u,ii=null,te=!0):te=!1}te||bc(u)}if(H=u.memoizedState,H!==null&&(H=H.dehydrated,H!==null))return Px(H)?u.lanes=32:u.lanes=536870912,null;fo(u)}return H=g.children,g=g.fallback,x?(hl(),x=u.mode,H=QA({mode:"hidden",children:H},x),g=Ac(g,x,f,null),H.return=u,g.return=u,H.sibling=g,u.child=H,x=u.child,x.memoizedState=JE(f),x.childLanes=ZE(l,F,f),u.memoizedState=KE,g):(ul(u),$E(u,H))}if(te=l.memoizedState,te!==null&&(H=te.dehydrated,H!==null)){if(S)u.flags&256?(ul(u),u.flags&=-257,u=ex(l,u,f)):u.memoizedState!==null?(hl(),u.child=l.child,u.flags|=128,u=null):(hl(),x=g.fallback,H=u.mode,g=QA({mode:"visible",children:g.children},H),x=Ac(x,H,f,null),x.flags|=2,g.return=u,x.return=u,g.sibling=x,u.child=g,ah(u,l.child,null,f),g=u.child,g.memoizedState=JE(f),g.childLanes=ZE(l,F,f),u.memoizedState=KE,u=x);else if(ul(u),Px(H)){if(F=H.nextSibling&&H.nextSibling.dataset,F)var ye=F.dgst;F=ye,g=Error(i(419)),g.stack="",g.digest=F,rf({value:g,source:null,stack:null}),u=ex(l,u,f)}else if(Fi||sf(l,u,f,!1),F=(f&l.childLanes)!==0,Fi||F){if(F=Fn,F!==null&&(g=f&-f,g=(g&42)!==0?1:tt(g),g=(g&(F.suspendedLanes|f))!==0?0:g,g!==0&&g!==te.retryLane))throw te.retryLane=g,Yu(l,g),ms(F,l,g),$T;H.data==="$?"||vx(),u=ex(l,u,f)}else H.data==="$?"?(u.flags|=192,u.child=l.child,u=null):(l=te.treeContext,ii=aa(H.nextSibling),xr=u,vn=!0,yc=null,_a=!1,l!==null&&(Ns[Fs++]=oo,Ns[Fs++]=lo,Ns[Fs++]=gc,oo=l.id,lo=l.overflow,gc=u),u=$E(u,g.children),u.flags|=4096);return u}return x?(hl(),x=g.fallback,H=u.mode,te=l.child,ye=te.sibling,g=ao(te,{mode:"hidden",children:g.children}),g.subtreeFlags=te.subtreeFlags&65011712,ye!==null?x=ao(ye,x):(x=Ac(x,H,f,null),x.flags|=2),x.return=u,g.return=u,g.sibling=x,u.child=g,g=x,x=u.child,H=l.child.memoizedState,H===null?H=JE(f):(te=H.cachePool,te!==null?(ye=Bi._currentValue,te=te.parent!==ye?{parent:ye,pool:ye}:te):te=XM(),H={baseLanes:H.baseLanes|f,cachePool:te}),x.memoizedState=H,x.childLanes=ZE(l,F,f),u.memoizedState=KE,g):(ul(u),f=l.child,l=f.sibling,f=ao(f,{mode:"visible",children:g.children}),f.return=u,f.sibling=null,l!==null&&(F=u.deletions,F===null?(u.deletions=[l],u.flags|=16):F.push(l)),u.child=f,u.memoizedState=null,f)}function $E(l,u){return u=QA({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function QA(l,u){return l=us(22,l,null,u),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function ex(l,u,f){return ah(u,l.child,null,f),l=$E(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function cB(l,u,f){l.lanes|=u;var g=l.alternate;g!==null&&(g.lanes|=u),vE(l.return,u,f)}function tx(l,u,f,g,x){var S=l.memoizedState;S===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:x}:(S.isBackwards=u,S.rendering=null,S.renderingStartTime=0,S.last=g,S.tail=f,S.tailMode=x)}function uB(l,u,f){var g=u.pendingProps,x=g.revealOrder,S=g.tail;if(ji(l,u,g.children,f),g=Ii.current,(g&2)!==0)g=g&1|2,u.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&cB(l,f,u);else if(l.tag===19)cB(l,f,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}g&=1}switch(be(Ii,g),x){case"forwards":for(f=u.child,x=null;f!==null;)l=f.alternate,l!==null&&UA(l)===null&&(x=f),f=f.sibling;f=x,f===null?(x=u.child,u.child=null):(x=f.sibling,f.sibling=null),tx(u,!1,x,f,S);break;case"backwards":for(f=null,x=u.child,u.child=null;x!==null;){if(l=x.alternate,l!==null&&UA(l)===null){u.child=x;break}l=x.sibling,x.sibling=f,f=x,x=l}tx(u,!0,f,null,S);break;case"together":tx(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function po(l,u,f){if(l!==null&&(u.dependencies=l.dependencies),Al|=u.lanes,(f&u.childLanes)===0)if(l!==null){if(sf(l,u,f,!1),(f&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(i(153));if(u.child!==null){for(l=u.child,f=ao(l,l.pendingProps),u.child=f,f.return=u;l.sibling!==null;)l=l.sibling,f=f.sibling=ao(l,l.pendingProps),f.return=u;f.sibling=null}return u.child}function nx(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&bA(l)))}function oQ(l,u,f){switch(u.tag){case 3:ue(u,u.stateNode.containerInfo),sl(u,Bi,l.memoizedState.cache),nf();break;case 27:case 5:Ge(u);break;case 4:ue(u,u.stateNode.containerInfo);break;case 10:sl(u,u.type,u.memoizedProps.value);break;case 13:var g=u.memoizedState;if(g!==null)return g.dehydrated!==null?(ul(u),u.flags|=128,null):(f&u.child.childLanes)!==0?lB(l,u,f):(ul(u),l=po(l,u,f),l!==null?l.sibling:null);ul(u);break;case 19:var x=(l.flags&128)!==0;if(g=(f&u.childLanes)!==0,g||(sf(l,u,f,!1),g=(f&u.childLanes)!==0),x){if(g)return uB(l,u,f);u.flags|=128}if(x=u.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),be(Ii,Ii.current),g)break;return null;case 22:case 23:return u.lanes=0,iB(l,u,f);case 24:sl(u,Bi,l.memoizedState.cache)}return po(l,u,f)}function hB(l,u,f){if(l!==null)if(l.memoizedProps!==u.pendingProps)Fi=!0;else{if(!nx(l,f)&&(u.flags&128)===0)return Fi=!1,oQ(l,u,f);Fi=(l.flags&131072)!==0}else Fi=!1,vn&&(u.flags&1048576)!==0&&zM(u,yA,u.index);switch(u.lanes=0,u.tag){case 16:e:{l=u.pendingProps;var g=u.elementType,x=g._init;if(g=x(g._payload),u.type=g,typeof g=="function")hE(g)?(l=wc(g,l),u.tag=1,u=aB(null,u,g,l,f)):(u.tag=0,u=YE(null,u,g,l,f));else{if(g!=null){if(x=g.$$typeof,x===w){u.tag=11,u=eB(null,u,g,l,f);break e}else if(x===R){u.tag=14,u=tB(null,u,g,l,f);break e}}throw u=$(g)||g,Error(i(306,u,""))}}return u;case 0:return YE(l,u,u.type,u.pendingProps,f);case 1:return g=u.type,x=wc(g,u.pendingProps),aB(l,u,g,x,f);case 3:e:{if(ue(u,u.stateNode.containerInfo),l===null)throw Error(i(387));g=u.pendingProps;var S=u.memoizedState;x=S.element,wE(l,u),df(u,g,null,f);var F=u.memoizedState;if(g=F.cache,sl(u,Bi,g),g!==S.cache&&yE(u,[Bi],f,!0),hf(),g=F.element,S.isDehydrated)if(S={element:g,isDehydrated:!1,cache:F.cache},u.updateQueue.baseState=S,u.memoizedState=S,u.flags&256){u=oB(l,u,g,f);break e}else if(g!==x){x=Us(Error(i(424)),u),rf(x),u=oB(l,u,g,f);break e}else{switch(l=u.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(ii=aa(l.firstChild),xr=u,vn=!0,yc=null,_a=!0,f=GT(u,null,g,f),u.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(nf(),g===x){u=po(l,u,f);break e}ji(l,u,g,f)}u=u.child}return u;case 26:return FA(l,u),l===null?(f=mI(u.type,null,u.pendingProps,null))?u.memoizedState=f:vn||(f=u.type,l=u.pendingProps,g=eg(Ne.current).createElement(f),g[Je]=u,g[gt]=l,Yi(g,f,l),an(g),u.stateNode=g):u.memoizedState=mI(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return Ge(u),l===null&&vn&&(g=u.stateNode=dI(u.type,u.pendingProps,Ne.current),xr=u,_a=!0,x=ii,bl(u.type)?(Ux=x,ii=aa(g.firstChild)):ii=x),ji(l,u,u.pendingProps.children,f),FA(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&vn&&((x=g=ii)&&(g=PQ(g,u.type,u.pendingProps,_a),g!==null?(u.stateNode=g,xr=u,ii=aa(g.firstChild),_a=!1,x=!0):x=!1),x||bc(u)),Ge(u),x=u.type,S=u.pendingProps,F=l!==null?l.memoizedProps:null,g=S.children,Dx(x,S)?g=null:F!==null&&Dx(x,F)&&(u.flags|=32),u.memoizedState!==null&&(x=RE(l,u,$8,null,null,f),Of._currentValue=x),FA(l,u),ji(l,u,g,f),u.child;case 6:return l===null&&vn&&((l=f=ii)&&(f=UQ(f,u.pendingProps,_a),f!==null?(u.stateNode=f,xr=u,ii=null,l=!0):l=!1),l||bc(u)),null;case 13:return lB(l,u,f);case 4:return ue(u,u.stateNode.containerInfo),g=u.pendingProps,l===null?u.child=ah(u,null,g,f):ji(l,u,g,f),u.child;case 11:return eB(l,u,u.type,u.pendingProps,f);case 7:return ji(l,u,u.pendingProps,f),u.child;case 8:return ji(l,u,u.pendingProps.children,f),u.child;case 12:return ji(l,u,u.pendingProps.children,f),u.child;case 10:return g=u.pendingProps,sl(u,u.type,g.value),ji(l,u,g.children,f),u.child;case 9:return x=u.type._context,g=u.pendingProps.children,xc(u),x=sr(x),g=g(x),u.flags|=1,ji(l,u,g,f),u.child;case 14:return tB(l,u,u.type,u.pendingProps,f);case 15:return nB(l,u,u.type,u.pendingProps,f);case 19:return uB(l,u,f);case 31:return g=u.pendingProps,f=u.mode,g={mode:g.mode,children:g.children},l===null?(f=QA(g,f),f.ref=u.ref,u.child=f,f.return=u,u=f):(f=ao(l.child,g),f.ref=u.ref,u.child=f,f.return=u,u=f),u;case 22:return iB(l,u,f);case 24:return xc(u),g=sr(Bi),l===null?(x=xE(),x===null&&(x=Fn,S=bE(),x.pooledCache=S,S.refCount++,S!==null&&(x.pooledCacheLanes|=f),x=S),u.memoizedState={parent:g,cache:x},_E(u),sl(u,Bi,x)):((l.lanes&f)!==0&&(wE(l,u),df(u,null,null,f),hf()),x=l.memoizedState,S=u.memoizedState,x.parent!==g?(x={parent:g,cache:g},u.memoizedState=x,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=x),sl(u,Bi,g)):(g=S.cache,sl(u,Bi,g),g!==x.cache&&yE(u,[Bi],f,!0))),ji(l,u,u.pendingProps.children,f),u.child;case 29:throw u.pendingProps}throw Error(i(156,u.tag))}function mo(l){l.flags|=4}function dB(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!bI(u)){if(u=Qs.current,u!==null&&((on&4194048)===on?wa!==null:(on&62914560)!==on&&(on&536870912)===0||u!==wa))throw cf=CE,YM;l.flags|=8192}}function zA(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?Re():536870912,l.lanes|=u,uh|=u)}function yf(l,u){if(!vn)switch(l.tailMode){case"hidden":u=l.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?l.tail=null:f.sibling=null;break;case"collapsed":f=l.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:g.sibling=null}}function Yn(l){var u=l.alternate!==null&&l.alternate.child===l.child,f=0,g=0;if(u)for(var x=l.child;x!==null;)f|=x.lanes|x.childLanes,g|=x.subtreeFlags&65011712,g|=x.flags&65011712,x.return=l,x=x.sibling;else for(x=l.child;x!==null;)f|=x.lanes|x.childLanes,g|=x.subtreeFlags,g|=x.flags,x.return=l,x=x.sibling;return l.subtreeFlags|=g,l.childLanes=f,u}function lQ(l,u,f){var g=u.pendingProps;switch(mE(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yn(u),null;case 1:return Yn(u),null;case 3:return f=u.stateNode,g=null,l!==null&&(g=l.memoizedState.cache),u.memoizedState.cache!==g&&(u.flags|=2048),uo(Bi),Oe(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(l===null||l.child===null)&&(tf(u)?mo(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,VM())),Yn(u),null;case 26:return f=u.memoizedState,l===null?(mo(u),f!==null?(Yn(u),dB(u,f)):(Yn(u),u.flags&=-16777217)):f?f!==l.memoizedState?(mo(u),Yn(u),dB(u,f)):(Yn(u),u.flags&=-16777217):(l.memoizedProps!==g&&mo(u),Yn(u),u.flags&=-16777217),null;case 27:je(u),f=Ne.current;var x=u.type;if(l!==null&&u.stateNode!=null)l.memoizedProps!==g&&mo(u);else{if(!g){if(u.stateNode===null)throw Error(i(166));return Yn(u),null}l=xe.current,tf(u)?HM(u):(l=dI(x,g,f),u.stateNode=l,mo(u))}return Yn(u),null;case 5:if(je(u),f=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==g&&mo(u);else{if(!g){if(u.stateNode===null)throw Error(i(166));return Yn(u),null}if(l=xe.current,tf(u))HM(u);else{switch(x=eg(Ne.current),l){case 1:l=x.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:l=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":l=x.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":l=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":l=x.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof g.is=="string"?x.createElement("select",{is:g.is}):x.createElement("select"),g.multiple?l.multiple=!0:g.size&&(l.size=g.size);break;default:l=typeof g.is=="string"?x.createElement(f,{is:g.is}):x.createElement(f)}}l[Je]=u,l[gt]=g;e:for(x=u.child;x!==null;){if(x.tag===5||x.tag===6)l.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===u)break e;for(;x.sibling===null;){if(x.return===null||x.return===u)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}u.stateNode=l;e:switch(Yi(l,f,g),f){case"button":case"input":case"select":case"textarea":l=!!g.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&mo(u)}}return Yn(u),u.flags&=-16777217,null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==g&&mo(u);else{if(typeof g!="string"&&u.stateNode===null)throw Error(i(166));if(l=Ne.current,tf(u)){if(l=u.stateNode,f=u.memoizedProps,g=null,x=xr,x!==null)switch(x.tag){case 27:case 5:g=x.memoizedProps}l[Je]=u,l=!!(l.nodeValue===f||g!==null&&g.suppressHydrationWarning===!0||sI(l.nodeValue,f)),l||bc(u)}else l=eg(l).createTextNode(g),l[Je]=u,u.stateNode=l}return Yn(u),null;case 13:if(g=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(x=tf(u),g!==null&&g.dehydrated!==null){if(l===null){if(!x)throw Error(i(318));if(x=u.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(i(317));x[Je]=u}else nf(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Yn(u),x=!1}else x=VM(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=x),x=!0;if(!x)return u.flags&256?(fo(u),u):(fo(u),null)}if(fo(u),(u.flags&128)!==0)return u.lanes=f,u;if(f=g!==null,l=l!==null&&l.memoizedState!==null,f){g=u.child,x=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(x=g.alternate.memoizedState.cachePool.pool);var S=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(S=g.memoizedState.cachePool.pool),S!==x&&(g.flags|=2048)}return f!==l&&f&&(u.child.flags|=8192),zA(u,u.updateQueue),Yn(u),null;case 4:return Oe(),l===null&&Mx(u.stateNode.containerInfo),Yn(u),null;case 10:return uo(u.type),Yn(u),null;case 19:if(me(Ii),x=u.memoizedState,x===null)return Yn(u),null;if(g=(u.flags&128)!==0,S=x.rendering,S===null)if(g)yf(x,!1);else{if(ri!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(S=UA(l),S!==null){for(u.flags|=128,yf(x,!1),l=S.updateQueue,u.updateQueue=l,zA(u,l),u.subtreeFlags=0,l=f,f=u.child;f!==null;)QM(f,l),f=f.sibling;return be(Ii,Ii.current&1|2),u.child}l=l.sibling}x.tail!==null&&ne()>VA&&(u.flags|=128,g=!0,yf(x,!1),u.lanes=4194304)}else{if(!g)if(l=UA(S),l!==null){if(u.flags|=128,g=!0,l=l.updateQueue,u.updateQueue=l,zA(u,l),yf(x,!0),x.tail===null&&x.tailMode==="hidden"&&!S.alternate&&!vn)return Yn(u),null}else 2*ne()-x.renderingStartTime>VA&&f!==536870912&&(u.flags|=128,g=!0,yf(x,!1),u.lanes=4194304);x.isBackwards?(S.sibling=u.child,u.child=S):(l=x.last,l!==null?l.sibling=S:u.child=S,x.last=S)}return x.tail!==null?(u=x.tail,x.rendering=u,x.tail=u.sibling,x.renderingStartTime=ne(),u.sibling=null,l=Ii.current,be(Ii,g?l&1|2:l&1),u):(Yn(u),null);case 22:case 23:return fo(u),BE(),g=u.memoizedState!==null,l!==null?l.memoizedState!==null!==g&&(u.flags|=8192):g&&(u.flags|=8192),g?(f&536870912)!==0&&(u.flags&128)===0&&(Yn(u),u.subtreeFlags&6&&(u.flags|=8192)):Yn(u),f=u.updateQueue,f!==null&&zA(u,f.retryQueue),f=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==f&&(u.flags|=2048),l!==null&&me(Cc),null;case 24:return f=null,l!==null&&(f=l.memoizedState.cache),u.memoizedState.cache!==f&&(u.flags|=2048),uo(Bi),Yn(u),null;case 25:return null;case 30:return null}throw Error(i(156,u.tag))}function cQ(l,u){switch(mE(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return uo(Bi),Oe(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return je(u),null;case 13:if(fo(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(i(340));nf()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return me(Ii),null;case 4:return Oe(),null;case 10:return uo(u.type),null;case 22:case 23:return fo(u),BE(),l!==null&&me(Cc),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return uo(Bi),null;case 25:return null;default:return null}}function fB(l,u){switch(mE(u),u.tag){case 3:uo(Bi),Oe();break;case 26:case 27:case 5:je(u);break;case 4:Oe();break;case 13:fo(u);break;case 19:me(Ii);break;case 10:uo(u.type);break;case 22:case 23:fo(u),BE(),l!==null&&me(Cc);break;case 24:uo(Bi)}}function bf(l,u){try{var f=u.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var x=g.next;f=x;do{if((f.tag&l)===l){g=void 0;var S=f.create,F=f.inst;g=S(),F.destroy=g}f=f.next}while(f!==x)}}catch(H){Pn(u,u.return,H)}}function dl(l,u,f){try{var g=u.updateQueue,x=g!==null?g.lastEffect:null;if(x!==null){var S=x.next;g=S;do{if((g.tag&l)===l){var F=g.inst,H=F.destroy;if(H!==void 0){F.destroy=void 0,x=u;var te=f,ye=H;try{ye()}catch(Pe){Pn(x,te,Pe)}}}g=g.next}while(g!==S)}}catch(Pe){Pn(u,u.return,Pe)}}function pB(l){var u=l.updateQueue;if(u!==null){var f=l.stateNode;try{tT(u,f)}catch(g){Pn(l,l.return,g)}}}function mB(l,u,f){f.props=wc(l.type,l.memoizedProps),f.state=l.memoizedState;try{f.componentWillUnmount()}catch(g){Pn(l,u,g)}}function Ef(l,u){try{var f=l.ref;if(f!==null){switch(l.tag){case 26:case 27:case 5:var g=l.stateNode;break;case 30:g=l.stateNode;break;default:g=l.stateNode}typeof f=="function"?l.refCleanup=f(g):f.current=g}}catch(x){Pn(l,u,x)}}function Sa(l,u){var f=l.ref,g=l.refCleanup;if(f!==null)if(typeof g=="function")try{g()}catch(x){Pn(l,u,x)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(x){Pn(l,u,x)}else f.current=null}function AB(l){var u=l.type,f=l.memoizedProps,g=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":f.autoFocus&&g.focus();break e;case"img":f.src?g.src=f.src:f.srcSet&&(g.srcset=f.srcSet)}}catch(x){Pn(l,l.return,x)}}function ix(l,u,f){try{var g=l.stateNode;IQ(g,l.type,f,u),g[gt]=u}catch(x){Pn(l,l.return,x)}}function gB(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&bl(l.type)||l.tag===4}function rx(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||gB(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&bl(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function sx(l,u,f){var g=l.tag;if(g===5||g===6)l=l.stateNode,u?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(l,u):(u=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,u.appendChild(l),f=f._reactRootContainer,f!=null||u.onclick!==null||(u.onclick=$A));else if(g!==4&&(g===27&&bl(l.type)&&(f=l.stateNode,u=null),l=l.child,l!==null))for(sx(l,u,f),l=l.sibling;l!==null;)sx(l,u,f),l=l.sibling}function HA(l,u,f){var g=l.tag;if(g===5||g===6)l=l.stateNode,u?f.insertBefore(l,u):f.appendChild(l);else if(g!==4&&(g===27&&bl(l.type)&&(f=l.stateNode),l=l.child,l!==null))for(HA(l,u,f),l=l.sibling;l!==null;)HA(l,u,f),l=l.sibling}function vB(l){var u=l.stateNode,f=l.memoizedProps;try{for(var g=l.type,x=u.attributes;x.length;)u.removeAttributeNode(x[0]);Yi(u,g,f),u[Je]=l,u[gt]=f}catch(S){Pn(l,l.return,S)}}var Ao=!1,hi=!1,ax=!1,yB=typeof WeakSet=="function"?WeakSet:Set,Qi=null;function uQ(l,u){if(l=l.containerInfo,Ix=ag,l=IM(l),rE(l)){if("selectionStart"in l)var f={start:l.selectionStart,end:l.selectionEnd};else e:{f=(f=l.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var x=g.anchorOffset,S=g.focusNode;g=g.focusOffset;try{f.nodeType,S.nodeType}catch{f=null;break e}var F=0,H=-1,te=-1,ye=0,Pe=0,Qe=l,_e=null;t:for(;;){for(var Se;Qe!==f||x!==0&&Qe.nodeType!==3||(H=F+x),Qe!==S||g!==0&&Qe.nodeType!==3||(te=F+g),Qe.nodeType===3&&(F+=Qe.nodeValue.length),(Se=Qe.firstChild)!==null;)_e=Qe,Qe=Se;for(;;){if(Qe===l)break t;if(_e===f&&++ye===x&&(H=F),_e===S&&++Pe===g&&(te=F),(Se=Qe.nextSibling)!==null)break;Qe=_e,_e=Qe.parentNode}Qe=Se}f=H===-1||te===-1?null:{start:H,end:te}}else f=null}f=f||{start:0,end:0}}else f=null;for(Rx={focusedElem:l,selectionRange:f},ag=!1,Qi=u;Qi!==null;)if(u=Qi,l=u.child,(u.subtreeFlags&1024)!==0&&l!==null)l.return=u,Qi=l;else for(;Qi!==null;){switch(u=Qi,S=u.alternate,l=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&S!==null){l=void 0,f=u,x=S.memoizedProps,S=S.memoizedState,g=f.stateNode;try{var Rt=wc(f.type,x,f.elementType===f.type);l=g.getSnapshotBeforeUpdate(Rt,S),g.__reactInternalSnapshotBeforeUpdate=l}catch(Mt){Pn(f,f.return,Mt)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,f=l.nodeType,f===9)Ox(l);else if(f===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":Ox(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(i(163))}if(l=u.sibling,l!==null){l.return=u.return,Qi=l;break}Qi=u.return}}function bB(l,u,f){var g=f.flags;switch(f.tag){case 0:case 11:case 15:fl(l,f),g&4&&bf(5,f);break;case 1:if(fl(l,f),g&4)if(l=f.stateNode,u===null)try{l.componentDidMount()}catch(F){Pn(f,f.return,F)}else{var x=wc(f.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(x,u,l.__reactInternalSnapshotBeforeUpdate)}catch(F){Pn(f,f.return,F)}}g&64&&pB(f),g&512&&Ef(f,f.return);break;case 3:if(fl(l,f),g&64&&(l=f.updateQueue,l!==null)){if(u=null,f.child!==null)switch(f.child.tag){case 27:case 5:u=f.child.stateNode;break;case 1:u=f.child.stateNode}try{tT(l,u)}catch(F){Pn(f,f.return,F)}}break;case 27:u===null&&g&4&&vB(f);case 26:case 5:fl(l,f),u===null&&g&4&&AB(f),g&512&&Ef(f,f.return);break;case 12:fl(l,f);break;case 13:fl(l,f),g&4&&CB(l,f),g&64&&(l=f.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(f=yQ.bind(null,f),kQ(l,f))));break;case 22:if(g=f.memoizedState!==null||Ao,!g){u=u!==null&&u.memoizedState!==null||hi,x=Ao;var S=hi;Ao=g,(hi=u)&&!S?pl(l,f,(f.subtreeFlags&8772)!==0):fl(l,f),Ao=x,hi=S}break;case 30:break;default:fl(l,f)}}function EB(l){var u=l.alternate;u!==null&&(l.alternate=null,EB(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&An(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Vn=null,Vr=!1;function go(l,u,f){for(f=f.child;f!==null;)xB(l,u,f),f=f.sibling}function xB(l,u,f){if(N&&typeof N.onCommitFiberUnmount=="function")try{N.onCommitFiberUnmount(q,f)}catch{}switch(f.tag){case 26:hi||Sa(f,u),go(l,u,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:hi||Sa(f,u);var g=Vn,x=Vr;bl(f.type)&&(Vn=f.stateNode,Vr=!1),go(l,u,f),If(f.stateNode),Vn=g,Vr=x;break;case 5:hi||Sa(f,u);case 6:if(g=Vn,x=Vr,Vn=null,go(l,u,f),Vn=g,Vr=x,Vn!==null)if(Vr)try{(Vn.nodeType===9?Vn.body:Vn.nodeName==="HTML"?Vn.ownerDocument.body:Vn).removeChild(f.stateNode)}catch(S){Pn(f,u,S)}else try{Vn.removeChild(f.stateNode)}catch(S){Pn(f,u,S)}break;case 18:Vn!==null&&(Vr?(l=Vn,uI(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,f.stateNode),Nf(l)):uI(Vn,f.stateNode));break;case 4:g=Vn,x=Vr,Vn=f.stateNode.containerInfo,Vr=!0,go(l,u,f),Vn=g,Vr=x;break;case 0:case 11:case 14:case 15:hi||dl(2,f,u),hi||dl(4,f,u),go(l,u,f);break;case 1:hi||(Sa(f,u),g=f.stateNode,typeof g.componentWillUnmount=="function"&&mB(f,u,g)),go(l,u,f);break;case 21:go(l,u,f);break;case 22:hi=(g=hi)||f.memoizedState!==null,go(l,u,f),hi=g;break;default:go(l,u,f)}}function CB(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Nf(l)}catch(f){Pn(u,u.return,f)}}function hQ(l){switch(l.tag){case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new yB),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new yB),u;default:throw Error(i(435,l.tag))}}function ox(l,u){var f=hQ(l);u.forEach(function(g){var x=bQ.bind(null,l,g);f.has(g)||(f.add(g),g.then(x,x))})}function hs(l,u){var f=u.deletions;if(f!==null)for(var g=0;g<f.length;g++){var x=f[g],S=l,F=u,H=F;e:for(;H!==null;){switch(H.tag){case 27:if(bl(H.type)){Vn=H.stateNode,Vr=!1;break e}break;case 5:Vn=H.stateNode,Vr=!1;break e;case 3:case 4:Vn=H.stateNode.containerInfo,Vr=!0;break e}H=H.return}if(Vn===null)throw Error(i(160));xB(S,F,x),Vn=null,Vr=!1,S=x.alternate,S!==null&&(S.return=null),x.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)_B(u,l),u=u.sibling}var sa=null;function _B(l,u){var f=l.alternate,g=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:hs(u,l),ds(l),g&4&&(dl(3,l,l.return),bf(3,l),dl(5,l,l.return));break;case 1:hs(u,l),ds(l),g&512&&(hi||f===null||Sa(f,f.return)),g&64&&Ao&&(l=l.updateQueue,l!==null&&(g=l.callbacks,g!==null&&(f=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=f===null?g:f.concat(g))));break;case 26:var x=sa;if(hs(u,l),ds(l),g&512&&(hi||f===null||Sa(f,f.return)),g&4){var S=f!==null?f.memoizedState:null;if(g=l.memoizedState,f===null)if(g===null)if(l.stateNode===null){e:{g=l.type,f=l.memoizedProps,x=x.ownerDocument||x;t:switch(g){case"title":S=x.getElementsByTagName("title")[0],(!S||S[zn]||S[Je]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=x.createElement(g),x.head.insertBefore(S,x.querySelector("head > title"))),Yi(S,g,f),S[Je]=l,an(S),g=S;break e;case"link":var F=vI("link","href",x).get(g+(f.href||""));if(F){for(var H=0;H<F.length;H++)if(S=F[H],S.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&S.getAttribute("rel")===(f.rel==null?null:f.rel)&&S.getAttribute("title")===(f.title==null?null:f.title)&&S.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){F.splice(H,1);break t}}S=x.createElement(g),Yi(S,g,f),x.head.appendChild(S);break;case"meta":if(F=vI("meta","content",x).get(g+(f.content||""))){for(H=0;H<F.length;H++)if(S=F[H],S.getAttribute("content")===(f.content==null?null:""+f.content)&&S.getAttribute("name")===(f.name==null?null:f.name)&&S.getAttribute("property")===(f.property==null?null:f.property)&&S.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&S.getAttribute("charset")===(f.charSet==null?null:f.charSet)){F.splice(H,1);break t}}S=x.createElement(g),Yi(S,g,f),x.head.appendChild(S);break;default:throw Error(i(468,g))}S[Je]=l,an(S),g=S}l.stateNode=g}else yI(x,l.type,l.stateNode);else l.stateNode=gI(x,g,l.memoizedProps);else S!==g?(S===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):S.count--,g===null?yI(x,l.type,l.stateNode):gI(x,g,l.memoizedProps)):g===null&&l.stateNode!==null&&ix(l,l.memoizedProps,f.memoizedProps)}break;case 27:hs(u,l),ds(l),g&512&&(hi||f===null||Sa(f,f.return)),f!==null&&g&4&&ix(l,l.memoizedProps,f.memoizedProps);break;case 5:if(hs(u,l),ds(l),g&512&&(hi||f===null||Sa(f,f.return)),l.flags&32){x=l.stateNode;try{Er(x,"")}catch(Se){Pn(l,l.return,Se)}}g&4&&l.stateNode!=null&&(x=l.memoizedProps,ix(l,x,f!==null?f.memoizedProps:x)),g&1024&&(ax=!0);break;case 6:if(hs(u,l),ds(l),g&4){if(l.stateNode===null)throw Error(i(162));g=l.memoizedProps,f=l.stateNode;try{f.nodeValue=g}catch(Se){Pn(l,l.return,Se)}}break;case 3:if(ig=null,x=sa,sa=tg(u.containerInfo),hs(u,l),sa=x,ds(l),g&4&&f!==null&&f.memoizedState.isDehydrated)try{Nf(u.containerInfo)}catch(Se){Pn(l,l.return,Se)}ax&&(ax=!1,wB(l));break;case 4:g=sa,sa=tg(l.stateNode.containerInfo),hs(u,l),ds(l),sa=g;break;case 12:hs(u,l),ds(l);break;case 13:hs(u,l),ds(l),l.child.flags&8192&&l.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(fx=ne()),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,ox(l,g)));break;case 22:x=l.memoizedState!==null;var te=f!==null&&f.memoizedState!==null,ye=Ao,Pe=hi;if(Ao=ye||x,hi=Pe||te,hs(u,l),hi=Pe,Ao=ye,ds(l),g&8192)e:for(u=l.stateNode,u._visibility=x?u._visibility&-2:u._visibility|1,x&&(f===null||te||Ao||hi||Sc(l)),f=null,u=l;;){if(u.tag===5||u.tag===26){if(f===null){te=f=u;try{if(S=te.stateNode,x)F=S.style,typeof F.setProperty=="function"?F.setProperty("display","none","important"):F.display="none";else{H=te.stateNode;var Qe=te.memoizedProps.style,_e=Qe!=null&&Qe.hasOwnProperty("display")?Qe.display:null;H.style.display=_e==null||typeof _e=="boolean"?"":(""+_e).trim()}}catch(Se){Pn(te,te.return,Se)}}}else if(u.tag===6){if(f===null){te=u;try{te.stateNode.nodeValue=x?"":te.memoizedProps}catch(Se){Pn(te,te.return,Se)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;f===u&&(f=null),u=u.return}f===u&&(f=null),u.sibling.return=u.return,u=u.sibling}g&4&&(g=l.updateQueue,g!==null&&(f=g.retryQueue,f!==null&&(g.retryQueue=null,ox(l,f))));break;case 19:hs(u,l),ds(l),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,ox(l,g)));break;case 30:break;case 21:break;default:hs(u,l),ds(l)}}function ds(l){var u=l.flags;if(u&2){try{for(var f,g=l.return;g!==null;){if(gB(g)){f=g;break}g=g.return}if(f==null)throw Error(i(160));switch(f.tag){case 27:var x=f.stateNode,S=rx(l);HA(l,S,x);break;case 5:var F=f.stateNode;f.flags&32&&(Er(F,""),f.flags&=-33);var H=rx(l);HA(l,H,F);break;case 3:case 4:var te=f.stateNode.containerInfo,ye=rx(l);sx(l,ye,te);break;default:throw Error(i(161))}}catch(Pe){Pn(l,l.return,Pe)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function wB(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;wB(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function fl(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)bB(l,u.alternate,u),u=u.sibling}function Sc(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:dl(4,u,u.return),Sc(u);break;case 1:Sa(u,u.return);var f=u.stateNode;typeof f.componentWillUnmount=="function"&&mB(u,u.return,f),Sc(u);break;case 27:If(u.stateNode);case 26:case 5:Sa(u,u.return),Sc(u);break;case 22:u.memoizedState===null&&Sc(u);break;case 30:Sc(u);break;default:Sc(u)}l=l.sibling}}function pl(l,u,f){for(f=f&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var g=u.alternate,x=l,S=u,F=S.flags;switch(S.tag){case 0:case 11:case 15:pl(x,S,f),bf(4,S);break;case 1:if(pl(x,S,f),g=S,x=g.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(ye){Pn(g,g.return,ye)}if(g=S,x=g.updateQueue,x!==null){var H=g.stateNode;try{var te=x.shared.hiddenCallbacks;if(te!==null)for(x.shared.hiddenCallbacks=null,x=0;x<te.length;x++)eT(te[x],H)}catch(ye){Pn(g,g.return,ye)}}f&&F&64&&pB(S),Ef(S,S.return);break;case 27:vB(S);case 26:case 5:pl(x,S,f),f&&g===null&&F&4&&AB(S),Ef(S,S.return);break;case 12:pl(x,S,f);break;case 13:pl(x,S,f),f&&F&4&&CB(x,S);break;case 22:S.memoizedState===null&&pl(x,S,f),Ef(S,S.return);break;case 30:break;default:pl(x,S,f)}u=u.sibling}}function lx(l,u){var f=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==f&&(l!=null&&l.refCount++,f!=null&&af(f))}function cx(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&af(l))}function Ma(l,u,f,g){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)SB(l,u,f,g),u=u.sibling}function SB(l,u,f,g){var x=u.flags;switch(u.tag){case 0:case 11:case 15:Ma(l,u,f,g),x&2048&&bf(9,u);break;case 1:Ma(l,u,f,g);break;case 3:Ma(l,u,f,g),x&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&af(l)));break;case 12:if(x&2048){Ma(l,u,f,g),l=u.stateNode;try{var S=u.memoizedProps,F=S.id,H=S.onPostCommit;typeof H=="function"&&H(F,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(te){Pn(u,u.return,te)}}else Ma(l,u,f,g);break;case 13:Ma(l,u,f,g);break;case 23:break;case 22:S=u.stateNode,F=u.alternate,u.memoizedState!==null?S._visibility&2?Ma(l,u,f,g):xf(l,u):S._visibility&2?Ma(l,u,f,g):(S._visibility|=2,oh(l,u,f,g,(u.subtreeFlags&10256)!==0)),x&2048&&lx(F,u);break;case 24:Ma(l,u,f,g),x&2048&&cx(u.alternate,u);break;default:Ma(l,u,f,g)}}function oh(l,u,f,g,x){for(x=x&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var S=l,F=u,H=f,te=g,ye=F.flags;switch(F.tag){case 0:case 11:case 15:oh(S,F,H,te,x),bf(8,F);break;case 23:break;case 22:var Pe=F.stateNode;F.memoizedState!==null?Pe._visibility&2?oh(S,F,H,te,x):xf(S,F):(Pe._visibility|=2,oh(S,F,H,te,x)),x&&ye&2048&&lx(F.alternate,F);break;case 24:oh(S,F,H,te,x),x&&ye&2048&&cx(F.alternate,F);break;default:oh(S,F,H,te,x)}u=u.sibling}}function xf(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var f=l,g=u,x=g.flags;switch(g.tag){case 22:xf(f,g),x&2048&&lx(g.alternate,g);break;case 24:xf(f,g),x&2048&&cx(g.alternate,g);break;default:xf(f,g)}u=u.sibling}}var Cf=8192;function lh(l){if(l.subtreeFlags&Cf)for(l=l.child;l!==null;)MB(l),l=l.sibling}function MB(l){switch(l.tag){case 26:lh(l),l.flags&Cf&&l.memoizedState!==null&&KQ(sa,l.memoizedState,l.memoizedProps);break;case 5:lh(l);break;case 3:case 4:var u=sa;sa=tg(l.stateNode.containerInfo),lh(l),sa=u;break;case 22:l.memoizedState===null&&(u=l.alternate,u!==null&&u.memoizedState!==null?(u=Cf,Cf=16777216,lh(l),Cf=u):lh(l));break;default:lh(l)}}function TB(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function _f(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];Qi=g,IB(g,l)}TB(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)BB(l),l=l.sibling}function BB(l){switch(l.tag){case 0:case 11:case 15:_f(l),l.flags&2048&&dl(9,l,l.return);break;case 3:_f(l);break;case 12:_f(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,GA(l)):_f(l);break;default:_f(l)}}function GA(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];Qi=g,IB(g,l)}TB(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:dl(8,u,u.return),GA(u);break;case 22:f=u.stateNode,f._visibility&2&&(f._visibility&=-3,GA(u));break;default:GA(u)}l=l.sibling}}function IB(l,u){for(;Qi!==null;){var f=Qi;switch(f.tag){case 0:case 11:case 15:dl(8,f,u);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var g=f.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:af(f.memoizedState.cache)}if(g=f.child,g!==null)g.return=f,Qi=g;else e:for(f=l;Qi!==null;){g=Qi;var x=g.sibling,S=g.return;if(EB(g),g===f){Qi=null;break e}if(x!==null){x.return=S,Qi=x;break e}Qi=S}}}var dQ={getCacheForType:function(l){var u=sr(Bi),f=u.data.get(l);return f===void 0&&(f=l(),u.data.set(l,f)),f}},fQ=typeof WeakMap=="function"?WeakMap:Map,_n=0,Fn=null,Zt=null,on=0,wn=0,fs=null,ml=!1,ch=!1,ux=!1,vo=0,ri=0,Al=0,Mc=0,hx=0,zs=0,uh=0,wf=null,Wr=null,dx=!1,fx=0,VA=1/0,WA=null,gl=null,Xi=0,vl=null,hh=null,dh=0,px=0,mx=null,RB=null,Sf=0,Ax=null;function ps(){if((_n&2)!==0&&on!==0)return on&-on;if(z.T!==null){var l=$u;return l!==0?l:Cx()}return We()}function DB(){zs===0&&(zs=(on&536870912)===0||vn?J():536870912);var l=Qs.current;return l!==null&&(l.flags|=32),zs}function ms(l,u,f){(l===Fn&&(wn===2||wn===9)||l.cancelPendingCommit!==null)&&(fh(l,0),yl(l,on,zs,!1)),$e(l,f),((_n&2)===0||l!==Fn)&&(l===Fn&&((_n&2)===0&&(Mc|=f),ri===4&&yl(l,on,zs,!1)),Ta(l))}function LB(l,u,f){if((_n&6)!==0)throw Error(i(327));var g=!f&&(u&124)===0&&(u&l.expiredLanes)===0||ct(l,u),x=g?AQ(l,u):yx(l,u,!0),S=g;do{if(x===0){ch&&!g&&yl(l,u,0,!1);break}else{if(f=l.current.alternate,S&&!pQ(f)){x=yx(l,u,!1),S=!1;continue}if(x===2){if(S=u,l.errorRecoveryDisabledLanes&S)var F=0;else F=l.pendingLanes&-536870913,F=F!==0?F:F&536870912?536870912:0;if(F!==0){u=F;e:{var H=l;x=wf;var te=H.current.memoizedState.isDehydrated;if(te&&(fh(H,F).flags|=256),F=yx(H,F,!1),F!==2){if(ux&&!te){H.errorRecoveryDisabledLanes|=S,Mc|=S,x=4;break e}S=Wr,Wr=x,S!==null&&(Wr===null?Wr=S:Wr.push.apply(Wr,S))}x=F}if(S=!1,x!==2)continue}}if(x===1){fh(l,0),yl(l,u,0,!0);break}e:{switch(g=l,S=x,S){case 0:case 1:throw Error(i(345));case 4:if((u&4194048)!==u)break;case 6:yl(g,u,zs,!ml);break e;case 2:Wr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((u&62914560)===u&&(x=fx+300-ne(),10<x)){if(yl(g,u,zs,!ml),Ze(g,0,!0)!==0)break e;g.timeoutHandle=lI(OB.bind(null,g,f,Wr,WA,dx,u,zs,Mc,uh,ml,S,2,-0,0),x);break e}OB(g,f,Wr,WA,dx,u,zs,Mc,uh,ml,S,0,-0,0)}}break}while(!0);Ta(l)}function OB(l,u,f,g,x,S,F,H,te,ye,Pe,Qe,_e,Se){if(l.timeoutHandle=-1,Qe=u.subtreeFlags,(Qe&8192||(Qe&16785408)===16785408)&&(Lf={stylesheets:null,count:0,unsuspend:YQ},MB(u),Qe=JQ(),Qe!==null)){l.cancelPendingCommit=Qe(zB.bind(null,l,u,S,f,g,x,F,H,te,Pe,1,_e,Se)),yl(l,S,F,!ye);return}zB(l,u,S,f,g,x,F,H,te)}function pQ(l){for(var u=l;;){var f=u.tag;if((f===0||f===11||f===15)&&u.flags&16384&&(f=u.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var g=0;g<f.length;g++){var x=f[g],S=x.getSnapshot;x=x.value;try{if(!cs(S(),x))return!1}catch{return!1}}if(f=u.child,u.subtreeFlags&16384&&f!==null)f.return=u,u=f;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function yl(l,u,f,g){u&=~hx,u&=~Mc,l.suspendedLanes|=u,l.pingedLanes&=~u,g&&(l.warmLanes|=u),g=l.expirationTimes;for(var x=u;0<x;){var S=31-ge(x),F=1<<S;g[S]=-1,x&=~F}f!==0&&at(l,f,u)}function qA(){return(_n&6)===0?(Mf(0),!1):!0}function gx(){if(Zt!==null){if(wn===0)var l=Zt.return;else l=Zt,co=Ec=null,OE(l),sh=null,gf=0,l=Zt;for(;l!==null;)fB(l.alternate,l),l=l.return;Zt=null}}function fh(l,u){var f=l.timeoutHandle;f!==-1&&(l.timeoutHandle=-1,DQ(f)),f=l.cancelPendingCommit,f!==null&&(l.cancelPendingCommit=null,f()),gx(),Fn=l,Zt=f=ao(l.current,null),on=u,wn=0,fs=null,ml=!1,ch=ct(l,u),ux=!1,uh=zs=hx=Mc=Al=ri=0,Wr=wf=null,dx=!1,(u&8)!==0&&(u|=u&32);var g=l.entangledLanes;if(g!==0)for(l=l.entanglements,g&=u;0<g;){var x=31-ge(g),S=1<<x;u|=l[x],g&=~S}return vo=u,pA(),f}function PB(l,u){qt=null,z.H=LA,u===lf||u===CA?(u=ZM(),wn=3):u===YM?(u=ZM(),wn=4):wn=u===$T?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,fs=u,Zt===null&&(ri=1,NA(l,Us(u,l.current)))}function UB(){var l=z.H;return z.H=LA,l===null?LA:l}function kB(){var l=z.A;return z.A=dQ,l}function vx(){ri=4,ml||(on&4194048)!==on&&Qs.current!==null||(ch=!0),(Al&134217727)===0&&(Mc&134217727)===0||Fn===null||yl(Fn,on,zs,!1)}function yx(l,u,f){var g=_n;_n|=2;var x=UB(),S=kB();(Fn!==l||on!==u)&&(WA=null,fh(l,u)),u=!1;var F=ri;e:do try{if(wn!==0&&Zt!==null){var H=Zt,te=fs;switch(wn){case 8:gx(),F=6;break e;case 3:case 2:case 9:case 6:Qs.current===null&&(u=!0);var ye=wn;if(wn=0,fs=null,ph(l,H,te,ye),f&&ch){F=0;break e}break;default:ye=wn,wn=0,fs=null,ph(l,H,te,ye)}}mQ(),F=ri;break}catch(Pe){PB(l,Pe)}while(!0);return u&&l.shellSuspendCounter++,co=Ec=null,_n=g,z.H=x,z.A=S,Zt===null&&(Fn=null,on=0,pA()),F}function mQ(){for(;Zt!==null;)NB(Zt)}function AQ(l,u){var f=_n;_n|=2;var g=UB(),x=kB();Fn!==l||on!==u?(WA=null,VA=ne()+500,fh(l,u)):ch=ct(l,u);e:do try{if(wn!==0&&Zt!==null){u=Zt;var S=fs;t:switch(wn){case 1:wn=0,fs=null,ph(l,u,S,1);break;case 2:case 9:if(KM(S)){wn=0,fs=null,FB(u);break}u=function(){wn!==2&&wn!==9||Fn!==l||(wn=7),Ta(l)},S.then(u,u);break e;case 3:wn=7;break e;case 4:wn=5;break e;case 7:KM(S)?(wn=0,fs=null,FB(u)):(wn=0,fs=null,ph(l,u,S,7));break;case 5:var F=null;switch(Zt.tag){case 26:F=Zt.memoizedState;case 5:case 27:var H=Zt;if(!F||bI(F)){wn=0,fs=null;var te=H.sibling;if(te!==null)Zt=te;else{var ye=H.return;ye!==null?(Zt=ye,jA(ye)):Zt=null}break t}}wn=0,fs=null,ph(l,u,S,5);break;case 6:wn=0,fs=null,ph(l,u,S,6);break;case 8:gx(),ri=6;break e;default:throw Error(i(462))}}gQ();break}catch(Pe){PB(l,Pe)}while(!0);return co=Ec=null,z.H=g,z.A=x,_n=f,Zt!==null?0:(Fn=null,on=0,pA(),ri)}function gQ(){for(;Zt!==null&&!Y();)NB(Zt)}function NB(l){var u=hB(l.alternate,l,vo);l.memoizedProps=l.pendingProps,u===null?jA(l):Zt=u}function FB(l){var u=l,f=u.alternate;switch(u.tag){case 15:case 0:u=sB(f,u,u.pendingProps,u.type,void 0,on);break;case 11:u=sB(f,u,u.pendingProps,u.type.render,u.ref,on);break;case 5:OE(u);default:fB(f,u),u=Zt=QM(u,vo),u=hB(f,u,vo)}l.memoizedProps=l.pendingProps,u===null?jA(l):Zt=u}function ph(l,u,f,g){co=Ec=null,OE(u),sh=null,gf=0;var x=u.return;try{if(aQ(l,x,u,f,on)){ri=1,NA(l,Us(f,l.current)),Zt=null;return}}catch(S){if(x!==null)throw Zt=x,S;ri=1,NA(l,Us(f,l.current)),Zt=null;return}u.flags&32768?(vn||g===1?l=!0:ch||(on&536870912)!==0?l=!1:(ml=l=!0,(g===2||g===9||g===3||g===6)&&(g=Qs.current,g!==null&&g.tag===13&&(g.flags|=16384))),QB(u,l)):jA(u)}function jA(l){var u=l;do{if((u.flags&32768)!==0){QB(u,ml);return}l=u.return;var f=lQ(u.alternate,u,vo);if(f!==null){Zt=f;return}if(u=u.sibling,u!==null){Zt=u;return}Zt=u=l}while(u!==null);ri===0&&(ri=5)}function QB(l,u){do{var f=cQ(l.alternate,l);if(f!==null){f.flags&=32767,Zt=f;return}if(f=l.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!u&&(l=l.sibling,l!==null)){Zt=l;return}Zt=l=f}while(l!==null);ri=6,Zt=null}function zB(l,u,f,g,x,S,F,H,te){l.cancelPendingCommit=null;do XA();while(Xi!==0);if((_n&6)!==0)throw Error(i(327));if(u!==null){if(u===l.current)throw Error(i(177));if(S=u.lanes|u.childLanes,S|=cE,et(l,f,S,F,H,te),l===Fn&&(Zt=Fn=null,on=0),hh=u,vl=l,dh=f,px=S,mx=x,RB=g,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,EQ(W,function(){return qB(),null})):(l.callbackNode=null,l.callbackPriority=0),g=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||g){g=z.T,z.T=null,x=j.p,j.p=2,F=_n,_n|=4;try{uQ(l,u,f)}finally{_n=F,j.p=x,z.T=g}}Xi=1,HB(),GB(),VB()}}function HB(){if(Xi===1){Xi=0;var l=vl,u=hh,f=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||f){f=z.T,z.T=null;var g=j.p;j.p=2;var x=_n;_n|=4;try{_B(u,l);var S=Rx,F=IM(l.containerInfo),H=S.focusedElem,te=S.selectionRange;if(F!==H&&H&&H.ownerDocument&&BM(H.ownerDocument.documentElement,H)){if(te!==null&&rE(H)){var ye=te.start,Pe=te.end;if(Pe===void 0&&(Pe=ye),"selectionStart"in H)H.selectionStart=ye,H.selectionEnd=Math.min(Pe,H.value.length);else{var Qe=H.ownerDocument||document,_e=Qe&&Qe.defaultView||window;if(_e.getSelection){var Se=_e.getSelection(),Rt=H.textContent.length,Mt=Math.min(te.start,Rt),Rn=te.end===void 0?Mt:Math.min(te.end,Rt);!Se.extend&&Mt>Rn&&(F=Rn,Rn=Mt,Mt=F);var pe=TM(H,Mt),le=TM(H,Rn);if(pe&&le&&(Se.rangeCount!==1||Se.anchorNode!==pe.node||Se.anchorOffset!==pe.offset||Se.focusNode!==le.node||Se.focusOffset!==le.offset)){var ve=Qe.createRange();ve.setStart(pe.node,pe.offset),Se.removeAllRanges(),Mt>Rn?(Se.addRange(ve),Se.extend(le.node,le.offset)):(ve.setEnd(le.node,le.offset),Se.addRange(ve))}}}}for(Qe=[],Se=H;Se=Se.parentNode;)Se.nodeType===1&&Qe.push({element:Se,left:Se.scrollLeft,top:Se.scrollTop});for(typeof H.focus=="function"&&H.focus(),H=0;H<Qe.length;H++){var ke=Qe[H];ke.element.scrollLeft=ke.left,ke.element.scrollTop=ke.top}}ag=!!Ix,Rx=Ix=null}finally{_n=x,j.p=g,z.T=f}}l.current=u,Xi=2}}function GB(){if(Xi===2){Xi=0;var l=vl,u=hh,f=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||f){f=z.T,z.T=null;var g=j.p;j.p=2;var x=_n;_n|=4;try{bB(l,u.alternate,u)}finally{_n=x,j.p=g,z.T=f}}Xi=3}}function VB(){if(Xi===4||Xi===3){Xi=0,ze();var l=vl,u=hh,f=dh,g=RB;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Xi=5:(Xi=0,hh=vl=null,WB(l,l.pendingLanes));var x=l.pendingLanes;if(x===0&&(gl=null),it(f),u=u.stateNode,N&&typeof N.onCommitFiberRoot=="function")try{N.onCommitFiberRoot(q,u,void 0,(u.current.flags&128)===128)}catch{}if(g!==null){u=z.T,x=j.p,j.p=2,z.T=null;try{for(var S=l.onRecoverableError,F=0;F<g.length;F++){var H=g[F];S(H.value,{componentStack:H.stack})}}finally{z.T=u,j.p=x}}(dh&3)!==0&&XA(),Ta(l),x=l.pendingLanes,(f&4194090)!==0&&(x&42)!==0?l===Ax?Sf++:(Sf=0,Ax=l):Sf=0,Mf(0)}}function WB(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,af(u)))}function XA(l){return HB(),GB(),VB(),qB()}function qB(){if(Xi!==5)return!1;var l=vl,u=px;px=0;var f=it(dh),g=z.T,x=j.p;try{j.p=32>f?32:f,z.T=null,f=mx,mx=null;var S=vl,F=dh;if(Xi=0,hh=vl=null,dh=0,(_n&6)!==0)throw Error(i(331));var H=_n;if(_n|=4,BB(S.current),SB(S,S.current,F,f),_n=H,Mf(0,!1),N&&typeof N.onPostCommitFiberRoot=="function")try{N.onPostCommitFiberRoot(q,S)}catch{}return!0}finally{j.p=x,z.T=g,WB(l,u)}}function jB(l,u,f){u=Us(f,u),u=XE(l.stateNode,u,2),l=ll(l,u,2),l!==null&&($e(l,2),Ta(l))}function Pn(l,u,f){if(l.tag===3)jB(l,l,f);else for(;u!==null;){if(u.tag===3){jB(u,l,f);break}else if(u.tag===1){var g=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(gl===null||!gl.has(g))){l=Us(f,l),f=JT(2),g=ll(u,f,2),g!==null&&(ZT(f,g,u,l),$e(g,2),Ta(g));break}}u=u.return}}function bx(l,u,f){var g=l.pingCache;if(g===null){g=l.pingCache=new fQ;var x=new Set;g.set(u,x)}else x=g.get(u),x===void 0&&(x=new Set,g.set(u,x));x.has(f)||(ux=!0,x.add(f),l=vQ.bind(null,l,u,f),u.then(l,l))}function vQ(l,u,f){var g=l.pingCache;g!==null&&g.delete(u),l.pingedLanes|=l.suspendedLanes&f,l.warmLanes&=~f,Fn===l&&(on&f)===f&&(ri===4||ri===3&&(on&62914560)===on&&300>ne()-fx?(_n&2)===0&&fh(l,0):hx|=f,uh===on&&(uh=0)),Ta(l)}function XB(l,u){u===0&&(u=Re()),l=Yu(l,u),l!==null&&($e(l,u),Ta(l))}function yQ(l){var u=l.memoizedState,f=0;u!==null&&(f=u.retryLane),XB(l,f)}function bQ(l,u){var f=0;switch(l.tag){case 13:var g=l.stateNode,x=l.memoizedState;x!==null&&(f=x.retryLane);break;case 19:g=l.stateNode;break;case 22:g=l.stateNode._retryCache;break;default:throw Error(i(314))}g!==null&&g.delete(u),XB(l,f)}function EQ(l,u){return Ce(l,u)}var YA=null,mh=null,Ex=!1,KA=!1,xx=!1,Tc=0;function Ta(l){l!==mh&&l.next===null&&(mh===null?YA=mh=l:mh=mh.next=l),KA=!0,Ex||(Ex=!0,CQ())}function Mf(l,u){if(!xx&&KA){xx=!0;do for(var f=!1,g=YA;g!==null;){if(l!==0){var x=g.pendingLanes;if(x===0)var S=0;else{var F=g.suspendedLanes,H=g.pingedLanes;S=(1<<31-ge(42|l)+1)-1,S&=x&~(F&~H),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(f=!0,ZB(g,S))}else S=on,S=Ze(g,g===Fn?S:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(S&3)===0||ct(g,S)||(f=!0,ZB(g,S));g=g.next}while(f);xx=!1}}function xQ(){YB()}function YB(){KA=Ex=!1;var l=0;Tc!==0&&(RQ()&&(l=Tc),Tc=0);for(var u=ne(),f=null,g=YA;g!==null;){var x=g.next,S=KB(g,u);S===0?(g.next=null,f===null?YA=x:f.next=x,x===null&&(mh=f)):(f=g,(l!==0||(S&3)!==0)&&(KA=!0)),g=x}Mf(l)}function KB(l,u){for(var f=l.suspendedLanes,g=l.pingedLanes,x=l.expirationTimes,S=l.pendingLanes&-62914561;0<S;){var F=31-ge(S),H=1<<F,te=x[F];te===-1?((H&f)===0||(H&g)!==0)&&(x[F]=Dt(H,u)):te<=u&&(l.expiredLanes|=H),S&=~H}if(u=Fn,f=on,f=Ze(l,l===u?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g=l.callbackNode,f===0||l===u&&(wn===2||wn===9)||l.cancelPendingCommit!==null)return g!==null&&g!==null&&Be(g),l.callbackNode=null,l.callbackPriority=0;if((f&3)===0||ct(l,f)){if(u=f&-f,u===l.callbackPriority)return u;switch(g!==null&&Be(g),it(f)){case 2:case 8:f=Q;break;case 32:f=W;break;case 268435456:f=he;break;default:f=W}return g=JB.bind(null,l),f=Ce(f,g),l.callbackPriority=u,l.callbackNode=f,u}return g!==null&&g!==null&&Be(g),l.callbackPriority=2,l.callbackNode=null,2}function JB(l,u){if(Xi!==0&&Xi!==5)return l.callbackNode=null,l.callbackPriority=0,null;var f=l.callbackNode;if(XA()&&l.callbackNode!==f)return null;var g=on;return g=Ze(l,l===Fn?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g===0?null:(LB(l,g,u),KB(l,ne()),l.callbackNode!=null&&l.callbackNode===f?JB.bind(null,l):null)}function ZB(l,u){if(XA())return null;LB(l,u,!0)}function CQ(){LQ(function(){(_n&6)!==0?Ce(O,xQ):YB()})}function Cx(){return Tc===0&&(Tc=J()),Tc}function $B(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:oA(""+l)}function eI(l,u){var f=u.ownerDocument.createElement("input");return f.name=u.name,f.value=u.value,l.id&&f.setAttribute("form",l.id),u.parentNode.insertBefore(f,u),l=new FormData(l),f.parentNode.removeChild(f),l}function _Q(l,u,f,g,x){if(u==="submit"&&f&&f.stateNode===x){var S=$B((x[gt]||null).action),F=g.submitter;F&&(u=(u=F[gt]||null)?$B(u.formAction):F.getAttribute("formAction"),u!==null&&(S=u,F=null));var H=new hA("action","action",null,g,x);l.push({event:H,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Tc!==0){var te=F?eI(x,F):new FormData(x);GE(f,{pending:!0,data:te,method:x.method,action:S},null,te)}}else typeof S=="function"&&(H.preventDefault(),te=F?eI(x,F):new FormData(x),GE(f,{pending:!0,data:te,method:x.method,action:S},S,te))},currentTarget:x}]})}}for(var _x=0;_x<lE.length;_x++){var wx=lE[_x],wQ=wx.toLowerCase(),SQ=wx[0].toUpperCase()+wx.slice(1);ra(wQ,"on"+SQ)}ra(LM,"onAnimationEnd"),ra(OM,"onAnimationIteration"),ra(PM,"onAnimationStart"),ra("dblclick","onDoubleClick"),ra("focusin","onFocus"),ra("focusout","onBlur"),ra(G8,"onTransitionRun"),ra(V8,"onTransitionStart"),ra(W8,"onTransitionCancel"),ra(UM,"onTransitionEnd"),Hn("onMouseEnter",["mouseout","mouseover"]),Hn("onMouseLeave",["mouseout","mouseover"]),Hn("onPointerEnter",["pointerout","pointerover"]),Hn("onPointerLeave",["pointerout","pointerover"]),On("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),On("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),On("onBeforeInput",["compositionend","keypress","textInput","paste"]),On("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),On("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),On("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MQ=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Tf));function tI(l,u){u=(u&4)!==0;for(var f=0;f<l.length;f++){var g=l[f],x=g.event;g=g.listeners;e:{var S=void 0;if(u)for(var F=g.length-1;0<=F;F--){var H=g[F],te=H.instance,ye=H.currentTarget;if(H=H.listener,te!==S&&x.isPropagationStopped())break e;S=H,x.currentTarget=ye;try{S(x)}catch(Pe){kA(Pe)}x.currentTarget=null,S=te}else for(F=0;F<g.length;F++){if(H=g[F],te=H.instance,ye=H.currentTarget,H=H.listener,te!==S&&x.isPropagationStopped())break e;S=H,x.currentTarget=ye;try{S(x)}catch(Pe){kA(Pe)}x.currentTarget=null,S=te}}}}function $t(l,u){var f=u[Tt];f===void 0&&(f=u[Tt]=new Set);var g=l+"__bubble";f.has(g)||(nI(u,l,2,!1),f.add(g))}function Sx(l,u,f){var g=0;u&&(g|=4),nI(f,l,g,u)}var JA="_reactListening"+Math.random().toString(36).slice(2);function Mx(l){if(!l[JA]){l[JA]=!0,br.forEach(function(f){f!=="selectionchange"&&(MQ.has(f)||Sx(f,!1,l),Sx(f,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[JA]||(u[JA]=!0,Sx("selectionchange",!1,u))}}function nI(l,u,f,g){switch(SI(u)){case 2:var x=ez;break;case 8:x=tz;break;default:x=zx}f=x.bind(null,u,f,l),x=void 0,!Yb||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(x=!0),g?x!==void 0?l.addEventListener(u,f,{capture:!0,passive:x}):l.addEventListener(u,f,!0):x!==void 0?l.addEventListener(u,f,{passive:x}):l.addEventListener(u,f,!1)}function Tx(l,u,f,g,x){var S=g;if((u&1)===0&&(u&2)===0&&g!==null)e:for(;;){if(g===null)return;var F=g.tag;if(F===3||F===4){var H=g.stateNode.containerInfo;if(H===x)break;if(F===4)for(F=g.return;F!==null;){var te=F.tag;if((te===3||te===4)&&F.stateNode.containerInfo===x)return;F=F.return}for(;H!==null;){if(F=sn(H),F===null)return;if(te=F.tag,te===5||te===6||te===26||te===27){g=S=F;continue e}H=H.parentNode}}g=g.return}cM(function(){var ye=S,Pe=jb(f),Qe=[];e:{var _e=kM.get(l);if(_e!==void 0){var Se=hA,Rt=l;switch(l){case"keypress":if(cA(f)===0)break e;case"keydown":case"keyup":Se=E8;break;case"focusin":Rt="focus",Se=$b;break;case"focusout":Rt="blur",Se=$b;break;case"beforeblur":case"afterblur":Se=$b;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Se=dM;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Se=c8;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Se=_8;break;case LM:case OM:case PM:Se=d8;break;case UM:Se=S8;break;case"scroll":case"scrollend":Se=o8;break;case"wheel":Se=T8;break;case"copy":case"cut":case"paste":Se=p8;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Se=pM;break;case"toggle":case"beforetoggle":Se=I8}var Mt=(u&4)!==0,Rn=!Mt&&(l==="scroll"||l==="scrollend"),pe=Mt?_e!==null?_e+"Capture":null:_e;Mt=[];for(var le=ye,ve;le!==null;){var ke=le;if(ve=ke.stateNode,ke=ke.tag,ke!==5&&ke!==26&&ke!==27||ve===null||pe===null||(ke=qd(le,pe),ke!=null&&Mt.push(Bf(le,ke,ve))),Rn)break;le=le.return}0<Mt.length&&(_e=new Se(_e,Rt,null,f,Pe),Qe.push({event:_e,listeners:Mt}))}}if((u&7)===0){e:{if(_e=l==="mouseover"||l==="pointerover",Se=l==="mouseout"||l==="pointerout",_e&&f!==qb&&(Rt=f.relatedTarget||f.fromElement)&&(sn(Rt)||Rt[pt]))break e;if((Se||_e)&&(_e=Pe.window===Pe?Pe:(_e=Pe.ownerDocument)?_e.defaultView||_e.parentWindow:window,Se?(Rt=f.relatedTarget||f.toElement,Se=ye,Rt=Rt?sn(Rt):null,Rt!==null&&(Rn=s(Rt),Mt=Rt.tag,Rt!==Rn||Mt!==5&&Mt!==27&&Mt!==6)&&(Rt=null)):(Se=null,Rt=ye),Se!==Rt)){if(Mt=dM,ke="onMouseLeave",pe="onMouseEnter",le="mouse",(l==="pointerout"||l==="pointerover")&&(Mt=pM,ke="onPointerLeave",pe="onPointerEnter",le="pointer"),Rn=Se==null?_e:vi(Se),ve=Rt==null?_e:vi(Rt),_e=new Mt(ke,le+"leave",Se,f,Pe),_e.target=Rn,_e.relatedTarget=ve,ke=null,sn(Pe)===ye&&(Mt=new Mt(pe,le+"enter",Rt,f,Pe),Mt.target=ve,Mt.relatedTarget=Rn,ke=Mt),Rn=ke,Se&&Rt)t:{for(Mt=Se,pe=Rt,le=0,ve=Mt;ve;ve=Ah(ve))le++;for(ve=0,ke=pe;ke;ke=Ah(ke))ve++;for(;0<le-ve;)Mt=Ah(Mt),le--;for(;0<ve-le;)pe=Ah(pe),ve--;for(;le--;){if(Mt===pe||pe!==null&&Mt===pe.alternate)break t;Mt=Ah(Mt),pe=Ah(pe)}Mt=null}else Mt=null;Se!==null&&iI(Qe,_e,Se,Mt,!1),Rt!==null&&Rn!==null&&iI(Qe,Rn,Rt,Mt,!0)}}e:{if(_e=ye?vi(ye):window,Se=_e.nodeName&&_e.nodeName.toLowerCase(),Se==="select"||Se==="input"&&_e.type==="file")var ft=xM;else if(bM(_e))if(CM)ft=Q8;else{ft=N8;var Yt=k8}else Se=_e.nodeName,!Se||Se.toLowerCase()!=="input"||_e.type!=="checkbox"&&_e.type!=="radio"?ye&&Hu(ye.elementType)&&(ft=xM):ft=F8;if(ft&&(ft=ft(l,ye))){EM(Qe,ft,f,Pe);break e}Yt&&Yt(l,_e,ye),l==="focusout"&&ye&&_e.type==="number"&&ye.memoizedProps.value!=null&&ia(_e,"number",_e.value)}switch(Yt=ye?vi(ye):window,l){case"focusin":(bM(Yt)||Yt.contentEditable==="true")&&(qu=Yt,sE=ye,ef=null);break;case"focusout":ef=sE=qu=null;break;case"mousedown":aE=!0;break;case"contextmenu":case"mouseup":case"dragend":aE=!1,RM(Qe,f,Pe);break;case"selectionchange":if(H8)break;case"keydown":case"keyup":RM(Qe,f,Pe)}var bt;if(tE)e:{switch(l){case"compositionstart":var Bt="onCompositionStart";break e;case"compositionend":Bt="onCompositionEnd";break e;case"compositionupdate":Bt="onCompositionUpdate";break e}Bt=void 0}else Wu?vM(l,f)&&(Bt="onCompositionEnd"):l==="keydown"&&f.keyCode===229&&(Bt="onCompositionStart");Bt&&(mM&&f.locale!=="ko"&&(Wu||Bt!=="onCompositionStart"?Bt==="onCompositionEnd"&&Wu&&(bt=uM()):(rl=Pe,Kb="value"in rl?rl.value:rl.textContent,Wu=!0)),Yt=ZA(ye,Bt),0<Yt.length&&(Bt=new fM(Bt,l,null,f,Pe),Qe.push({event:Bt,listeners:Yt}),bt?Bt.data=bt:(bt=yM(f),bt!==null&&(Bt.data=bt)))),(bt=D8?L8(l,f):O8(l,f))&&(Bt=ZA(ye,"onBeforeInput"),0<Bt.length&&(Yt=new fM("onBeforeInput","beforeinput",null,f,Pe),Qe.push({event:Yt,listeners:Bt}),Yt.data=bt)),_Q(Qe,l,ye,f,Pe)}tI(Qe,u)})}function Bf(l,u,f){return{instance:l,listener:u,currentTarget:f}}function ZA(l,u){for(var f=u+"Capture",g=[];l!==null;){var x=l,S=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||S===null||(x=qd(l,f),x!=null&&g.unshift(Bf(l,x,S)),x=qd(l,u),x!=null&&g.push(Bf(l,x,S))),l.tag===3)return g;l=l.return}return[]}function Ah(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function iI(l,u,f,g,x){for(var S=u._reactName,F=[];f!==null&&f!==g;){var H=f,te=H.alternate,ye=H.stateNode;if(H=H.tag,te!==null&&te===g)break;H!==5&&H!==26&&H!==27||ye===null||(te=ye,x?(ye=qd(f,S),ye!=null&&F.unshift(Bf(f,ye,te))):x||(ye=qd(f,S),ye!=null&&F.push(Bf(f,ye,te)))),f=f.return}F.length!==0&&l.push({event:u,listeners:F})}var TQ=/\r\n?/g,BQ=/\u0000|\uFFFD/g;function rI(l){return(typeof l=="string"?l:""+l).replace(TQ,`
`).replace(BQ,"")}function sI(l,u){return u=rI(u),rI(l)===u}function $A(){}function In(l,u,f,g,x,S){switch(f){case"children":typeof g=="string"?u==="body"||u==="textarea"&&g===""||Er(l,g):(typeof g=="number"||typeof g=="bigint")&&u!=="body"&&Er(l,""+g);break;case"className":fe(l,"class",g);break;case"tabIndex":fe(l,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":fe(l,f,g);break;case"style":ro(l,g,S);break;case"data":if(u!=="object"){fe(l,"data",g);break}case"src":case"href":if(g===""&&(u!=="a"||f!=="href")){l.removeAttribute(f);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(f);break}g=oA(""+g),l.setAttribute(f,g);break;case"action":case"formAction":if(typeof g=="function"){l.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(f==="formAction"?(u!=="input"&&In(l,u,"name",x.name,x,null),In(l,u,"formEncType",x.formEncType,x,null),In(l,u,"formMethod",x.formMethod,x,null),In(l,u,"formTarget",x.formTarget,x,null)):(In(l,u,"encType",x.encType,x,null),In(l,u,"method",x.method,x,null),In(l,u,"target",x.target,x,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(f);break}g=oA(""+g),l.setAttribute(f,g);break;case"onClick":g!=null&&(l.onclick=$A);break;case"onScroll":g!=null&&$t("scroll",l);break;case"onScrollEnd":g!=null&&$t("scrollend",l);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(i(61));if(f=g.__html,f!=null){if(x.children!=null)throw Error(i(60));l.innerHTML=f}}break;case"multiple":l.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":l.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){l.removeAttribute("xlink:href");break}f=oA(""+g),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,""+g):l.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,""):l.removeAttribute(f);break;case"capture":case"download":g===!0?l.setAttribute(f,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,g):l.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?l.setAttribute(f,g):l.removeAttribute(f);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?l.removeAttribute(f):l.setAttribute(f,g);break;case"popover":$t("beforetoggle",l),$t("toggle",l),Ee(l,"popover",g);break;case"xlinkActuate":qe(l,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":qe(l,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":qe(l,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":qe(l,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":qe(l,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":qe(l,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":qe(l,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":qe(l,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":qe(l,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Ee(l,"is",g);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=s8.get(f)||f,Ee(l,f,g))}}function Bx(l,u,f,g,x,S){switch(f){case"style":ro(l,g,S);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(i(61));if(f=g.__html,f!=null){if(x.children!=null)throw Error(i(60));l.innerHTML=f}}break;case"children":typeof g=="string"?Er(l,g):(typeof g=="number"||typeof g=="bigint")&&Er(l,""+g);break;case"onScroll":g!=null&&$t("scroll",l);break;case"onScrollEnd":g!=null&&$t("scrollend",l);break;case"onClick":g!=null&&(l.onclick=$A);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ti.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(x=f.endsWith("Capture"),u=f.slice(2,x?f.length-7:void 0),S=l[gt]||null,S=S!=null?S[f]:null,typeof S=="function"&&l.removeEventListener(u,S,x),typeof g=="function")){typeof S!="function"&&S!==null&&(f in l?l[f]=null:l.hasAttribute(f)&&l.removeAttribute(f)),l.addEventListener(u,g,x);break e}f in l?l[f]=g:g===!0?l.setAttribute(f,""):Ee(l,f,g)}}}function Yi(l,u,f){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$t("error",l),$t("load",l);var g=!1,x=!1,S;for(S in f)if(f.hasOwnProperty(S)){var F=f[S];if(F!=null)switch(S){case"src":g=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,u));default:In(l,u,S,F,f,null)}}x&&In(l,u,"srcSet",f.srcSet,f,null),g&&In(l,u,"src",f.src,f,null);return;case"input":$t("invalid",l);var H=S=F=x=null,te=null,ye=null;for(g in f)if(f.hasOwnProperty(g)){var Pe=f[g];if(Pe!=null)switch(g){case"name":x=Pe;break;case"type":F=Pe;break;case"checked":te=Pe;break;case"defaultChecked":ye=Pe;break;case"value":S=Pe;break;case"defaultValue":H=Pe;break;case"children":case"dangerouslySetInnerHTML":if(Pe!=null)throw Error(i(137,u));break;default:In(l,u,g,Pe,f,null)}}os(l,S,H,te,ye,F,x,!1),Xt(l);return;case"select":$t("invalid",l),g=F=S=null;for(x in f)if(f.hasOwnProperty(x)&&(H=f[x],H!=null))switch(x){case"value":S=H;break;case"defaultValue":F=H;break;case"multiple":g=H;default:In(l,u,x,H,f,null)}u=S,f=F,l.multiple=!!g,u!=null?ls(l,!!g,u,!1):f!=null&&ls(l,!!g,f,!0);return;case"textarea":$t("invalid",l),S=x=g=null;for(F in f)if(f.hasOwnProperty(F)&&(H=f[F],H!=null))switch(F){case"value":g=H;break;case"defaultValue":x=H;break;case"children":S=H;break;case"dangerouslySetInnerHTML":if(H!=null)throw Error(i(91));break;default:In(l,u,F,H,f,null)}yi(l,g,x,S),Xt(l);return;case"option":for(te in f)if(f.hasOwnProperty(te)&&(g=f[te],g!=null))switch(te){case"selected":l.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:In(l,u,te,g,f,null)}return;case"dialog":$t("beforetoggle",l),$t("toggle",l),$t("cancel",l),$t("close",l);break;case"iframe":case"object":$t("load",l);break;case"video":case"audio":for(g=0;g<Tf.length;g++)$t(Tf[g],l);break;case"image":$t("error",l),$t("load",l);break;case"details":$t("toggle",l);break;case"embed":case"source":case"link":$t("error",l),$t("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ye in f)if(f.hasOwnProperty(ye)&&(g=f[ye],g!=null))switch(ye){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,u));default:In(l,u,ye,g,f,null)}return;default:if(Hu(u)){for(Pe in f)f.hasOwnProperty(Pe)&&(g=f[Pe],g!==void 0&&Bx(l,u,Pe,g,f,void 0));return}}for(H in f)f.hasOwnProperty(H)&&(g=f[H],g!=null&&In(l,u,H,g,f,null))}function IQ(l,u,f,g){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,S=null,F=null,H=null,te=null,ye=null,Pe=null;for(Se in f){var Qe=f[Se];if(f.hasOwnProperty(Se)&&Qe!=null)switch(Se){case"checked":break;case"value":break;case"defaultValue":te=Qe;default:g.hasOwnProperty(Se)||In(l,u,Se,null,g,Qe)}}for(var _e in g){var Se=g[_e];if(Qe=f[_e],g.hasOwnProperty(_e)&&(Se!=null||Qe!=null))switch(_e){case"type":S=Se;break;case"name":x=Se;break;case"checked":ye=Se;break;case"defaultChecked":Pe=Se;break;case"value":F=Se;break;case"defaultValue":H=Se;break;case"children":case"dangerouslySetInnerHTML":if(Se!=null)throw Error(i(137,u));break;default:Se!==Qe&&In(l,u,_e,Se,g,Qe)}}qi(l,F,H,te,ye,Pe,S,x);return;case"select":Se=F=H=_e=null;for(S in f)if(te=f[S],f.hasOwnProperty(S)&&te!=null)switch(S){case"value":break;case"multiple":Se=te;default:g.hasOwnProperty(S)||In(l,u,S,null,g,te)}for(x in g)if(S=g[x],te=f[x],g.hasOwnProperty(x)&&(S!=null||te!=null))switch(x){case"value":_e=S;break;case"defaultValue":H=S;break;case"multiple":F=S;default:S!==te&&In(l,u,x,S,g,te)}u=H,f=F,g=Se,_e!=null?ls(l,!!f,_e,!1):!!g!=!!f&&(u!=null?ls(l,!!f,u,!0):ls(l,!!f,f?[]:"",!1));return;case"textarea":Se=_e=null;for(H in f)if(x=f[H],f.hasOwnProperty(H)&&x!=null&&!g.hasOwnProperty(H))switch(H){case"value":break;case"children":break;default:In(l,u,H,null,g,x)}for(F in g)if(x=g[F],S=f[F],g.hasOwnProperty(F)&&(x!=null||S!=null))switch(F){case"value":_e=x;break;case"defaultValue":Se=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:x!==S&&In(l,u,F,x,g,S)}gn(l,_e,Se);return;case"option":for(var Rt in f)if(_e=f[Rt],f.hasOwnProperty(Rt)&&_e!=null&&!g.hasOwnProperty(Rt))switch(Rt){case"selected":l.selected=!1;break;default:In(l,u,Rt,null,g,_e)}for(te in g)if(_e=g[te],Se=f[te],g.hasOwnProperty(te)&&_e!==Se&&(_e!=null||Se!=null))switch(te){case"selected":l.selected=_e&&typeof _e!="function"&&typeof _e!="symbol";break;default:In(l,u,te,_e,g,Se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Mt in f)_e=f[Mt],f.hasOwnProperty(Mt)&&_e!=null&&!g.hasOwnProperty(Mt)&&In(l,u,Mt,null,g,_e);for(ye in g)if(_e=g[ye],Se=f[ye],g.hasOwnProperty(ye)&&_e!==Se&&(_e!=null||Se!=null))switch(ye){case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(i(137,u));break;default:In(l,u,ye,_e,g,Se)}return;default:if(Hu(u)){for(var Rn in f)_e=f[Rn],f.hasOwnProperty(Rn)&&_e!==void 0&&!g.hasOwnProperty(Rn)&&Bx(l,u,Rn,void 0,g,_e);for(Pe in g)_e=g[Pe],Se=f[Pe],!g.hasOwnProperty(Pe)||_e===Se||_e===void 0&&Se===void 0||Bx(l,u,Pe,_e,g,Se);return}}for(var pe in f)_e=f[pe],f.hasOwnProperty(pe)&&_e!=null&&!g.hasOwnProperty(pe)&&In(l,u,pe,null,g,_e);for(Qe in g)_e=g[Qe],Se=f[Qe],!g.hasOwnProperty(Qe)||_e===Se||_e==null&&Se==null||In(l,u,Qe,_e,g,Se)}var Ix=null,Rx=null;function eg(l){return l.nodeType===9?l:l.ownerDocument}function aI(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function oI(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function Dx(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Lx=null;function RQ(){var l=window.event;return l&&l.type==="popstate"?l===Lx?!1:(Lx=l,!0):(Lx=null,!1)}var lI=typeof setTimeout=="function"?setTimeout:void 0,DQ=typeof clearTimeout=="function"?clearTimeout:void 0,cI=typeof Promise=="function"?Promise:void 0,LQ=typeof queueMicrotask=="function"?queueMicrotask:typeof cI<"u"?function(l){return cI.resolve(null).then(l).catch(OQ)}:lI;function OQ(l){setTimeout(function(){throw l})}function bl(l){return l==="head"}function uI(l,u){var f=u,g=0,x=0;do{var S=f.nextSibling;if(l.removeChild(f),S&&S.nodeType===8)if(f=S.data,f==="/$"){if(0<g&&8>g){f=g;var F=l.ownerDocument;if(f&1&&If(F.documentElement),f&2&&If(F.body),f&4)for(f=F.head,If(f),F=f.firstChild;F;){var H=F.nextSibling,te=F.nodeName;F[zn]||te==="SCRIPT"||te==="STYLE"||te==="LINK"&&F.rel.toLowerCase()==="stylesheet"||f.removeChild(F),F=H}}if(x===0){l.removeChild(S),Nf(u);return}x--}else f==="$"||f==="$?"||f==="$!"?x++:g=f.charCodeAt(0)-48;else g=0;f=S}while(f);Nf(u)}function Ox(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var f=u;switch(u=u.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":Ox(f),An(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}l.removeChild(f)}}function PQ(l,u,f,g){for(;l.nodeType===1;){var x=f;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!g&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(g){if(!l[zn])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(S=l.getAttribute("rel"),S==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(S!==x.rel||l.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||l.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||l.getAttribute("title")!==(x.title==null?null:x.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(S=l.getAttribute("src"),(S!==(x.src==null?null:x.src)||l.getAttribute("type")!==(x.type==null?null:x.type)||l.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&S&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var S=x.name==null?null:""+x.name;if(x.type==="hidden"&&l.getAttribute("name")===S)return l}else return l;if(l=aa(l.nextSibling),l===null)break}return null}function UQ(l,u,f){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!f||(l=aa(l.nextSibling),l===null))return null;return l}function Px(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function kQ(l,u){var f=l.ownerDocument;if(l.data!=="$?"||f.readyState==="complete")u();else{var g=function(){u(),f.removeEventListener("DOMContentLoaded",g)};f.addEventListener("DOMContentLoaded",g),l._reactRetry=g}}function aa(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return l}var Ux=null;function hI(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var f=l.data;if(f==="$"||f==="$!"||f==="$?"){if(u===0)return l;u--}else f==="/$"&&u++}l=l.previousSibling}return null}function dI(l,u,f){switch(u=eg(f),l){case"html":if(l=u.documentElement,!l)throw Error(i(452));return l;case"head":if(l=u.head,!l)throw Error(i(453));return l;case"body":if(l=u.body,!l)throw Error(i(454));return l;default:throw Error(i(451))}}function If(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);An(l)}var Hs=new Map,fI=new Set;function tg(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var yo=j.d;j.d={f:NQ,r:FQ,D:QQ,C:zQ,L:HQ,m:GQ,X:WQ,S:VQ,M:qQ};function NQ(){var l=yo.f(),u=qA();return l||u}function FQ(l){var u=Wt(l);u!==null&&u.tag===5&&u.type==="form"?LT(u):yo.r(l)}var gh=typeof document>"u"?null:document;function pI(l,u,f){var g=gh;if(g&&typeof u=="string"&&u){var x=Ot(u);x='link[rel="'+l+'"][href="'+x+'"]',typeof f=="string"&&(x+='[crossorigin="'+f+'"]'),fI.has(x)||(fI.add(x),l={rel:l,crossOrigin:f,href:u},g.querySelector(x)===null&&(u=g.createElement("link"),Yi(u,"link",l),an(u),g.head.appendChild(u)))}}function QQ(l){yo.D(l),pI("dns-prefetch",l,null)}function zQ(l,u){yo.C(l,u),pI("preconnect",l,u)}function HQ(l,u,f){yo.L(l,u,f);var g=gh;if(g&&l&&u){var x='link[rel="preload"][as="'+Ot(u)+'"]';u==="image"&&f&&f.imageSrcSet?(x+='[imagesrcset="'+Ot(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(x+='[imagesizes="'+Ot(f.imageSizes)+'"]')):x+='[href="'+Ot(l)+'"]';var S=x;switch(u){case"style":S=vh(l);break;case"script":S=yh(l)}Hs.has(S)||(l=d({rel:"preload",href:u==="image"&&f&&f.imageSrcSet?void 0:l,as:u},f),Hs.set(S,l),g.querySelector(x)!==null||u==="style"&&g.querySelector(Rf(S))||u==="script"&&g.querySelector(Df(S))||(u=g.createElement("link"),Yi(u,"link",l),an(u),g.head.appendChild(u)))}}function GQ(l,u){yo.m(l,u);var f=gh;if(f&&l){var g=u&&typeof u.as=="string"?u.as:"script",x='link[rel="modulepreload"][as="'+Ot(g)+'"][href="'+Ot(l)+'"]',S=x;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=yh(l)}if(!Hs.has(S)&&(l=d({rel:"modulepreload",href:l},u),Hs.set(S,l),f.querySelector(x)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Df(S)))return}g=f.createElement("link"),Yi(g,"link",l),an(g),f.head.appendChild(g)}}}function VQ(l,u,f){yo.S(l,u,f);var g=gh;if(g&&l){var x=un(g).hoistableStyles,S=vh(l);u=u||"default";var F=x.get(S);if(!F){var H={loading:0,preload:null};if(F=g.querySelector(Rf(S)))H.loading=5;else{l=d({rel:"stylesheet",href:l,"data-precedence":u},f),(f=Hs.get(S))&&kx(l,f);var te=F=g.createElement("link");an(te),Yi(te,"link",l),te._p=new Promise(function(ye,Pe){te.onload=ye,te.onerror=Pe}),te.addEventListener("load",function(){H.loading|=1}),te.addEventListener("error",function(){H.loading|=2}),H.loading|=4,ng(F,u,g)}F={type:"stylesheet",instance:F,count:1,state:H},x.set(S,F)}}}function WQ(l,u){yo.X(l,u);var f=gh;if(f&&l){var g=un(f).hoistableScripts,x=yh(l),S=g.get(x);S||(S=f.querySelector(Df(x)),S||(l=d({src:l,async:!0},u),(u=Hs.get(x))&&Nx(l,u),S=f.createElement("script"),an(S),Yi(S,"link",l),f.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},g.set(x,S))}}function qQ(l,u){yo.M(l,u);var f=gh;if(f&&l){var g=un(f).hoistableScripts,x=yh(l),S=g.get(x);S||(S=f.querySelector(Df(x)),S||(l=d({src:l,async:!0,type:"module"},u),(u=Hs.get(x))&&Nx(l,u),S=f.createElement("script"),an(S),Yi(S,"link",l),f.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},g.set(x,S))}}function mI(l,u,f,g){var x=(x=Ne.current)?tg(x):null;if(!x)throw Error(i(446));switch(l){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(u=vh(f.href),f=un(x).hoistableStyles,g=f.get(u),g||(g={type:"style",instance:null,count:0,state:null},f.set(u,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){l=vh(f.href);var S=un(x).hoistableStyles,F=S.get(l);if(F||(x=x.ownerDocument||x,F={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(l,F),(S=x.querySelector(Rf(l)))&&!S._p&&(F.instance=S,F.state.loading=5),Hs.has(l)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Hs.set(l,f),S||jQ(x,l,f,F.state))),u&&g===null)throw Error(i(528,""));return F}if(u&&g!==null)throw Error(i(529,""));return null;case"script":return u=f.async,f=f.src,typeof f=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=yh(f),f=un(x).hoistableScripts,g=f.get(u),g||(g={type:"script",instance:null,count:0,state:null},f.set(u,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,l))}}function vh(l){return'href="'+Ot(l)+'"'}function Rf(l){return'link[rel="stylesheet"]['+l+"]"}function AI(l){return d({},l,{"data-precedence":l.precedence,precedence:null})}function jQ(l,u,f,g){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?g.loading=1:(u=l.createElement("link"),g.preload=u,u.addEventListener("load",function(){return g.loading|=1}),u.addEventListener("error",function(){return g.loading|=2}),Yi(u,"link",f),an(u),l.head.appendChild(u))}function yh(l){return'[src="'+Ot(l)+'"]'}function Df(l){return"script[async]"+l}function gI(l,u,f){if(u.count++,u.instance===null)switch(u.type){case"style":var g=l.querySelector('style[data-href~="'+Ot(f.href)+'"]');if(g)return u.instance=g,an(g),g;var x=d({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return g=(l.ownerDocument||l).createElement("style"),an(g),Yi(g,"style",x),ng(g,f.precedence,l),u.instance=g;case"stylesheet":x=vh(f.href);var S=l.querySelector(Rf(x));if(S)return u.state.loading|=4,u.instance=S,an(S),S;g=AI(f),(x=Hs.get(x))&&kx(g,x),S=(l.ownerDocument||l).createElement("link"),an(S);var F=S;return F._p=new Promise(function(H,te){F.onload=H,F.onerror=te}),Yi(S,"link",g),u.state.loading|=4,ng(S,f.precedence,l),u.instance=S;case"script":return S=yh(f.src),(x=l.querySelector(Df(S)))?(u.instance=x,an(x),x):(g=f,(x=Hs.get(S))&&(g=d({},f),Nx(g,x)),l=l.ownerDocument||l,x=l.createElement("script"),an(x),Yi(x,"link",g),l.head.appendChild(x),u.instance=x);case"void":return null;default:throw Error(i(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(g=u.instance,u.state.loading|=4,ng(g,f.precedence,l));return u.instance}function ng(l,u,f){for(var g=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=g.length?g[g.length-1]:null,S=x,F=0;F<g.length;F++){var H=g[F];if(H.dataset.precedence===u)S=H;else if(S!==x)break}S?S.parentNode.insertBefore(l,S.nextSibling):(u=f.nodeType===9?f.head:f,u.insertBefore(l,u.firstChild))}function kx(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function Nx(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var ig=null;function vI(l,u,f){if(ig===null){var g=new Map,x=ig=new Map;x.set(f,g)}else x=ig,g=x.get(f),g||(g=new Map,x.set(f,g));if(g.has(l))return g;for(g.set(l,null),f=f.getElementsByTagName(l),x=0;x<f.length;x++){var S=f[x];if(!(S[zn]||S[Je]||l==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var F=S.getAttribute(u)||"";F=l+F;var H=g.get(F);H?H.push(S):g.set(F,[S])}}return g}function yI(l,u,f){l=l.ownerDocument||l,l.head.insertBefore(f,u==="title"?l.querySelector("head > title"):null)}function XQ(l,u,f){if(f===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return l=u.disabled,typeof u.precedence=="string"&&l==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function bI(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var Lf=null;function YQ(){}function KQ(l,u,f){if(Lf===null)throw Error(i(475));var g=Lf;if(u.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var x=vh(f.href),S=l.querySelector(Rf(x));if(S){l=S._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(g.count++,g=rg.bind(g),l.then(g,g)),u.state.loading|=4,u.instance=S,an(S);return}S=l.ownerDocument||l,f=AI(f),(x=Hs.get(x))&&kx(f,x),S=S.createElement("link"),an(S);var F=S;F._p=new Promise(function(H,te){F.onload=H,F.onerror=te}),Yi(S,"link",f),u.instance=S}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(u,l),(l=u.state.preload)&&(u.state.loading&3)===0&&(g.count++,u=rg.bind(g),l.addEventListener("load",u),l.addEventListener("error",u))}}function JQ(){if(Lf===null)throw Error(i(475));var l=Lf;return l.stylesheets&&l.count===0&&Fx(l,l.stylesheets),0<l.count?function(u){var f=setTimeout(function(){if(l.stylesheets&&Fx(l,l.stylesheets),l.unsuspend){var g=l.unsuspend;l.unsuspend=null,g()}},6e4);return l.unsuspend=u,function(){l.unsuspend=null,clearTimeout(f)}}:null}function rg(){if(this.count--,this.count===0){if(this.stylesheets)Fx(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var sg=null;function Fx(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,sg=new Map,u.forEach(ZQ,l),sg=null,rg.call(l))}function ZQ(l,u){if(!(u.state.loading&4)){var f=sg.get(l);if(f)var g=f.get(null);else{f=new Map,sg.set(l,f);for(var x=l.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<x.length;S++){var F=x[S];(F.nodeName==="LINK"||F.getAttribute("media")!=="not all")&&(f.set(F.dataset.precedence,F),g=F)}g&&f.set(null,g)}x=u.instance,F=x.getAttribute("data-precedence"),S=f.get(F)||g,S===g&&f.set(null,x),f.set(F,x),this.count++,g=rg.bind(this),x.addEventListener("load",g),x.addEventListener("error",g),S?S.parentNode.insertBefore(x,S.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(x,l.firstChild)),u.state.loading|=4}}var Of={$$typeof:_,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function $Q(l,u,f,g,x,S,F,H){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ve(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ve(0),this.hiddenUpdates=Ve(null),this.identifierPrefix=g,this.onUncaughtError=x,this.onCaughtError=S,this.onRecoverableError=F,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=H,this.incompleteTransitions=new Map}function EI(l,u,f,g,x,S,F,H,te,ye,Pe,Qe){return l=new $Q(l,u,f,F,H,te,ye,Qe),u=1,S===!0&&(u|=24),S=us(3,null,null,u),l.current=S,S.stateNode=l,u=bE(),u.refCount++,l.pooledCache=u,u.refCount++,S.memoizedState={element:g,isDehydrated:f,cache:u},_E(S),l}function xI(l){return l?(l=Ku,l):Ku}function CI(l,u,f,g,x,S){x=xI(x),g.context===null?g.context=x:g.pendingContext=x,g=ol(u),g.payload={element:f},S=S===void 0?null:S,S!==null&&(g.callback=S),f=ll(l,g,u),f!==null&&(ms(f,l,u),uf(f,l,u))}function _I(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var f=l.retryLane;l.retryLane=f!==0&&f<u?f:u}}function Qx(l,u){_I(l,u),(l=l.alternate)&&_I(l,u)}function wI(l){if(l.tag===13){var u=Yu(l,67108864);u!==null&&ms(u,l,67108864),Qx(l,67108864)}}var ag=!0;function ez(l,u,f,g){var x=z.T;z.T=null;var S=j.p;try{j.p=2,zx(l,u,f,g)}finally{j.p=S,z.T=x}}function tz(l,u,f,g){var x=z.T;z.T=null;var S=j.p;try{j.p=8,zx(l,u,f,g)}finally{j.p=S,z.T=x}}function zx(l,u,f,g){if(ag){var x=Hx(g);if(x===null)Tx(l,u,g,og,f),MI(l,g);else if(iz(x,l,u,f,g))g.stopPropagation();else if(MI(l,g),u&4&&-1<nz.indexOf(l)){for(;x!==null;){var S=Wt(x);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var F=ht(S.pendingLanes);if(F!==0){var H=S;for(H.pendingLanes|=2,H.entangledLanes|=2;F;){var te=1<<31-ge(F);H.entanglements[1]|=te,F&=~te}Ta(S),(_n&6)===0&&(VA=ne()+500,Mf(0))}}break;case 13:H=Yu(S,2),H!==null&&ms(H,S,2),qA(),Qx(S,2)}if(S=Hx(g),S===null&&Tx(l,u,g,og,f),S===x)break;x=S}x!==null&&g.stopPropagation()}else Tx(l,u,g,null,f)}}function Hx(l){return l=jb(l),Gx(l)}var og=null;function Gx(l){if(og=null,l=sn(l),l!==null){var u=s(l);if(u===null)l=null;else{var f=u.tag;if(f===13){if(l=a(u),l!==null)return l;l=null}else if(f===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return og=l,null}function SI(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(I()){case O:return 2;case Q:return 8;case W:case ee:return 32;case he:return 268435456;default:return 32}default:return 32}}var Vx=!1,El=null,xl=null,Cl=null,Pf=new Map,Uf=new Map,_l=[],nz="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function MI(l,u){switch(l){case"focusin":case"focusout":El=null;break;case"dragenter":case"dragleave":xl=null;break;case"mouseover":case"mouseout":Cl=null;break;case"pointerover":case"pointerout":Pf.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uf.delete(u.pointerId)}}function kf(l,u,f,g,x,S){return l===null||l.nativeEvent!==S?(l={blockedOn:u,domEventName:f,eventSystemFlags:g,nativeEvent:S,targetContainers:[x]},u!==null&&(u=Wt(u),u!==null&&wI(u)),l):(l.eventSystemFlags|=g,u=l.targetContainers,x!==null&&u.indexOf(x)===-1&&u.push(x),l)}function iz(l,u,f,g,x){switch(u){case"focusin":return El=kf(El,l,u,f,g,x),!0;case"dragenter":return xl=kf(xl,l,u,f,g,x),!0;case"mouseover":return Cl=kf(Cl,l,u,f,g,x),!0;case"pointerover":var S=x.pointerId;return Pf.set(S,kf(Pf.get(S)||null,l,u,f,g,x)),!0;case"gotpointercapture":return S=x.pointerId,Uf.set(S,kf(Uf.get(S)||null,l,u,f,g,x)),!0}return!1}function TI(l){var u=sn(l.target);if(u!==null){var f=s(u);if(f!==null){if(u=f.tag,u===13){if(u=a(f),u!==null){l.blockedOn=u,nt(l.priority,function(){if(f.tag===13){var g=ps();g=tt(g);var x=Yu(f,g);x!==null&&ms(x,f,g),Qx(f,g)}});return}}else if(u===3&&f.stateNode.current.memoizedState.isDehydrated){l.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}l.blockedOn=null}function lg(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var f=Hx(l.nativeEvent);if(f===null){f=l.nativeEvent;var g=new f.constructor(f.type,f);qb=g,f.target.dispatchEvent(g),qb=null}else return u=Wt(f),u!==null&&wI(u),l.blockedOn=f,!1;u.shift()}return!0}function BI(l,u,f){lg(l)&&f.delete(u)}function rz(){Vx=!1,El!==null&&lg(El)&&(El=null),xl!==null&&lg(xl)&&(xl=null),Cl!==null&&lg(Cl)&&(Cl=null),Pf.forEach(BI),Uf.forEach(BI)}function cg(l,u){l.blockedOn===u&&(l.blockedOn=null,Vx||(Vx=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,rz)))}var ug=null;function II(l){ug!==l&&(ug=l,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ug===l&&(ug=null);for(var u=0;u<l.length;u+=3){var f=l[u],g=l[u+1],x=l[u+2];if(typeof g!="function"){if(Gx(g||f)===null)continue;break}var S=Wt(f);S!==null&&(l.splice(u,3),u-=3,GE(S,{pending:!0,data:x,method:f.method,action:g},g,x))}}))}function Nf(l){function u(te){return cg(te,l)}El!==null&&cg(El,l),xl!==null&&cg(xl,l),Cl!==null&&cg(Cl,l),Pf.forEach(u),Uf.forEach(u);for(var f=0;f<_l.length;f++){var g=_l[f];g.blockedOn===l&&(g.blockedOn=null)}for(;0<_l.length&&(f=_l[0],f.blockedOn===null);)TI(f),f.blockedOn===null&&_l.shift();if(f=(l.ownerDocument||l).$$reactFormReplay,f!=null)for(g=0;g<f.length;g+=3){var x=f[g],S=f[g+1],F=x[gt]||null;if(typeof S=="function")F||II(f);else if(F){var H=null;if(S&&S.hasAttribute("formAction")){if(x=S,F=S[gt]||null)H=F.formAction;else if(Gx(x)!==null)continue}else H=F.action;typeof H=="function"?f[g+1]=H:(f.splice(g,3),g-=3),II(f)}}}function Wx(l){this._internalRoot=l}hg.prototype.render=Wx.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(i(409));var f=u.current,g=ps();CI(f,g,l,u,null,null)},hg.prototype.unmount=Wx.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;CI(l.current,2,null,l,null,null),qA(),u[pt]=null}};function hg(l){this._internalRoot=l}hg.prototype.unstable_scheduleHydration=function(l){if(l){var u=We();l={blockedOn:null,target:l,priority:u};for(var f=0;f<_l.length&&u!==0&&u<_l[f].priority;f++);_l.splice(f,0,l),f===0&&TI(l)}};var RI=e.version;if(RI!=="19.1.0")throw Error(i(527,RI,"19.1.0"));j.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(i(188)):(l=Object.keys(l).join(","),Error(i(268,l)));return l=c(u),l=l!==null?h(l):null,l=l===null?null:l.stateNode,l};var sz={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dg.isDisabled&&dg.supportsFiber)try{q=dg.inject(sz),N=dg}catch{}}return Qf.createRoot=function(l,u){if(!r(l))throw Error(i(299));var f=!1,g="",x=jT,S=XT,F=YT,H=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(x=u.onUncaughtError),u.onCaughtError!==void 0&&(S=u.onCaughtError),u.onRecoverableError!==void 0&&(F=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(H=u.unstable_transitionCallbacks)),u=EI(l,1,!1,null,null,f,g,x,S,F,H,null),l[pt]=u.current,Mx(l),new Wx(u)},Qf.hydrateRoot=function(l,u,f){if(!r(l))throw Error(i(299));var g=!1,x="",S=jT,F=XT,H=YT,te=null,ye=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(x=f.identifierPrefix),f.onUncaughtError!==void 0&&(S=f.onUncaughtError),f.onCaughtError!==void 0&&(F=f.onCaughtError),f.onRecoverableError!==void 0&&(H=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(te=f.unstable_transitionCallbacks),f.formState!==void 0&&(ye=f.formState)),u=EI(l,1,!0,u,f??null,g,x,S,F,H,te,ye),u.context=xI(null),f=u.current,g=ps(),g=tt(g),x=ol(g),x.callback=null,ll(f,x,g),f=g,u.current.lanes=f,$e(u,f),Ta(u),l[pt]=u.current,Mx(l),new hg(u)},Qf.version="19.1.0",Qf}var zI;function Az(){if(zI)return jx.exports;zI=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),jx.exports=mz(),jx.exports}var gz=Az();const vz=Hw(gz);var ie=Gw();const Vw=Hw(ie),HI=oz({__proto__:null,default:Vw},[ie]);var zf={},GI;function yz(){if(GI)return zf;GI=1,Object.defineProperty(zf,"__esModule",{value:!0}),zf.parse=a,zf.serialize=h;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,r=Object.prototype.toString,s=(()=>{const m=function(){};return m.prototype=Object.create(null),m})();function a(m,A){const v=new s,y=m.length;if(y<2)return v;const E=(A==null?void 0:A.decode)||d;let b=0;do{const C=m.indexOf("=",b);if(C===-1)break;const _=m.indexOf(";",b),w=_===-1?y:_;if(C>w){b=m.lastIndexOf(";",C-1)+1;continue}const T=o(m,b,C),L=c(m,C,T),R=m.slice(T,L);if(v[R]===void 0){let P=o(m,C+1,w),D=c(m,w,P);const M=E(m.slice(P,D));v[R]=M}b=w+1}while(b<y);return v}function o(m,A,v){do{const y=m.charCodeAt(A);if(y!==32&&y!==9)return A}while(++A<v);return v}function c(m,A,v){for(;A>v;){const y=m.charCodeAt(--A);if(y!==32&&y!==9)return A+1}return v}function h(m,A,v){const y=(v==null?void 0:v.encode)||encodeURIComponent;if(!n.test(m))throw new TypeError(`argument name is invalid: ${m}`);const E=y(A);if(!e.test(E))throw new TypeError(`argument val is invalid: ${A}`);let b=m+"="+E;if(!v)return b;if(v.maxAge!==void 0){if(!Number.isInteger(v.maxAge))throw new TypeError(`option maxAge is invalid: ${v.maxAge}`);b+="; Max-Age="+v.maxAge}if(v.domain){if(!t.test(v.domain))throw new TypeError(`option domain is invalid: ${v.domain}`);b+="; Domain="+v.domain}if(v.path){if(!i.test(v.path))throw new TypeError(`option path is invalid: ${v.path}`);b+="; Path="+v.path}if(v.expires){if(!p(v.expires)||!Number.isFinite(v.expires.valueOf()))throw new TypeError(`option expires is invalid: ${v.expires}`);b+="; Expires="+v.expires.toUTCString()}if(v.httpOnly&&(b+="; HttpOnly"),v.secure&&(b+="; Secure"),v.partitioned&&(b+="; Partitioned"),v.priority)switch(typeof v.priority=="string"?v.priority.toLowerCase():void 0){case"low":b+="; Priority=Low";break;case"medium":b+="; Priority=Medium";break;case"high":b+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${v.priority}`)}if(v.sameSite)switch(typeof v.sameSite=="string"?v.sameSite.toLowerCase():v.sameSite){case!0:case"strict":b+="; SameSite=Strict";break;case"lax":b+="; SameSite=Lax";break;case"none":b+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${v.sameSite}`)}return b}function d(m){if(m.indexOf("%")===-1)return m;try{return decodeURIComponent(m)}catch{return m}}function p(m){return r.call(m)==="[object Date]"}return zf}yz();var VI="popstate";function bz(n={}){function e(r,s){let{pathname:a="/",search:o="",hash:c=""}=Lu(r.location.hash.substring(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),h1("",{pathname:a,search:o,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){let a=r.document.querySelector("base"),o="";if(a&&a.getAttribute("href")){let c=r.location.href,h=c.indexOf("#");o=h===-1?c:c.slice(0,h)}return o+"#"+(typeof s=="string"?s:im(s))}function i(r,s){va(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return xz(e,t,i,n)}function ei(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function va(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Ez(){return Math.random().toString(36).substring(2,10)}function WI(n,e){return{usr:n.state,key:n.key,idx:e}}function h1(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Lu(e):e,state:t,key:e&&e.key||i||Ez()}}function im({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Lu(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function xz(n,e,t,i={}){let{window:r=document.defaultView,v5Compat:s=!1}=i,a=r.history,o="POP",c=null,h=d();h==null&&(h=0,a.replaceState({...a.state,idx:h},""));function d(){return(a.state||{idx:null}).idx}function p(){o="POP";let E=d(),b=E==null?null:E-h;h=E,c&&c({action:o,location:y.location,delta:b})}function m(E,b){o="PUSH";let C=h1(y.location,E,b);t&&t(C,E),h=d()+1;let _=WI(C,h),w=y.createHref(C);try{a.pushState(_,"",w)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;r.location.assign(w)}s&&c&&c({action:o,location:y.location,delta:1})}function A(E,b){o="REPLACE";let C=h1(y.location,E,b);t&&t(C,E),h=d();let _=WI(C,h),w=y.createHref(C);a.replaceState(_,"",w),s&&c&&c({action:o,location:y.location,delta:0})}function v(E){let b=r.location.origin!=="null"?r.location.origin:r.location.href,C=typeof E=="string"?E:im(E);return C=C.replace(/ $/,"%20"),ei(b,`No window.location.(origin|href) available to create URL for href: ${C}`),new URL(C,b)}let y={get action(){return o},get location(){return n(r,a)},listen(E){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(VI,p),c=E,()=>{r.removeEventListener(VI,p),c=null}},createHref(E){return e(r,E)},createURL:v,encodeLocation(E){let b=v(E);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:m,replace:A,go(E){return a.go(E)}};return y}function nP(n,e,t="/"){return Cz(n,e,t,!1)}function Cz(n,e,t,i){let r=typeof e=="string"?Lu(e):e,s=Yo(r.pathname||"/",t);if(s==null)return null;let a=iP(n);_z(a);let o=null;for(let c=0;o==null&&c<a.length;++c){let h=Pz(s);o=Lz(a[c],h,i)}return o}function iP(n,e=[],t=[],i=""){let r=(s,a,o)=>{let c={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};c.relativePath.startsWith("/")&&(ei(c.relativePath.startsWith(i),`Absolute route path "${c.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(i.length));let h=Ho([i,c.relativePath]),d=t.concat(c);s.children&&s.children.length>0&&(ei(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),iP(s.children,e,d,h)),!(s.path==null&&!s.index)&&e.push({path:h,score:Rz(h,s.index),routesMeta:d})};return n.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))r(s,a);else for(let c of rP(s.path))r(s,a,c)}),e}function rP(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let a=rP(i.join("/")),o=[];return o.push(...a.map(c=>c===""?s:[s,c].join("/"))),r&&o.push(...a),o.map(c=>n.startsWith("/")&&c===""?"/":c)}function _z(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Dz(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var wz=/^:[\w-]+$/,Sz=3,Mz=2,Tz=1,Bz=10,Iz=-2,qI=n=>n==="*";function Rz(n,e){let t=n.split("/"),i=t.length;return t.some(qI)&&(i+=Iz),e&&(i+=Mz),t.filter(r=>!qI(r)).reduce((r,s)=>r+(wz.test(s)?Sz:s===""?Tz:Bz),i)}function Dz(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function Lz(n,e,t=!1){let{routesMeta:i}=n,r={},s="/",a=[];for(let o=0;o<i.length;++o){let c=i[o],h=o===i.length-1,d=s==="/"?e:e.slice(s.length)||"/",p=bv({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},d),m=c.route;if(!p&&h&&t&&!i[i.length-1].route.index&&(p=bv({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!p)return null;Object.assign(r,p.params),a.push({params:r,pathname:Ho([s,p.pathname]),pathnameBase:Fz(Ho([s,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(s=Ho([s,p.pathnameBase]))}return a}function bv(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=Oz(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:i.reduce((h,{paramName:d,isOptional:p},m)=>{if(d==="*"){let v=o[m]||"";a=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const A=o[m];return p&&!A?h[d]=void 0:h[d]=(A||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:a,pattern:n}}function Oz(n,e=!1,t=!0){va(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,c)=>(i.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function Pz(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return va(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Yo(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function Uz(n,e="/"){let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?Lu(n):n;return{pathname:t?t.startsWith("/")?t:kz(t,e):e,search:Qz(i),hash:zz(r)}}function kz(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function Zx(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Nz(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function sP(n){let e=Nz(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function aP(n,e,t,i=!1){let r;typeof n=="string"?r=Lu(n):(r={...n},ei(!r.pathname||!r.pathname.includes("?"),Zx("?","pathname","search",r)),ei(!r.pathname||!r.pathname.includes("#"),Zx("#","pathname","hash",r)),ei(!r.search||!r.search.includes("#"),Zx("#","search","hash",r)));let s=n===""||r.pathname==="",a=s?"/":r.pathname,o;if(a==null)o=t;else{let p=e.length-1;if(!i&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),p-=1;r.pathname=m.join("/")}o=p>=0?e[p]:"/"}let c=Uz(r,o),h=a&&a!=="/"&&a.endsWith("/"),d=(s||a===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(h||d)&&(c.pathname+="/"),c}var Ho=n=>n.join("/").replace(/\/\/+/g,"/"),Fz=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Qz=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,zz=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Hz(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var oP=["POST","PUT","PATCH","DELETE"];new Set(oP);var Gz=["GET",...oP];new Set(Gz);var Pd=ie.createContext(null);Pd.displayName="DataRouter";var ky=ie.createContext(null);ky.displayName="DataRouterState";var lP=ie.createContext({isTransitioning:!1});lP.displayName="ViewTransition";var Vz=ie.createContext(new Map);Vz.displayName="Fetchers";var Wz=ie.createContext(null);Wz.displayName="Await";var eo=ie.createContext(null);eo.displayName="Navigation";var Qm=ie.createContext(null);Qm.displayName="Location";var il=ie.createContext({outlet:null,matches:[],isDataRoute:!1});il.displayName="Route";var Ww=ie.createContext(null);Ww.displayName="RouteError";function qz(n,{relative:e}={}){ei(zm(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=ie.useContext(eo),{hash:r,pathname:s,search:a}=Hm(n,{relative:e}),o=s;return t!=="/"&&(o=s==="/"?t:Ho([t,s])),i.createHref({pathname:o,search:a,hash:r})}function zm(){return ie.useContext(Qm)!=null}function Ou(){return ei(zm(),"useLocation() may be used only in the context of a <Router> component."),ie.useContext(Qm).location}var cP="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function uP(n){ie.useContext(eo).static||ie.useLayoutEffect(n)}function hP(){let{isDataRoute:n}=ie.useContext(il);return n?s6():jz()}function jz(){ei(zm(),"useNavigate() may be used only in the context of a <Router> component.");let n=ie.useContext(Pd),{basename:e,navigator:t}=ie.useContext(eo),{matches:i}=ie.useContext(il),{pathname:r}=Ou(),s=JSON.stringify(sP(i)),a=ie.useRef(!1);return uP(()=>{a.current=!0}),ie.useCallback((c,h={})=>{if(va(a.current,cP),!a.current)return;if(typeof c=="number"){t.go(c);return}let d=aP(c,JSON.parse(s),r,h.relative==="path");n==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ho([e,d.pathname])),(h.replace?t.replace:t.push)(d,h.state,h)},[e,t,s,r,n])}ie.createContext(null);function Hm(n,{relative:e}={}){let{matches:t}=ie.useContext(il),{pathname:i}=Ou(),r=JSON.stringify(sP(t));return ie.useMemo(()=>aP(n,JSON.parse(r),i,e==="path"),[n,r,i,e])}function Xz(n,e){return dP(n,e)}function dP(n,e,t,i){var C;ei(zm(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r,static:s}=ie.useContext(eo),{matches:a}=ie.useContext(il),o=a[a.length-1],c=o?o.params:{},h=o?o.pathname:"/",d=o?o.pathnameBase:"/",p=o&&o.route;{let _=p&&p.path||"";fP(h,!p||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let m=Ou(),A;if(e){let _=typeof e=="string"?Lu(e):e;ei(d==="/"||((C=_.pathname)==null?void 0:C.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${_.pathname}" was given in the \`location\` prop.`),A=_}else A=m;let v=A.pathname||"/",y=v;if(d!=="/"){let _=d.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(_.length).join("/")}let E=!s&&t&&t.matches&&t.matches.length>0?t.matches:nP(n,{pathname:y});va(p||E!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),va(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=$z(E&&E.map(_=>Object.assign({},_,{params:Object.assign({},c,_.params),pathname:Ho([d,r.encodeLocation?r.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?d:Ho([d,r.encodeLocation?r.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),a,t,i);return e&&b?ie.createElement(Qm.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},b):b}function Yz(){let n=r6(),e=Hz(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",n),a=ie.createElement(ie.Fragment,null,ie.createElement("p",null," Hey developer "),ie.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ie.createElement("code",{style:s},"ErrorBoundary")," or"," ",ie.createElement("code",{style:s},"errorElement")," prop on your route.")),ie.createElement(ie.Fragment,null,ie.createElement("h2",null,"Unexpected Application Error!"),ie.createElement("h3",{style:{fontStyle:"italic"}},e),t?ie.createElement("pre",{style:r},t):null,a)}var Kz=ie.createElement(Yz,null),Jz=class extends ie.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?ie.createElement(il.Provider,{value:this.props.routeContext},ie.createElement(Ww.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Zz({routeContext:n,match:e,children:t}){let i=ie.useContext(Pd);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),ie.createElement(il.Provider,{value:n},t)}function $z(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let r=n,s=t==null?void 0:t.errors;if(s!=null){let c=r.findIndex(h=>h.route.id&&(s==null?void 0:s[h.route.id])!==void 0);ei(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),r=r.slice(0,Math.min(r.length,c+1))}let a=!1,o=-1;if(t)for(let c=0;c<r.length;c++){let h=r[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(o=c),h.route.id){let{loaderData:d,errors:p}=t,m=h.route.loader&&!d.hasOwnProperty(h.route.id)&&(!p||p[h.route.id]===void 0);if(h.route.lazy||m){a=!0,o>=0?r=r.slice(0,o+1):r=[r[0]];break}}}return r.reduceRight((c,h,d)=>{let p,m=!1,A=null,v=null;t&&(p=s&&h.route.id?s[h.route.id]:void 0,A=h.route.errorElement||Kz,a&&(o<0&&d===0?(fP("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,v=null):o===d&&(m=!0,v=h.route.hydrateFallbackElement||null)));let y=e.concat(r.slice(0,d+1)),E=()=>{let b;return p?b=A:m?b=v:h.route.Component?b=ie.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=c,ie.createElement(Zz,{match:h,routeContext:{outlet:c,matches:y,isDataRoute:t!=null},children:b})};return t&&(h.route.ErrorBoundary||h.route.errorElement||d===0)?ie.createElement(Jz,{location:t.location,revalidation:t.revalidation,component:A,error:p,children:E(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):E()},null)}function qw(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function e6(n){let e=ie.useContext(Pd);return ei(e,qw(n)),e}function t6(n){let e=ie.useContext(ky);return ei(e,qw(n)),e}function n6(n){let e=ie.useContext(il);return ei(e,qw(n)),e}function jw(n){let e=n6(n),t=e.matches[e.matches.length-1];return ei(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function i6(){return jw("useRouteId")}function r6(){var i;let n=ie.useContext(Ww),e=t6("useRouteError"),t=jw("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function s6(){let{router:n}=e6("useNavigate"),e=jw("useNavigate"),t=ie.useRef(!1);return uP(()=>{t.current=!0}),ie.useCallback(async(r,s={})=>{va(t.current,cP),t.current&&(typeof r=="number"?n.navigate(r):await n.navigate(r,{fromRouteId:e,...s}))},[n,e])}var jI={};function fP(n,e,t){!e&&!jI[n]&&(jI[n]=!0,va(!1,t))}ie.memo(a6);function a6({routes:n,future:e,state:t}){return dP(n,void 0,t,e)}function vp(n){ei(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function o6({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:r,static:s=!1}){ei(!zm(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=n.replace(/^\/*/,"/"),o=ie.useMemo(()=>({basename:a,navigator:r,static:s,future:{}}),[a,r,s]);typeof t=="string"&&(t=Lu(t));let{pathname:c="/",search:h="",hash:d="",state:p=null,key:m="default"}=t,A=ie.useMemo(()=>{let v=Yo(c,a);return v==null?null:{location:{pathname:v,search:h,hash:d,state:p,key:m},navigationType:i}},[a,c,h,d,p,m,i]);return va(A!=null,`<Router basename="${a}"> is not able to match the URL "${c}${h}${d}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:ie.createElement(eo.Provider,{value:o},ie.createElement(Qm.Provider,{children:e,value:A}))}function l6({children:n,location:e}){return Xz(d1(n),e)}function d1(n,e=[]){let t=[];return ie.Children.forEach(n,(i,r)=>{if(!ie.isValidElement(i))return;let s=[...e,r];if(i.type===ie.Fragment){t.push.apply(t,d1(i.props.children,s));return}ei(i.type===vp,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ei(!i.props.index||!i.props.children,"An index route cannot have child routes.");let a={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=d1(i.props.children,s)),t.push(a)}),t}var X0="get",Y0="application/x-www-form-urlencoded";function Ny(n){return n!=null&&typeof n.tagName=="string"}function c6(n){return Ny(n)&&n.tagName.toLowerCase()==="button"}function u6(n){return Ny(n)&&n.tagName.toLowerCase()==="form"}function h6(n){return Ny(n)&&n.tagName.toLowerCase()==="input"}function d6(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function f6(n,e){return n.button===0&&(!e||e==="_self")&&!d6(n)}var fg=null;function p6(){if(fg===null)try{new FormData(document.createElement("form"),0),fg=!1}catch{fg=!0}return fg}var m6=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function $x(n){return n!=null&&!m6.has(n)?(va(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Y0}"`),null):n}function A6(n,e){let t,i,r,s,a;if(u6(n)){let o=n.getAttribute("action");i=o?Yo(o,e):null,t=n.getAttribute("method")||X0,r=$x(n.getAttribute("enctype"))||Y0,s=new FormData(n)}else if(c6(n)||h6(n)&&(n.type==="submit"||n.type==="image")){let o=n.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=n.getAttribute("formaction")||o.getAttribute("action");if(i=c?Yo(c,e):null,t=n.getAttribute("formmethod")||o.getAttribute("method")||X0,r=$x(n.getAttribute("formenctype"))||$x(o.getAttribute("enctype"))||Y0,s=new FormData(o,n),!p6()){let{name:h,type:d,value:p}=n;if(d==="image"){let m=h?`${h}.`:"";s.append(`${m}x`,"0"),s.append(`${m}y`,"0")}else h&&s.append(h,p)}}else{if(Ny(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=X0,i=null,r=Y0,a=n}return s&&r==="text/plain"&&(a=s,s=void 0),{action:i,method:t.toLowerCase(),encType:r,formData:s,body:a}}function Xw(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function g6(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function v6(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function y6(n,e,t){let i=await Promise.all(n.map(async r=>{let s=e.routes[r.route.id];if(s){let a=await g6(s,t);return a.links?a.links():[]}return[]}));return C6(i.flat(1).filter(v6).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function XI(n,e,t,i,r,s){let a=(c,h)=>t[h]?c.route.id!==t[h].route.id:!0,o=(c,h)=>{var d;return t[h].pathname!==c.pathname||((d=t[h].route.path)==null?void 0:d.endsWith("*"))&&t[h].params["*"]!==c.params["*"]};return s==="assets"?e.filter((c,h)=>a(c,h)||o(c,h)):s==="data"?e.filter((c,h)=>{var p;let d=i.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(a(c,h)||o(c,h))return!0;if(c.route.shouldRevalidate){let m=c.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((p=t[0])==null?void 0:p.params)||{},nextUrl:new URL(n,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function b6(n,e,{includeHydrateFallback:t}={}){return E6(n.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function E6(n){return[...new Set(n)]}function x6(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function C6(n,e){let t=new Set;return new Set(e),n.reduce((i,r)=>{let s=JSON.stringify(x6(r));return t.has(s)||(t.add(s),i.push({key:s,link:r})),i},[])}var _6=new Set([100,101,204,205]);function w6(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Yo(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function pP(){let n=ie.useContext(Pd);return Xw(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function S6(){let n=ie.useContext(ky);return Xw(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Yw=ie.createContext(void 0);Yw.displayName="FrameworkContext";function mP(){let n=ie.useContext(Yw);return Xw(n,"You must render this element inside a <HydratedRouter> element"),n}function M6(n,e){let t=ie.useContext(Yw),[i,r]=ie.useState(!1),[s,a]=ie.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:h,onMouseLeave:d,onTouchStart:p}=e,m=ie.useRef(null);ie.useEffect(()=>{if(n==="render"&&a(!0),n==="viewport"){let y=b=>{b.forEach(C=>{a(C.isIntersecting)})},E=new IntersectionObserver(y,{threshold:.5});return m.current&&E.observe(m.current),()=>{E.disconnect()}}},[n]),ie.useEffect(()=>{if(i){let y=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(y)}}},[i]);let A=()=>{r(!0)},v=()=>{r(!1),a(!1)};return t?n!=="intent"?[s,m,{}]:[s,m,{onFocus:Hf(o,A),onBlur:Hf(c,v),onMouseEnter:Hf(h,A),onMouseLeave:Hf(d,v),onTouchStart:Hf(p,A)}]:[!1,m,{}]}function Hf(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function T6({page:n,...e}){let{router:t}=pP(),i=ie.useMemo(()=>nP(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?ie.createElement(I6,{page:n,matches:i,...e}):null}function B6(n){let{manifest:e,routeModules:t}=mP(),[i,r]=ie.useState([]);return ie.useEffect(()=>{let s=!1;return y6(n,e,t).then(a=>{s||r(a)}),()=>{s=!0}},[n,e,t]),i}function I6({page:n,matches:e,...t}){let i=Ou(),{manifest:r,routeModules:s}=mP(),{basename:a}=pP(),{loaderData:o,matches:c}=S6(),h=ie.useMemo(()=>XI(n,e,c,r,i,"data"),[n,e,c,r,i]),d=ie.useMemo(()=>XI(n,e,c,r,i,"assets"),[n,e,c,r,i]),p=ie.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let v=new Set,y=!1;if(e.forEach(b=>{var _;let C=r.routes[b.route.id];!C||!C.hasLoader||(!h.some(w=>w.route.id===b.route.id)&&b.route.id in o&&((_=s[b.route.id])!=null&&_.shouldRevalidate)||C.hasClientLoader?y=!0:v.add(b.route.id))}),v.size===0)return[];let E=w6(n,a);return y&&v.size>0&&E.searchParams.set("_routes",e.filter(b=>v.has(b.route.id)).map(b=>b.route.id).join(",")),[E.pathname+E.search]},[a,o,i,r,h,e,n,s]),m=ie.useMemo(()=>b6(d,r),[d,r]),A=B6(d);return ie.createElement(ie.Fragment,null,p.map(v=>ie.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...t})),m.map(v=>ie.createElement("link",{key:v,rel:"modulepreload",href:v,...t})),A.map(({key:v,link:y})=>ie.createElement("link",{key:v,...y})))}function R6(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var AP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{AP&&(window.__reactRouterVersion="7.5.3")}catch{}function D6({basename:n,children:e,window:t}){let i=ie.useRef();i.current==null&&(i.current=bz({window:t,v5Compat:!0}));let r=i.current,[s,a]=ie.useState({action:r.action,location:r.location}),o=ie.useCallback(c=>{ie.startTransition(()=>a(c))},[a]);return ie.useLayoutEffect(()=>r.listen(o),[r,o]),ie.createElement(o6,{basename:n,children:e,location:s.location,navigationType:s.action,navigator:r})}var gP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Kw=ie.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:r,reloadDocument:s,replace:a,state:o,target:c,to:h,preventScrollReset:d,viewTransition:p,...m},A){let{basename:v}=ie.useContext(eo),y=typeof h=="string"&&gP.test(h),E,b=!1;if(typeof h=="string"&&y&&(E=h,AP))try{let D=new URL(window.location.href),M=h.startsWith("//")?new URL(D.protocol+h):new URL(h),k=Yo(M.pathname,v);M.origin===D.origin&&k!=null?h=k+M.search+M.hash:b=!0}catch{va(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=qz(h,{relative:r}),[_,w,T]=M6(i,m),L=U6(h,{replace:a,state:o,target:c,preventScrollReset:d,relative:r,viewTransition:p});function R(D){e&&e(D),D.defaultPrevented||L(D)}let P=ie.createElement("a",{...m,...T,href:E||C,onClick:b||s?e:R,ref:R6(A,w),target:c,"data-discover":!y&&t==="render"?"true":void 0});return _&&!y?ie.createElement(ie.Fragment,null,P,ie.createElement(T6,{page:C})):P});Kw.displayName="Link";var L6=ie.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:r=!1,style:s,to:a,viewTransition:o,children:c,...h},d){let p=Hm(a,{relative:h.relative}),m=Ou(),A=ie.useContext(ky),{navigator:v,basename:y}=ie.useContext(eo),E=A!=null&&z6(p)&&o===!0,b=v.encodeLocation?v.encodeLocation(p).pathname:p.pathname,C=m.pathname,_=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;t||(C=C.toLowerCase(),_=_?_.toLowerCase():null,b=b.toLowerCase()),_&&y&&(_=Yo(_,y)||_);const w=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let T=C===b||!r&&C.startsWith(b)&&C.charAt(w)==="/",L=_!=null&&(_===b||!r&&_.startsWith(b)&&_.charAt(b.length)==="/"),R={isActive:T,isPending:L,isTransitioning:E},P=T?e:void 0,D;typeof i=="function"?D=i(R):D=[i,T?"active":null,L?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let M=typeof s=="function"?s(R):s;return ie.createElement(Kw,{...h,"aria-current":P,className:D,ref:d,style:M,to:a,viewTransition:o},typeof c=="function"?c(R):c)});L6.displayName="NavLink";var O6=ie.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:r,state:s,method:a=X0,action:o,onSubmit:c,relative:h,preventScrollReset:d,viewTransition:p,...m},A)=>{let v=F6(),y=Q6(o,{relative:h}),E=a.toLowerCase()==="get"?"get":"post",b=typeof o=="string"&&gP.test(o),C=_=>{if(c&&c(_),_.defaultPrevented)return;_.preventDefault();let w=_.nativeEvent.submitter,T=(w==null?void 0:w.getAttribute("formmethod"))||a;v(w||_.currentTarget,{fetcherKey:e,method:T,navigate:t,replace:r,state:s,relative:h,preventScrollReset:d,viewTransition:p})};return ie.createElement("form",{ref:A,method:E,action:y,onSubmit:i?c:C,...m,"data-discover":!b&&n==="render"?"true":void 0})});O6.displayName="Form";function P6(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vP(n){let e=ie.useContext(Pd);return ei(e,P6(n)),e}function U6(n,{target:e,replace:t,state:i,preventScrollReset:r,relative:s,viewTransition:a}={}){let o=hP(),c=Ou(),h=Hm(n,{relative:s});return ie.useCallback(d=>{if(f6(d,e)){d.preventDefault();let p=t!==void 0?t:im(c)===im(h);o(n,{replace:p,state:i,preventScrollReset:r,relative:s,viewTransition:a})}},[c,o,h,t,i,e,n,r,s,a])}var k6=0,N6=()=>`__${String(++k6)}__`;function F6(){let{router:n}=vP("useSubmit"),{basename:e}=ie.useContext(eo),t=i6();return ie.useCallback(async(i,r={})=>{let{action:s,method:a,encType:o,formData:c,body:h}=A6(i,e);if(r.navigate===!1){let d=r.fetcherKey||N6();await n.fetch(d,t,r.action||s,{preventScrollReset:r.preventScrollReset,formData:c,body:h,formMethod:r.method||a,formEncType:r.encType||o,flushSync:r.flushSync})}else await n.navigate(r.action||s,{preventScrollReset:r.preventScrollReset,formData:c,body:h,formMethod:r.method||a,formEncType:r.encType||o,replace:r.replace,state:r.state,fromRouteId:t,flushSync:r.flushSync,viewTransition:r.viewTransition})},[n,e,t])}function Q6(n,{relative:e}={}){let{basename:t}=ie.useContext(eo),i=ie.useContext(il);ei(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),s={...Hm(n||".",{relative:e})},a=Ou();if(n==null){s.search=a.search;let o=new URLSearchParams(s.search),c=o.getAll("index");if(c.some(d=>d==="")){o.delete("index"),c.filter(p=>p).forEach(p=>o.append("index",p));let d=o.toString();s.search=d?`?${d}`:""}}return(!n||n===".")&&r.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:Ho([t,s.pathname])),im(s)}function z6(n,e={}){let t=ie.useContext(lP);ei(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=vP("useViewTransitionState"),r=Hm(n,{relative:e.relative});if(!t.isTransitioning)return!1;let s=Yo(t.currentLocation.pathname,i)||t.currentLocation.pathname,a=Yo(t.nextLocation.pathname,i)||t.nextLocation.pathname;return bv(r.pathname,a)!=null||bv(r.pathname,s)!=null}new TextEncoder;[..._6];const H6=JSON.parse(`[{"id":"header","name":"Header Section","description":"Simple header with logo","configuration":{"backgroundColor":"transparent","textColor":"var(--color-blue)","padding":"0rem","fullWidth":true,"fullHeight":false,"alignment":"left","verticalAlignment":"top","backgroundImage":"","hasShadow":true,"borderRadius":"0","glassmorphism":true,"contentImage":{"src":"/logos/wayside-cl.png","alt":"Site Logo","width":"100vw","height":"auto","position":"above"},"titleClassName":"text-5xl md:text-7xl font-black tracking-tight mb-6","position":"fixed","zIndex":50,"className":"header-container"}},{"id":"hero","name":"Hero Section","description":"","configuration":{"title":"","subtitle":"An Augmented Reality (AR) view of Kenliworth Aquatic Gardens","content":"","backgroundColor":"transparent","textColor":"var(--color-light)","width":"100vw","height":"flex","padding":"0rem 1rem 0rem 1rem","fullWidth":true,"fullHeight":false,"alignment":"center","verticalAlignment":"top","backgroundImage":"","hasShadow":true,"borderRadius":"0","glassmorphism":false,"animateIn":false,"animationType":"fade","animationDuration":0.8,"animationDelay":0.2,"fontFamily":"'rigby', sans-serif","variableFontSettings":{"wght":800,"wdth":100},"fontAnimatesOnScroll":true,"fontAnimationRange":[0.1,0.6],"subtitleClassName":"","className":"hero-container relative z-10 text-center opacity-0"}},{"id":"info-card","name":"Info Card","description":"Card with description of Project","configuration":{"title":"","subtitle":"","content":"Wayside is an AR app designed by Andrew Kastner, an artist-in-residence at Kenilworth Aquatic Gardens in partnership with Capital Fringe. \\n\\n  His residency has been focused on researching the history and climate change impacts to the park and transforming them into artistic interpretations within three themes: time, seasons, and moments.\\n\\nThe goal is simple: to connect visitors to the park's rich history, present challenges, and future prospects in a more sensory, open-ended way.Andrew is a stroke survivor living with aphasia, the confusion of language. He built this as a \\"post linguistic\\" experience, encouraging others to navigate using symbols in place of words when possible.","backgroundColor":"var(--color-dark)","textColor":"var(--color-light)","fontFamily":"'rigby', sans-serif","margin":"1rem 1rem 0rem 1rem","width":"auto","height":"auto","padding":"1.5rem","fullWidth":false,"borderRadius":"3rem","hasShadow":true,"alignment":"left","animateIn":true,"animationType":"slide","scrollTrigger":true,"interactive":false,"hoverEffect":"lift","className":"info-card transform transition duration-100 ease-in-out"}},{"id":"kenilworthLogo","name":"Kenilworth Logo","description":"Display the kenliworth logo","configuration":{"backgroundColor":"var(--color-light)","textColor":"","width":"auto","height":"auto","margin":"1rem","padding":"1.5rem","borderRadius":"3rem","fullWidth":false,"alignment":"center","animateIn":true,"animationType":"slide","scrollTrigger":true,"hasShadow":true,"contentImage":{"src":"/logos/Kenilworth.png","alt":"Kenilworth Aquatic Gardens Logo","position":"above","width":"100%","className":"kenilworthLogo shadow-lg transform transition duration-100 ease-in-out"},"className":"split-section py-16"}},{"id":"buttonToOnboarding","name":"Button","description":"Button that goes to onboarding","configuration":{"subtitle":"Click Me","backgroundColor":"var(--color-dark)","textColor":"var(--color-pink)","width":"auto","padding":"1rem 2rem","borderRadius":"0.5rem","hasShadow":true,"targetId":"","href":"","openInNewTab":false,"interactive":true,"hoverEffect":"lift","alignment":"center","contentImage_HOLDER":{"note":"to activate the contentImage take _HOLDER off","src":"","alt":"Button icon","position":"above","width":"24px","height":"24px"},"fontFamily":"'rigby', sans-serif","backgroundImage":"","titleClassName":"font-bold","className":"button-component cursor-pointer"}},{"id":"video-showcase","name":"Video Showcase","description":"Large video with text overlay","configuration":{"title":"Watch Our Story","subtitle":"How we created this experience","backgroundColor":"transparent","textColor":"#ffffff","width":"100%","height":"80vh","padding":"0","fullWidth":true,"backgroundVideo":"/path/to/background-video.mp4","glassmorphism":true,"alignment":"center","verticalAlignment":"center","contentClassName":"w-full max-w-4xl p-8 backdrop-blur-sm bg-black/40 rounded-xl","titleClassName":"text-4xl font-bold mb-4","className":"video-showcase overflow-hidden relative","scrollParallax":true,"parallaxStrength":0.2}},{"id":"split-content","name":"Split Content Section","description":"Text on one side, media on the other","configuration":{"title":"Discover More","subtitle":"Explore our capabilities","content":"Our platform combines cutting-edge technology with intuitive design to create memorable experiences.","backgroundColor":"#f5f5f7","textColor":"#333","width":"100%","height":"auto","padding":"4rem","fullWidth":true,"contentImage":{"src":"/path/to/side-image.jpg","alt":"Platform capabilities illustration","position":"right","width":"45%","className":"rounded-xl overflow-hidden shadow-lg"},"alignment":"left","titleClassName":"text-3xl font-bold mb-4","textClassName":"text-lg leading-relaxed max-w-prose","animateIn":true,"animationType":"fade","scrollTrigger":true,"className":"split-section py-16"}},{"id":"typography-showcase","name":"Typography Showcase","description":"Section highlighting variable font capabilities","configuration":{"title":"Typography in Motion","subtitle":"Variable fonts demonstration","content":"Experience how typography can transform through motion and interaction.","backgroundColor":"var(--color-dark)","textColor":"var(--color-light)","padding":"5rem 2rem","fullWidth":true,"alignment":"center","verticalAlignment":"center","fontFamily":"'Fraunces Variable', serif","variableFontSettings":{"wght":400,"wdth":100,"opsz":14,"slnt":0},"fontAnimatesOnScroll":true,"fontAnimationRange":[0.2,0.8],"titleClassName":"text-6xl mb-6","subtitleClassName":"text-2xl mb-12 opacity-70","contentClassName":"max-w-3xl mx-auto","className":"typography-showcase min-h-[70vh] flex items-center justify-center"}},{"id":"carousel-card","name":"Carousel Card","description":"Card designed specifically for carousel sections","configuration":{"title":"Slide Title","subtitle":"Supporting information","backgroundColor":"transparent","textColor":"var(--color-light)","width":"90%","height":"80%","padding":"1rem","margin":"1rem","borderRadius":"1.5rem","hasShadow":true,"alignment":"center","contentImage":{"src":"/picto/lock.png","alt":"lock","position":"above","width":"60%","className":"mt-8 rounded-lg overflow-hidden"},"fontFamily":"'rigby', sans-serif","variableFontSettings":{"wght":400},"titleClassName":"text-3xl font-bold mb-2","subtitleClassName":"text-xl opacity-75 mb-6","className":"carousel-content-card"}},{"id":"horizontal-panel","name":"Horizontal Panel Content","description":"Content designed for horizontal scrolling panels","configuration":{"title":"Horizontal Panel","content":"This panel appears during horizontal scrolling sections.","backgroundColor":"var(--color-blue)","textColor":"var(--color-light)","width":"100vw","height":"100%","padding":"3rem","fullWidth":true,"fullHeight":true,"alignment":"center","verticalAlignment":"center","contentImage":{"src":"","alt":"","position":"below","width":"60%","className":"mt-8 rounded-lg overflow-hidden"},"scrollParallax":true,"parallaxStrength":0.15,"titleClassName":"text-4xl font-bold mb-6","contentClassName":"flex flex-col items-center justify-center","className":"horizontal-panel-content"}},{"id":"statistics-section","name":"Statistics Display","description":"Section for displaying key statistics or numbers","configuration":{"backgroundColor":"#f8f9fa","textColor":"#212529","width":"100%","padding":"5rem 2rem","fullWidth":true,"alignment":"center","content":"<div class='grid grid-cols-1 md:grid-cols-3 gap-10'><div class='stat-item'><h3 class='text-5xl font-bold mb-2'>98%</h3><p>Customer Satisfaction</p></div><div class='stat-item'><h3 class='text-5xl font-bold mb-2'>24/7</h3><p>Support Available</p></div><div class='stat-item'><h3 class='text-5xl font-bold mb-2'>15+</h3><p>Years Experience</p></div></div>","animateIn":true,"scrollTrigger":true,"fontFamily":"'Inter Variable', sans-serif","className":"statistics-section py-16"}},{"id":"cta-section","name":"Call to Action","description":"Prominent call to action section","configuration":{"title":"Ready to Get Started?","subtitle":"Join thousands of satisfied customers today","backgroundColor":"var(--color-blue)","textColor":"var(--color-light)","width":"100%","padding":"6rem 2rem","fullWidth":true,"alignment":"center","verticalAlignment":"center","content":"<div class='mt-10'><a href='#contact' class='px-8 py-4 bg-white text-blue-900 rounded-full text-xl font-medium hover:bg-opacity-90 transition'>Contact Us Now</a></div>","glassmorphism":false,"borderRadius":"0","animateIn":true,"animationType":"fade","titleClassName":"text-5xl font-bold mb-4","subtitleClassName":"text-xl max-w-2xl mx-auto","contentClassName":"flex flex-col items-center","className":"cta-section"}},{"id":"footer","name":"Footer Section","description":"Simple footer with logo","configuration":{"backgroundColor":"var(--color-dark)","textColor":"var(--color-blue)","width":"100vw","height":"60px","padding":"1rem","fullWidth":true,"fullHeight":false,"alignment":"center","verticalAlignment":"center","backgroundImage":"","hasShadow":true,"borderRadius":"0","glassmorphism":true,"logoImage":{"src":"/path/to/logo.png","alt":"Site Logo","width":"auto","height":"40px","position":"above"},"className":"footer-container"}},{"id":"testimonial-card","name":"Testimonial Card","description":"Customer testimonial with image and quote","configuration":{"title":"What Our Customers Say","content":"\\"This product has completely transformed our workflow. The interface is intuitive and the support team is incredible.\\"","subtitle":"John Smith, CEO at Tech Innovators","backgroundColor":"var(--color-light)","textColor":"var(--color-dark)","width":"100%","height":"auto","padding":"3rem","borderRadius":"1rem","hasShadow":true,"contentImage":{"src":"/path/to/customer-avatar.jpg","alt":"Customer profile","position":"above","width":"80px","height":"80px","className":"rounded-full mx-auto mb-6"},"alignment":"center","titleClassName":"sr-only","textClassName":"text-xl italic font-light leading-relaxed mb-6","subtitleClassName":"text-sm font-semibold","className":"testimonial-card max-w-2xl mx-auto"}},{"id":"button","name":"Button","description":"Interactive button with configurable styling","configuration":{"title":"Click Me","backgroundColor":"var(--color-blue)","textColor":"var(--color-light)","width":"auto","padding":"1rem 2rem","borderRadius":"0.5rem","hasShadow":true,"targetId":"","href":"","openInNewTab":false,"interactive":true,"hoverEffect":"lift","alignment":"center","contentImage":{"src":"","alt":"Button icon","position":"above","width":"24px","height":"24px"},"backgroundImage":"","titleClassName":"font-bold","className":"button-component cursor-pointer"}}]`),G6=[{id:"single-column",name:"Single Column",description:"Full width single column layout",className:"w-full max-w-5xl mx-auto px-4"},{id:"two-column",name:"Two Column",description:"Two equal columns",className:"grid grid-cols-1 md:grid-cols-2 gap-8"},{id:"three-column",name:"Three Column",description:"Three equal columns",className:"grid grid-cols-1 md:grid-cols-3 gap-6"},{id:"asymmetric",name:"Asymmetric Columns",description:"One large column with smaller side column",className:"grid grid-cols-1 md:grid-cols-3 gap-8",childClassNames:{main:"col-span-2",side:"col-span-1"}}],V6={images:[{id:"hero-bg",path:"/assets/images/hero-background.jpg",alt:"Hero background image",type:"background"},{id:"feature-1",path:"/assets/images/feature-1.jpg",alt:"Feature one illustration",type:"content"},{id:"profile-avatar",path:"/assets/images/profile-avatar.jpg",alt:"User profile picture",type:"avatar"}],videos:[{id:"intro-video",path:"/assets/videos/intro.mp4",poster:"/assets/images/video-poster.jpg",type:"background"},{id:"product-demo",path:"/assets/videos/product-demo.mp4",poster:"/assets/images/demo-poster.jpg",type:"content"}]},W6=[{id:"primary",name:"Primary Palette",colors:{background:"var(--color-light)",text:"var(--color-dark)",accent:"var(--color-blue)",highlight:"var(--color-green)"}},{id:"dark",name:"Dark Mode",colors:{background:"var(--color-dark)",text:"var(--color-light)",accent:"var(--color-blue)",highlight:"var(--color-pink)"}},{id:"vibrant",name:"Vibrant",colors:{background:"var(--color-pink)",text:"var(--color-light)",accent:"var(--color-blue)",highlight:"var(--color-green)"}}],q6=[{id:"heading-large",fontFamily:"'Inter Variable', sans-serif",className:"text-5xl md:text-6xl font-bold tracking-tight",variableFontSettings:{wght:800,wdth:100}},{id:"heading-medium",fontFamily:"'Inter Variable', sans-serif",className:"text-3xl md:text-4xl font-semibold",variableFontSettings:{wght:600,wdth:100}},{id:"body-text",fontFamily:"'Inter Variable', sans-serif",className:"text-base md:text-lg leading-relaxed",variableFontSettings:{wght:400,wdth:100}},{id:"caption",fontFamily:"'Inter Variable', sans-serif",className:"text-sm opacity-75",variableFontSettings:{wght:400,wdth:100}}],j6=[{id:"fade-in",type:"fade",duration:.8,delay:.2,scrollTrigger:!0},{id:"slide-up",type:"slide",duration:.6,delay:0,scrollTrigger:!0},{id:"scale-in",type:"scale",duration:.5,delay:.1,scrollTrigger:!0},{id:"stagger-children",type:"custom",customAnimation:{autoAlpha:1,y:0,stagger:.1},scrollTrigger:!0}],bo={contentTemplates:H6,contentLayouts:G6,mediaAssets:V6,colorPalettes:W6,typographySettings:q6,animationOptions:j6},ru={getTemplateById:n=>{const e=bo.contentTemplates.find(t=>t.id===n);return e?e.configuration:(console.warn(`Template with ID "${n}" not found.`),null)},getLayoutById:n=>{const e=bo.contentLayouts.find(t=>t.id===n);return e||(console.warn(`Layout with ID "${n}" not found.`),null)},getColorPaletteById:n=>{const e=bo.colorPalettes.find(t=>t.id===n);return e?e.colors:(console.warn(`Color palette with ID "${n}" not found.`),null)},getTypographyById:n=>{const e=bo.typographySettings.find(t=>t.id===n);return e||(console.warn(`Typography settings with ID "${n}" not found.`),null)},getAnimationById:n=>{const e=bo.animationOptions.find(t=>t.id===n);return e||(console.warn(`Animation with ID "${n}" not found.`),null)},getMediaById:n=>{const e=bo.mediaAssets.images,t=bo.mediaAssets.videos,i=e.find(s=>s.id===n);if(i)return i;const r=t.find(s=>s.id===n);return r||(console.warn(`Media asset with ID "${n}" not found.`),null)},createConfigFromTemplate:(n,e={})=>{const t=ru.getTemplateById(n);return t?{...t,...e}:(console.error(`Cannot create config: Template with ID "${n}" not found.`),e)},applyColorPalette:(n,e)=>{const t=ru.getColorPaletteById(e);return t?{...n,backgroundColor:t.background,textColor:t.text}:n},getAllTemplates:()=>bo.contentTemplates.map(n=>({id:n.id,name:n.name,description:n.description})),getAllLayouts:()=>bo.contentLayouts.map(n=>({id:n.id,name:n.name,description:n.description}))};var eC={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var YI;function X6(){return YI||(YI=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var s="",a=0;a<arguments.length;a++){var o=arguments[a];o&&(s=r(s,i(o)))}return s}function i(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var a="";for(var o in s)e.call(s,o)&&s[o]&&(a=r(a,o));return a}function r(s,a){return a?s?s+" "+a:s+a:s}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(eC)),eC.exports}var Y6=X6();const Ji=Hw(Y6);function Ro(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function yP(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Bs={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},xd={duration:.5,overwrite:!1,delay:0},Jw,ir,qn,Wa=1e8,Ar=1/Wa,f1=Math.PI*2,K6=f1/4,J6=0,bP=Math.sqrt,Z6=Math.cos,$6=Math.sin,Wi=function(e){return typeof e=="string"},li=function(e){return typeof e=="function"},Ko=function(e){return typeof e=="number"},Zw=function(e){return typeof e>"u"},Za=function(e){return typeof e=="object"},$r=function(e){return e!==!1},$w=function(){return typeof window<"u"},pg=function(e){return li(e)||Wi(e)},EP=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},gr=Array.isArray,p1=/(?:-?\.?\d|\.)+/gi,xP=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,id=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,tC=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,CP=/[+-]=-?[.\d]+/,_P=/[^,'"\[\]\s]+/gi,e4=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Jn,La,m1,eS,Ds={},Ev={},wP,SP=function(e){return(Ev=Cd(e,Ds))&&rs},tS=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},rm=function(e,t){return!t&&console.warn(e)},MP=function(e,t){return e&&(Ds[e]=t)&&Ev&&(Ev[e]=t)||Ds},sm=function(){return 0},t4={suppressEvents:!0,isStart:!0,kill:!1},K0={suppressEvents:!0,kill:!1},n4={suppressEvents:!0},nS={},ql=[],A1={},TP,bs={},nC={},KI=30,J0=[],iS="",rS=function(e){var t=e[0],i,r;if(Za(t)||li(t)||(e=[e]),!(i=(t._gsap||{}).harness)){for(r=J0.length;r--&&!J0[r].targetTest(t););i=J0[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new ZP(e[r],i)))||e.splice(r,1);return e},du=function(e){return e._gsap||rS(Ks(e))[0]._gsap},BP=function(e,t,i){return(i=e[t])&&li(i)?e[t]():Zw(i)&&e.getAttribute&&e.getAttribute(t)||i},es=function(e,t){return(e=e.split(",")).forEach(t)||e},fi=function(e){return Math.round(e*1e5)/1e5||0},wi=function(e){return Math.round(e*1e7)/1e7||0},dd=function(e,t){var i=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),i==="+"?e+r:i==="-"?e-r:i==="*"?e*r:e/r},i4=function(e,t){for(var i=t.length,r=0;e.indexOf(t[r])<0&&++r<i;);return r<i},xv=function(){var e=ql.length,t=ql.slice(0),i,r;for(A1={},ql.length=0,i=0;i<e;i++)r=t[i],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},IP=function(e,t,i,r){ql.length&&!ir&&xv(),e.render(t,i,ir&&t<0&&(e._initted||e._startAt)),ql.length&&!ir&&xv()},RP=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(_P).length<2?t:Wi(e)?e.trim():e},DP=function(e){return e},Ls=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},r4=function(e){return function(t,i){for(var r in i)r in t||r==="duration"&&e||r==="ease"||(t[r]=i[r])}},Cd=function(e,t){for(var i in t)e[i]=t[i];return e},JI=function n(e,t){for(var i in t)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(e[i]=Za(t[i])?n(e[i]||(e[i]={}),t[i]):t[i]);return e},Cv=function(e,t){var i={},r;for(r in e)r in t||(i[r]=e[r]);return i},Lp=function(e){var t=e.parent||Jn,i=e.keyframes?r4(gr(e.keyframes)):Ls;if($r(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},s4=function(e,t){for(var i=e.length,r=i===t.length;r&&i--&&e[i]===t[i];);return i<0},LP=function(e,t,i,r,s){var a=e[r],o;if(s)for(o=t[s];a&&a[s]>o;)a=a._prev;return a?(t._next=a._next,a._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[r]=t,t._prev=a,t.parent=t._dp=e,t},Fy=function(e,t,i,r){i===void 0&&(i="_first"),r===void 0&&(r="_last");var s=t._prev,a=t._next;s?s._next=a:e[i]===t&&(e[i]=a),a?a._prev=s:e[r]===t&&(e[r]=s),t._next=t._prev=t.parent=null},Zl=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},fu=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},a4=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},g1=function(e,t,i,r){return e._startAt&&(ir?e._startAt.revert(K0):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},o4=function n(e){return!e||e._ts&&n(e.parent)},ZI=function(e){return e._repeat?_d(e._tTime,e=e.duration()+e._rDelay)*e:0},_d=function(e,t){var i=Math.floor(e=wi(e/t));return e&&i===e?i-1:i},_v=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Qy=function(e){return e._end=wi(e._start+(e._tDur/Math.abs(e._ts||e._rts||Ar)||0))},zy=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=wi(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Qy(e),i._dirty||fu(i,e)),e},OP=function(e,t){var i;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(i=_v(e.rawTime(),t),(!t._dur||Gm(0,t.totalDuration(),i)-t._tTime>Ar)&&t.render(i,!0)),fu(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-1e-8}},Na=function(e,t,i,r){return t.parent&&Zl(t),t._start=wi((Ko(i)?i:i||e!==Jn?Ws(e,i,t):e._time)+t._delay),t._end=wi(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),LP(e,t,"_first","_last",e._sort?"_start":0),v1(t)||(e._recent=t),r||OP(e,t),e._ts<0&&zy(e,e._tTime),e},PP=function(e,t){return(Ds.ScrollTrigger||tS("scrollTrigger",t))&&Ds.ScrollTrigger.create(t,e)},UP=function(e,t,i,r,s){if(aS(e,t,s),!e._initted)return 1;if(!i&&e._pt&&!ir&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&TP!==_s.frame)return ql.push(e),e._lazy=[s,r],1},l4=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},v1=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},c4=function(e,t,i,r){var s=e.ratio,a=t<0||!t&&(!e._start&&l4(e)&&!(!e._initted&&v1(e))||(e._ts<0||e._dp._ts<0)&&!v1(e))?0:1,o=e._rDelay,c=0,h,d,p;if(o&&e._repeat&&(c=Gm(0,e._tDur,t),d=_d(c,o),e._yoyo&&d&1&&(a=1-a),d!==_d(e._tTime,o)&&(s=1-a,e.vars.repeatRefresh&&e._initted&&e.invalidate())),a!==s||ir||r||e._zTime===Ar||!t&&e._zTime){if(!e._initted&&UP(e,t,r,i,c))return;for(p=e._zTime,e._zTime=t||(i?Ar:0),i||(i=t&&!p),e.ratio=a,e._from&&(a=1-a),e._time=0,e._tTime=c,h=e._pt;h;)h.r(a,h.d),h=h._next;t<0&&g1(e,t,i,!0),e._onUpdate&&!i&&Ts(e,"onUpdate"),c&&e._repeat&&!i&&e.parent&&Ts(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===a&&(a&&Zl(e,1),!i&&!ir&&(Ts(e,a?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},u4=function(e,t,i){var r;if(i>t)for(r=e._first;r&&r._start<=i;){if(r.data==="isPause"&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=i;){if(r.data==="isPause"&&r._start<t)return r;r=r._prev}},wd=function(e,t,i,r){var s=e._repeat,a=wi(t)||0,o=e._tTime/e._tDur;return o&&!r&&(e._time*=a/e._dur),e._dur=a,e._tDur=s?s<0?1e10:wi(a*(s+1)+e._rDelay*s):a,o>0&&!r&&zy(e,e._tTime=e._tDur*o),e.parent&&Qy(e),i||fu(e.parent,e),e},$I=function(e){return e instanceof Dr?fu(e):wd(e,e._dur)},h4={_start:0,endTime:sm,totalDuration:sm},Ws=function n(e,t,i){var r=e.labels,s=e._recent||h4,a=e.duration()>=Wa?s.endTime(!1):e._dur,o,c,h;return Wi(t)&&(isNaN(t)||t in r)?(c=t.charAt(0),h=t.substr(-1)==="%",o=t.indexOf("="),c==="<"||c===">"?(o>=0&&(t=t.replace(/=/,"")),(c==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(h?(o<0?s:i).totalDuration()/100:1)):o<0?(t in r||(r[t]=a),r[t]):(c=parseFloat(t.charAt(o-1)+t.substr(o+1)),h&&i&&(c=c/100*(gr(i)?i[0]:i).totalDuration()),o>1?n(e,t.substr(0,o-1),i)+c:a+c)):t==null?a:+t},Op=function(e,t,i){var r=Ko(t[1]),s=(r?2:1)+(e<2?0:1),a=t[s],o,c;if(r&&(a.duration=t[1]),a.parent=i,e){for(o=a,c=i;c&&!("immediateRender"in o);)o=c.vars.defaults||{},c=$r(c.vars.inherit)&&c.parent;a.immediateRender=$r(o.immediateRender),e<2?a.runBackwards=1:a.startAt=t[s-1]}return new _i(t[0],a,t[s+1])},oc=function(e,t){return e||e===0?t(e):t},Gm=function(e,t,i){return i<e?e:i>t?t:i},pr=function(e,t){return!Wi(e)||!(t=e4.exec(e))?"":t[1]},d4=function(e,t,i){return oc(i,function(r){return Gm(e,t,r)})},y1=[].slice,kP=function(e,t){return e&&Za(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Za(e[0]))&&!e.nodeType&&e!==La},f4=function(e,t,i){return i===void 0&&(i=[]),e.forEach(function(r){var s;return Wi(r)&&!t||kP(r,1)?(s=i).push.apply(s,Ks(r)):i.push(r)})||i},Ks=function(e,t,i){return qn&&!t&&qn.selector?qn.selector(e):Wi(e)&&!i&&(m1||!Sd())?y1.call((t||eS).querySelectorAll(e),0):gr(e)?f4(e,i):kP(e)?y1.call(e,0):e?[e]:[]},b1=function(e){return e=Ks(e)[0]||rm("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return Ks(t,i.querySelectorAll?i:i===e?rm("Invalid scope")||eS.createElement("div"):e)}},NP=function(e){return e.sort(function(){return .5-Math.random()})},FP=function(e){if(li(e))return e;var t=Za(e)?e:{each:e},i=pu(t.ease),r=t.from||0,s=parseFloat(t.base)||0,a={},o=r>0&&r<1,c=isNaN(r)||o,h=t.axis,d=r,p=r;return Wi(r)?d=p={center:.5,edges:.5,end:1}[r]||0:!o&&c&&(d=r[0],p=r[1]),function(m,A,v){var y=(v||t).length,E=a[y],b,C,_,w,T,L,R,P,D;if(!E){if(D=t.grid==="auto"?0:(t.grid||[1,Wa])[1],!D){for(R=-1e8;R<(R=v[D++].getBoundingClientRect().left)&&D<y;);D<y&&D--}for(E=a[y]=[],b=c?Math.min(D,y)*d-.5:r%D,C=D===Wa?0:c?y*p/D-.5:r/D|0,R=0,P=Wa,L=0;L<y;L++)_=L%D-b,w=C-(L/D|0),E[L]=T=h?Math.abs(h==="y"?w:_):bP(_*_+w*w),T>R&&(R=T),T<P&&(P=T);r==="random"&&NP(E),E.max=R-P,E.min=P,E.v=y=(parseFloat(t.amount)||parseFloat(t.each)*(D>y?y-1:h?h==="y"?y/D:D:Math.max(D,y/D))||0)*(r==="edges"?-1:1),E.b=y<0?s-y:s,E.u=pr(t.amount||t.each)||0,i=i&&y<0?YP(i):i}return y=(E[m]-E.min)/E.max||0,wi(E.b+(i?i(y):y)*E.v)+E.u}},E1=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var r=wi(Math.round(parseFloat(i)/e)*e*t);return(r-r%1)/t+(Ko(i)?0:pr(i))}},QP=function(e,t){var i=gr(e),r,s;return!i&&Za(e)&&(r=i=e.radius||Wa,e.values?(e=Ks(e.values),(s=!Ko(e[0]))&&(r*=r)):e=E1(e.increment)),oc(t,i?li(e)?function(a){return s=e(a),Math.abs(s-a)<=r?s:a}:function(a){for(var o=parseFloat(s?a.x:a),c=parseFloat(s?a.y:0),h=Wa,d=0,p=e.length,m,A;p--;)s?(m=e[p].x-o,A=e[p].y-c,m=m*m+A*A):m=Math.abs(e[p]-o),m<h&&(h=m,d=p);return d=!r||h<=r?e[d]:a,s||d===a||Ko(a)?d:d+pr(a)}:E1(e))},zP=function(e,t,i,r){return oc(gr(e)?!t:i===!0?!!(i=0):!r,function(){return gr(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+i*.99))/i)*i*r)/r})},p4=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(r){return t.reduce(function(s,a){return a(s)},r)}},m4=function(e,t){return function(i){return e(parseFloat(i))+(t||pr(i))}},A4=function(e,t,i){return GP(e,t,0,1,i)},HP=function(e,t,i){return oc(i,function(r){return e[~~t(r)]})},g4=function n(e,t,i){var r=t-e;return gr(e)?HP(e,n(0,e.length),t):oc(i,function(s){return(r+(s-e)%r)%r+e})},v4=function n(e,t,i){var r=t-e,s=r*2;return gr(e)?HP(e,n(0,e.length-1),t):oc(i,function(a){return a=(s+(a-e)%s)%s||0,e+(a>r?s-a:a)})},am=function(e){for(var t=0,i="",r,s,a,o;~(r=e.indexOf("random(",t));)a=e.indexOf(")",r),o=e.charAt(r+7)==="[",s=e.substr(r+7,a-r-7).match(o?_P:p1),i+=e.substr(t,r-t)+zP(o?s:+s[0],o?0:+s[1],+s[2]||1e-5),t=a+1;return i+e.substr(t,e.length-t)},GP=function(e,t,i,r,s){var a=t-e,o=r-i;return oc(s,function(c){return i+((c-e)/a*o||0)})},y4=function n(e,t,i,r){var s=isNaN(e+t)?0:function(A){return(1-A)*e+A*t};if(!s){var a=Wi(e),o={},c,h,d,p,m;if(i===!0&&(r=1)&&(i=null),a)e={p:e},t={p:t};else if(gr(e)&&!gr(t)){for(d=[],p=e.length,m=p-2,h=1;h<p;h++)d.push(n(e[h-1],e[h]));p--,s=function(v){v*=p;var y=Math.min(m,~~v);return d[y](v-y)},i=t}else r||(e=Cd(gr(e)?[]:{},e));if(!d){for(c in t)sS.call(o,e,c,"get",t[c]);s=function(v){return cS(v,o)||(a?e.p:e)}}}return oc(i,s)},eR=function(e,t,i){var r=e.labels,s=Wa,a,o,c;for(a in r)o=r[a]-t,o<0==!!i&&o&&s>(o=Math.abs(o))&&(c=a,s=o);return c},Ts=function(e,t,i){var r=e.vars,s=r[t],a=qn,o=e._ctx,c,h,d;if(s)return c=r[t+"Params"],h=r.callbackScope||e,i&&ql.length&&xv(),o&&(qn=o),d=c?s.apply(h,c):s.call(h),qn=a,d},yp=function(e){return Zl(e),e.scrollTrigger&&e.scrollTrigger.kill(!!ir),e.progress()<1&&Ts(e,"onInterrupt"),e},rd,VP=[],WP=function(e){if(e)if(e=!e.name&&e.default||e,$w()||e.headless){var t=e.name,i=li(e),r=t&&!i&&e.init?function(){this._props=[]}:e,s={init:sm,render:cS,add:sS,kill:P4,modifier:O4,rawVars:0},a={targetTest:0,get:0,getSetter:lS,aliases:{},register:0};if(Sd(),e!==r){if(bs[t])return;Ls(r,Ls(Cv(e,s),a)),Cd(r.prototype,Cd(s,Cv(e,a))),bs[r.prop=t]=r,e.targetTest&&(J0.push(r),nS[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}MP(t,r),e.register&&e.register(rs,r,ts)}else VP.push(e)},Nn=255,bp={aqua:[0,Nn,Nn],lime:[0,Nn,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Nn],navy:[0,0,128],white:[Nn,Nn,Nn],olive:[128,128,0],yellow:[Nn,Nn,0],orange:[Nn,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Nn,0,0],pink:[Nn,192,203],cyan:[0,Nn,Nn],transparent:[Nn,Nn,Nn,0]},iC=function(e,t,i){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(i-t)*e*6:e<.5?i:e*3<2?t+(i-t)*(2/3-e)*6:t)*Nn+.5|0},qP=function(e,t,i){var r=e?Ko(e)?[e>>16,e>>8&Nn,e&Nn]:0:bp.black,s,a,o,c,h,d,p,m,A,v;if(!r){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),bp[e])r=bp[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),a=e.charAt(2),o=e.charAt(3),e="#"+s+s+a+a+o+o+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return r=parseInt(e.substr(1,6),16),[r>>16,r>>8&Nn,r&Nn,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),r=[e>>16,e>>8&Nn,e&Nn]}else if(e.substr(0,3)==="hsl"){if(r=v=e.match(p1),!t)c=+r[0]%360/360,h=+r[1]/100,d=+r[2]/100,a=d<=.5?d*(h+1):d+h-d*h,s=d*2-a,r.length>3&&(r[3]*=1),r[0]=iC(c+1/3,s,a),r[1]=iC(c,s,a),r[2]=iC(c-1/3,s,a);else if(~e.indexOf("="))return r=e.match(xP),i&&r.length<4&&(r[3]=1),r}else r=e.match(p1)||bp.transparent;r=r.map(Number)}return t&&!v&&(s=r[0]/Nn,a=r[1]/Nn,o=r[2]/Nn,p=Math.max(s,a,o),m=Math.min(s,a,o),d=(p+m)/2,p===m?c=h=0:(A=p-m,h=d>.5?A/(2-p-m):A/(p+m),c=p===s?(a-o)/A+(a<o?6:0):p===a?(o-s)/A+2:(s-a)/A+4,c*=60),r[0]=~~(c+.5),r[1]=~~(h*100+.5),r[2]=~~(d*100+.5)),i&&r.length<4&&(r[3]=1),r},jP=function(e){var t=[],i=[],r=-1;return e.split(jl).forEach(function(s){var a=s.match(id)||[];t.push.apply(t,a),i.push(r+=a.length+1)}),t.c=i,t},tR=function(e,t,i){var r="",s=(e+r).match(jl),a=t?"hsla(":"rgba(",o=0,c,h,d,p;if(!s)return e;if(s=s.map(function(m){return(m=qP(m,t,1))&&a+(t?m[0]+","+m[1]+"%,"+m[2]+"%,"+m[3]:m.join(","))+")"}),i&&(d=jP(e),c=i.c,c.join(r)!==d.c.join(r)))for(h=e.replace(jl,"1").split(id),p=h.length-1;o<p;o++)r+=h[o]+(~c.indexOf(o)?s.shift()||a+"0,0,0,0)":(d.length?d:s.length?s:i).shift());if(!h)for(h=e.split(jl),p=h.length-1;o<p;o++)r+=h[o]+s[o];return r+h[p]},jl=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in bp)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),b4=/hsl[a]?\(/,XP=function(e){var t=e.join(" "),i;if(jl.lastIndex=0,jl.test(t))return i=b4.test(t),e[1]=tR(e[1],i),e[0]=tR(e[0],i,jP(e[1])),!0},om,_s=function(){var n=Date.now,e=500,t=33,i=n(),r=i,s=1e3/240,a=s,o=[],c,h,d,p,m,A,v=function y(E){var b=n()-r,C=E===!0,_,w,T,L;if((b>e||b<0)&&(i+=b-t),r+=b,T=r-i,_=T-a,(_>0||C)&&(L=++p.frame,m=T-p.time*1e3,p.time=T=T/1e3,a+=_+(_>=s?4:s-_),w=1),C||(c=h(y)),w)for(A=0;A<o.length;A++)o[A](T,m,L,E)};return p={time:0,frame:0,tick:function(){v(!0)},deltaRatio:function(E){return m/(1e3/(E||60))},wake:function(){wP&&(!m1&&$w()&&(La=m1=window,eS=La.document||{},Ds.gsap=rs,(La.gsapVersions||(La.gsapVersions=[])).push(rs.version),SP(Ev||La.GreenSockGlobals||!La.gsap&&La||{}),VP.forEach(WP)),d=typeof requestAnimationFrame<"u"&&requestAnimationFrame,c&&p.sleep(),h=d||function(E){return setTimeout(E,a-p.time*1e3+1|0)},om=1,v(2))},sleep:function(){(d?cancelAnimationFrame:clearTimeout)(c),om=0,h=sm},lagSmoothing:function(E,b){e=E||1/0,t=Math.min(b||33,e)},fps:function(E){s=1e3/(E||240),a=p.time*1e3+s},add:function(E,b,C){var _=b?function(w,T,L,R){E(w,T,L,R),p.remove(_)}:E;return p.remove(E),o[C?"unshift":"push"](_),Sd(),_},remove:function(E,b){~(b=o.indexOf(E))&&o.splice(b,1)&&A>=b&&A--},_listeners:o},p}(),Sd=function(){return!om&&_s.wake()},rn={},E4=/^[\d.\-M][\d.\-,\s]/,x4=/["']/g,C4=function(e){for(var t={},i=e.substr(1,e.length-3).split(":"),r=i[0],s=1,a=i.length,o,c,h;s<a;s++)c=i[s],o=s!==a-1?c.lastIndexOf(","):c.length,h=c.substr(0,o),t[r]=isNaN(h)?h.replace(x4,"").trim():+h,r=c.substr(o+1).trim();return t},_4=function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<i?e.indexOf(")",i+1):i)},w4=function(e){var t=(e+"").split("("),i=rn[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[C4(t[1])]:_4(e).split(",").map(RP)):rn._CE&&E4.test(e)?rn._CE("",e):i},YP=function(e){return function(t){return 1-e(1-t)}},KP=function n(e,t){for(var i=e._first,r;i;)i instanceof Dr?n(i,t):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==t&&(i.timeline?n(i.timeline,t):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=t)),i=i._next},pu=function(e,t){return e&&(li(e)?e:rn[e]||w4(e))||t},Pu=function(e,t,i,r){i===void 0&&(i=function(c){return 1-t(1-c)}),r===void 0&&(r=function(c){return c<.5?t(c*2)/2:1-t((1-c)*2)/2});var s={easeIn:t,easeOut:i,easeInOut:r},a;return es(e,function(o){rn[o]=Ds[o]=s,rn[a=o.toLowerCase()]=i;for(var c in s)rn[a+(c==="easeIn"?".in":c==="easeOut"?".out":".inOut")]=rn[o+"."+c]=s[c]}),s},JP=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},rC=function n(e,t,i){var r=t>=1?t:1,s=(i||(e?.3:.45))/(t<1?t:1),a=s/f1*(Math.asin(1/r)||0),o=function(d){return d===1?1:r*Math.pow(2,-10*d)*$6((d-a)*s)+1},c=e==="out"?o:e==="in"?function(h){return 1-o(1-h)}:JP(o);return s=f1/s,c.config=function(h,d){return n(e,h,d)},c},sC=function n(e,t){t===void 0&&(t=1.70158);var i=function(a){return a?--a*a*((t+1)*a+t)+1:0},r=e==="out"?i:e==="in"?function(s){return 1-i(1-s)}:JP(i);return r.config=function(s){return n(e,s)},r};es("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;Pu(n+",Power"+(t-1),e?function(i){return Math.pow(i,t)}:function(i){return i},function(i){return 1-Math.pow(1-i,t)},function(i){return i<.5?Math.pow(i*2,t)/2:1-Math.pow((1-i)*2,t)/2})});rn.Linear.easeNone=rn.none=rn.Linear.easeIn;Pu("Elastic",rC("in"),rC("out"),rC());(function(n,e){var t=1/e,i=2*t,r=2.5*t,s=function(o){return o<t?n*o*o:o<i?n*Math.pow(o-1.5/e,2)+.75:o<r?n*(o-=2.25/e)*o+.9375:n*Math.pow(o-2.625/e,2)+.984375};Pu("Bounce",function(a){return 1-s(1-a)},s)})(7.5625,2.75);Pu("Expo",function(n){return Math.pow(2,10*(n-1))*n+n*n*n*n*n*n*(1-n)});Pu("Circ",function(n){return-(bP(1-n*n)-1)});Pu("Sine",function(n){return n===1?1:-Z6(n*K6)+1});Pu("Back",sC("in"),sC("out"),sC());rn.SteppedEase=rn.steps=Ds.SteppedEase={config:function(e,t){e===void 0&&(e=1);var i=1/e,r=e+(t?0:1),s=t?1:0,a=1-Ar;return function(o){return((r*Gm(0,a,o)|0)+s)*i}}};xd.ease=rn["quad.out"];es("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return iS+=n+","+n+"Params,"});var ZP=function(e,t){this.id=J6++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:BP,this.set=t?t.getSetter:lS},lm=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,wd(this,+t.duration,1,1),this.data=t.data,qn&&(this._ctx=qn,qn.data.push(this)),om||_s.wake()}var e=n.prototype;return e.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,wd(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,r){if(Sd(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(zy(this,i),!s._dp||s.parent||OP(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&Na(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===Ar||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),IP(this,i,r)),this},e.time=function(i,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+ZI(this))%(this._dur+this._rDelay)||(i?this._dur:0),r):this._time},e.totalProgress=function(i,r){return arguments.length?this.totalTime(this.totalDuration()*i,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(i,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+ZI(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(i,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*s,r):this._repeat?_d(this._tTime,s)+1:1},e.timeScale=function(i,r){if(!arguments.length)return this._rts===-1e-8?0:this._rts;if(this._rts===i)return this;var s=this.parent&&this._ts?_v(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-1e-8?0:this._rts,this.totalTime(Gm(-Math.abs(this._delay),this._tDur,s),r!==!1),Qy(this),a4(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Sd(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Ar&&(this._tTime-=Ar)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=i;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&Na(r,this,i-this._delay),this}return this._start},e.endTime=function(i){return this._start+($r(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var r=this.parent||this._dp;return r?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?_v(r.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){i===void 0&&(i=n4);var r=ir;return ir=i,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),ir=r,this},e.globalTime=function(i){for(var r=this,s=arguments.length?i:r.rawTime();r;)s=r._start+s/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(i):s},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,$I(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var r=this._time;return this._rDelay=i,$I(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,r){return this.totalTime(Ws(this,i),$r(r))},e.restart=function(i,r){return this.play().totalTime(i?-this._delay:0,$r(r)),this._dur||(this._zTime=-1e-8),this},e.play=function(i,r){return i!=null&&this.seek(i,r),this.reversed(!1).paused(!1)},e.reverse=function(i,r){return i!=null&&this.seek(i||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(i,r){return i!=null&&this.seek(i,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var i=this.parent||this._dp,r=this._start,s;return!!(!i||this._ts&&this._initted&&i.isActive()&&(s=i.rawTime(!0))>=r&&s<this.endTime(!0)-Ar)},e.eventCallback=function(i,r,s){var a=this.vars;return arguments.length>1?(r?(a[i]=r,s&&(a[i+"Params"]=s),i==="onUpdate"&&(this._onUpdate=r)):delete a[i],this):a[i]},e.then=function(i){var r=this;return new Promise(function(s){var a=li(i)?i:DP,o=function(){var h=r.then;r.then=null,li(a)&&(a=a(r))&&(a.then||a===r)&&(r.then=h),s(a),r.then=h};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?o():r._prom=o})},e.kill=function(){yp(this)},n}();Ls(lm.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Dr=function(n){yP(e,n);function e(i,r){var s;return i===void 0&&(i={}),s=n.call(this,i)||this,s.labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=$r(i.sortChildren),Jn&&Na(i.parent||Jn,Ro(s),r),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&PP(Ro(s),i.scrollTrigger),s}var t=e.prototype;return t.to=function(r,s,a){return Op(0,arguments,this),this},t.from=function(r,s,a){return Op(1,arguments,this),this},t.fromTo=function(r,s,a,o){return Op(2,arguments,this),this},t.set=function(r,s,a){return s.duration=0,s.parent=this,Lp(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new _i(r,s,Ws(this,a),1),this},t.call=function(r,s,a){return Na(this,_i.delayedCall(0,r,s),a)},t.staggerTo=function(r,s,a,o,c,h,d){return a.duration=s,a.stagger=a.stagger||o,a.onComplete=h,a.onCompleteParams=d,a.parent=this,new _i(r,a,Ws(this,c)),this},t.staggerFrom=function(r,s,a,o,c,h,d){return a.runBackwards=1,Lp(a).immediateRender=$r(a.immediateRender),this.staggerTo(r,s,a,o,c,h,d)},t.staggerFromTo=function(r,s,a,o,c,h,d,p){return o.startAt=a,Lp(o).immediateRender=$r(o.immediateRender),this.staggerTo(r,s,o,c,h,d,p)},t.render=function(r,s,a){var o=this._time,c=this._dirty?this.totalDuration():this._tDur,h=this._dur,d=r<=0?0:wi(r),p=this._zTime<0!=r<0&&(this._initted||!h),m,A,v,y,E,b,C,_,w,T,L,R;if(this!==Jn&&d>c&&r>=0&&(d=c),d!==this._tTime||a||p){if(o!==this._time&&h&&(d+=this._time-o,r+=this._time-o),m=d,w=this._start,_=this._ts,b=!_,p&&(h||(o=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(L=this._yoyo,E=h+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(E*100+r,s,a);if(m=wi(d%E),d===c?(y=this._repeat,m=h):(T=wi(d/E),y=~~T,y&&y===T&&(m=h,y--),m>h&&(m=h)),T=_d(this._tTime,E),!o&&this._tTime&&T!==y&&this._tTime-T*E-this._dur<=0&&(T=y),L&&y&1&&(m=h-m,R=1),y!==T&&!this._lock){var P=L&&T&1,D=P===(L&&y&1);if(y<T&&(P=!P),o=P?0:d%h?h:d,this._lock=1,this.render(o||(R?0:wi(y*E)),s,!h)._lock=0,this._tTime=d,!s&&this.parent&&Ts(this,"onRepeat"),this.vars.repeatRefresh&&!R&&(this.invalidate()._lock=1),o&&o!==this._time||b!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(h=this._dur,c=this._tDur,D&&(this._lock=2,o=P?h:-1e-4,this.render(o,!0),this.vars.repeatRefresh&&!R&&this.invalidate()),this._lock=0,!this._ts&&!b)return this;KP(this,R)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(C=u4(this,wi(o),wi(m)),C&&(d-=m-(m=C._start))),this._tTime=d,this._time=m,this._act=!_,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,o=0),!o&&m&&!s&&!y&&(Ts(this,"onStart"),this._tTime!==d))return this;if(m>=o&&r>=0)for(A=this._first;A;){if(v=A._next,(A._act||m>=A._start)&&A._ts&&C!==A){if(A.parent!==this)return this.render(r,s,a);if(A.render(A._ts>0?(m-A._start)*A._ts:(A._dirty?A.totalDuration():A._tDur)+(m-A._start)*A._ts,s,a),m!==this._time||!this._ts&&!b){C=0,v&&(d+=this._zTime=-1e-8);break}}A=v}else{A=this._last;for(var M=r<0?r:m;A;){if(v=A._prev,(A._act||M<=A._end)&&A._ts&&C!==A){if(A.parent!==this)return this.render(r,s,a);if(A.render(A._ts>0?(M-A._start)*A._ts:(A._dirty?A.totalDuration():A._tDur)+(M-A._start)*A._ts,s,a||ir&&(A._initted||A._startAt)),m!==this._time||!this._ts&&!b){C=0,v&&(d+=this._zTime=M?-1e-8:Ar);break}}A=v}}if(C&&!s&&(this.pause(),C.render(m>=o?0:-1e-8)._zTime=m>=o?1:-1,this._ts))return this._start=w,Qy(this),this.render(r,s,a);this._onUpdate&&!s&&Ts(this,"onUpdate",!0),(d===c&&this._tTime>=this.totalDuration()||!d&&o)&&(w===this._start||Math.abs(_)!==Math.abs(this._ts))&&(this._lock||((r||!h)&&(d===c&&this._ts>0||!d&&this._ts<0)&&Zl(this,1),!s&&!(r<0&&!o)&&(d||o||!c)&&(Ts(this,d===c&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(d<c&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,s){var a=this;if(Ko(s)||(s=Ws(this,s,r)),!(r instanceof lm)){if(gr(r))return r.forEach(function(o){return a.add(o,s)}),this;if(Wi(r))return this.addLabel(r,s);if(li(r))r=_i.delayedCall(0,r);else return this}return this!==r?Na(this,r,s):this},t.getChildren=function(r,s,a,o){r===void 0&&(r=!0),s===void 0&&(s=!0),a===void 0&&(a=!0),o===void 0&&(o=-1e8);for(var c=[],h=this._first;h;)h._start>=o&&(h instanceof _i?s&&c.push(h):(a&&c.push(h),r&&c.push.apply(c,h.getChildren(!0,s,a)))),h=h._next;return c},t.getById=function(r){for(var s=this.getChildren(1,1,1),a=s.length;a--;)if(s[a].vars.id===r)return s[a]},t.remove=function(r){return Wi(r)?this.removeLabel(r):li(r)?this.killTweensOf(r):(r.parent===this&&Fy(this,r),r===this._recent&&(this._recent=this._last),fu(this))},t.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=wi(_s.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),n.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},t.addLabel=function(r,s){return this.labels[r]=Ws(this,s),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,s,a){var o=_i.delayedCall(0,s||sm,a);return o.data="isPause",this._hasPause=1,Na(this,o,Ws(this,r))},t.removePause=function(r){var s=this._first;for(r=Ws(this,r);s;)s._start===r&&s.data==="isPause"&&Zl(s),s=s._next},t.killTweensOf=function(r,s,a){for(var o=this.getTweensOf(r,a),c=o.length;c--;)zl!==o[c]&&o[c].kill(r,s);return this},t.getTweensOf=function(r,s){for(var a=[],o=Ks(r),c=this._first,h=Ko(s),d;c;)c instanceof _i?i4(c._targets,o)&&(h?(!zl||c._initted&&c._ts)&&c.globalTime(0)<=s&&c.globalTime(c.totalDuration())>s:!s||c.isActive())&&a.push(c):(d=c.getTweensOf(o,s)).length&&a.push.apply(a,d),c=c._next;return a},t.tweenTo=function(r,s){s=s||{};var a=this,o=Ws(a,r),c=s,h=c.startAt,d=c.onStart,p=c.onStartParams,m=c.immediateRender,A,v=_i.to(a,Ls({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:o,overwrite:"auto",duration:s.duration||Math.abs((o-(h&&"time"in h?h.time:a._time))/a.timeScale())||Ar,onStart:function(){if(a.pause(),!A){var E=s.duration||Math.abs((o-(h&&"time"in h?h.time:a._time))/a.timeScale());v._dur!==E&&wd(v,E,0,1).render(v._time,!0,!0),A=1}d&&d.apply(v,p||[])}},s));return m?v.render(0):v},t.tweenFromTo=function(r,s,a){return this.tweenTo(s,Ls({startAt:{time:Ws(this,r)}},a))},t.recent=function(){return this._recent},t.nextLabel=function(r){return r===void 0&&(r=this._time),eR(this,Ws(this,r))},t.previousLabel=function(r){return r===void 0&&(r=this._time),eR(this,Ws(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+Ar)},t.shiftChildren=function(r,s,a){a===void 0&&(a=0);for(var o=this._first,c=this.labels,h;o;)o._start>=a&&(o._start+=r,o._end+=r),o=o._next;if(s)for(h in c)c[h]>=a&&(c[h]+=r);return fu(this)},t.invalidate=function(r){var s=this._first;for(this._lock=0;s;)s.invalidate(r),s=s._next;return n.prototype.invalidate.call(this,r)},t.clear=function(r){r===void 0&&(r=!0);for(var s=this._first,a;s;)a=s._next,this.remove(s),s=a;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),fu(this)},t.totalDuration=function(r){var s=0,a=this,o=a._last,c=Wa,h,d,p;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-r:r));if(a._dirty){for(p=a.parent;o;)h=o._prev,o._dirty&&o.totalDuration(),d=o._start,d>c&&a._sort&&o._ts&&!a._lock?(a._lock=1,Na(a,o,d-o._delay,1)._lock=0):c=d,d<0&&o._ts&&(s-=d,(!p&&!a._dp||p&&p.smoothChildTiming)&&(a._start+=d/a._ts,a._time-=d,a._tTime-=d),a.shiftChildren(-d,!1,-1/0),c=0),o._end>s&&o._ts&&(s=o._end),o=h;wd(a,a===Jn&&a._time>s?a._time:s,1,1),a._dirty=0}return a._tDur},e.updateRoot=function(r){if(Jn._ts&&(IP(Jn,_v(r,Jn)),TP=_s.frame),_s.frame>=KI){KI+=Bs.autoSleep||120;var s=Jn._first;if((!s||!s._ts)&&Bs.autoSleep&&_s._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||_s.sleep()}}},e}(lm);Ls(Dr.prototype,{_lock:0,_hasPause:0,_forcing:0});var S4=function(e,t,i,r,s,a,o){var c=new ts(this._pt,e,t,0,1,rU,null,s),h=0,d=0,p,m,A,v,y,E,b,C;for(c.b=i,c.e=r,i+="",r+="",(b=~r.indexOf("random("))&&(r=am(r)),a&&(C=[i,r],a(C,e,t),i=C[0],r=C[1]),m=i.match(tC)||[];p=tC.exec(r);)v=p[0],y=r.substring(h,p.index),A?A=(A+1)%5:y.substr(-5)==="rgba("&&(A=1),v!==m[d++]&&(E=parseFloat(m[d-1])||0,c._pt={_next:c._pt,p:y||d===1?y:",",s:E,c:v.charAt(1)==="="?dd(E,v)-E:parseFloat(v)-E,m:A&&A<4?Math.round:0},h=tC.lastIndex);return c.c=h<r.length?r.substring(h,r.length):"",c.fp=o,(CP.test(r)||b)&&(c.e=0),this._pt=c,c},sS=function(e,t,i,r,s,a,o,c,h,d){li(r)&&(r=r(s||0,e,a));var p=e[t],m=i!=="get"?i:li(p)?h?e[t.indexOf("set")||!li(e["get"+t.substr(3)])?t:"get"+t.substr(3)](h):e[t]():p,A=li(p)?h?R4:nU:oS,v;if(Wi(r)&&(~r.indexOf("random(")&&(r=am(r)),r.charAt(1)==="="&&(v=dd(m,r)+(pr(m)||0),(v||v===0)&&(r=v))),!d||m!==r||x1)return!isNaN(m*r)&&r!==""?(v=new ts(this._pt,e,t,+m||0,r-(m||0),typeof p=="boolean"?L4:iU,0,A),h&&(v.fp=h),o&&v.modifier(o,this,e),this._pt=v):(!p&&!(t in e)&&tS(t,r),S4.call(this,e,t,m,r,A,c||Bs.stringFilter,h))},M4=function(e,t,i,r,s){if(li(e)&&(e=Pp(e,s,t,i,r)),!Za(e)||e.style&&e.nodeType||gr(e)||EP(e))return Wi(e)?Pp(e,s,t,i,r):e;var a={},o;for(o in e)a[o]=Pp(e[o],s,t,i,r);return a},$P=function(e,t,i,r,s,a){var o,c,h,d;if(bs[e]&&(o=new bs[e]).init(s,o.rawVars?t[e]:M4(t[e],r,s,a,i),i,r,a)!==!1&&(i._pt=c=new ts(i._pt,s,e,0,1,o.render,o,0,o.priority),i!==rd))for(h=i._ptLookup[i._targets.indexOf(s)],d=o._props.length;d--;)h[o._props[d]]=c;return o},zl,x1,aS=function n(e,t,i){var r=e.vars,s=r.ease,a=r.startAt,o=r.immediateRender,c=r.lazy,h=r.onUpdate,d=r.runBackwards,p=r.yoyoEase,m=r.keyframes,A=r.autoRevert,v=e._dur,y=e._startAt,E=e._targets,b=e.parent,C=b&&b.data==="nested"?b.vars.targets:E,_=e._overwrite==="auto"&&!Jw,w=e.timeline,T,L,R,P,D,M,k,V,X,$,ae,z,j;if(w&&(!m||!s)&&(s="none"),e._ease=pu(s,xd.ease),e._yEase=p?YP(pu(p===!0?s:p,xd.ease)):0,p&&e._yoyo&&!e._repeat&&(p=e._yEase,e._yEase=e._ease,e._ease=p),e._from=!w&&!!r.runBackwards,!w||m&&!r.stagger){if(V=E[0]?du(E[0]).harness:0,z=V&&r[V.prop],T=Cv(r,nS),y&&(y._zTime<0&&y.progress(1),t<0&&d&&o&&!A?y.render(-1,!0):y.revert(d&&v?K0:t4),y._lazy=0),a){if(Zl(e._startAt=_i.set(E,Ls({data:"isStart",overwrite:!1,parent:b,immediateRender:!0,lazy:!y&&$r(c),startAt:null,delay:0,onUpdate:h&&function(){return Ts(e,"onUpdate")},stagger:0},a))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(ir||!o&&!A)&&e._startAt.revert(K0),o&&v&&t<=0&&i<=0){t&&(e._zTime=t);return}}else if(d&&v&&!y){if(t&&(o=!1),R=Ls({overwrite:!1,data:"isFromStart",lazy:o&&!y&&$r(c),immediateRender:o,stagger:0,parent:b},T),z&&(R[V.prop]=z),Zl(e._startAt=_i.set(E,R)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(ir?e._startAt.revert(K0):e._startAt.render(-1,!0)),e._zTime=t,!o)n(e._startAt,Ar,Ar);else if(!t)return}for(e._pt=e._ptCache=0,c=v&&$r(c)||c&&!v,L=0;L<E.length;L++){if(D=E[L],k=D._gsap||rS(E)[L]._gsap,e._ptLookup[L]=$={},A1[k.id]&&ql.length&&xv(),ae=C===E?L:C.indexOf(D),V&&(X=new V).init(D,z||T,e,ae,C)!==!1&&(e._pt=P=new ts(e._pt,D,X.name,0,1,X.render,X,0,X.priority),X._props.forEach(function(Z){$[Z]=P}),X.priority&&(M=1)),!V||z)for(R in T)bs[R]&&(X=$P(R,T,e,ae,D,C))?X.priority&&(M=1):$[R]=P=sS.call(e,D,R,"get",T[R],ae,C,0,r.stringFilter);e._op&&e._op[L]&&e.kill(D,e._op[L]),_&&e._pt&&(zl=e,Jn.killTweensOf(D,$,e.globalTime(t)),j=!e.parent,zl=0),e._pt&&c&&(A1[k.id]=1)}M&&sU(e),e._onInit&&e._onInit(e)}e._onUpdate=h,e._initted=(!e._op||e._pt)&&!j,m&&t<=0&&w.render(Wa,!0,!0)},T4=function(e,t,i,r,s,a,o,c){var h=(e._pt&&e._ptCache||(e._ptCache={}))[t],d,p,m,A;if(!h)for(h=e._ptCache[t]=[],m=e._ptLookup,A=e._targets.length;A--;){if(d=m[A][t],d&&d.d&&d.d._pt)for(d=d.d._pt;d&&d.p!==t&&d.fp!==t;)d=d._next;if(!d)return x1=1,e.vars[t]="+=0",aS(e,o),x1=0,c?rm(t+" not eligible for reset"):1;h.push(d)}for(A=h.length;A--;)p=h[A],d=p._pt||p,d.s=(r||r===0)&&!s?r:d.s+(r||0)+a*d.c,d.c=i-d.s,p.e&&(p.e=fi(i)+pr(p.e)),p.b&&(p.b=d.s+pr(p.b))},B4=function(e,t){var i=e[0]?du(e[0]).harness:0,r=i&&i.aliases,s,a,o,c;if(!r)return t;s=Cd({},t);for(a in r)if(a in s)for(c=r[a].split(","),o=c.length;o--;)s[c[o]]=s[a];return s},I4=function(e,t,i,r){var s=t.ease||r||"power1.inOut",a,o;if(gr(t))o=i[e]||(i[e]=[]),t.forEach(function(c,h){return o.push({t:h/(t.length-1)*100,v:c,e:s})});else for(a in t)o=i[a]||(i[a]=[]),a==="ease"||o.push({t:parseFloat(e),v:t[a],e:s})},Pp=function(e,t,i,r,s){return li(e)?e.call(t,i,r,s):Wi(e)&&~e.indexOf("random(")?am(e):e},eU=iS+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",tU={};es(eU+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return tU[n]=1});var _i=function(n){yP(e,n);function e(i,r,s,a){var o;typeof r=="number"&&(s.duration=r,r=s,s=null),o=n.call(this,a?r:Lp(r))||this;var c=o.vars,h=c.duration,d=c.delay,p=c.immediateRender,m=c.stagger,A=c.overwrite,v=c.keyframes,y=c.defaults,E=c.scrollTrigger,b=c.yoyoEase,C=r.parent||Jn,_=(gr(i)||EP(i)?Ko(i[0]):"length"in r)?[i]:Ks(i),w,T,L,R,P,D,M,k;if(o._targets=_.length?rS(_):rm("GSAP target "+i+" not found. https://gsap.com",!Bs.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=A,v||m||pg(h)||pg(d)){if(r=o.vars,w=o.timeline=new Dr({data:"nested",defaults:y||{},targets:C&&C.data==="nested"?C.vars.targets:_}),w.kill(),w.parent=w._dp=Ro(o),w._start=0,m||pg(h)||pg(d)){if(R=_.length,M=m&&FP(m),Za(m))for(P in m)~eU.indexOf(P)&&(k||(k={}),k[P]=m[P]);for(T=0;T<R;T++)L=Cv(r,tU),L.stagger=0,b&&(L.yoyoEase=b),k&&Cd(L,k),D=_[T],L.duration=+Pp(h,Ro(o),T,D,_),L.delay=(+Pp(d,Ro(o),T,D,_)||0)-o._delay,!m&&R===1&&L.delay&&(o._delay=d=L.delay,o._start+=d,L.delay=0),w.to(D,L,M?M(T,D,_):0),w._ease=rn.none;w.duration()?h=d=0:o.timeline=0}else if(v){Lp(Ls(w.vars.defaults,{ease:"none"})),w._ease=pu(v.ease||r.ease||"none");var V=0,X,$,ae;if(gr(v))v.forEach(function(z){return w.to(_,z,">")}),w.duration();else{L={};for(P in v)P==="ease"||P==="easeEach"||I4(P,v[P],L,v.easeEach);for(P in L)for(X=L[P].sort(function(z,j){return z.t-j.t}),V=0,T=0;T<X.length;T++)$=X[T],ae={ease:$.e,duration:($.t-(T?X[T-1].t:0))/100*h},ae[P]=$.v,w.to(_,ae,V),V+=ae.duration;w.duration()<h&&w.to({},{duration:h-w.duration()})}}h||o.duration(h=w.duration())}else o.timeline=0;return A===!0&&!Jw&&(zl=Ro(o),Jn.killTweensOf(_),zl=0),Na(C,Ro(o),s),r.reversed&&o.reverse(),r.paused&&o.paused(!0),(p||!h&&!v&&o._start===wi(C._time)&&$r(p)&&o4(Ro(o))&&C.data!=="nested")&&(o._tTime=-1e-8,o.render(Math.max(0,-d)||0)),E&&PP(Ro(o),E),o}var t=e.prototype;return t.render=function(r,s,a){var o=this._time,c=this._tDur,h=this._dur,d=r<0,p=r>c-Ar&&!d?c:r<Ar?0:r,m,A,v,y,E,b,C,_,w;if(!h)c4(this,r,s,a);else if(p!==this._tTime||!r||a||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==d||this._lazy){if(m=p,_=this.timeline,this._repeat){if(y=h+this._rDelay,this._repeat<-1&&d)return this.totalTime(y*100+r,s,a);if(m=wi(p%y),p===c?(v=this._repeat,m=h):(E=wi(p/y),v=~~E,v&&v===E?(m=h,v--):m>h&&(m=h)),b=this._yoyo&&v&1,b&&(w=this._yEase,m=h-m),E=_d(this._tTime,y),m===o&&!a&&this._initted&&v===E)return this._tTime=p,this;v!==E&&(_&&this._yEase&&KP(_,b),this.vars.repeatRefresh&&!b&&!this._lock&&m!==y&&this._initted&&(this._lock=a=1,this.render(wi(y*v),!0).invalidate()._lock=0))}if(!this._initted){if(UP(this,d?r:m,a,s,p))return this._tTime=0,this;if(o!==this._time&&!(a&&this.vars.repeatRefresh&&v!==E))return this;if(h!==this._dur)return this.render(r,s,a)}if(this._tTime=p,this._time=m,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=C=(w||this._ease)(m/h),this._from&&(this.ratio=C=1-C),m&&!o&&!s&&!v&&(Ts(this,"onStart"),this._tTime!==p))return this;for(A=this._pt;A;)A.r(C,A.d),A=A._next;_&&_.render(r<0?r:_._dur*_._ease(m/this._dur),s,a)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(d&&g1(this,r,s,a),Ts(this,"onUpdate")),this._repeat&&v!==E&&this.vars.onRepeat&&!s&&this.parent&&Ts(this,"onRepeat"),(p===this._tDur||!p)&&this._tTime===p&&(d&&!this._onUpdate&&g1(this,r,!0,!0),(r||!h)&&(p===this._tDur&&this._ts>0||!p&&this._ts<0)&&Zl(this,1),!s&&!(d&&!o)&&(p||o||b)&&(Ts(this,p===c?"onComplete":"onReverseComplete",!0),this._prom&&!(p<c&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),n.prototype.invalidate.call(this,r)},t.resetTo=function(r,s,a,o,c){om||_s.wake(),this._ts||this.play();var h=Math.min(this._dur,(this._dp._time-this._start)*this._ts),d;return this._initted||aS(this,h),d=this._ease(h/this._dur),T4(this,r,s,a,o,d,h,c)?this.resetTo(r,s,a,o,1):(zy(this,0),this.parent||LP(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,s){if(s===void 0&&(s="all"),!r&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?yp(this):this.scrollTrigger&&this.scrollTrigger.kill(!!ir),this;if(this.timeline){var a=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,zl&&zl.vars.overwrite!==!0)._first||yp(this),this.parent&&a!==this.timeline.totalDuration()&&wd(this,this._dur*this.timeline._tDur/a,0,1),this}var o=this._targets,c=r?Ks(r):o,h=this._ptLookup,d=this._pt,p,m,A,v,y,E,b;if((!s||s==="all")&&s4(o,c))return s==="all"&&(this._pt=0),yp(this);for(p=this._op=this._op||[],s!=="all"&&(Wi(s)&&(y={},es(s,function(C){return y[C]=1}),s=y),s=B4(o,s)),b=o.length;b--;)if(~c.indexOf(o[b])){m=h[b],s==="all"?(p[b]=s,v=m,A={}):(A=p[b]=p[b]||{},v=s);for(y in v)E=m&&m[y],E&&((!("kill"in E.d)||E.d.kill(y)===!0)&&Fy(this,E,"_pt"),delete m[y]),A!=="all"&&(A[y]=1)}return this._initted&&!this._pt&&d&&yp(this),this},e.to=function(r,s){return new e(r,s,arguments[2])},e.from=function(r,s){return Op(1,arguments)},e.delayedCall=function(r,s,a,o){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:a,onReverseCompleteParams:a,callbackScope:o})},e.fromTo=function(r,s,a){return Op(2,arguments)},e.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(r,s)},e.killTweensOf=function(r,s,a){return Jn.killTweensOf(r,s,a)},e}(lm);Ls(_i.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});es("staggerTo,staggerFrom,staggerFromTo",function(n){_i[n]=function(){var e=new Dr,t=y1.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var oS=function(e,t,i){return e[t]=i},nU=function(e,t,i){return e[t](i)},R4=function(e,t,i,r){return e[t](r.fp,i)},D4=function(e,t,i){return e.setAttribute(t,i)},lS=function(e,t){return li(e[t])?nU:Zw(e[t])&&e.setAttribute?D4:oS},iU=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},L4=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},rU=function(e,t){var i=t._pt,r="";if(!e&&t.b)r=t.b;else if(e===1&&t.e)r=t.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*e):Math.round((i.s+i.c*e)*1e4)/1e4)+r,i=i._next;r+=t.c}t.set(t.t,t.p,r,t)},cS=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},O4=function(e,t,i,r){for(var s=this._pt,a;s;)a=s._next,s.p===r&&s.modifier(e,t,i),s=a},P4=function(e){for(var t=this._pt,i,r;t;)r=t._next,t.p===e&&!t.op||t.op===e?Fy(this,t,"_pt"):t.dep||(i=1),t=r;return!i},U4=function(e,t,i,r){r.mSet(e,t,r.m.call(r.tween,i,r.mt),r)},sU=function(e){for(var t=e._pt,i,r,s,a;t;){for(i=t._next,r=s;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:a)?t._prev._next=t:s=t,(t._next=r)?r._prev=t:a=t,t=i}e._pt=s},ts=function(){function n(t,i,r,s,a,o,c,h,d){this.t=i,this.s=s,this.c=a,this.p=r,this.r=o||iU,this.d=c||this,this.set=h||oS,this.pr=d||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(i,r,s){this.mSet=this.mSet||this.set,this.set=U4,this.m=i,this.mt=s,this.tween=r},n}();es(iS+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return nS[n]=1});Ds.TweenMax=Ds.TweenLite=_i;Ds.TimelineLite=Ds.TimelineMax=Dr;Jn=new Dr({sortChildren:!1,defaults:xd,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Bs.stringFilter=XP;var mu=[],Z0={},k4=[],nR=0,N4=0,aC=function(e){return(Z0[e]||k4).map(function(t){return t()})},C1=function(){var e=Date.now(),t=[];e-nR>2&&(aC("matchMediaInit"),mu.forEach(function(i){var r=i.queries,s=i.conditions,a,o,c,h;for(o in r)a=La.matchMedia(r[o]).matches,a&&(c=1),a!==s[o]&&(s[o]=a,h=1);h&&(i.revert(),c&&t.push(i))}),aC("matchMediaRevert"),t.forEach(function(i){return i.onMatch(i,function(r){return i.add(null,r)})}),nR=e,aC("matchMedia"))},aU=function(){function n(t,i){this.selector=i&&b1(i),this.data=[],this._r=[],this.isReverted=!1,this.id=N4++,t&&this.add(t)}var e=n.prototype;return e.add=function(i,r,s){li(i)&&(s=r,r=i,i=li);var a=this,o=function(){var h=qn,d=a.selector,p;return h&&h!==a&&h.data.push(a),s&&(a.selector=b1(s)),qn=a,p=r.apply(a,arguments),li(p)&&a._r.push(p),qn=h,a.selector=d,a.isReverted=!1,p};return a.last=o,i===li?o(a,function(c){return a.add(null,c)}):i?a[i]=o:o},e.ignore=function(i){var r=qn;qn=null,i(this),qn=r},e.getTweens=function(){var i=[];return this.data.forEach(function(r){return r instanceof n?i.push.apply(i,r.getTweens()):r instanceof _i&&!(r.parent&&r.parent.data==="nested")&&i.push(r)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,r){var s=this;if(i?function(){for(var o=s.getTweens(),c=s.data.length,h;c--;)h=s.data[c],h.data==="isFlip"&&(h.revert(),h.getChildren(!0,!0,!1).forEach(function(d){return o.splice(o.indexOf(d),1)}));for(o.map(function(d){return{g:d._dur||d._delay||d._sat&&!d._sat.vars.immediateRender?d.globalTime(0):-1/0,t:d}}).sort(function(d,p){return p.g-d.g||-1/0}).forEach(function(d){return d.t.revert(i)}),c=s.data.length;c--;)h=s.data[c],h instanceof Dr?h.data!=="nested"&&(h.scrollTrigger&&h.scrollTrigger.revert(),h.kill()):!(h instanceof _i)&&h.revert&&h.revert(i);s._r.forEach(function(d){return d(i,s)}),s.isReverted=!0}():this.data.forEach(function(o){return o.kill&&o.kill()}),this.clear(),r)for(var a=mu.length;a--;)mu[a].id===this.id&&mu.splice(a,1)},e.revert=function(i){this.kill(i||{})},n}(),F4=function(){function n(t){this.contexts=[],this.scope=t,qn&&qn.data.push(this)}var e=n.prototype;return e.add=function(i,r,s){Za(i)||(i={matches:i});var a=new aU(0,s||this.scope),o=a.conditions={},c,h,d;qn&&!a.selector&&(a.selector=qn.selector),this.contexts.push(a),r=a.add("onMatch",r),a.queries=i;for(h in i)h==="all"?d=1:(c=La.matchMedia(i[h]),c&&(mu.indexOf(a)<0&&mu.push(a),(o[h]=c.matches)&&(d=1),c.addListener?c.addListener(C1):c.addEventListener("change",C1)));return d&&r(a,function(p){return a.add(null,p)}),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(r){return r.kill(i,!0)})},n}(),wv={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(r){return WP(r)})},timeline:function(e){return new Dr(e)},getTweensOf:function(e,t){return Jn.getTweensOf(e,t)},getProperty:function(e,t,i,r){Wi(e)&&(e=Ks(e)[0]);var s=du(e||{}).get,a=i?DP:RP;return i==="native"&&(i=""),e&&(t?a((bs[t]&&bs[t].get||s)(e,t,i,r)):function(o,c,h){return a((bs[o]&&bs[o].get||s)(e,o,c,h))})},quickSetter:function(e,t,i){if(e=Ks(e),e.length>1){var r=e.map(function(d){return rs.quickSetter(d,t,i)}),s=r.length;return function(d){for(var p=s;p--;)r[p](d)}}e=e[0]||{};var a=bs[t],o=du(e),c=o.harness&&(o.harness.aliases||{})[t]||t,h=a?function(d){var p=new a;rd._pt=0,p.init(e,i?d+i:d,rd,0,[e]),p.render(1,p),rd._pt&&cS(1,rd)}:o.set(e,c);return a?h:function(d){return h(e,c,i?d+i:d,o,1)}},quickTo:function(e,t,i){var r,s=rs.to(e,Ls((r={},r[t]="+=0.1",r.paused=!0,r.stagger=0,r),i||{})),a=function(c,h,d){return s.resetTo(t,c,h,d)};return a.tween=s,a},isTweening:function(e){return Jn.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=pu(e.ease,xd.ease)),JI(xd,e||{})},config:function(e){return JI(Bs,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,r=e.plugins,s=e.defaults,a=e.extendTimeline;(r||"").split(",").forEach(function(o){return o&&!bs[o]&&!Ds[o]&&rm(t+" effect requires "+o+" plugin.")}),nC[t]=function(o,c,h){return i(Ks(o),Ls(c||{},s),h)},a&&(Dr.prototype[t]=function(o,c,h){return this.add(nC[t](o,Za(c)?c:(h=c)&&{},this),h)})},registerEase:function(e,t){rn[e]=pu(t)},parseEase:function(e,t){return arguments.length?pu(e,t):rn},getById:function(e){return Jn.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var i=new Dr(e),r,s;for(i.smoothChildTiming=$r(e.smoothChildTiming),Jn.remove(i),i._dp=0,i._time=i._tTime=Jn._time,r=Jn._first;r;)s=r._next,(t||!(!r._dur&&r instanceof _i&&r.vars.onComplete===r._targets[0]))&&Na(i,r,r._start-r._delay),r=s;return Na(Jn,i,0),i},context:function(e,t){return e?new aU(e,t):qn},matchMedia:function(e){return new F4(e)},matchMediaRefresh:function(){return mu.forEach(function(e){var t=e.conditions,i,r;for(r in t)t[r]&&(t[r]=!1,i=1);i&&e.revert()})||C1()},addEventListener:function(e,t){var i=Z0[e]||(Z0[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=Z0[e],r=i&&i.indexOf(t);r>=0&&i.splice(r,1)},utils:{wrap:g4,wrapYoyo:v4,distribute:FP,random:zP,snap:QP,normalize:A4,getUnit:pr,clamp:d4,splitColor:qP,toArray:Ks,selector:b1,mapRange:GP,pipe:p4,unitize:m4,interpolate:y4,shuffle:NP},install:SP,effects:nC,ticker:_s,updateRoot:Dr.updateRoot,plugins:bs,globalTimeline:Jn,core:{PropTween:ts,globals:MP,Tween:_i,Timeline:Dr,Animation:lm,getCache:du,_removeLinkedListItem:Fy,reverting:function(){return ir},context:function(e){return e&&qn&&(qn.data.push(e),e._ctx=qn),qn},suppressOverwrites:function(e){return Jw=e}}};es("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return wv[n]=_i[n]});_s.add(Dr.updateRoot);rd=wv.to({},{duration:0});var Q4=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},z4=function(e,t){var i=e._targets,r,s,a;for(r in t)for(s=i.length;s--;)a=e._ptLookup[s][r],a&&(a=a.d)&&(a._pt&&(a=Q4(a,r)),a&&a.modifier&&a.modifier(t[r],e,i[s],r))},oC=function(e,t){return{name:e,rawVars:1,init:function(r,s,a){a._onInit=function(o){var c,h;if(Wi(s)&&(c={},es(s,function(d){return c[d]=1}),s=c),t){c={};for(h in s)c[h]=t(s[h]);s=c}z4(o,s)}}}},rs=wv.registerPlugin({name:"attr",init:function(e,t,i,r,s){var a,o,c;this.tween=i;for(a in t)c=e.getAttribute(a)||"",o=this.add(e,"setAttribute",(c||0)+"",t[a],r,s,0,0,a),o.op=a,o.b=c,this._props.push(a)},render:function(e,t){for(var i=t._pt;i;)ir?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},oC("roundProps",E1),oC("modifiers"),oC("snap",QP))||wv;_i.version=Dr.version=rs.version="3.12.7";wP=1;$w()&&Sd();rn.Power0;rn.Power1;rn.Power2;rn.Power3;rn.Power4;rn.Linear;rn.Quad;rn.Cubic;rn.Quart;rn.Quint;rn.Strong;rn.Elastic;rn.Back;rn.SteppedEase;rn.Bounce;rn.Sine;rn.Expo;rn.Circ;/*!
 * CSSPlugin 3.12.7
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var iR,Hl,fd,uS,au,rR,hS,H4=function(){return typeof window<"u"},Jo={},$c=180/Math.PI,pd=Math.PI/180,bh=Math.atan2,sR=1e8,dS=/([A-Z])/g,G4=/(left|right|width|margin|padding|x)/i,V4=/[\s,\(]\S/,za={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},_1=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},W4=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},q4=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},j4=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},oU=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},lU=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},X4=function(e,t,i){return e.style[t]=i},Y4=function(e,t,i){return e.style.setProperty(t,i)},K4=function(e,t,i){return e._gsap[t]=i},J4=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},Z4=function(e,t,i,r,s){var a=e._gsap;a.scaleX=a.scaleY=i,a.renderTransform(s,a)},$4=function(e,t,i,r,s){var a=e._gsap;a[t]=i,a.renderTransform(s,a)},Zn="transform",ns=Zn+"Origin",eH=function n(e,t){var i=this,r=this.target,s=r.style,a=r._gsap;if(e in Jo&&s){if(this.tfm=this.tfm||{},e!=="transform")e=za[e]||e,~e.indexOf(",")?e.split(",").forEach(function(o){return i.tfm[o]=Lo(r,o)}):this.tfm[e]=a.x?a[e]:Lo(r,e),e===ns&&(this.tfm.zOrigin=a.zOrigin);else return za.transform.split(",").forEach(function(o){return n.call(i,o,t)});if(this.props.indexOf(Zn)>=0)return;a.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(ns,t,"")),e=Zn}(s||t)&&this.props.push(e,t,s[e])},cU=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},tH=function(){var e=this.props,t=this.target,i=t.style,r=t._gsap,s,a;for(s=0;s<e.length;s+=3)e[s+1]?e[s+1]===2?t[e[s]](e[s+2]):t[e[s]]=e[s+2]:e[s+2]?i[e[s]]=e[s+2]:i.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(dS,"-$1").toLowerCase());if(this.tfm){for(a in this.tfm)r[a]=this.tfm[a];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=hS(),(!s||!s.isStart)&&!i[Zn]&&(cU(i),r.zOrigin&&i[ns]&&(i[ns]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},uU=function(e,t){var i={target:e,props:[],revert:tH,save:eH};return e._gsap||rs.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(r){return i.save(r)}),i},hU,w1=function(e,t){var i=Hl.createElementNS?Hl.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Hl.createElement(e);return i&&i.style?i:Hl.createElement(e)},qa=function n(e,t,i){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(dS,"-$1").toLowerCase())||r.getPropertyValue(t)||!i&&n(e,Md(t)||t,1)||""},aR="O,Moz,ms,Ms,Webkit".split(","),Md=function(e,t,i){var r=t||au,s=r.style,a=5;if(e in s&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);a--&&!(aR[a]+e in s););return a<0?null:(a===3?"ms":a>=0?aR[a]:"")+e},S1=function(){H4()&&window.document&&(iR=window,Hl=iR.document,fd=Hl.documentElement,au=w1("div")||{style:{}},w1("div"),Zn=Md(Zn),ns=Zn+"Origin",au.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",hU=!!Md("perspective"),hS=rs.core.reverting,uS=1)},oR=function(e){var t=e.ownerSVGElement,i=w1("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=e.cloneNode(!0),s;r.style.display="block",i.appendChild(r),fd.appendChild(i);try{s=r.getBBox()}catch{}return i.removeChild(r),fd.removeChild(i),s},lR=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},dU=function(e){var t,i;try{t=e.getBBox()}catch{t=oR(e),i=1}return t&&(t.width||t.height)||i||(t=oR(e)),t&&!t.width&&!t.x&&!t.y?{x:+lR(e,["x","cx","x1"])||0,y:+lR(e,["y","cy","y1"])||0,width:0,height:0}:t},fU=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&dU(e))},Cu=function(e,t){if(t){var i=e.style,r;t in Jo&&t!==ns&&(t=Zn),i.removeProperty?(r=t.substr(0,2),(r==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),i.removeProperty(r==="--"?t:t.replace(dS,"-$1").toLowerCase())):i.removeAttribute(t)}},Gl=function(e,t,i,r,s,a){var o=new ts(e._pt,t,i,0,1,a?lU:oU);return e._pt=o,o.b=r,o.e=s,e._props.push(i),o},cR={deg:1,rad:1,turn:1},nH={grid:1,flex:1},$l=function n(e,t,i,r){var s=parseFloat(i)||0,a=(i+"").trim().substr((s+"").length)||"px",o=au.style,c=G4.test(t),h=e.tagName.toLowerCase()==="svg",d=(h?"client":"offset")+(c?"Width":"Height"),p=100,m=r==="px",A=r==="%",v,y,E,b;if(r===a||!s||cR[r]||cR[a])return s;if(a!=="px"&&!m&&(s=n(e,t,i,"px")),b=e.getCTM&&fU(e),(A||a==="%")&&(Jo[t]||~t.indexOf("adius")))return v=b?e.getBBox()[c?"width":"height"]:e[d],fi(A?s/v*p:s/100*v);if(o[c?"width":"height"]=p+(m?a:r),y=r!=="rem"&&~t.indexOf("adius")||r==="em"&&e.appendChild&&!h?e:e.parentNode,b&&(y=(e.ownerSVGElement||{}).parentNode),(!y||y===Hl||!y.appendChild)&&(y=Hl.body),E=y._gsap,E&&A&&E.width&&c&&E.time===_s.time&&!E.uncache)return fi(s/E.width*p);if(A&&(t==="height"||t==="width")){var C=e.style[t];e.style[t]=p+r,v=e[d],C?e.style[t]=C:Cu(e,t)}else(A||a==="%")&&!nH[qa(y,"display")]&&(o.position=qa(e,"position")),y===e&&(o.position="static"),y.appendChild(au),v=au[d],y.removeChild(au),o.position="absolute";return c&&A&&(E=du(y),E.time=_s.time,E.width=y[d]),fi(m?v*s/p:v&&s?p/v*s:0)},Lo=function(e,t,i,r){var s;return uS||S1(),t in za&&t!=="transform"&&(t=za[t],~t.indexOf(",")&&(t=t.split(",")[0])),Jo[t]&&t!=="transform"?(s=um(e,r),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:Mv(qa(e,ns))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||r||~(s+"").indexOf("calc("))&&(s=Sv[t]&&Sv[t](e,t,i)||qa(e,t)||BP(e,t)||(t==="opacity"?1:0))),i&&!~(s+"").trim().indexOf(" ")?$l(e,t,s,i)+i:s},iH=function(e,t,i,r){if(!i||i==="none"){var s=Md(t,e,1),a=s&&qa(e,s,1);a&&a!==i?(t=s,i=a):t==="borderColor"&&(i=qa(e,"borderTopColor"))}var o=new ts(this._pt,e.style,t,0,1,rU),c=0,h=0,d,p,m,A,v,y,E,b,C,_,w,T;if(o.b=i,o.e=r,i+="",r+="",r==="auto"&&(y=e.style[t],e.style[t]=r,r=qa(e,t)||r,y?e.style[t]=y:Cu(e,t)),d=[i,r],XP(d),i=d[0],r=d[1],m=i.match(id)||[],T=r.match(id)||[],T.length){for(;p=id.exec(r);)E=p[0],C=r.substring(c,p.index),v?v=(v+1)%5:(C.substr(-5)==="rgba("||C.substr(-5)==="hsla(")&&(v=1),E!==(y=m[h++]||"")&&(A=parseFloat(y)||0,w=y.substr((A+"").length),E.charAt(1)==="="&&(E=dd(A,E)+w),b=parseFloat(E),_=E.substr((b+"").length),c=id.lastIndex-_.length,_||(_=_||Bs.units[t]||w,c===r.length&&(r+=_,o.e+=_)),w!==_&&(A=$l(e,t,y,_)||0),o._pt={_next:o._pt,p:C||h===1?C:",",s:A,c:b-A,m:v&&v<4||t==="zIndex"?Math.round:0});o.c=c<r.length?r.substring(c,r.length):""}else o.r=t==="display"&&r==="none"?lU:oU;return CP.test(r)&&(o.e=0),this._pt=o,o},uR={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},rH=function(e){var t=e.split(" "),i=t[0],r=t[1]||"50%";return(i==="top"||i==="bottom"||r==="left"||r==="right")&&(e=i,i=r,r=e),t[0]=uR[i]||i,t[1]=uR[r]||r,t.join(" ")},sH=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var i=t.t,r=i.style,s=t.u,a=i._gsap,o,c,h;if(s==="all"||s===!0)r.cssText="",c=1;else for(s=s.split(","),h=s.length;--h>-1;)o=s[h],Jo[o]&&(c=1,o=o==="transformOrigin"?ns:Zn),Cu(i,o);c&&(Cu(i,Zn),a&&(a.svg&&i.removeAttribute("transform"),r.scale=r.rotate=r.translate="none",um(i,1),a.uncache=1,cU(r)))}},Sv={clearProps:function(e,t,i,r,s){if(s.data!=="isFromStart"){var a=e._pt=new ts(e._pt,t,i,0,0,sH);return a.u=r,a.pr=-10,a.tween=s,e._props.push(i),1}}},cm=[1,0,0,1,0,0],pU={},mU=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},hR=function(e){var t=qa(e,Zn);return mU(t)?cm:t.substr(7).match(xP).map(fi)},fS=function(e,t){var i=e._gsap||du(e),r=e.style,s=hR(e),a,o,c,h;return i.svg&&e.getAttribute("transform")?(c=e.transform.baseVal.consolidate().matrix,s=[c.a,c.b,c.c,c.d,c.e,c.f],s.join(",")==="1,0,0,1,0,0"?cm:s):(s===cm&&!e.offsetParent&&e!==fd&&!i.svg&&(c=r.display,r.display="block",a=e.parentNode,(!a||!e.offsetParent&&!e.getBoundingClientRect().width)&&(h=1,o=e.nextElementSibling,fd.appendChild(e)),s=hR(e),c?r.display=c:Cu(e,"display"),h&&(o?a.insertBefore(e,o):a?a.appendChild(e):fd.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},M1=function(e,t,i,r,s,a){var o=e._gsap,c=s||fS(e,!0),h=o.xOrigin||0,d=o.yOrigin||0,p=o.xOffset||0,m=o.yOffset||0,A=c[0],v=c[1],y=c[2],E=c[3],b=c[4],C=c[5],_=t.split(" "),w=parseFloat(_[0])||0,T=parseFloat(_[1])||0,L,R,P,D;i?c!==cm&&(R=A*E-v*y)&&(P=w*(E/R)+T*(-y/R)+(y*C-E*b)/R,D=w*(-v/R)+T*(A/R)-(A*C-v*b)/R,w=P,T=D):(L=dU(e),w=L.x+(~_[0].indexOf("%")?w/100*L.width:w),T=L.y+(~(_[1]||_[0]).indexOf("%")?T/100*L.height:T)),r||r!==!1&&o.smooth?(b=w-h,C=T-d,o.xOffset=p+(b*A+C*y)-b,o.yOffset=m+(b*v+C*E)-C):o.xOffset=o.yOffset=0,o.xOrigin=w,o.yOrigin=T,o.smooth=!!r,o.origin=t,o.originIsAbsolute=!!i,e.style[ns]="0px 0px",a&&(Gl(a,o,"xOrigin",h,w),Gl(a,o,"yOrigin",d,T),Gl(a,o,"xOffset",p,o.xOffset),Gl(a,o,"yOffset",m,o.yOffset)),e.setAttribute("data-svg-origin",w+" "+T)},um=function(e,t){var i=e._gsap||new ZP(e);if("x"in i&&!t&&!i.uncache)return i;var r=e.style,s=i.scaleX<0,a="px",o="deg",c=getComputedStyle(e),h=qa(e,ns)||"0",d,p,m,A,v,y,E,b,C,_,w,T,L,R,P,D,M,k,V,X,$,ae,z,j,Z,ce,U,se,me,be,xe,Ue;return d=p=m=y=E=b=C=_=w=0,A=v=1,i.svg=!!(e.getCTM&&fU(e)),c.translate&&((c.translate!=="none"||c.scale!=="none"||c.rotate!=="none")&&(r[Zn]=(c.translate!=="none"?"translate3d("+(c.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(c.rotate!=="none"?"rotate("+c.rotate+") ":"")+(c.scale!=="none"?"scale("+c.scale.split(" ").join(",")+") ":"")+(c[Zn]!=="none"?c[Zn]:"")),r.scale=r.rotate=r.translate="none"),R=fS(e,i.svg),i.svg&&(i.uncache?(Z=e.getBBox(),h=i.xOrigin-Z.x+"px "+(i.yOrigin-Z.y)+"px",j=""):j=!t&&e.getAttribute("data-svg-origin"),M1(e,j||h,!!j||i.originIsAbsolute,i.smooth!==!1,R)),T=i.xOrigin||0,L=i.yOrigin||0,R!==cm&&(k=R[0],V=R[1],X=R[2],$=R[3],d=ae=R[4],p=z=R[5],R.length===6?(A=Math.sqrt(k*k+V*V),v=Math.sqrt($*$+X*X),y=k||V?bh(V,k)*$c:0,C=X||$?bh(X,$)*$c+y:0,C&&(v*=Math.abs(Math.cos(C*pd))),i.svg&&(d-=T-(T*k+L*X),p-=L-(T*V+L*$))):(Ue=R[6],be=R[7],U=R[8],se=R[9],me=R[10],xe=R[11],d=R[12],p=R[13],m=R[14],P=bh(Ue,me),E=P*$c,P&&(D=Math.cos(-P),M=Math.sin(-P),j=ae*D+U*M,Z=z*D+se*M,ce=Ue*D+me*M,U=ae*-M+U*D,se=z*-M+se*D,me=Ue*-M+me*D,xe=be*-M+xe*D,ae=j,z=Z,Ue=ce),P=bh(-X,me),b=P*$c,P&&(D=Math.cos(-P),M=Math.sin(-P),j=k*D-U*M,Z=V*D-se*M,ce=X*D-me*M,xe=$*M+xe*D,k=j,V=Z,X=ce),P=bh(V,k),y=P*$c,P&&(D=Math.cos(P),M=Math.sin(P),j=k*D+V*M,Z=ae*D+z*M,V=V*D-k*M,z=z*D-ae*M,k=j,ae=Z),E&&Math.abs(E)+Math.abs(y)>359.9&&(E=y=0,b=180-b),A=fi(Math.sqrt(k*k+V*V+X*X)),v=fi(Math.sqrt(z*z+Ue*Ue)),P=bh(ae,z),C=Math.abs(P)>2e-4?P*$c:0,w=xe?1/(xe<0?-xe:xe):0),i.svg&&(j=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!mU(qa(e,Zn)),j&&e.setAttribute("transform",j))),Math.abs(C)>90&&Math.abs(C)<270&&(s?(A*=-1,C+=y<=0?180:-180,y+=y<=0?180:-180):(v*=-1,C+=C<=0?180:-180)),t=t||i.uncache,i.x=d-((i.xPercent=d&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-d)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+a,i.y=p-((i.yPercent=p&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-p)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+a,i.z=m+a,i.scaleX=fi(A),i.scaleY=fi(v),i.rotation=fi(y)+o,i.rotationX=fi(E)+o,i.rotationY=fi(b)+o,i.skewX=C+o,i.skewY=_+o,i.transformPerspective=w+a,(i.zOrigin=parseFloat(h.split(" ")[2])||!t&&i.zOrigin||0)&&(r[ns]=Mv(h)),i.xOffset=i.yOffset=0,i.force3D=Bs.force3D,i.renderTransform=i.svg?oH:hU?AU:aH,i.uncache=0,i},Mv=function(e){return(e=e.split(" "))[0]+" "+e[1]},lC=function(e,t,i){var r=pr(t);return fi(parseFloat(t)+parseFloat($l(e,"x",i+"px",r)))+r},aH=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,AU(e,t)},Bc="0deg",Gf="0px",Ic=") ",AU=function(e,t){var i=t||this,r=i.xPercent,s=i.yPercent,a=i.x,o=i.y,c=i.z,h=i.rotation,d=i.rotationY,p=i.rotationX,m=i.skewX,A=i.skewY,v=i.scaleX,y=i.scaleY,E=i.transformPerspective,b=i.force3D,C=i.target,_=i.zOrigin,w="",T=b==="auto"&&e&&e!==1||b===!0;if(_&&(p!==Bc||d!==Bc)){var L=parseFloat(d)*pd,R=Math.sin(L),P=Math.cos(L),D;L=parseFloat(p)*pd,D=Math.cos(L),a=lC(C,a,R*D*-_),o=lC(C,o,-Math.sin(L)*-_),c=lC(C,c,P*D*-_+_)}E!==Gf&&(w+="perspective("+E+Ic),(r||s)&&(w+="translate("+r+"%, "+s+"%) "),(T||a!==Gf||o!==Gf||c!==Gf)&&(w+=c!==Gf||T?"translate3d("+a+", "+o+", "+c+") ":"translate("+a+", "+o+Ic),h!==Bc&&(w+="rotate("+h+Ic),d!==Bc&&(w+="rotateY("+d+Ic),p!==Bc&&(w+="rotateX("+p+Ic),(m!==Bc||A!==Bc)&&(w+="skew("+m+", "+A+Ic),(v!==1||y!==1)&&(w+="scale("+v+", "+y+Ic),C.style[Zn]=w||"translate(0, 0)"},oH=function(e,t){var i=t||this,r=i.xPercent,s=i.yPercent,a=i.x,o=i.y,c=i.rotation,h=i.skewX,d=i.skewY,p=i.scaleX,m=i.scaleY,A=i.target,v=i.xOrigin,y=i.yOrigin,E=i.xOffset,b=i.yOffset,C=i.forceCSS,_=parseFloat(a),w=parseFloat(o),T,L,R,P,D;c=parseFloat(c),h=parseFloat(h),d=parseFloat(d),d&&(d=parseFloat(d),h+=d,c+=d),c||h?(c*=pd,h*=pd,T=Math.cos(c)*p,L=Math.sin(c)*p,R=Math.sin(c-h)*-m,P=Math.cos(c-h)*m,h&&(d*=pd,D=Math.tan(h-d),D=Math.sqrt(1+D*D),R*=D,P*=D,d&&(D=Math.tan(d),D=Math.sqrt(1+D*D),T*=D,L*=D)),T=fi(T),L=fi(L),R=fi(R),P=fi(P)):(T=p,P=m,L=R=0),(_&&!~(a+"").indexOf("px")||w&&!~(o+"").indexOf("px"))&&(_=$l(A,"x",a,"px"),w=$l(A,"y",o,"px")),(v||y||E||b)&&(_=fi(_+v-(v*T+y*R)+E),w=fi(w+y-(v*L+y*P)+b)),(r||s)&&(D=A.getBBox(),_=fi(_+r/100*D.width),w=fi(w+s/100*D.height)),D="matrix("+T+","+L+","+R+","+P+","+_+","+w+")",A.setAttribute("transform",D),C&&(A.style[Zn]=D)},lH=function(e,t,i,r,s){var a=360,o=Wi(s),c=parseFloat(s)*(o&&~s.indexOf("rad")?$c:1),h=c-r,d=r+h+"deg",p,m;return o&&(p=s.split("_")[1],p==="short"&&(h%=a,h!==h%(a/2)&&(h+=h<0?a:-360)),p==="cw"&&h<0?h=(h+a*sR)%a-~~(h/a)*a:p==="ccw"&&h>0&&(h=(h-a*sR)%a-~~(h/a)*a)),e._pt=m=new ts(e._pt,t,i,r,h,W4),m.e=d,m.u="deg",e._props.push(i),m},dR=function(e,t){for(var i in t)e[i]=t[i];return e},cH=function(e,t,i){var r=dR({},i._gsap),s="perspective,force3D,transformOrigin,svgOrigin",a=i.style,o,c,h,d,p,m,A,v;r.svg?(h=i.getAttribute("transform"),i.setAttribute("transform",""),a[Zn]=t,o=um(i,1),Cu(i,Zn),i.setAttribute("transform",h)):(h=getComputedStyle(i)[Zn],a[Zn]=t,o=um(i,1),a[Zn]=h);for(c in Jo)h=r[c],d=o[c],h!==d&&s.indexOf(c)<0&&(A=pr(h),v=pr(d),p=A!==v?$l(i,c,h,v):parseFloat(h),m=parseFloat(d),e._pt=new ts(e._pt,o,c,p,m-p,_1),e._pt.u=v||0,e._props.push(c));dR(o,r)};es("padding,margin,Width,Radius",function(n,e){var t="Top",i="Right",r="Bottom",s="Left",a=(e<3?[t,i,r,s]:[t+s,t+i,r+i,r+s]).map(function(o){return e<2?n+o:"border"+o+n});Sv[e>1?"border"+n:n]=function(o,c,h,d,p){var m,A;if(arguments.length<4)return m=a.map(function(v){return Lo(o,v,h)}),A=m.join(" "),A.split(m[0]).length===5?m[0]:A;m=(d+"").split(" "),A={},a.forEach(function(v,y){return A[v]=m[y]=m[y]||m[(y-1)/2|0]}),o.init(c,A,p)}});var gU={name:"css",register:S1,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,r,s){var a=this._props,o=e.style,c=i.vars.startAt,h,d,p,m,A,v,y,E,b,C,_,w,T,L,R,P;uS||S1(),this.styles=this.styles||uU(e),P=this.styles.props,this.tween=i;for(y in t)if(y!=="autoRound"&&(d=t[y],!(bs[y]&&$P(y,t,i,r,e,s)))){if(A=typeof d,v=Sv[y],A==="function"&&(d=d.call(i,r,e,s),A=typeof d),A==="string"&&~d.indexOf("random(")&&(d=am(d)),v)v(this,e,y,d,i)&&(R=1);else if(y.substr(0,2)==="--")h=(getComputedStyle(e).getPropertyValue(y)+"").trim(),d+="",jl.lastIndex=0,jl.test(h)||(E=pr(h),b=pr(d)),b?E!==b&&(h=$l(e,y,h,b)+b):E&&(d+=E),this.add(o,"setProperty",h,d,r,s,0,0,y),a.push(y),P.push(y,0,o[y]);else if(A!=="undefined"){if(c&&y in c?(h=typeof c[y]=="function"?c[y].call(i,r,e,s):c[y],Wi(h)&&~h.indexOf("random(")&&(h=am(h)),pr(h+"")||h==="auto"||(h+=Bs.units[y]||pr(Lo(e,y))||""),(h+"").charAt(1)==="="&&(h=Lo(e,y))):h=Lo(e,y),m=parseFloat(h),C=A==="string"&&d.charAt(1)==="="&&d.substr(0,2),C&&(d=d.substr(2)),p=parseFloat(d),y in za&&(y==="autoAlpha"&&(m===1&&Lo(e,"visibility")==="hidden"&&p&&(m=0),P.push("visibility",0,o.visibility),Gl(this,o,"visibility",m?"inherit":"hidden",p?"inherit":"hidden",!p)),y!=="scale"&&y!=="transform"&&(y=za[y],~y.indexOf(",")&&(y=y.split(",")[0]))),_=y in Jo,_){if(this.styles.save(y),w||(T=e._gsap,T.renderTransform&&!t.parseTransform||um(e,t.parseTransform),L=t.smoothOrigin!==!1&&T.smooth,w=this._pt=new ts(this._pt,o,Zn,0,1,T.renderTransform,T,0,-1),w.dep=1),y==="scale")this._pt=new ts(this._pt,T,"scaleY",T.scaleY,(C?dd(T.scaleY,C+p):p)-T.scaleY||0,_1),this._pt.u=0,a.push("scaleY",y),y+="X";else if(y==="transformOrigin"){P.push(ns,0,o[ns]),d=rH(d),T.svg?M1(e,d,0,L,0,this):(b=parseFloat(d.split(" ")[2])||0,b!==T.zOrigin&&Gl(this,T,"zOrigin",T.zOrigin,b),Gl(this,o,y,Mv(h),Mv(d)));continue}else if(y==="svgOrigin"){M1(e,d,1,L,0,this);continue}else if(y in pU){lH(this,T,y,m,C?dd(m,C+d):d);continue}else if(y==="smoothOrigin"){Gl(this,T,"smooth",T.smooth,d);continue}else if(y==="force3D"){T[y]=d;continue}else if(y==="transform"){cH(this,d,e);continue}}else y in o||(y=Md(y)||y);if(_||(p||p===0)&&(m||m===0)&&!V4.test(d)&&y in o)E=(h+"").substr((m+"").length),p||(p=0),b=pr(d)||(y in Bs.units?Bs.units[y]:E),E!==b&&(m=$l(e,y,h,b)),this._pt=new ts(this._pt,_?T:o,y,m,(C?dd(m,C+p):p)-m,!_&&(b==="px"||y==="zIndex")&&t.autoRound!==!1?j4:_1),this._pt.u=b||0,E!==b&&b!=="%"&&(this._pt.b=h,this._pt.r=q4);else if(y in o)iH.call(this,e,y,h,C?C+d:d);else if(y in e)this.add(e,y,h||e[y],C?C+d:d,r,s);else if(y!=="parseTransform"){tS(y,d);continue}_||(y in o?P.push(y,0,o[y]):typeof e[y]=="function"?P.push(y,2,e[y]()):P.push(y,1,h||e[y])),a.push(y)}}R&&sU(this)},render:function(e,t){if(t.tween._time||!hS())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:Lo,aliases:za,getSetter:function(e,t,i){var r=za[t];return r&&r.indexOf(",")<0&&(t=r),t in Jo&&t!==ns&&(e._gsap.x||Lo(e,"x"))?i&&rR===i?t==="scale"?J4:K4:(rR=i||{})&&(t==="scale"?Z4:$4):e.style&&!Zw(e.style[t])?X4:~t.indexOf("-")?Y4:lS(e,t)},core:{_removeProperty:Cu,_getMatrix:fS}};rs.utils.checkPrefix=Md;rs.core.getStyleSaver=uU;(function(n,e,t,i){var r=es(n+","+e+","+t,function(s){Jo[s]=1});es(e,function(s){Bs.units[s]="deg",pU[s]=1}),za[r[13]]=n+","+e,es(i,function(s){var a=s.split(":");za[a[1]]=r[a[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");es("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){Bs.units[n]="px"});rs.registerPlugin(gU);var Es=rs.registerPlugin(gU)||rs;Es.core.Tween;const vU=ie.createContext(null),uH=({children:n})=>{const[e,t]=ie.useState([]),[i,r]=ie.useState(null),[s,a]=ie.useState(0),[o,c]=ie.useState("none"),[h,d]=ie.useState(0),[p,m]=ie.useState(!1),A=ie.useRef(0),v=ie.useRef(null),y=ie.useCallback((_,w,T)=>{t(L=>{const R=L.find(P=>P.id===_);return R?R.element!==T?L.map(P=>P.id===_?{...P,type:w,element:T}:P):L:[...L,{id:_,type:w,inView:!1,element:T}]})},[]),E=ie.useCallback(_=>{t(w=>w.filter(T=>T.id!==_))},[]),b=ie.useCallback(_=>{if(_===null){r(null);return}t(w=>{const T=w.find(P=>P.id===_);if(!T||T.inView)return w;const L=w.map(P=>({...P,inView:P.id===_})),R=L.find(P=>P.id===_)||null;return r(R),L})},[]);ie.useEffect(()=>{const _=()=>{const w=window.scrollY;w>A.current?c("down"):w<A.current&&c("up"),a(w),A.current=w;const T=document.body.scrollHeight-window.innerHeight,L=T>0?w/T*100:0;d(L),m(!0),v.current!==null&&window.clearTimeout(v.current),v.current=window.setTimeout(()=>{m(!1)},150)};return window.addEventListener("scroll",_,{passive:!0}),_(),()=>{window.removeEventListener("scroll",_),v.current!==null&&window.clearTimeout(v.current)}},[]);const C=Vw.useMemo(()=>({sections:e,activeSection:i,scrollDirection:o,scrollY:s,scrollProgress:h,isScrolling:p,registerSection:y,unregisterSection:E,setActiveSection:b}),[e,i,o,s,h,p,y,E,b]);return de.jsx(vU.Provider,{value:C,children:n})},hH=()=>{const n=ie.useContext(vU);if(n===null)throw new Error("useScroll must be used within a ScrollProvider");return n};function Ba(n){if(n.startsWith("http")||n.startsWith("data:"))return n;if(!n)return"/wayside-app/";if(n.includes("/src/")||n.startsWith("src/")){const r=/(?:\/src\/|^src\/)(.*)/,s=n.match(r);if(s){const a=s[1],o="/wayside-app/";return(o.endsWith("/")?o:o+"/")+a}}const e=n.startsWith("/")?n.slice(1):n,t="/wayside-app/";return(t.endsWith("/")?t:t+"/")+e}const Ep=({title:n,subtitle:e,content:t,children:i,id:r,backgroundColor:s="white",backgroundImage:a,textColor:o="black",width:c="100%",height:h="auto",padding:d="0",margin:p="0",className:m="",alignment:A="left",verticalAlignment:v="top",fullWidth:y=!1,fullHeight:E=!1,contentImage:b,contentVideo:C,backgroundVideo:_,animateIn:w=!1,animationDuration:T=.5,animationDelay:L=0,animationType:R="fade",customAnimation:P,scrollTrigger:D=!1,scrollParallax:M=!1,parallaxStrength:k=.1,fontFamily:V,fontWeight:X,fontSize:$,lineHeight:ae,letterSpacing:z,variableFontSettings:j,fontAnimatesOnScroll:Z=!1,fontAnimationRange:ce=[0,1],hasShadow:U=!1,borderRadius:se="0.5rem",opacity:me=1,glassmorphism:be=!1,contentClassName:xe="",titleClassName:Ue="",subtitleClassName:Ne="!text-center mb-0 opacity-80",textClassName:Le="",interactive:ue=!1,hoverEffect:Oe="none",onClick:Ge})=>{const je=ie.useRef(null),Me=ie.useRef(null),Ce=ie.useRef(null),Be=ie.useRef(null),Y=ie.useRef(null),{scrollY:ze,scrollDirection:ne,scrollProgress:I,isScrolling:O}=hH(),[Q,W]=ie.useState(j);ie.useEffect(()=>{if(je.current){if(M&&k!==0){const N=ze*k;Es.to(je.current,{y:N,duration:.1,ease:"power1.out",overwrite:!0})}if(Z&&j){const[N,re]=ce,Ie=je.current.getBoundingClientRect(),we=Ie.top/window.innerHeight;Ie.bottom/window.innerHeight;const Ke=1-we,Fe=re-N,Xe=Math.max(0,Math.min(1,(Ke-N)/Fe));if(j){const ht={...j};ht.wght!==void 0&&(ht.wght=100+Xe*800),ht.slnt!==void 0&&(ht.slnt=0+Xe*-15),W(ht)}}}},[ze,M,k,Z,j,ce]),ie.useEffect(()=>{if(!je.current||!w)return;Es.set(je.current,{autoAlpha:0,...R==="slide"?{y:50}:{},...R==="scale"?{scale:.8}:{}});let N;return P?N=Es.to(je.current,{...P,delay:L,duration:T}):N=Es.to(je.current,{autoAlpha:1,...R==="slide"?{y:0}:{},...R==="scale"?{scale:1}:{},delay:L,duration:T,ease:"power2.out"}),()=>{N.kill()}},[w,R,L,T,P]),ie.useEffect(()=>{if(!je.current||!D)return;const N=Es.fromTo(je.current,{autoAlpha:0,...R==="slide"?{y:50}:{},...R==="scale"?{scale:.8}:{}},{autoAlpha:1,...R==="slide"?{y:0}:{},...R==="scale"?{scale:1}:{},duration:T,ease:"power2.out",scrollTrigger:{trigger:je.current,start:"top 80%",end:"bottom 20%",toggleActions:"play none none reverse"}});return()=>{N.scrollTrigger&&N.scrollTrigger.kill()}},[D,R,T]);const ee=()=>{if(!Q)return{};const N={};Q.wght!==void 0&&(N["--wght"]=Q.wght),Q.wdth!==void 0&&(N["--wdth"]=Q.wdth),Q.slnt!==void 0&&(N["--slnt"]=Q.slnt),Q.ital!==void 0&&(N["--ital"]=Q.ital),Q.opsz!==void 0&&(N["--opsz"]=Q.opsz),Q.grad!==void 0&&(N["--grad"]=Q.grad),Q.custom&&Object.entries(Q.custom).forEach(([ge,Ie])=>{N[`--${ge}`]=Ie});const re=[];return Q.wght!==void 0&&re.push('"wght" var(--wght)'),Q.wdth!==void 0&&re.push('"wdth" var(--wdth)'),Q.slnt!==void 0&&re.push('"slnt" var(--slnt)'),Q.ital!==void 0&&re.push('"ital" var(--ital)'),Q.opsz!==void 0&&re.push('"opsz" var(--opsz)'),Q.grad!==void 0&&re.push('"grad" var(--grad)'),Q.custom&&Object.keys(Q.custom).forEach(ge=>{re.push(`"${ge}" var(--${ge})`)}),re.length>0&&(N.fontVariationSettings=re.join(", ")),N},he=Ji("content-container",{"w-full":y,"h-full":E,"shadow-lg":U,"backdrop-blur-sm bg-opacity-70":be,"transition-transform duration-300 ease-in-out":ue,"hover:scale-105":ue&&Oe==="scale","hover:shadow-xl hover:-translate-y-1":ue&&Oe==="lift","hover:shadow-glow":ue&&Oe==="glow","text-left":A==="left","text-center":A==="center","text-right":A==="right","justify-start":v==="top","justify-center":v==="center","justify-end":v==="bottom","flex flex-col":!0},m),Te=Ji("content-wrapper relative z-10",{"mt-4":(b==null?void 0:b.position)==="above"||(C==null?void 0:C.position)==="above","mb-4":(b==null?void 0:b.position)==="below"||(C==null?void 0:C.position)==="below","ml-4":(b==null?void 0:b.position)==="left"||(C==null?void 0:C.position)==="left","mr-4":(b==null?void 0:b.position)==="right"||(C==null?void 0:C.position)==="right","flex flex-col":!(b!=null&&b.position)&&!(C!=null&&C.position)||(b==null?void 0:b.position)==="below"||(C==null?void 0:C.position)==="below","flex flex-col-reverse":(b==null?void 0:b.position)==="above"||(C==null?void 0:C.position)==="above","flex flex-row-reverse gap-4":(b==null?void 0:b.position)==="left"||(C==null?void 0:C.position)==="left","flex flex-row gap-4":(b==null?void 0:b.position)==="right"||(C==null?void 0:C.position)==="right"},xe),Ye={backgroundColor:s,color:o,width:y?"100%":c,height:E?"100%":h,padding:d,margin:p,borderRadius:se,opacity:me,position:"relative",overflow:"hidden",display:"flex",flexDirection:"column",...ee()};a&&(Ye.backgroundImage=`url(${Ba(a)})`,Ye.backgroundSize="cover",Ye.backgroundPosition="center"),V&&(Ye.fontFamily=V),X&&(Ye.fontWeight=X),$&&(Ye.fontSize=$),ae&&(Ye.lineHeight=ae),z&&(Ye.letterSpacing=z);const q={marginTop:v==="top"?0:v==="center"?"auto":0,marginBottom:v==="bottom"?0:v==="center"?"auto":0,display:"flex",flexDirection:"column",width:"100%"};return de.jsxs("div",{ref:je,id:r,className:he,style:Ye,onClick:Ge,"data-component":r,children:[_&&de.jsx("div",{className:"absolute inset-0 w-full h-full overflow-hidden",children:de.jsx("video",{className:"w-full h-full object-cover",src:Ba(_),autoPlay:!0,loop:!0,muted:!0,playsInline:!0})}),be&&de.jsx("div",{className:"absolute inset-0 bg-white/30 backdrop-blur-sm"}),de.jsxs("div",{ref:Me,className:Te,style:q,children:[((b==null?void 0:b.position)==="above"||(C==null?void 0:C.position)==="above")&&de.jsxs("div",{className:"media-container mb-4",children:[(b==null?void 0:b.position)==="above"&&de.jsxs("figure",{className:Ji("media-figure",b.className),children:[de.jsx("img",{ref:Be,src:Ba(b.src),alt:b.alt||n||"Content image",style:{width:b.width||"100%",height:b.height||"auto"},className:"max-w-full object-contain"}),b.caption&&de.jsx("figcaption",{className:"text-sm mt-2 opacity-75",children:b.caption})]}),(C==null?void 0:C.position)==="above"&&de.jsxs("figure",{className:Ji("media-figure",C.className),children:[de.jsx("video",{ref:Y,src:Ba(C.src),autoPlay:C.autoPlay,loop:C.loop,muted:C.muted,controls:C.controls,playsInline:!0,style:{width:C.width||"100%",height:C.height||"auto"},className:"max-w-full"}),C.caption&&de.jsx("figcaption",{className:"text-sm mt-2 opacity-75",children:C.caption})]})]}),de.jsxs("div",{className:"text-content",children:[n&&de.jsx("h3",{ref:Ce,className:Ji("font-bold mb-2",Ue||"text-2xl"),children:n}),e&&de.jsx("h4",{className:Ji("!text-center text-xl md:text-2xl font-light mb-0 opacity-80",Ne||"text-lg"),children:e}),t&&de.jsx("div",{className:Ji("content-text",Le),children:typeof t=="string"?de.jsx("p",{children:t}):t}),i]}),((b==null?void 0:b.position)==="below"||(C==null?void 0:C.position)==="below")&&de.jsxs("div",{className:"media-container mt-4",children:[(b==null?void 0:b.position)==="below"&&de.jsxs("figure",{className:Ji("media-figure",b.className),children:[de.jsx("img",{ref:Be,src:Ba(b.src),alt:b.alt||n||"Content image",style:{width:b.width||"100%",height:b.height||"auto"},className:"max-w-full object-contain"}),b.caption&&de.jsx("figcaption",{className:"text-sm mt-2 opacity-75",children:b.caption})]}),(C==null?void 0:C.position)==="below"&&de.jsxs("figure",{className:Ji("media-figure",C.className),children:[de.jsx("video",{ref:Y,src:Ba(C.src),autoPlay:C.autoPlay,loop:C.loop,muted:C.muted,controls:C.controls,playsInline:!0,style:{width:C.width||"100%",height:C.height||"auto"},className:"max-w-full"}),C.caption&&de.jsx("figcaption",{className:"text-sm mt-2 opacity-75",children:C.caption})]})]})]}),(b==null?void 0:b.position)==="left"&&de.jsxs("figure",{className:Ji("media-figure",b.className),children:[de.jsx("img",{ref:Be,src:Ba(b.src),alt:b.alt||n||"Content image",style:{width:b.width||"30%",height:b.height||"auto"},className:"max-w-full object-contain"}),b.caption&&de.jsx("figcaption",{className:"text-sm mt-2 opacity-75",children:b.caption})]}),(b==null?void 0:b.position)==="right"&&de.jsxs("figure",{className:Ji("media-figure",b.className),children:[de.jsx("img",{ref:Be,src:Ba(b.src),alt:b.alt||n||"Content image",style:{width:b.width||"30%",height:b.height||"auto"},className:"max-w-full object-contain"}),b.caption&&de.jsx("figcaption",{className:"text-sm mt-2 opacity-75",children:b.caption})]}),(C==null?void 0:C.position)==="left"&&de.jsxs("figure",{className:Ji("media-figure",C.className),children:[de.jsx("video",{ref:Y,src:Ba(C.src),autoPlay:C.autoPlay,loop:C.loop,muted:C.muted,controls:C.controls,playsInline:!0,style:{width:C.width||"30%",height:C.height||"auto"},className:"max-w-full"}),C.caption&&de.jsx("figcaption",{className:"text-sm mt-2 opacity-75",children:C.caption})]}),(C==null?void 0:C.position)==="right"&&de.jsxs("figure",{className:Ji("media-figure",C.className),children:[de.jsx("video",{ref:Y,src:Ba(C.src),autoPlay:C.autoPlay,loop:C.loop,muted:C.muted,controls:C.controls,playsInline:!0,style:{width:C.width||"30%",height:C.height||"auto"},className:"max-w-full"}),C.caption&&de.jsx("figcaption",{className:"text-sm mt-2 opacity-75",children:C.caption})]})]})},dH=({href:n,targetId:e,targetAction:t,openInNewTab:i,buttonClassName:r="",unlockScrolling:s=!1,onUnlock:a,title:o,subtitle:c,content:h,backgroundColor:d,backgroundImage:p,textColor:m,contentImage:A,hasShadow:v,interactive:y=!0,hoverEffect:E="lift",className:b="",...C})=>{const _=()=>{s&&a&&a(),setTimeout(()=>{if(e){const w=document.getElementById(e);w&&w.scrollIntoView({behavior:"smooth"})}else n&&(i?window.open(n,"_blank"):window.location.href=n)},50)};return de.jsx(Ep,{title:o,subtitle:c,content:h,backgroundColor:d,backgroundImage:p,textColor:m,contentImage:A,hasShadow:v,interactive:y,hoverEffect:E,className:Ji("cursor-pointer",b,r),onClick:_,...C})},yU=({color:n="var(--color-dark)",direction:e="to right",gradientType:t="linear",position:i="center",shape:r="circle",size:s="farthest-corner",angle:a="",blurAmount:o=0,softTransition:c=!1,blockSize:h=30,isText:d=!1,children:p,className:m="",tag:A="div"})=>{let v={};if(n.startsWith("gradient(")){let E=n.substring(9,n.length-1).split(",").map(b=>b.trim());if(E.length>=2){if(t==="blocks"){const b=[];E.forEach((C,_)=>{const w=Math.floor(Math.random()*100),T=Math.floor(Math.random()*100);b.push(`radial-gradient(circle ${h}vw at ${w}% ${T}%, ${C} 0%, transparent 70%)`)}),v={backgroundColor:E[E.length-1],backgroundImage:b.join(", "),backgroundSize:"100% 100%",backgroundRepeat:"no-repeat"}}else if(c&&!n.includes("%")&&t!=="conic"){const b=[];b.push(`${E[0]} 0%`),b.push(`${E[0]} 10%`);for(let C=1;C<E.length-1;C++){const _=C/(E.length-1)*100,w=_-15,T=_+15;b.push(`${E[C-1]} ${w}%`),b.push(`${E[C]} ${_}%`),b.push(`${E[C]} ${T}%`)}switch(b.push(`${E[E.length-1]} 90%`),b.push(`${E[E.length-1]} 100%`),E=b,t){case"radial":v={backgroundImage:`radial-gradient(${r} ${s} at ${i}, ${E.join(", ")})`};break;case"repeating-linear":v={backgroundImage:`repeating-linear-gradient(${e}, ${E.join(", ")})`};break;case"repeating-radial":v={backgroundImage:`repeating-radial-gradient(${r} ${s} at ${i}, ${E.join(", ")})`};break;default:v={backgroundImage:`linear-gradient(${e}, ${E.join(", ")})`}}}else switch(t){case"radial":v={backgroundImage:`radial-gradient(${r} ${s} at ${i}, ${E.join(", ")})`};break;case"conic":v={backgroundImage:`conic-gradient(${a?a+" ":""}from ${i}, ${E.join(", ")})`};break;case"repeating-linear":v={backgroundImage:`repeating-linear-gradient(${e}, ${E.join(", ")})`};break;case"repeating-radial":v={backgroundImage:`repeating-radial-gradient(${r} ${s} at ${i}, ${E.join(", ")})`};break;default:v={backgroundImage:`linear-gradient(${e}, ${E.join(", ")})`}}o>0&&(v.filter=`blur(${o}px)`,v.margin=`-${o}px`,v.padding=`${o}px`)}}else v={backgroundColor:n};return d&&v.backgroundImage&&(v.backgroundClip="text",v.WebkitBackgroundClip="text",v.color="transparent",v.WebkitTextFillColor="transparent",v.filter&&v.filter.includes("blur")&&(delete v.filter,delete v.margin,delete v.padding)),A==="span"?de.jsx("span",{className:m,style:v,children:p}):A==="h1"?de.jsx("h1",{className:m,style:v,children:p}):A==="h2"?de.jsx("h2",{className:m,style:v,children:p}):A==="h3"?de.jsx("h3",{className:m,style:v,children:p}):A==="p"?de.jsx("p",{className:m,style:v,children:p}):de.jsx("div",{className:m,style:v,children:p})};function fH(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function pH(n,e,t){return e&&fH(n.prototype,e),n}/*!
 * Observer 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var nr,$0,ws,Vl,Wl,md,bU,eu,Up,EU,ko,da,xU,CU=function(){return nr||typeof window<"u"&&(nr=window.gsap)&&nr.registerPlugin&&nr},_U=1,sd=[],Jt=[],ja=[],kp=Date.now,T1=function(e,t){return t},mH=function(){var e=Up.core,t=e.bridge||{},i=e._scrollers,r=e._proxies;i.push.apply(i,Jt),r.push.apply(r,ja),Jt=i,ja=r,T1=function(a,o){return t[a](o)}},Xl=function(e,t){return~ja.indexOf(e)&&ja[ja.indexOf(e)+1][t]},Np=function(e){return!!~EU.indexOf(e)},Sr=function(e,t,i,r,s){return e.addEventListener(t,i,{passive:r!==!1,capture:!!s})},Cr=function(e,t,i,r){return e.removeEventListener(t,i,!!r)},mg="scrollLeft",Ag="scrollTop",B1=function(){return ko&&ko.isPressed||Jt.cache++},Tv=function(e,t){var i=function r(s){if(s||s===0){_U&&(ws.history.scrollRestoration="manual");var a=ko&&ko.isPressed;s=r.v=Math.round(s)||(ko&&ko.iOS?1:0),e(s),r.cacheID=Jt.cache,a&&T1("ss",s)}else(t||Jt.cache!==r.cacheID||T1("ref"))&&(r.cacheID=Jt.cache,r.v=e());return r.v+r.offset};return i.offset=0,e&&i},Lr={s:mg,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:Tv(function(n){return arguments.length?ws.scrollTo(n,Oi.sc()):ws.pageXOffset||Vl[mg]||Wl[mg]||md[mg]||0})},Oi={s:Ag,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:Lr,sc:Tv(function(n){return arguments.length?ws.scrollTo(Lr.sc(),n):ws.pageYOffset||Vl[Ag]||Wl[Ag]||md[Ag]||0})},Xr=function(e,t){return(t&&t._ctx&&t._ctx.selector||nr.utils.toArray)(e)[0]||(typeof e=="string"&&nr.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},ec=function(e,t){var i=t.s,r=t.sc;Np(e)&&(e=Vl.scrollingElement||Wl);var s=Jt.indexOf(e),a=r===Oi.sc?1:2;!~s&&(s=Jt.push(e)-1),Jt[s+a]||Sr(e,"scroll",B1);var o=Jt[s+a],c=o||(Jt[s+a]=Tv(Xl(e,i),!0)||(Np(e)?r:Tv(function(h){return arguments.length?e[i]=h:e[i]})));return c.target=e,o||(c.smooth=nr.getProperty(e,"scrollBehavior")==="smooth"),c},I1=function(e,t,i){var r=e,s=e,a=kp(),o=a,c=t||50,h=Math.max(500,c*3),d=function(v,y){var E=kp();y||E-a>c?(s=r,r=v,o=a,a=E):i?r+=v:r=s+(v-s)/(E-o)*(a-o)},p=function(){s=r=i?0:r,o=a=0},m=function(v){var y=o,E=s,b=kp();return(v||v===0)&&v!==r&&d(v),a===o||b-o>h?0:(r+(i?E:-E))/((i?b:a)-y)*1e3};return{update:d,reset:p,getVelocity:m}},Vf=function(e,t){return t&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},fR=function(e){var t=Math.max.apply(Math,e),i=Math.min.apply(Math,e);return Math.abs(t)>=Math.abs(i)?t:i},wU=function(){Up=nr.core.globals().ScrollTrigger,Up&&Up.core&&mH()},SU=function(e){return nr=e||CU(),!$0&&nr&&typeof document<"u"&&document.body&&(ws=window,Vl=document,Wl=Vl.documentElement,md=Vl.body,EU=[ws,Vl,Wl,md],nr.utils.clamp,xU=nr.core.context||function(){},eu="onpointerenter"in md?"pointer":"mouse",bU=Ai.isTouch=ws.matchMedia&&ws.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in ws||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,da=Ai.eventTypes=("ontouchstart"in Wl?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in Wl?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return _U=0},500),wU(),$0=1),$0};Lr.op=Oi;Jt.cache=0;var Ai=function(){function n(t){this.init(t)}var e=n.prototype;return e.init=function(i){$0||SU(nr)||console.warn("Please gsap.registerPlugin(Observer)"),Up||wU();var r=i.tolerance,s=i.dragMinimum,a=i.type,o=i.target,c=i.lineHeight,h=i.debounce,d=i.preventDefault,p=i.onStop,m=i.onStopDelay,A=i.ignore,v=i.wheelSpeed,y=i.event,E=i.onDragStart,b=i.onDragEnd,C=i.onDrag,_=i.onPress,w=i.onRelease,T=i.onRight,L=i.onLeft,R=i.onUp,P=i.onDown,D=i.onChangeX,M=i.onChangeY,k=i.onChange,V=i.onToggleX,X=i.onToggleY,$=i.onHover,ae=i.onHoverEnd,z=i.onMove,j=i.ignoreCheck,Z=i.isNormalizer,ce=i.onGestureStart,U=i.onGestureEnd,se=i.onWheel,me=i.onEnable,be=i.onDisable,xe=i.onClick,Ue=i.scrollSpeed,Ne=i.capture,Le=i.allowClicks,ue=i.lockAxis,Oe=i.onLockAxis;this.target=o=Xr(o)||Wl,this.vars=i,A&&(A=nr.utils.toArray(A)),r=r||1e-9,s=s||0,v=v||1,Ue=Ue||1,a=a||"wheel,touch,pointer",h=h!==!1,c||(c=parseFloat(ws.getComputedStyle(md).lineHeight)||22);var Ge,je,Me,Ce,Be,Y,ze,ne=this,I=0,O=0,Q=i.passive||!d&&i.passive!==!1,W=ec(o,Lr),ee=ec(o,Oi),he=W(),Te=ee(),Ye=~a.indexOf("touch")&&!~a.indexOf("pointer")&&da[0]==="pointerdown",q=Np(o),N=o.ownerDocument||Vl,re=[0,0,0],ge=[0,0,0],Ie=0,we=function(){return Ie=kp()},Ke=function(nt,At){return(ne.event=nt)&&A&&~A.indexOf(nt.target)||At&&Ye&&nt.pointerType!=="touch"||j&&j(nt,At)},Fe=function(){ne._vx.reset(),ne._vy.reset(),je.pause(),p&&p(ne)},Xe=function(){var nt=ne.deltaX=fR(re),At=ne.deltaY=fR(ge),Je=Math.abs(nt)>=r,gt=Math.abs(At)>=r;k&&(Je||gt)&&k(ne,nt,At,re,ge),Je&&(T&&ne.deltaX>0&&T(ne),L&&ne.deltaX<0&&L(ne),D&&D(ne),V&&ne.deltaX<0!=I<0&&V(ne),I=ne.deltaX,re[0]=re[1]=re[2]=0),gt&&(P&&ne.deltaY>0&&P(ne),R&&ne.deltaY<0&&R(ne),M&&M(ne),X&&ne.deltaY<0!=O<0&&X(ne),O=ne.deltaY,ge[0]=ge[1]=ge[2]=0),(Ce||Me)&&(z&&z(ne),Me&&(E&&Me===1&&E(ne),C&&C(ne),Me=0),Ce=!1),Y&&!(Y=!1)&&Oe&&Oe(ne),Be&&(se(ne),Be=!1),Ge=0},ht=function(nt,At,Je){re[Je]+=nt,ge[Je]+=At,ne._vx.update(nt),ne._vy.update(At),h?Ge||(Ge=requestAnimationFrame(Xe)):Xe()},Ze=function(nt,At){ue&&!ze&&(ne.axis=ze=Math.abs(nt)>Math.abs(At)?"x":"y",Y=!0),ze!=="y"&&(re[2]+=nt,ne._vx.update(nt,!0)),ze!=="x"&&(ge[2]+=At,ne._vy.update(At,!0)),h?Ge||(Ge=requestAnimationFrame(Xe)):Xe()},ct=function(nt){if(!Ke(nt,1)){nt=Vf(nt,d);var At=nt.clientX,Je=nt.clientY,gt=At-ne.x,pt=Je-ne.y,Tt=ne.isDragging;ne.x=At,ne.y=Je,(Tt||(gt||pt)&&(Math.abs(ne.startX-At)>=s||Math.abs(ne.startY-Je)>=s))&&(Me=Tt?2:1,Tt||(ne.isDragging=!0),Ze(gt,pt))}},Dt=ne.onPress=function(We){Ke(We,1)||We&&We.button||(ne.axis=ze=null,je.pause(),ne.isPressed=!0,We=Vf(We),I=O=0,ne.startX=ne.x=We.clientX,ne.startY=ne.y=We.clientY,ne._vx.reset(),ne._vy.reset(),Sr(Z?o:N,da[1],ct,Q,!0),ne.deltaX=ne.deltaY=0,_&&_(ne))},J=ne.onRelease=function(We){if(!Ke(We,1)){Cr(Z?o:N,da[1],ct,!0);var nt=!isNaN(ne.y-ne.startY),At=ne.isDragging,Je=At&&(Math.abs(ne.x-ne.startX)>3||Math.abs(ne.y-ne.startY)>3),gt=Vf(We);!Je&&nt&&(ne._vx.reset(),ne._vy.reset(),d&&Le&&nr.delayedCall(.08,function(){if(kp()-Ie>300&&!We.defaultPrevented){if(We.target.click)We.target.click();else if(N.createEvent){var pt=N.createEvent("MouseEvents");pt.initMouseEvent("click",!0,!0,ws,1,gt.screenX,gt.screenY,gt.clientX,gt.clientY,!1,!1,!1,!1,0,null),We.target.dispatchEvent(pt)}}})),ne.isDragging=ne.isGesturing=ne.isPressed=!1,p&&At&&!Z&&je.restart(!0),Me&&Xe(),b&&At&&b(ne),w&&w(ne,Je)}},Re=function(nt){return nt.touches&&nt.touches.length>1&&(ne.isGesturing=!0)&&ce(nt,ne.isDragging)},Ve=function(){return(ne.isGesturing=!1)||U(ne)},$e=function(nt){if(!Ke(nt)){var At=W(),Je=ee();ht((At-he)*Ue,(Je-Te)*Ue,1),he=At,Te=Je,p&&je.restart(!0)}},et=function(nt){if(!Ke(nt)){nt=Vf(nt,d),se&&(Be=!0);var At=(nt.deltaMode===1?c:nt.deltaMode===2?ws.innerHeight:1)*v;ht(nt.deltaX*At,nt.deltaY*At,0),p&&!Z&&je.restart(!0)}},at=function(nt){if(!Ke(nt)){var At=nt.clientX,Je=nt.clientY,gt=At-ne.x,pt=Je-ne.y;ne.x=At,ne.y=Je,Ce=!0,p&&je.restart(!0),(gt||pt)&&Ze(gt,pt)}},Et=function(nt){ne.event=nt,$(ne)},tt=function(nt){ne.event=nt,ae(ne)},it=function(nt){return Ke(nt)||Vf(nt,d)&&xe(ne)};je=ne._dc=nr.delayedCall(m||.25,Fe).pause(),ne.deltaX=ne.deltaY=0,ne._vx=I1(0,50,!0),ne._vy=I1(0,50,!0),ne.scrollX=W,ne.scrollY=ee,ne.isDragging=ne.isGesturing=ne.isPressed=!1,xU(this),ne.enable=function(We){return ne.isEnabled||(Sr(q?N:o,"scroll",B1),a.indexOf("scroll")>=0&&Sr(q?N:o,"scroll",$e,Q,Ne),a.indexOf("wheel")>=0&&Sr(o,"wheel",et,Q,Ne),(a.indexOf("touch")>=0&&bU||a.indexOf("pointer")>=0)&&(Sr(o,da[0],Dt,Q,Ne),Sr(N,da[2],J),Sr(N,da[3],J),Le&&Sr(o,"click",we,!0,!0),xe&&Sr(o,"click",it),ce&&Sr(N,"gesturestart",Re),U&&Sr(N,"gestureend",Ve),$&&Sr(o,eu+"enter",Et),ae&&Sr(o,eu+"leave",tt),z&&Sr(o,eu+"move",at)),ne.isEnabled=!0,ne.isDragging=ne.isGesturing=ne.isPressed=Ce=Me=!1,ne._vx.reset(),ne._vy.reset(),he=W(),Te=ee(),We&&We.type&&Dt(We),me&&me(ne)),ne},ne.disable=function(){ne.isEnabled&&(sd.filter(function(We){return We!==ne&&Np(We.target)}).length||Cr(q?N:o,"scroll",B1),ne.isPressed&&(ne._vx.reset(),ne._vy.reset(),Cr(Z?o:N,da[1],ct,!0)),Cr(q?N:o,"scroll",$e,Ne),Cr(o,"wheel",et,Ne),Cr(o,da[0],Dt,Ne),Cr(N,da[2],J),Cr(N,da[3],J),Cr(o,"click",we,!0),Cr(o,"click",it),Cr(N,"gesturestart",Re),Cr(N,"gestureend",Ve),Cr(o,eu+"enter",Et),Cr(o,eu+"leave",tt),Cr(o,eu+"move",at),ne.isEnabled=ne.isPressed=ne.isDragging=!1,be&&be(ne))},ne.kill=ne.revert=function(){ne.disable();var We=sd.indexOf(ne);We>=0&&sd.splice(We,1),ko===ne&&(ko=0)},sd.push(ne),Z&&Np(o)&&(ko=ne),ne.enable(y)},pH(n,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),n}();Ai.version="3.12.7";Ai.create=function(n){return new Ai(n)};Ai.register=SU;Ai.getAll=function(){return sd.slice()};Ai.getById=function(n){return sd.filter(function(e){return e.vars.id===n})[0]};CU()&&nr.registerPlugin(Ai);/*!
 * ScrollTrigger 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var dt,ed,Kt,Qn,xs,Cn,pS,Bv,hm,Fp,xp,gg,dr,Hy,R1,Br,pR,mR,td,MU,cC,TU,Tr,D1,BU,IU,kl,L1,mS,Ad,AS,Iv,O1,uC,vg=1,fr=Date.now,hC=fr(),Zs=0,Cp=0,AR=function(e,t,i){var r=ys(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return i["_"+t+"Clamp"]=r,r?e.substr(6,e.length-7):e},gR=function(e,t){return t&&(!ys(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},AH=function n(){return Cp&&requestAnimationFrame(n)},vR=function(){return Hy=1},yR=function(){return Hy=0},Oa=function(e){return e},_p=function(e){return Math.round(e*1e5)/1e5||0},RU=function(){return typeof window<"u"},DU=function(){return dt||RU()&&(dt=window.gsap)&&dt.registerPlugin&&dt},_u=function(e){return!!~pS.indexOf(e)},LU=function(e){return(e==="Height"?AS:Kt["inner"+e])||xs["client"+e]||Cn["client"+e]},OU=function(e){return Xl(e,"getBoundingClientRect")||(_u(e)?function(){return rv.width=Kt.innerWidth,rv.height=AS,rv}:function(){return Oo(e)})},gH=function(e,t,i){var r=i.d,s=i.d2,a=i.a;return(a=Xl(e,"getBoundingClientRect"))?function(){return a()[r]}:function(){return(t?LU(s):e["client"+s])||0}},vH=function(e,t){return!t||~ja.indexOf(e)?OU(e):function(){return rv}},Ha=function(e,t){var i=t.s,r=t.d2,s=t.d,a=t.a;return Math.max(0,(i="scroll"+r)&&(a=Xl(e,i))?a()-OU(e)()[s]:_u(e)?(xs[i]||Cn[i])-LU(r):e[i]-e["offset"+r])},yg=function(e,t){for(var i=0;i<td.length;i+=3)(!t||~t.indexOf(td[i+1]))&&e(td[i],td[i+1],td[i+2])},ys=function(e){return typeof e=="string"},mr=function(e){return typeof e=="function"},wp=function(e){return typeof e=="number"},tu=function(e){return typeof e=="object"},Wf=function(e,t,i){return e&&e.progress(t?0:1)&&i&&e.pause()},dC=function(e,t){if(e.enabled){var i=e._ctx?e._ctx.add(function(){return t(e)}):t(e);i&&i.totalTime&&(e.callbackAnimation=i)}},Eh=Math.abs,PU="left",UU="top",gS="right",vS="bottom",Au="width",gu="height",Qp="Right",zp="Left",Hp="Top",Gp="Bottom",Ci="padding",js="margin",Td="Width",yS="Height",Di="px",Xs=function(e){return Kt.getComputedStyle(e)},yH=function(e){var t=Xs(e).position;e.style.position=t==="absolute"||t==="fixed"?t:"relative"},bR=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},Oo=function(e,t){var i=t&&Xs(e)[R1]!=="matrix(1, 0, 0, 1, 0, 0)"&&dt.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),r=e.getBoundingClientRect();return i&&i.progress(0).kill(),r},Rv=function(e,t){var i=t.d2;return e["offset"+i]||e["client"+i]||0},kU=function(e){var t=[],i=e.labels,r=e.duration(),s;for(s in i)t.push(i[s]/r);return t},bH=function(e){return function(t){return dt.utils.snap(kU(e),t)}},bS=function(e){var t=dt.utils.snap(e),i=Array.isArray(e)&&e.slice(0).sort(function(r,s){return r-s});return i?function(r,s,a){a===void 0&&(a=.001);var o;if(!s)return t(r);if(s>0){for(r-=a,o=0;o<i.length;o++)if(i[o]>=r)return i[o];return i[o-1]}else for(o=i.length,r+=a;o--;)if(i[o]<=r)return i[o];return i[0]}:function(r,s,a){a===void 0&&(a=.001);var o=t(r);return!s||Math.abs(o-r)<a||o-r<0==s<0?o:t(s<0?r-e:r+e)}},EH=function(e){return function(t,i){return bS(kU(e))(t,i.direction)}},bg=function(e,t,i,r){return i.split(",").forEach(function(s){return e(t,s,r)})},Vi=function(e,t,i,r,s){return e.addEventListener(t,i,{passive:!r,capture:!!s})},Gi=function(e,t,i,r){return e.removeEventListener(t,i,!!r)},Eg=function(e,t,i){i=i&&i.wheelHandler,i&&(e(t,"wheel",i),e(t,"touchmove",i))},ER={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},xg={toggleActions:"play",anticipatePin:0},Dv={top:0,left:0,center:.5,bottom:1,right:1},ev=function(e,t){if(ys(e)){var i=e.indexOf("="),r=~i?+(e.charAt(i-1)+1)*parseFloat(e.substr(i+1)):0;~i&&(e.indexOf("%")>i&&(r*=t/100),e=e.substr(0,i-1)),e=r+(e in Dv?Dv[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0)}return e},Cg=function(e,t,i,r,s,a,o,c){var h=s.startColor,d=s.endColor,p=s.fontSize,m=s.indent,A=s.fontWeight,v=Qn.createElement("div"),y=_u(i)||Xl(i,"pinType")==="fixed",E=e.indexOf("scroller")!==-1,b=y?Cn:i,C=e.indexOf("start")!==-1,_=C?h:d,w="border-color:"+_+";font-size:"+p+";color:"+_+";font-weight:"+A+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return w+="position:"+((E||c)&&y?"fixed;":"absolute;"),(E||c||!y)&&(w+=(r===Oi?gS:vS)+":"+(a+parseFloat(m))+"px;"),o&&(w+="box-sizing:border-box;text-align:left;width:"+o.offsetWidth+"px;"),v._isStart=C,v.setAttribute("class","gsap-marker-"+e+(t?" marker-"+t:"")),v.style.cssText=w,v.innerText=t||t===0?e+"-"+t:e,b.children[0]?b.insertBefore(v,b.children[0]):b.appendChild(v),v._offset=v["offset"+r.op.d2],tv(v,0,r,C),v},tv=function(e,t,i,r){var s={display:"block"},a=i[r?"os2":"p2"],o=i[r?"p2":"os2"];e._isFlipped=r,s[i.a+"Percent"]=r?-100:0,s[i.a]=r?"1px":0,s["border"+a+Td]=1,s["border"+o+Td]=0,s[i.p]=t+"px",dt.set(e,s)},jt=[],P1={},dm,xR=function(){return fr()-Zs>34&&(dm||(dm=requestAnimationFrame(Go)))},xh=function(){(!Tr||!Tr.isPressed||Tr.startX>Cn.clientWidth)&&(Jt.cache++,Tr?dm||(dm=requestAnimationFrame(Go)):Go(),Zs||Su("scrollStart"),Zs=fr())},fC=function(){IU=Kt.innerWidth,BU=Kt.innerHeight},Sp=function(e){Jt.cache++,(e===!0||!dr&&!TU&&!Qn.fullscreenElement&&!Qn.webkitFullscreenElement&&(!D1||IU!==Kt.innerWidth||Math.abs(Kt.innerHeight-BU)>Kt.innerHeight*.25))&&Bv.restart(!0)},wu={},xH=[],NU=function n(){return Gi(Qt,"scrollEnd",n)||ou(!0)},Su=function(e){return wu[e]&&wu[e].map(function(t){return t()})||xH},vs=[],FU=function(e){for(var t=0;t<vs.length;t+=5)(!e||vs[t+4]&&vs[t+4].query===e)&&(vs[t].style.cssText=vs[t+1],vs[t].getBBox&&vs[t].setAttribute("transform",vs[t+2]||""),vs[t+3].uncache=1)},ES=function(e,t){var i;for(Br=0;Br<jt.length;Br++)i=jt[Br],i&&(!t||i._ctx===t)&&(e?i.kill(1):i.revert(!0,!0));Iv=!0,t&&FU(t),t||Su("revert")},QU=function(e,t){Jt.cache++,(t||!Ir)&&Jt.forEach(function(i){return mr(i)&&i.cacheID++&&(i.rec=0)}),ys(e)&&(Kt.history.scrollRestoration=mS=e)},Ir,vu=0,CR,CH=function(){if(CR!==vu){var e=CR=vu;requestAnimationFrame(function(){return e===vu&&ou(!0)})}},zU=function(){Cn.appendChild(Ad),AS=!Tr&&Ad.offsetHeight||Kt.innerHeight,Cn.removeChild(Ad)},_R=function(e){return hm(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(t){return t.style.display=e?"none":"block"})},ou=function(e,t){if(xs=Qn.documentElement,Cn=Qn.body,pS=[Kt,Qn,xs,Cn],Zs&&!e&&!Iv){Vi(Qt,"scrollEnd",NU);return}zU(),Ir=Qt.isRefreshing=!0,Jt.forEach(function(r){return mr(r)&&++r.cacheID&&(r.rec=r())});var i=Su("refreshInit");MU&&Qt.sort(),t||ES(),Jt.forEach(function(r){mr(r)&&(r.smooth&&(r.target.style.scrollBehavior="auto"),r(0))}),jt.slice(0).forEach(function(r){return r.refresh()}),Iv=!1,jt.forEach(function(r){if(r._subPinOffset&&r.pin){var s=r.vars.horizontal?"offsetWidth":"offsetHeight",a=r.pin[s];r.revert(!0,1),r.adjustPinSpacing(r.pin[s]-a),r.refresh()}}),O1=1,_R(!0),jt.forEach(function(r){var s=Ha(r.scroller,r._dir),a=r.vars.end==="max"||r._endClamp&&r.end>s,o=r._startClamp&&r.start>=s;(a||o)&&r.setPositions(o?s-1:r.start,a?Math.max(o?s:r.start+1,s):r.end,!0)}),_R(!1),O1=0,i.forEach(function(r){return r&&r.render&&r.render(-1)}),Jt.forEach(function(r){mr(r)&&(r.smooth&&requestAnimationFrame(function(){return r.target.style.scrollBehavior="smooth"}),r.rec&&r(r.rec))}),QU(mS,1),Bv.pause(),vu++,Ir=2,Go(2),jt.forEach(function(r){return mr(r.vars.onRefresh)&&r.vars.onRefresh(r)}),Ir=Qt.isRefreshing=!1,Su("refresh")},U1=0,nv=1,Vp,Go=function(e){if(e===2||!Ir&&!Iv){Qt.isUpdating=!0,Vp&&Vp.update(0);var t=jt.length,i=fr(),r=i-hC>=50,s=t&&jt[0].scroll();if(nv=U1>s?-1:1,Ir||(U1=s),r&&(Zs&&!Hy&&i-Zs>200&&(Zs=0,Su("scrollEnd")),xp=hC,hC=i),nv<0){for(Br=t;Br-- >0;)jt[Br]&&jt[Br].update(0,r);nv=1}else for(Br=0;Br<t;Br++)jt[Br]&&jt[Br].update(0,r);Qt.isUpdating=!1}dm=0},k1=[PU,UU,vS,gS,js+Gp,js+Qp,js+Hp,js+zp,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],iv=k1.concat([Au,gu,"boxSizing","max"+Td,"max"+yS,"position",js,Ci,Ci+Hp,Ci+Qp,Ci+Gp,Ci+zp]),_H=function(e,t,i){gd(i);var r=e._gsap;if(r.spacerIsNative)gd(r.spacerState);else if(e._gsap.swappedIn){var s=t.parentNode;s&&(s.insertBefore(e,t),s.removeChild(t))}e._gsap.swappedIn=!1},pC=function(e,t,i,r){if(!e._gsap.swappedIn){for(var s=k1.length,a=t.style,o=e.style,c;s--;)c=k1[s],a[c]=i[c];a.position=i.position==="absolute"?"absolute":"relative",i.display==="inline"&&(a.display="inline-block"),o[vS]=o[gS]="auto",a.flexBasis=i.flexBasis||"auto",a.overflow="visible",a.boxSizing="border-box",a[Au]=Rv(e,Lr)+Di,a[gu]=Rv(e,Oi)+Di,a[Ci]=o[js]=o[UU]=o[PU]="0",gd(r),o[Au]=o["max"+Td]=i[Au],o[gu]=o["max"+yS]=i[gu],o[Ci]=i[Ci],e.parentNode!==t&&(e.parentNode.insertBefore(t,e),t.appendChild(e)),e._gsap.swappedIn=!0}},wH=/([A-Z])/g,gd=function(e){if(e){var t=e.t.style,i=e.length,r=0,s,a;for((e.t._gsap||dt.core.getCache(e.t)).uncache=1;r<i;r+=2)a=e[r+1],s=e[r],a?t[s]=a:t[s]&&t.removeProperty(s.replace(wH,"-$1").toLowerCase())}},_g=function(e){for(var t=iv.length,i=e.style,r=[],s=0;s<t;s++)r.push(iv[s],i[iv[s]]);return r.t=e,r},SH=function(e,t,i){for(var r=[],s=e.length,a=i?8:0,o;a<s;a+=2)o=e[a],r.push(o,o in t?t[o]:e[a+1]);return r.t=e.t,r},rv={left:0,top:0},wR=function(e,t,i,r,s,a,o,c,h,d,p,m,A,v){mr(e)&&(e=e(c)),ys(e)&&e.substr(0,3)==="max"&&(e=m+(e.charAt(4)==="="?ev("0"+e.substr(3),i):0));var y=A?A.time():0,E,b,C;if(A&&A.seek(0),isNaN(e)||(e=+e),wp(e))A&&(e=dt.utils.mapRange(A.scrollTrigger.start,A.scrollTrigger.end,0,m,e)),o&&tv(o,i,r,!0);else{mr(t)&&(t=t(c));var _=(e||"0").split(" "),w,T,L,R;C=Xr(t,c)||Cn,w=Oo(C)||{},(!w||!w.left&&!w.top)&&Xs(C).display==="none"&&(R=C.style.display,C.style.display="block",w=Oo(C),R?C.style.display=R:C.style.removeProperty("display")),T=ev(_[0],w[r.d]),L=ev(_[1]||"0",i),e=w[r.p]-h[r.p]-d+T+s-L,o&&tv(o,L,r,i-L<20||o._isStart&&L>20),i-=i-L}if(v&&(c[v]=e||-.001,e<0&&(e=0)),a){var P=e+i,D=a._isStart;E="scroll"+r.d2,tv(a,P,r,D&&P>20||!D&&(p?Math.max(Cn[E],xs[E]):a.parentNode[E])<=P+1),p&&(h=Oo(o),p&&(a.style[r.op.p]=h[r.op.p]-r.op.m-a._offset+Di))}return A&&C&&(E=Oo(C),A.seek(m),b=Oo(C),A._caScrollDist=E[r.p]-b[r.p],e=e/A._caScrollDist*m),A&&A.seek(y),A?e:Math.round(e)},MH=/(webkit|moz|length|cssText|inset)/i,SR=function(e,t,i,r){if(e.parentNode!==t){var s=e.style,a,o;if(t===Cn){e._stOrig=s.cssText,o=Xs(e);for(a in o)!+a&&!MH.test(a)&&o[a]&&typeof s[a]=="string"&&a!=="0"&&(s[a]=o[a]);s.top=i,s.left=r}else s.cssText=e._stOrig;dt.core.getCache(e).uncache=1,t.appendChild(e)}},HU=function(e,t,i){var r=t,s=r;return function(a){var o=Math.round(e());return o!==r&&o!==s&&Math.abs(o-r)>3&&Math.abs(o-s)>3&&(a=o,i&&i()),s=r,r=Math.round(a),r}},wg=function(e,t,i){var r={};r[t.p]="+="+i,dt.set(e,r)},MR=function(e,t){var i=ec(e,t),r="_scroll"+t.p2,s=function a(o,c,h,d,p){var m=a.tween,A=c.onComplete,v={};h=h||i();var y=HU(i,h,function(){m.kill(),a.tween=0});return p=d&&p||0,d=d||o-h,m&&m.kill(),c[r]=o,c.inherit=!1,c.modifiers=v,v[r]=function(){return y(h+d*m.ratio+p*m.ratio*m.ratio)},c.onUpdate=function(){Jt.cache++,a.tween&&Go()},c.onComplete=function(){a.tween=0,A&&A.call(m)},m=a.tween=dt.to(e,c),m};return e[r]=i,i.wheelHandler=function(){return s.tween&&s.tween.kill()&&(s.tween=0)},Vi(e,"wheel",i.wheelHandler),Qt.isTouch&&Vi(e,"touchmove",i.wheelHandler),s},Qt=function(){function n(t,i){ed||n.register(dt)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),L1(this),this.init(t,i)}var e=n.prototype;return e.init=function(i,r){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!Cp){this.update=this.refresh=this.kill=Oa;return}i=bR(ys(i)||wp(i)||i.nodeType?{trigger:i}:i,xg);var s=i,a=s.onUpdate,o=s.toggleClass,c=s.id,h=s.onToggle,d=s.onRefresh,p=s.scrub,m=s.trigger,A=s.pin,v=s.pinSpacing,y=s.invalidateOnRefresh,E=s.anticipatePin,b=s.onScrubComplete,C=s.onSnapComplete,_=s.once,w=s.snap,T=s.pinReparent,L=s.pinSpacer,R=s.containerAnimation,P=s.fastScrollEnd,D=s.preventOverlaps,M=i.horizontal||i.containerAnimation&&i.horizontal!==!1?Lr:Oi,k=!p&&p!==0,V=Xr(i.scroller||Kt),X=dt.core.getCache(V),$=_u(V),ae=("pinType"in i?i.pinType:Xl(V,"pinType")||$&&"fixed")==="fixed",z=[i.onEnter,i.onLeave,i.onEnterBack,i.onLeaveBack],j=k&&i.toggleActions.split(" "),Z="markers"in i?i.markers:xg.markers,ce=$?0:parseFloat(Xs(V)["border"+M.p2+Td])||0,U=this,se=i.onRefreshInit&&function(){return i.onRefreshInit(U)},me=gH(V,$,M),be=vH(V,$),xe=0,Ue=0,Ne=0,Le=ec(V,M),ue,Oe,Ge,je,Me,Ce,Be,Y,ze,ne,I,O,Q,W,ee,he,Te,Ye,q,N,re,ge,Ie,we,Ke,Fe,Xe,ht,Ze,ct,Dt,J,Re,Ve,$e,et,at,Et,tt;if(U._startClamp=U._endClamp=!1,U._dir=M,E*=45,U.scroller=V,U.scroll=R?R.time.bind(R):Le,je=Le(),U.vars=i,r=r||i.animation,"refreshPriority"in i&&(MU=1,i.refreshPriority===-9999&&(Vp=U)),X.tweenScroll=X.tweenScroll||{top:MR(V,Oi),left:MR(V,Lr)},U.tweenTo=ue=X.tweenScroll[M.p],U.scrubDuration=function(Je){Re=wp(Je)&&Je,Re?J?J.duration(Je):J=dt.to(r,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:Re,paused:!0,onComplete:function(){return b&&b(U)}}):(J&&J.progress(1).kill(),J=0)},r&&(r.vars.lazy=!1,r._initted&&!U.isReverted||r.vars.immediateRender!==!1&&i.immediateRender!==!1&&r.duration()&&r.render(0,!0,!0),U.animation=r.pause(),r.scrollTrigger=U,U.scrubDuration(p),ct=0,c||(c=r.vars.id)),w&&((!tu(w)||w.push)&&(w={snapTo:w}),"scrollBehavior"in Cn.style&&dt.set($?[Cn,xs]:V,{scrollBehavior:"auto"}),Jt.forEach(function(Je){return mr(Je)&&Je.target===($?Qn.scrollingElement||xs:V)&&(Je.smooth=!1)}),Ge=mr(w.snapTo)?w.snapTo:w.snapTo==="labels"?bH(r):w.snapTo==="labelsDirectional"?EH(r):w.directional!==!1?function(Je,gt){return bS(w.snapTo)(Je,fr()-Ue<500?0:gt.direction)}:dt.utils.snap(w.snapTo),Ve=w.duration||{min:.1,max:2},Ve=tu(Ve)?Fp(Ve.min,Ve.max):Fp(Ve,Ve),$e=dt.delayedCall(w.delay||Re/2||.1,function(){var Je=Le(),gt=fr()-Ue<500,pt=ue.tween;if((gt||Math.abs(U.getVelocity())<10)&&!pt&&!Hy&&xe!==Je){var Tt=(Je-Ce)/W,Mn=r&&!k?r.totalProgress():Tt,zt=gt?0:(Mn-Dt)/(fr()-xp)*1e3||0,Tn=dt.utils.clamp(-Tt,1-Tt,Eh(zt/2)*zt/.185),zn=Tt+(w.inertia===!1?0:Tn),An,sn,Wt=w,vi=Wt.onStart,un=Wt.onInterrupt,an=Wt.onComplete;if(An=Ge(zn,U),wp(An)||(An=zn),sn=Math.max(0,Math.round(Ce+An*W)),Je<=Be&&Je>=Ce&&sn!==Je){if(pt&&!pt._initted&&pt.data<=Eh(sn-Je))return;w.inertia===!1&&(Tn=An-Tt),ue(sn,{duration:Ve(Eh(Math.max(Eh(zn-Mn),Eh(An-Mn))*.185/zt/.05||0)),ease:w.ease||"power3",data:Eh(sn-Je),onInterrupt:function(){return $e.restart(!0)&&un&&un(U)},onComplete:function(){U.update(),xe=Le(),r&&!k&&(J?J.resetTo("totalProgress",An,r._tTime/r._tDur):r.progress(An)),ct=Dt=r&&!k?r.totalProgress():U.progress,C&&C(U),an&&an(U)}},Je,Tn*W,sn-Je-Tn*W),vi&&vi(U,ue.tween)}}else U.isActive&&xe!==Je&&$e.restart(!0)}).pause()),c&&(P1[c]=U),m=U.trigger=Xr(m||A!==!0&&A),tt=m&&m._gsap&&m._gsap.stRevert,tt&&(tt=tt(U)),A=A===!0?m:Xr(A),ys(o)&&(o={targets:m,className:o}),A&&(v===!1||v===js||(v=!v&&A.parentNode&&A.parentNode.style&&Xs(A.parentNode).display==="flex"?!1:Ci),U.pin=A,Oe=dt.core.getCache(A),Oe.spacer?ee=Oe.pinState:(L&&(L=Xr(L),L&&!L.nodeType&&(L=L.current||L.nativeElement),Oe.spacerIsNative=!!L,L&&(Oe.spacerState=_g(L))),Oe.spacer=Ye=L||Qn.createElement("div"),Ye.classList.add("pin-spacer"),c&&Ye.classList.add("pin-spacer-"+c),Oe.pinState=ee=_g(A)),i.force3D!==!1&&dt.set(A,{force3D:!0}),U.spacer=Ye=Oe.spacer,Ze=Xs(A),we=Ze[v+M.os2],N=dt.getProperty(A),re=dt.quickSetter(A,M.a,Di),pC(A,Ye,Ze),Te=_g(A)),Z){O=tu(Z)?bR(Z,ER):ER,ne=Cg("scroller-start",c,V,M,O,0),I=Cg("scroller-end",c,V,M,O,0,ne),q=ne["offset"+M.op.d2];var it=Xr(Xl(V,"content")||V);Y=this.markerStart=Cg("start",c,it,M,O,q,0,R),ze=this.markerEnd=Cg("end",c,it,M,O,q,0,R),R&&(Et=dt.quickSetter([Y,ze],M.a,Di)),!ae&&!(ja.length&&Xl(V,"fixedMarkers")===!0)&&(yH($?Cn:V),dt.set([ne,I],{force3D:!0}),Fe=dt.quickSetter(ne,M.a,Di),ht=dt.quickSetter(I,M.a,Di))}if(R){var We=R.vars.onUpdate,nt=R.vars.onUpdateParams;R.eventCallback("onUpdate",function(){U.update(0,0,1),We&&We.apply(R,nt||[])})}if(U.previous=function(){return jt[jt.indexOf(U)-1]},U.next=function(){return jt[jt.indexOf(U)+1]},U.revert=function(Je,gt){if(!gt)return U.kill(!0);var pt=Je!==!1||!U.enabled,Tt=dr;pt!==U.isReverted&&(pt&&(et=Math.max(Le(),U.scroll.rec||0),Ne=U.progress,at=r&&r.progress()),Y&&[Y,ze,ne,I].forEach(function(Mn){return Mn.style.display=pt?"none":"block"}),pt&&(dr=U,U.update(pt)),A&&(!T||!U.isActive)&&(pt?_H(A,Ye,ee):pC(A,Ye,Xs(A),Ke)),pt||U.update(pt),dr=Tt,U.isReverted=pt)},U.refresh=function(Je,gt,pt,Tt){if(!((dr||!U.enabled)&&!gt)){if(A&&Je&&Zs){Vi(n,"scrollEnd",NU);return}!Ir&&se&&se(U),dr=U,ue.tween&&!pt&&(ue.tween.kill(),ue.tween=0),J&&J.pause(),y&&r&&r.revert({kill:!1}).invalidate(),U.isReverted||U.revert(!0,!0),U._subPinOffset=!1;var Mn=me(),zt=be(),Tn=R?R.duration():Ha(V,M),zn=W<=.01,An=0,sn=Tt||0,Wt=tu(pt)?pt.end:i.end,vi=i.endTrigger||m,un=tu(pt)?pt.start:i.start||(i.start===0||!m?0:A?"0 0":"0 100%"),an=U.pinnedContainer=i.pinnedContainer&&Xr(i.pinnedContainer,U),br=m&&Math.max(0,jt.indexOf(U))||0,ti=br,On,Hn,na,G,oe,Ae,Ee,fe,qe,rt,st,ot,Ct;for(Z&&tu(pt)&&(ot=dt.getProperty(ne,M.p),Ct=dt.getProperty(I,M.p));ti-- >0;)Ae=jt[ti],Ae.end||Ae.refresh(0,1)||(dr=U),Ee=Ae.pin,Ee&&(Ee===m||Ee===A||Ee===an)&&!Ae.isReverted&&(rt||(rt=[]),rt.unshift(Ae),Ae.revert(!0,!0)),Ae!==jt[ti]&&(br--,ti--);for(mr(un)&&(un=un(U)),un=AR(un,"start",U),Ce=wR(un,m,Mn,M,Le(),Y,ne,U,zt,ce,ae,Tn,R,U._startClamp&&"_startClamp")||(A?-.001:0),mr(Wt)&&(Wt=Wt(U)),ys(Wt)&&!Wt.indexOf("+=")&&(~Wt.indexOf(" ")?Wt=(ys(un)?un.split(" ")[0]:"")+Wt:(An=ev(Wt.substr(2),Mn),Wt=ys(un)?un:(R?dt.utils.mapRange(0,R.duration(),R.scrollTrigger.start,R.scrollTrigger.end,Ce):Ce)+An,vi=m)),Wt=AR(Wt,"end",U),Be=Math.max(Ce,wR(Wt||(vi?"100% 0":Tn),vi,Mn,M,Le()+An,ze,I,U,zt,ce,ae,Tn,R,U._endClamp&&"_endClamp"))||-.001,An=0,ti=br;ti--;)Ae=jt[ti],Ee=Ae.pin,Ee&&Ae.start-Ae._pinPush<=Ce&&!R&&Ae.end>0&&(On=Ae.end-(U._startClamp?Math.max(0,Ae.start):Ae.start),(Ee===m&&Ae.start-Ae._pinPush<Ce||Ee===an)&&isNaN(un)&&(An+=On*(1-Ae.progress)),Ee===A&&(sn+=On));if(Ce+=An,Be+=An,U._startClamp&&(U._startClamp+=An),U._endClamp&&!Ir&&(U._endClamp=Be||-.001,Be=Math.min(Be,Ha(V,M))),W=Be-Ce||(Ce-=.01)&&.001,zn&&(Ne=dt.utils.clamp(0,1,dt.utils.normalize(Ce,Be,et))),U._pinPush=sn,Y&&An&&(On={},On[M.a]="+="+An,an&&(On[M.p]="-="+Le()),dt.set([Y,ze],On)),A&&!(O1&&U.end>=Ha(V,M)))On=Xs(A),G=M===Oi,na=Le(),ge=parseFloat(N(M.a))+sn,!Tn&&Be>1&&(st=($?Qn.scrollingElement||xs:V).style,st={style:st,value:st["overflow"+M.a.toUpperCase()]},$&&Xs(Cn)["overflow"+M.a.toUpperCase()]!=="scroll"&&(st.style["overflow"+M.a.toUpperCase()]="scroll")),pC(A,Ye,On),Te=_g(A),Hn=Oo(A,!0),fe=ae&&ec(V,G?Lr:Oi)(),v?(Ke=[v+M.os2,W+sn+Di],Ke.t=Ye,ti=v===Ci?Rv(A,M)+W+sn:0,ti&&(Ke.push(M.d,ti+Di),Ye.style.flexBasis!=="auto"&&(Ye.style.flexBasis=ti+Di)),gd(Ke),an&&jt.forEach(function(_t){_t.pin===an&&_t.vars.pinSpacing!==!1&&(_t._subPinOffset=!0)}),ae&&Le(et)):(ti=Rv(A,M),ti&&Ye.style.flexBasis!=="auto"&&(Ye.style.flexBasis=ti+Di)),ae&&(oe={top:Hn.top+(G?na-Ce:fe)+Di,left:Hn.left+(G?fe:na-Ce)+Di,boxSizing:"border-box",position:"fixed"},oe[Au]=oe["max"+Td]=Math.ceil(Hn.width)+Di,oe[gu]=oe["max"+yS]=Math.ceil(Hn.height)+Di,oe[js]=oe[js+Hp]=oe[js+Qp]=oe[js+Gp]=oe[js+zp]="0",oe[Ci]=On[Ci],oe[Ci+Hp]=On[Ci+Hp],oe[Ci+Qp]=On[Ci+Qp],oe[Ci+Gp]=On[Ci+Gp],oe[Ci+zp]=On[Ci+zp],he=SH(ee,oe,T),Ir&&Le(0)),r?(qe=r._initted,cC(1),r.render(r.duration(),!0,!0),Ie=N(M.a)-ge+W+sn,Xe=Math.abs(W-Ie)>1,ae&&Xe&&he.splice(he.length-2,2),r.render(0,!0,!0),qe||r.invalidate(!0),r.parent||r.totalTime(r.totalTime()),cC(0)):Ie=W,st&&(st.value?st.style["overflow"+M.a.toUpperCase()]=st.value:st.style.removeProperty("overflow-"+M.a));else if(m&&Le()&&!R)for(Hn=m.parentNode;Hn&&Hn!==Cn;)Hn._pinOffset&&(Ce-=Hn._pinOffset,Be-=Hn._pinOffset),Hn=Hn.parentNode;rt&&rt.forEach(function(_t){return _t.revert(!1,!0)}),U.start=Ce,U.end=Be,je=Me=Ir?et:Le(),!R&&!Ir&&(je<et&&Le(et),U.scroll.rec=0),U.revert(!1,!0),Ue=fr(),$e&&(xe=-1,$e.restart(!0)),dr=0,r&&k&&(r._initted||at)&&r.progress()!==at&&r.progress(at||0,!0).render(r.time(),!0,!0),(zn||Ne!==U.progress||R||y||r&&!r._initted)&&(r&&!k&&r.totalProgress(R&&Ce<-.001&&!Ne?dt.utils.normalize(Ce,Be,0):Ne,!0),U.progress=zn||(je-Ce)/W===Ne?0:Ne),A&&v&&(Ye._pinOffset=Math.round(U.progress*Ie)),J&&J.invalidate(),isNaN(ot)||(ot-=dt.getProperty(ne,M.p),Ct-=dt.getProperty(I,M.p),wg(ne,M,ot),wg(Y,M,ot-(Tt||0)),wg(I,M,Ct),wg(ze,M,Ct-(Tt||0))),zn&&!Ir&&U.update(),d&&!Ir&&!Q&&(Q=!0,d(U),Q=!1)}},U.getVelocity=function(){return(Le()-Me)/(fr()-xp)*1e3||0},U.endAnimation=function(){Wf(U.callbackAnimation),r&&(J?J.progress(1):r.paused()?k||Wf(r,U.direction<0,1):Wf(r,r.reversed()))},U.labelToScroll=function(Je){return r&&r.labels&&(Ce||U.refresh()||Ce)+r.labels[Je]/r.duration()*W||0},U.getTrailing=function(Je){var gt=jt.indexOf(U),pt=U.direction>0?jt.slice(0,gt).reverse():jt.slice(gt+1);return(ys(Je)?pt.filter(function(Tt){return Tt.vars.preventOverlaps===Je}):pt).filter(function(Tt){return U.direction>0?Tt.end<=Ce:Tt.start>=Be})},U.update=function(Je,gt,pt){if(!(R&&!pt&&!Je)){var Tt=Ir===!0?et:U.scroll(),Mn=Je?0:(Tt-Ce)/W,zt=Mn<0?0:Mn>1?1:Mn||0,Tn=U.progress,zn,An,sn,Wt,vi,un,an,br;if(gt&&(Me=je,je=R?Le():Tt,w&&(Dt=ct,ct=r&&!k?r.totalProgress():zt)),E&&A&&!dr&&!vg&&Zs&&(!zt&&Ce<Tt+(Tt-Me)/(fr()-xp)*E?zt=1e-4:zt===1&&Be>Tt+(Tt-Me)/(fr()-xp)*E&&(zt=.9999)),zt!==Tn&&U.enabled){if(zn=U.isActive=!!zt&&zt<1,An=!!Tn&&Tn<1,un=zn!==An,vi=un||!!zt!=!!Tn,U.direction=zt>Tn?1:-1,U.progress=zt,vi&&!dr&&(sn=zt&&!Tn?0:zt===1?1:Tn===1?2:3,k&&(Wt=!un&&j[sn+1]!=="none"&&j[sn+1]||j[sn],br=r&&(Wt==="complete"||Wt==="reset"||Wt in r))),D&&(un||br)&&(br||p||!r)&&(mr(D)?D(U):U.getTrailing(D).forEach(function(na){return na.endAnimation()})),k||(J&&!dr&&!vg?(J._dp._time-J._start!==J._time&&J.render(J._dp._time-J._start),J.resetTo?J.resetTo("totalProgress",zt,r._tTime/r._tDur):(J.vars.totalProgress=zt,J.invalidate().restart())):r&&r.totalProgress(zt,!!(dr&&(Ue||Je)))),A){if(Je&&v&&(Ye.style[v+M.os2]=we),!ae)re(_p(ge+Ie*zt));else if(vi){if(an=!Je&&zt>Tn&&Be+1>Tt&&Tt+1>=Ha(V,M),T)if(!Je&&(zn||an)){var ti=Oo(A,!0),On=Tt-Ce;SR(A,Cn,ti.top+(M===Oi?On:0)+Di,ti.left+(M===Oi?0:On)+Di)}else SR(A,Ye);gd(zn||an?he:Te),Xe&&zt<1&&zn||re(ge+(zt===1&&!an?Ie:0))}}w&&!ue.tween&&!dr&&!vg&&$e.restart(!0),o&&(un||_&&zt&&(zt<1||!uC))&&hm(o.targets).forEach(function(na){return na.classList[zn||_?"add":"remove"](o.className)}),a&&!k&&!Je&&a(U),vi&&!dr?(k&&(br&&(Wt==="complete"?r.pause().totalProgress(1):Wt==="reset"?r.restart(!0).pause():Wt==="restart"?r.restart(!0):r[Wt]()),a&&a(U)),(un||!uC)&&(h&&un&&dC(U,h),z[sn]&&dC(U,z[sn]),_&&(zt===1?U.kill(!1,1):z[sn]=0),un||(sn=zt===1?1:3,z[sn]&&dC(U,z[sn]))),P&&!zn&&Math.abs(U.getVelocity())>(wp(P)?P:2500)&&(Wf(U.callbackAnimation),J?J.progress(1):Wf(r,Wt==="reverse"?1:!zt,1))):k&&a&&!dr&&a(U)}if(ht){var Hn=R?Tt/R.duration()*(R._caScrollDist||0):Tt;Fe(Hn+(ne._isFlipped?1:0)),ht(Hn)}Et&&Et(-Tt/R.duration()*(R._caScrollDist||0))}},U.enable=function(Je,gt){U.enabled||(U.enabled=!0,Vi(V,"resize",Sp),$||Vi(V,"scroll",xh),se&&Vi(n,"refreshInit",se),Je!==!1&&(U.progress=Ne=0,je=Me=xe=Le()),gt!==!1&&U.refresh())},U.getTween=function(Je){return Je&&ue?ue.tween:J},U.setPositions=function(Je,gt,pt,Tt){if(R){var Mn=R.scrollTrigger,zt=R.duration(),Tn=Mn.end-Mn.start;Je=Mn.start+Tn*Je/zt,gt=Mn.start+Tn*gt/zt}U.refresh(!1,!1,{start:gR(Je,pt&&!!U._startClamp),end:gR(gt,pt&&!!U._endClamp)},Tt),U.update()},U.adjustPinSpacing=function(Je){if(Ke&&Je){var gt=Ke.indexOf(M.d)+1;Ke[gt]=parseFloat(Ke[gt])+Je+Di,Ke[1]=parseFloat(Ke[1])+Je+Di,gd(Ke)}},U.disable=function(Je,gt){if(U.enabled&&(Je!==!1&&U.revert(!0,!0),U.enabled=U.isActive=!1,gt||J&&J.pause(),et=0,Oe&&(Oe.uncache=1),se&&Gi(n,"refreshInit",se),$e&&($e.pause(),ue.tween&&ue.tween.kill()&&(ue.tween=0)),!$)){for(var pt=jt.length;pt--;)if(jt[pt].scroller===V&&jt[pt]!==U)return;Gi(V,"resize",Sp),$||Gi(V,"scroll",xh)}},U.kill=function(Je,gt){U.disable(Je,gt),J&&!gt&&J.kill(),c&&delete P1[c];var pt=jt.indexOf(U);pt>=0&&jt.splice(pt,1),pt===Br&&nv>0&&Br--,pt=0,jt.forEach(function(Tt){return Tt.scroller===U.scroller&&(pt=1)}),pt||Ir||(U.scroll.rec=0),r&&(r.scrollTrigger=null,Je&&r.revert({kill:!1}),gt||r.kill()),Y&&[Y,ze,ne,I].forEach(function(Tt){return Tt.parentNode&&Tt.parentNode.removeChild(Tt)}),Vp===U&&(Vp=0),A&&(Oe&&(Oe.uncache=1),pt=0,jt.forEach(function(Tt){return Tt.pin===A&&pt++}),pt||(Oe.spacer=0)),i.onKill&&i.onKill(U)},jt.push(U),U.enable(!1,!1),tt&&tt(U),r&&r.add&&!W){var At=U.update;U.update=function(){U.update=At,Jt.cache++,Ce||Be||U.refresh()},dt.delayedCall(.01,U.update),W=.01,Ce=Be=0}else U.refresh();A&&CH()},n.register=function(i){return ed||(dt=i||DU(),RU()&&window.document&&n.enable(),ed=Cp),ed},n.defaults=function(i){if(i)for(var r in i)xg[r]=i[r];return xg},n.disable=function(i,r){Cp=0,jt.forEach(function(a){return a[r?"kill":"disable"](i)}),Gi(Kt,"wheel",xh),Gi(Qn,"scroll",xh),clearInterval(gg),Gi(Qn,"touchcancel",Oa),Gi(Cn,"touchstart",Oa),bg(Gi,Qn,"pointerdown,touchstart,mousedown",vR),bg(Gi,Qn,"pointerup,touchend,mouseup",yR),Bv.kill(),yg(Gi);for(var s=0;s<Jt.length;s+=3)Eg(Gi,Jt[s],Jt[s+1]),Eg(Gi,Jt[s],Jt[s+2])},n.enable=function(){if(Kt=window,Qn=document,xs=Qn.documentElement,Cn=Qn.body,dt&&(hm=dt.utils.toArray,Fp=dt.utils.clamp,L1=dt.core.context||Oa,cC=dt.core.suppressOverwrites||Oa,mS=Kt.history.scrollRestoration||"auto",U1=Kt.pageYOffset||0,dt.core.globals("ScrollTrigger",n),Cn)){Cp=1,Ad=document.createElement("div"),Ad.style.height="100vh",Ad.style.position="absolute",zU(),AH(),Ai.register(dt),n.isTouch=Ai.isTouch,kl=Ai.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),D1=Ai.isTouch===1,Vi(Kt,"wheel",xh),pS=[Kt,Qn,xs,Cn],dt.matchMedia?(n.matchMedia=function(h){var d=dt.matchMedia(),p;for(p in h)d.add(p,h[p]);return d},dt.addEventListener("matchMediaInit",function(){return ES()}),dt.addEventListener("matchMediaRevert",function(){return FU()}),dt.addEventListener("matchMedia",function(){ou(0,1),Su("matchMedia")}),dt.matchMedia().add("(orientation: portrait)",function(){return fC(),fC})):console.warn("Requires GSAP 3.11.0 or later"),fC(),Vi(Qn,"scroll",xh);var i=Cn.hasAttribute("style"),r=Cn.style,s=r.borderTopStyle,a=dt.core.Animation.prototype,o,c;for(a.revert||Object.defineProperty(a,"revert",{value:function(){return this.time(-.01,!0)}}),r.borderTopStyle="solid",o=Oo(Cn),Oi.m=Math.round(o.top+Oi.sc())||0,Lr.m=Math.round(o.left+Lr.sc())||0,s?r.borderTopStyle=s:r.removeProperty("border-top-style"),i||(Cn.setAttribute("style",""),Cn.removeAttribute("style")),gg=setInterval(xR,250),dt.delayedCall(.5,function(){return vg=0}),Vi(Qn,"touchcancel",Oa),Vi(Cn,"touchstart",Oa),bg(Vi,Qn,"pointerdown,touchstart,mousedown",vR),bg(Vi,Qn,"pointerup,touchend,mouseup",yR),R1=dt.utils.checkPrefix("transform"),iv.push(R1),ed=fr(),Bv=dt.delayedCall(.2,ou).pause(),td=[Qn,"visibilitychange",function(){var h=Kt.innerWidth,d=Kt.innerHeight;Qn.hidden?(pR=h,mR=d):(pR!==h||mR!==d)&&Sp()},Qn,"DOMContentLoaded",ou,Kt,"load",ou,Kt,"resize",Sp],yg(Vi),jt.forEach(function(h){return h.enable(0,1)}),c=0;c<Jt.length;c+=3)Eg(Gi,Jt[c],Jt[c+1]),Eg(Gi,Jt[c],Jt[c+2])}},n.config=function(i){"limitCallbacks"in i&&(uC=!!i.limitCallbacks);var r=i.syncInterval;r&&clearInterval(gg)||(gg=r)&&setInterval(xR,r),"ignoreMobileResize"in i&&(D1=n.isTouch===1&&i.ignoreMobileResize),"autoRefreshEvents"in i&&(yg(Gi)||yg(Vi,i.autoRefreshEvents||"none"),TU=(i.autoRefreshEvents+"").indexOf("resize")===-1)},n.scrollerProxy=function(i,r){var s=Xr(i),a=Jt.indexOf(s),o=_u(s);~a&&Jt.splice(a,o?6:2),r&&(o?ja.unshift(Kt,r,Cn,r,xs,r):ja.unshift(s,r))},n.clearMatchMedia=function(i){jt.forEach(function(r){return r._ctx&&r._ctx.query===i&&r._ctx.kill(!0,!0)})},n.isInViewport=function(i,r,s){var a=(ys(i)?Xr(i):i).getBoundingClientRect(),o=a[s?Au:gu]*r||0;return s?a.right-o>0&&a.left+o<Kt.innerWidth:a.bottom-o>0&&a.top+o<Kt.innerHeight},n.positionInViewport=function(i,r,s){ys(i)&&(i=Xr(i));var a=i.getBoundingClientRect(),o=a[s?Au:gu],c=r==null?o/2:r in Dv?Dv[r]*o:~r.indexOf("%")?parseFloat(r)*o/100:parseFloat(r)||0;return s?(a.left+c)/Kt.innerWidth:(a.top+c)/Kt.innerHeight},n.killAll=function(i){if(jt.slice(0).forEach(function(s){return s.vars.id!=="ScrollSmoother"&&s.kill()}),i!==!0){var r=wu.killAll||[];wu={},r.forEach(function(s){return s()})}},n}();Qt.version="3.12.7";Qt.saveStyles=function(n){return n?hm(n).forEach(function(e){if(e&&e.style){var t=vs.indexOf(e);t>=0&&vs.splice(t,5),vs.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),dt.core.getCache(e),L1())}}):vs};Qt.revert=function(n,e){return ES(!n,e)};Qt.create=function(n,e){return new Qt(n,e)};Qt.refresh=function(n){return n?Sp(!0):(ed||Qt.register())&&ou(!0)};Qt.update=function(n){return++Jt.cache&&Go(n===!0?2:0)};Qt.clearScrollMemory=QU;Qt.maxScroll=function(n,e){return Ha(n,e?Lr:Oi)};Qt.getScrollFunc=function(n,e){return ec(Xr(n),e?Lr:Oi)};Qt.getById=function(n){return P1[n]};Qt.getAll=function(){return jt.filter(function(n){return n.vars.id!=="ScrollSmoother"})};Qt.isScrolling=function(){return!!Zs};Qt.snapDirectional=bS;Qt.addEventListener=function(n,e){var t=wu[n]||(wu[n]=[]);~t.indexOf(e)||t.push(e)};Qt.removeEventListener=function(n,e){var t=wu[n],i=t&&t.indexOf(e);i>=0&&t.splice(i,1)};Qt.batch=function(n,e){var t=[],i={},r=e.interval||.016,s=e.batchMax||1e9,a=function(h,d){var p=[],m=[],A=dt.delayedCall(r,function(){d(p,m),p=[],m=[]}).pause();return function(v){p.length||A.restart(!0),p.push(v.trigger),m.push(v),s<=p.length&&A.progress(1)}},o;for(o in e)i[o]=o.substr(0,2)==="on"&&mr(e[o])&&o!=="onRefreshInit"?a(o,e[o]):e[o];return mr(s)&&(s=s(),Vi(Qt,"refresh",function(){return s=e.batchMax()})),hm(n).forEach(function(c){var h={};for(o in i)h[o]=i[o];h.trigger=c,t.push(Qt.create(h))}),t};var TR=function(e,t,i,r){return t>r?e(r):t<0&&e(0),i>r?(r-t)/(i-t):i<0?t/(t-i):1},mC=function n(e,t){t===!0?e.style.removeProperty("touch-action"):e.style.touchAction=t===!0?"auto":t?"pan-"+t+(Ai.isTouch?" pinch-zoom":""):"none",e===xs&&n(Cn,t)},Sg={auto:1,scroll:1},TH=function(e){var t=e.event,i=e.target,r=e.axis,s=(t.changedTouches?t.changedTouches[0]:t).target,a=s._gsap||dt.core.getCache(s),o=fr(),c;if(!a._isScrollT||o-a._isScrollT>2e3){for(;s&&s!==Cn&&(s.scrollHeight<=s.clientHeight&&s.scrollWidth<=s.clientWidth||!(Sg[(c=Xs(s)).overflowY]||Sg[c.overflowX]));)s=s.parentNode;a._isScroll=s&&s!==i&&!_u(s)&&(Sg[(c=Xs(s)).overflowY]||Sg[c.overflowX]),a._isScrollT=o}(a._isScroll||r==="x")&&(t.stopPropagation(),t._gsapAllow=!0)},GU=function(e,t,i,r){return Ai.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:t,onWheel:r=r&&TH,onPress:r,onDrag:r,onScroll:r,onEnable:function(){return i&&Vi(Qn,Ai.eventTypes[0],IR,!1,!0)},onDisable:function(){return Gi(Qn,Ai.eventTypes[0],IR,!0)}})},BH=/(input|label|select|textarea)/i,BR,IR=function(e){var t=BH.test(e.target.tagName);(t||BR)&&(e._gsapAllow=!0,BR=t)},IH=function(e){tu(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var t=e,i=t.normalizeScrollX,r=t.momentum,s=t.allowNestedScroll,a=t.onRelease,o,c,h=Xr(e.target)||xs,d=dt.core.globals().ScrollSmoother,p=d&&d.get(),m=kl&&(e.content&&Xr(e.content)||p&&e.content!==!1&&!p.smooth()&&p.content()),A=ec(h,Oi),v=ec(h,Lr),y=1,E=(Ai.isTouch&&Kt.visualViewport?Kt.visualViewport.scale*Kt.visualViewport.width:Kt.outerWidth)/Kt.innerWidth,b=0,C=mr(r)?function(){return r(o)}:function(){return r||2.8},_,w,T=GU(h,e.type,!0,s),L=function(){return w=!1},R=Oa,P=Oa,D=function(){c=Ha(h,Oi),P=Fp(kl?1:0,c),i&&(R=Fp(0,Ha(h,Lr))),_=vu},M=function(){m._gsap.y=_p(parseFloat(m._gsap.y)+A.offset)+"px",m.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(m._gsap.y)+", 0, 1)",A.offset=A.cacheID=0},k=function(){if(w){requestAnimationFrame(L);var Z=_p(o.deltaY/2),ce=P(A.v-Z);if(m&&ce!==A.v+A.offset){A.offset=ce-A.v;var U=_p((parseFloat(m&&m._gsap.y)||0)-A.offset);m.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+U+", 0, 1)",m._gsap.y=U+"px",A.cacheID=Jt.cache,Go()}return!0}A.offset&&M(),w=!0},V,X,$,ae,z=function(){D(),V.isActive()&&V.vars.scrollY>c&&(A()>c?V.progress(1)&&A(c):V.resetTo("scrollY",c))};return m&&dt.set(m,{y:"+=0"}),e.ignoreCheck=function(j){return kl&&j.type==="touchmove"&&k()||y>1.05&&j.type!=="touchstart"||o.isGesturing||j.touches&&j.touches.length>1},e.onPress=function(){w=!1;var j=y;y=_p((Kt.visualViewport&&Kt.visualViewport.scale||1)/E),V.pause(),j!==y&&mC(h,y>1.01?!0:i?!1:"x"),X=v(),$=A(),D(),_=vu},e.onRelease=e.onGestureStart=function(j,Z){if(A.offset&&M(),!Z)ae.restart(!0);else{Jt.cache++;var ce=C(),U,se;i&&(U=v(),se=U+ce*.05*-j.velocityX/.227,ce*=TR(v,U,se,Ha(h,Lr)),V.vars.scrollX=R(se)),U=A(),se=U+ce*.05*-j.velocityY/.227,ce*=TR(A,U,se,Ha(h,Oi)),V.vars.scrollY=P(se),V.invalidate().duration(ce).play(.01),(kl&&V.vars.scrollY>=c||U>=c-1)&&dt.to({},{onUpdate:z,duration:ce})}a&&a(j)},e.onWheel=function(){V._ts&&V.pause(),fr()-b>1e3&&(_=0,b=fr())},e.onChange=function(j,Z,ce,U,se){if(vu!==_&&D(),Z&&i&&v(R(U[2]===Z?X+(j.startX-j.x):v()+Z-U[1])),ce){A.offset&&M();var me=se[2]===ce,be=me?$+j.startY-j.y:A()+ce-se[1],xe=P(be);me&&be!==xe&&($+=xe-be),A(xe)}(ce||Z)&&Go()},e.onEnable=function(){mC(h,i?!1:"x"),Qt.addEventListener("refresh",z),Vi(Kt,"resize",z),A.smooth&&(A.target.style.scrollBehavior="auto",A.smooth=v.smooth=!1),T.enable()},e.onDisable=function(){mC(h,!0),Gi(Kt,"resize",z),Qt.removeEventListener("refresh",z),T.kill()},e.lockAxis=e.lockAxis!==!1,o=new Ai(e),o.iOS=kl,kl&&!A()&&A(1),kl&&dt.ticker.add(Oa),ae=o._dc,V=dt.to(o,{ease:"power4",paused:!0,inherit:!1,scrollX:i?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:HU(A,A(),function(){return V.pause()})},onUpdate:Go,onComplete:ae.vars.onComplete}),o};Qt.sort=function(n){if(mr(n))return jt.sort(n);var e=Kt.pageYOffset||0;return Qt.getAll().forEach(function(t){return t._sortY=t.trigger?e+t.trigger.getBoundingClientRect().top:t.start+Kt.innerHeight}),jt.sort(n||function(t,i){return(t.vars.refreshPriority||0)*-1e6+(t.vars.containerAnimation?1e6:t._sortY)-((i.vars.containerAnimation?1e6:i._sortY)+(i.vars.refreshPriority||0)*-1e6)})};Qt.observe=function(n){return new Ai(n)};Qt.normalizeScroll=function(n){if(typeof n>"u")return Tr;if(n===!0&&Tr)return Tr.enable();if(n===!1){Tr&&Tr.kill(),Tr=n;return}var e=n instanceof Ai?n:IH(n);return Tr&&Tr.target===e.target&&Tr.kill(),_u(e.target)&&(Tr=e),e};Qt.core={_getVelocityProp:I1,_inputObserver:GU,_scrollers:Jt,_proxies:ja,bridge:{ss:function(){Zs||Su("scrollStart"),Zs=fr()},ref:function(){return dr}}};DU()&&dt.registerPlugin(Qt);const xS=({id:n,title:e,color:t,children:i,className:r="",height:s,minHeight:a="100vh",fullHeight:o=!0,isScrollLocked:c=!1})=>{const h=ie.useRef(null);return ie.useEffect(()=>{if(!h.current)return;const d=h.current,p=Qt.create({trigger:d,start:"top 80%",end:"bottom 20%",toggleClass:"active",id:n,markers:!1});return()=>{p.kill()}},[n]),ie.useEffect(()=>{if(!c)return;const d=v=>{var y,E;if(v.deltaY>0){v.preventDefault();const b=(y=h.current)==null?void 0:y.getBoundingClientRect();b&&Math.abs(b.bottom-window.innerHeight)<50&&window.scrollTo({top:((E=h.current)==null?void 0:E.offsetTop)||0,behavior:"auto"})}};let p=0;const m=v=>{p=v.touches[0].clientY},A=v=>{var b;const y=v.touches[0].clientY;if(p-y>0){const C=(b=h.current)==null?void 0:b.getBoundingClientRect();C&&Math.abs(C.bottom-window.innerHeight)<50&&v.preventDefault()}};return window.addEventListener("wheel",d,{passive:!1}),window.addEventListener("touchstart",m,{passive:!0}),window.addEventListener("touchmove",A,{passive:!1}),()=>{window.removeEventListener("wheel",d),window.removeEventListener("touchstart",m),window.removeEventListener("touchmove",A)}},[c]),de.jsx("section",{ref:h,id:n,className:Ji("vertical-section w-full",o&&!s?"min-h-screen":"",r),style:{backgroundColor:t,height:"auto",minHeight:s?void 0:a,maxWidth:"100vw"},"data-section-id":n,children:i})},RH=()=>{const n=ru.getTemplateById("header"),e=ru.getTemplateById("hero"),t=ru.getTemplateById("info-card"),i=ru.getTemplateById("kenilworthLogo"),r=ru.getTemplateById("buttonToOnboarding");return de.jsx("div",{className:"home-route",children:de.jsx(yU,{color:"gradient(var(--color-dark), var(--color-pink), var(--color-blue), var(--color-dark), var(--color-green))",gradientType:"blocks",blockSize:200,children:de.jsxs(xS,{id:"vert1",title:"",color:"gradient(var(--color-dark), var(--color-pink), var(--color-blue))",children:[de.jsx(Ep,{...n}),de.jsx(Ep,{...e}),de.jsx(Ep,{...t}),de.jsx(Ep,{...i}),de.jsx(Kw,{to:"/onboarding",style:{textDecoration:"none"},children:de.jsx(dH,{...r})})]})})})},DH=({id:n,title:e,background:t="#222",children:i,className:r="",height:s="100vh",cardHeight:a="80%",currentCard:o})=>{const c=ie.useRef(null),h=ie.useRef(null);return ie.useEffect(()=>{Qt||Es.registerPlugin(Qt);const d=c.current,p=h.current;if(!d||!p)return;let m=Es.utils.toArray(`#${n} .carousel-card`);const A=m.length,v=[];for(let E=0;E<A;E++)v.push(E/(A-1));let y=Es.timeline({scrollTrigger:{trigger:p,pin:!0,scrub:1,start:"top top",end:()=>`+=${d.offsetWidth}`,invalidateOnRefresh:!0,markers:!1,snap:{snapTo:v,duration:{min:.1,max:.3},delay:.1,ease:"power1.inOut"}}});if(y.to(m,{x:()=>-d.offsetWidth+window.innerWidth,ease:"none",duration:1}),o!==void 0&&A>0){const E=typeof o=="string"?parseInt(o,10)-1:o-1;if(E>=0&&E<A){const b=E/(A-1);setTimeout(()=>{y.scrollTrigger&&y.scrollTrigger.scroll(b)},100)}}return m.forEach((E,b)=>{const C=b/(A-1);Es.timeline({scrollTrigger:{trigger:p,start:"top top",end:()=>`+=${d.offsetWidth}`,scrub:!0,onUpdate:_=>{const w=C,T=Math.abs(_.progress-w),L=Es.utils.clamp(.9,1.05,1-T*.3);Es.set(E,{scale:L})}}})}),()=>{y.scrollTrigger&&y.scrollTrigger.kill(),Qt.getAll().forEach(E=>{E.vars.trigger===h.current&&E.kill()})}},[n,a,o]),de.jsxs("div",{ref:h,className:Ji("carousel-trigger",r),style:{fontFamily:"'rigby', sans-serif",height:s,width:"100%",position:"relative",overflowX:"hidden",backgroundColor:t},children:[e&&de.jsx("div",{className:"carousel-title",style:{padding:"1rem 0rem 0rem 1rem",fontSize:"1.3rem"},children:e}),de.jsx("section",{ref:c,id:n,className:"carousel-section flex items-center justify-center",style:{height:e?"calc(100% - 100px)":"100%",width:"fit-content",position:"absolute",display:"flex",flexDirection:"row",flexWrap:"nowrap"},children:i}),de.jsx("div",{className:"scrollup flex items-center justify-center",style:{position:"absolute",bottom:"10px",width:"100%",textAlign:"center",fontSize:"1rem",fontWeight:"bold",color:"#333",padding:"10px 0"},children:de.jsxs("p",{children:[de.jsx("span",{className:"mr-2",children:de.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:de.jsx("path",{d:"M18 15l-6-6-6 6"})})}),"Swipe Up to Continue",de.jsx("span",{className:"mr-2",children:de.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:de.jsx("path",{d:"M18 15l-6-6-6 6"})})})]})})]})},LH=({title:n,subtitle:e,color:t,children:i,className:r="",index:s,height:a="80%"})=>de.jsx("div",{className:Ji("carousel-card",r),style:{width:"100vw",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"1rem",flexShrink:0,position:"relative",transformOrigin:"center center",transition:"transform 0.1s ease-out"},children:de.jsxs("div",{className:"card-inner rounded-xl shadow-lg",style:{width:"90%",height:a,backgroundColor:t,display:"flex",flexDirection:"column",padding:"0rem",position:"relative",borderRadius:"1rem",boxShadow:"0 10px 25px rgba(0,0,0,0.2)",color:"white",overflow:"hidden",transform:"translateZ(0)"},children:[de.jsx("h3",{className:"text-3xl font-bold mb-2",children:n}),e&&de.jsx("h4",{className:"text-xl opacity-80 mb-6",children:e}),de.jsx("div",{className:"card-content flex-grow overflow-auto",children:i}),s!==void 0&&de.jsx("div",{className:"bg-black bg-opacity-50 px-3 py-1 rounded-full text-sm absolute bottom-4 right-4"})]})}),AC=Vw.memo(LH);var en=(n=>(n.CAMERA="camera",n.LOCATION="location",n.ORIENTATION="orientation",n.MICROPHONE="microphone",n))(en||{}),Aa=(n=>(n.GRANTED="granted",n.DENIED="denied",n.PROMPT="prompt",n.UNKNOWN="unknown",n))(Aa||{});const OH={localStorageKey:"park-ar-visited",requiredPermissions:["camera","location","orientation"],showUI:!0,onStatusChange:()=>{}};async function PH(n={}){const e={...OH,...n},t=!localStorage.getItem(e.localStorageKey||"");localStorage.setItem(e.localStorageKey||"","true");const i=await UH(e.requiredPermissions||[]);return i.isFirstTimeUser=t,e.onStatusChange&&e.onStatusChange(i),i.allGranted?i:t&&e.showUI?zH(e):e.showUI?HH(i,e):i}async function UH(n=[]){console.log(" Checking permissions for:",n);const e={camera:"unknown",location:"unknown",orientation:"unknown",microphone:"unknown"};await Promise.all(n.map(async i=>{switch(i){case"camera":e[i]=await kH();break;case"location":e[i]=await NH();break;case"orientation":e[i]=await FH();break;case"microphone":e[i]=await QH();break}return console.log(` Permission status for ${i}:`,status),e[i]}));const t=n.length>0&&n.every(i=>e[i]==="granted");return{results:e,allGranted:t,isFirstTimeUser:!1}}async function kH(){try{if(navigator.permissions&&navigator.permissions.query)return(await navigator.permissions.query({name:"camera"})).state;try{return(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(e=>e.stop()),"granted"}catch{return"denied"}}catch(n){return console.error("Error checking camera permission:",n),"unknown"}}async function NH(){try{if(navigator.permissions&&navigator.permissions.query)return(await navigator.permissions.query({name:"geolocation"})).state;try{return new Promise(n=>{navigator.geolocation.getCurrentPosition(()=>n("granted"),()=>n("denied"),{timeout:3e3})})}catch{return"denied"}}catch(n){return console.error("Error checking location permission:",n),"unknown"}}async function FH(){try{if(typeof DeviceOrientationEvent<"u"&&typeof DeviceOrientationEvent.requestPermission=="function")try{return await DeviceOrientationEvent.requestPermission()==="granted"?"granted":"denied"}catch{return"prompt"}return"granted"}catch(n){return console.error("Error checking orientation permission:",n),"unknown"}}async function QH(){try{if(navigator.permissions&&navigator.permissions.query)return(await navigator.permissions.query({name:"microphone"})).state;try{return(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(e=>e.stop()),"granted"}catch{return"denied"}}catch(n){return console.error("Error checking microphone permission:",n),"unknown"}}async function VU(){try{return(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(e=>e.stop()),!0}catch(n){return console.error("Error requesting camera permission:",n),!1}}async function WU(){return new Promise(n=>{navigator.geolocation.getCurrentPosition(()=>n(!0),e=>{console.error("Location permission denied:",e),n(!1)})})}async function qU(){if(typeof DeviceOrientationEvent<"u"&&typeof DeviceOrientationEvent.requestPermission=="function")try{return await DeviceOrientationEvent.requestPermission()==="granted"}catch(n){return console.error("Error requesting orientation permission:",n),!1}return!0}async function jU(){try{return(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(e=>e.stop()),!0}catch(n){return console.error("Error requesting microphone permission:",n),!1}}async function XU(n=[]){const e={camera:"unknown",location:"unknown",orientation:"unknown",microphone:"unknown"};for(const i of n){let r=!1;switch(i){case"camera":r=await VU();break;case"location":r=await WU();break;case"orientation":r=await qU();break;case"microphone":r=await jU();break}e[i]=r?"granted":"denied"}const t=n.length>0&&n.every(i=>e[i]==="granted");return{results:e,allGranted:t,isFirstTimeUser:!1}}async function zH(n){return console.log("Showing full onboarding experience with permission explanations"),await XU(n.requiredPermissions)}async function HH(n,e){return console.log("Showing streamlined permission UI for returning user"),await XU(e.requiredPermissions)}const YU=ie.createContext({permissionsState:null,initialized:!1,initialize:async()=>({results:{[en.CAMERA]:Aa.UNKNOWN,[en.LOCATION]:Aa.UNKNOWN,[en.ORIENTATION]:Aa.UNKNOWN,[en.MICROPHONE]:Aa.UNKNOWN},allGranted:!1,isFirstTimeUser:!1}),requestPermission:async()=>!1,isPermissionGranted:()=>!1,startOnboardingFlow:()=>{},showOnboarding:!1,completeOnboarding:()=>{},updatePermissionState:()=>{}}),KU=({children:n,requiredPermissions:e=[en.CAMERA,en.LOCATION,en.ORIENTATION]})=>{console.log(" PermissionsProvider mounted");const[t,i]=ie.useState(null),[r,s]=ie.useState(!1),[a,o]=ie.useState(!1);ie.useEffect(()=>{const y=!localStorage.getItem("permissions-initialized");c().then(E=>{localStorage.setItem("permissions-initialized","true"),y&&i(b=>b&&{...b,isFirstTimeUser:!0})}).catch(E=>{console.error("Error initializing permissions:",E)})},[]);const c=async()=>{if(r&&t)return t;const y=await PH({requiredPermissions:e,onStatusChange:b=>{JSON.stringify(b)!==JSON.stringify(t)&&i(b)},showUI:!1});i(y),s(!0);const E=y.isFirstTimeUser||!y.allGranted;return o(E),y},h=(y,E)=>{if(!t||t.results[y]===E)return;const b={...t.results,[y]:E},C=e.every(w=>b[w]===Aa.GRANTED);if(C===t.allGranted&&t.results[y]===E)return;const _={...t,results:b,allGranted:C};i(_),C&&!t.allGranted&&o(!1)},v={permissionsState:t,initialized:r,initialize:c,requestPermission:async y=>{let E=!1;switch(y){case en.CAMERA:E=await VU();break;case en.LOCATION:E=await WU();break;case en.ORIENTATION:E=await qU();break;case en.MICROPHONE:E=await jU();break}return h(y,E?Aa.GRANTED:Aa.DENIED),E},isPermissionGranted:y=>t?t.results[y]===Aa.GRANTED:!1,startOnboardingFlow:()=>{console.log(" Starting onboarding flow"),o(!0)},showOnboarding:a,completeOnboarding:()=>{console.log(" Completing onboarding flow"),o(!1)},updatePermissionState:h};return de.jsx(YU.Provider,{value:v,children:n})},JU=()=>{const n=ie.useContext(YU);if(!n)throw new Error("usePermissions must be used within a PermissionsProvider");return n},fm={black:"#000",white:"#fff"},Ch={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},_h={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},wh={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},Sh={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Mh={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},qf={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},GH={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function Mu(n,...e){const t=new URL(`https://mui.com/production-error/?code=${n}`);return e.forEach(i=>t.searchParams.append("args[]",i)),`Minified MUI error #${n}; visit ${t} for the full message.`}const Xa="$$material";function N1(){return N1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},N1.apply(null,arguments)}function VH(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function WH(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var qH=function(){function n(t){var i=this;this._insertTag=function(r){var s;i.tags.length===0?i.insertionPoint?s=i.insertionPoint.nextSibling:i.prepend?s=i.container.firstChild:s=i.before:s=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(r,s),i.tags.push(r)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(i){i.forEach(this._insertTag)},e.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(WH(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var s=VH(r);try{s.insertRule(i,s.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(i));this.ctr++},e.flush=function(){this.tags.forEach(function(i){var r;return(r=i.parentNode)==null?void 0:r.removeChild(i)}),this.tags=[],this.ctr=0},n}(),hr="-ms-",Lv="-moz-",bn="-webkit-",ZU="comm",CS="rule",_S="decl",jH="@import",$U="@keyframes",XH="@layer",YH=Math.abs,Gy=String.fromCharCode,KH=Object.assign;function JH(n,e){return Zi(n,0)^45?(((e<<2^Zi(n,0))<<2^Zi(n,1))<<2^Zi(n,2))<<2^Zi(n,3):0}function ek(n){return n.trim()}function ZH(n,e){return(n=e.exec(n))?n[0]:n}function En(n,e,t){return n.replace(e,t)}function F1(n,e){return n.indexOf(e)}function Zi(n,e){return n.charCodeAt(e)|0}function pm(n,e,t){return n.slice(e,t)}function Ua(n){return n.length}function wS(n){return n.length}function Mg(n,e){return e.push(n),n}function $H(n,e){return n.map(e).join("")}var Vy=1,Bd=1,tk=0,ss=0,Si=0,Ud="";function Wy(n,e,t,i,r,s,a){return{value:n,root:e,parent:t,type:i,props:r,children:s,line:Vy,column:Bd,length:a,return:""}}function jf(n,e){return KH(Wy("",null,null,"",null,null,0),n,{length:-n.length},e)}function eG(){return Si}function tG(){return Si=ss>0?Zi(Ud,--ss):0,Bd--,Si===10&&(Bd=1,Vy--),Si}function Is(){return Si=ss<tk?Zi(Ud,ss++):0,Bd++,Si===10&&(Bd=1,Vy++),Si}function Ya(){return Zi(Ud,ss)}function sv(){return ss}function Vm(n,e){return pm(Ud,n,e)}function mm(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function nk(n){return Vy=Bd=1,tk=Ua(Ud=n),ss=0,[]}function ik(n){return Ud="",n}function av(n){return ek(Vm(ss-1,Q1(n===91?n+2:n===40?n+1:n)))}function nG(n){for(;(Si=Ya())&&Si<33;)Is();return mm(n)>2||mm(Si)>3?"":" "}function iG(n,e){for(;--e&&Is()&&!(Si<48||Si>102||Si>57&&Si<65||Si>70&&Si<97););return Vm(n,sv()+(e<6&&Ya()==32&&Is()==32))}function Q1(n){for(;Is();)switch(Si){case n:return ss;case 34:case 39:n!==34&&n!==39&&Q1(Si);break;case 40:n===41&&Q1(n);break;case 92:Is();break}return ss}function rG(n,e){for(;Is()&&n+Si!==57;)if(n+Si===84&&Ya()===47)break;return"/*"+Vm(e,ss-1)+"*"+Gy(n===47?n:Is())}function sG(n){for(;!mm(Ya());)Is();return Vm(n,ss)}function aG(n){return ik(ov("",null,null,null,[""],n=nk(n),0,[0],n))}function ov(n,e,t,i,r,s,a,o,c){for(var h=0,d=0,p=a,m=0,A=0,v=0,y=1,E=1,b=1,C=0,_="",w=r,T=s,L=i,R=_;E;)switch(v=C,C=Is()){case 40:if(v!=108&&Zi(R,p-1)==58){F1(R+=En(av(C),"&","&\f"),"&\f")!=-1&&(b=-1);break}case 34:case 39:case 91:R+=av(C);break;case 9:case 10:case 13:case 32:R+=nG(v);break;case 92:R+=iG(sv()-1,7);continue;case 47:switch(Ya()){case 42:case 47:Mg(oG(rG(Is(),sv()),e,t),c);break;default:R+="/"}break;case 123*y:o[h++]=Ua(R)*b;case 125*y:case 59:case 0:switch(C){case 0:case 125:E=0;case 59+d:b==-1&&(R=En(R,/\f/g,"")),A>0&&Ua(R)-p&&Mg(A>32?DR(R+";",i,t,p-1):DR(En(R," ","")+";",i,t,p-2),c);break;case 59:R+=";";default:if(Mg(L=RR(R,e,t,h,d,r,o,_,w=[],T=[],p),s),C===123)if(d===0)ov(R,e,L,L,w,s,p,o,T);else switch(m===99&&Zi(R,3)===110?100:m){case 100:case 108:case 109:case 115:ov(n,L,L,i&&Mg(RR(n,L,L,0,0,r,o,_,r,w=[],p),T),r,T,p,o,i?w:T);break;default:ov(R,L,L,L,[""],T,0,o,T)}}h=d=A=0,y=b=1,_=R="",p=a;break;case 58:p=1+Ua(R),A=v;default:if(y<1){if(C==123)--y;else if(C==125&&y++==0&&tG()==125)continue}switch(R+=Gy(C),C*y){case 38:b=d>0?1:(R+="\f",-1);break;case 44:o[h++]=(Ua(R)-1)*b,b=1;break;case 64:Ya()===45&&(R+=av(Is())),m=Ya(),d=p=Ua(_=R+=sG(sv())),C++;break;case 45:v===45&&Ua(R)==2&&(y=0)}}return s}function RR(n,e,t,i,r,s,a,o,c,h,d){for(var p=r-1,m=r===0?s:[""],A=wS(m),v=0,y=0,E=0;v<i;++v)for(var b=0,C=pm(n,p+1,p=YH(y=a[v])),_=n;b<A;++b)(_=ek(y>0?m[b]+" "+C:En(C,/&\f/g,m[b])))&&(c[E++]=_);return Wy(n,e,t,r===0?CS:o,c,h,d)}function oG(n,e,t){return Wy(n,e,t,ZU,Gy(eG()),pm(n,2,-2),0)}function DR(n,e,t,i){return Wy(n,e,t,_S,pm(n,0,i),pm(n,i+1,-1),i)}function vd(n,e){for(var t="",i=wS(n),r=0;r<i;r++)t+=e(n[r],r,n,e)||"";return t}function lG(n,e,t,i){switch(n.type){case XH:if(n.children.length)break;case jH:case _S:return n.return=n.return||n.value;case ZU:return"";case $U:return n.return=n.value+"{"+vd(n.children,i)+"}";case CS:n.value=n.props.join(",")}return Ua(t=vd(n.children,i))?n.return=n.value+"{"+t+"}":""}function cG(n){var e=wS(n);return function(t,i,r,s){for(var a="",o=0;o<e;o++)a+=n[o](t,i,r,s)||"";return a}}function uG(n){return function(e){e.root||(e=e.return)&&n(e)}}function rk(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var hG=function(e,t,i){for(var r=0,s=0;r=s,s=Ya(),r===38&&s===12&&(t[i]=1),!mm(s);)Is();return Vm(e,ss)},dG=function(e,t){var i=-1,r=44;do switch(mm(r)){case 0:r===38&&Ya()===12&&(t[i]=1),e[i]+=hG(ss-1,t,i);break;case 2:e[i]+=av(r);break;case 4:if(r===44){e[++i]=Ya()===58?"&\f":"",t[i]=e[i].length;break}default:e[i]+=Gy(r)}while(r=Is());return e},fG=function(e,t){return ik(dG(nk(e),t))},LR=new WeakMap,pG=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,i=e.parent,r=e.column===i.column&&e.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!LR.get(i))&&!r){LR.set(e,!0);for(var s=[],a=fG(t,s),o=i.props,c=0,h=0;c<a.length;c++)for(var d=0;d<o.length;d++,h++)e.props[h]=s[c]?a[c].replace(/&\f/g,o[d]):o[d]+" "+a[c]}}},mG=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function sk(n,e){switch(JH(n,e)){case 5103:return bn+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return bn+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return bn+n+Lv+n+hr+n+n;case 6828:case 4268:return bn+n+hr+n+n;case 6165:return bn+n+hr+"flex-"+n+n;case 5187:return bn+n+En(n,/(\w+).+(:[^]+)/,bn+"box-$1$2"+hr+"flex-$1$2")+n;case 5443:return bn+n+hr+"flex-item-"+En(n,/flex-|-self/,"")+n;case 4675:return bn+n+hr+"flex-line-pack"+En(n,/align-content|flex-|-self/,"")+n;case 5548:return bn+n+hr+En(n,"shrink","negative")+n;case 5292:return bn+n+hr+En(n,"basis","preferred-size")+n;case 6060:return bn+"box-"+En(n,"-grow","")+bn+n+hr+En(n,"grow","positive")+n;case 4554:return bn+En(n,/([^-])(transform)/g,"$1"+bn+"$2")+n;case 6187:return En(En(En(n,/(zoom-|grab)/,bn+"$1"),/(image-set)/,bn+"$1"),n,"")+n;case 5495:case 3959:return En(n,/(image-set\([^]*)/,bn+"$1$`$1");case 4968:return En(En(n,/(.+:)(flex-)?(.*)/,bn+"box-pack:$3"+hr+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+bn+n+n;case 4095:case 3583:case 4068:case 2532:return En(n,/(.+)-inline(.+)/,bn+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ua(n)-1-e>6)switch(Zi(n,e+1)){case 109:if(Zi(n,e+4)!==45)break;case 102:return En(n,/(.+:)(.+)-([^]+)/,"$1"+bn+"$2-$3$1"+Lv+(Zi(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~F1(n,"stretch")?sk(En(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(Zi(n,e+1)!==115)break;case 6444:switch(Zi(n,Ua(n)-3-(~F1(n,"!important")&&10))){case 107:return En(n,":",":"+bn)+n;case 101:return En(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+bn+(Zi(n,14)===45?"inline-":"")+"box$3$1"+bn+"$2$3$1"+hr+"$2box$3")+n}break;case 5936:switch(Zi(n,e+11)){case 114:return bn+n+hr+En(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return bn+n+hr+En(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return bn+n+hr+En(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return bn+n+hr+n+n}return n}var AG=function(e,t,i,r){if(e.length>-1&&!e.return)switch(e.type){case _S:e.return=sk(e.value,e.length);break;case $U:return vd([jf(e,{value:En(e.value,"@","@"+bn)})],r);case CS:if(e.length)return $H(e.props,function(s){switch(ZH(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return vd([jf(e,{props:[En(s,/:(read-\w+)/,":"+Lv+"$1")]})],r);case"::placeholder":return vd([jf(e,{props:[En(s,/:(plac\w+)/,":"+bn+"input-$1")]}),jf(e,{props:[En(s,/:(plac\w+)/,":"+Lv+"$1")]}),jf(e,{props:[En(s,/:(plac\w+)/,hr+"input-$1")]})],r)}return""})}},gG=[AG],vG=function(e){var t=e.key;if(t==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(y){var E=y.getAttribute("data-emotion");E.indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var r=e.stylisPlugins||gG,s={},a,o=[];a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(y){for(var E=y.getAttribute("data-emotion").split(" "),b=1;b<E.length;b++)s[E[b]]=!0;o.push(y)});var c,h=[pG,mG];{var d,p=[lG,uG(function(y){d.insert(y)})],m=cG(h.concat(r,p)),A=function(E){return vd(aG(E),m)};c=function(E,b,C,_){d=C,A(E?E+"{"+b.styles+"}":b.styles),_&&(v.inserted[b.name]=!0)}}var v={key:t,sheet:new qH({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:c};return v.sheet.hydrate(o),v},gC={exports:{}},xn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OR;function yG(){if(OR)return xn;OR=1;var n=typeof Symbol=="function"&&Symbol.for,e=n?Symbol.for("react.element"):60103,t=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,r=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,a=n?Symbol.for("react.provider"):60109,o=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,m=n?Symbol.for("react.suspense_list"):60120,A=n?Symbol.for("react.memo"):60115,v=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,E=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,C=n?Symbol.for("react.scope"):60119;function _(T){if(typeof T=="object"&&T!==null){var L=T.$$typeof;switch(L){case e:switch(T=T.type,T){case c:case h:case i:case s:case r:case p:return T;default:switch(T=T&&T.$$typeof,T){case o:case d:case v:case A:case a:return T;default:return L}}case t:return L}}}function w(T){return _(T)===h}return xn.AsyncMode=c,xn.ConcurrentMode=h,xn.ContextConsumer=o,xn.ContextProvider=a,xn.Element=e,xn.ForwardRef=d,xn.Fragment=i,xn.Lazy=v,xn.Memo=A,xn.Portal=t,xn.Profiler=s,xn.StrictMode=r,xn.Suspense=p,xn.isAsyncMode=function(T){return w(T)||_(T)===c},xn.isConcurrentMode=w,xn.isContextConsumer=function(T){return _(T)===o},xn.isContextProvider=function(T){return _(T)===a},xn.isElement=function(T){return typeof T=="object"&&T!==null&&T.$$typeof===e},xn.isForwardRef=function(T){return _(T)===d},xn.isFragment=function(T){return _(T)===i},xn.isLazy=function(T){return _(T)===v},xn.isMemo=function(T){return _(T)===A},xn.isPortal=function(T){return _(T)===t},xn.isProfiler=function(T){return _(T)===s},xn.isStrictMode=function(T){return _(T)===r},xn.isSuspense=function(T){return _(T)===p},xn.isValidElementType=function(T){return typeof T=="string"||typeof T=="function"||T===i||T===h||T===s||T===r||T===p||T===m||typeof T=="object"&&T!==null&&(T.$$typeof===v||T.$$typeof===A||T.$$typeof===a||T.$$typeof===o||T.$$typeof===d||T.$$typeof===E||T.$$typeof===b||T.$$typeof===C||T.$$typeof===y)},xn.typeOf=_,xn}var PR;function bG(){return PR||(PR=1,gC.exports=yG()),gC.exports}var vC,UR;function EG(){if(UR)return vC;UR=1;var n=bG(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},r={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[n.ForwardRef]=i,s[n.Memo]=r;function a(v){return n.isMemo(v)?r:s[v.$$typeof]||e}var o=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,m=Object.prototype;function A(v,y,E){if(typeof y!="string"){if(m){var b=p(y);b&&b!==m&&A(v,b,E)}var C=c(y);h&&(C=C.concat(h(y)));for(var _=a(v),w=a(y),T=0;T<C.length;++T){var L=C[T];if(!t[L]&&!(E&&E[L])&&!(w&&w[L])&&!(_&&_[L])){var R=d(y,L);try{o(v,L,R)}catch{}}}}return v}return vC=A,vC}EG();var xG=!0;function ak(n,e,t){var i="";return t.split(" ").forEach(function(r){n[r]!==void 0?e.push(n[r]+";"):r&&(i+=r+" ")}),i}var SS=function(e,t,i){var r=e.key+"-"+t.name;(i===!1||xG===!1)&&e.registered[r]===void 0&&(e.registered[r]=t.styles)},MS=function(e,t,i){SS(e,t,i);var r=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var s=t;do e.insert(t===s?"."+r:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function CG(n){for(var e=0,t,i=0,r=n.length;r>=4;++i,r-=4)t=n.charCodeAt(i)&255|(n.charCodeAt(++i)&255)<<8|(n.charCodeAt(++i)&255)<<16|(n.charCodeAt(++i)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(r){case 3:e^=(n.charCodeAt(i+2)&255)<<16;case 2:e^=(n.charCodeAt(i+1)&255)<<8;case 1:e^=n.charCodeAt(i)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var _G={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},wG=/[A-Z]|^ms/g,SG=/_EMO_([^_]+?)_([^]*?)_EMO_/g,ok=function(e){return e.charCodeAt(1)===45},kR=function(e){return e!=null&&typeof e!="boolean"},yC=rk(function(n){return ok(n)?n:n.replace(wG,"-$&").toLowerCase()}),NR=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(SG,function(i,r,s){return ka={name:r,styles:s,next:ka},r})}return _G[e]!==1&&!ok(e)&&typeof t=="number"&&t!==0?t+"px":t};function Am(n,e,t){if(t==null)return"";var i=t;if(i.__emotion_styles!==void 0)return i;switch(typeof t){case"boolean":return"";case"object":{var r=t;if(r.anim===1)return ka={name:r.name,styles:r.styles,next:ka},r.name;var s=t;if(s.styles!==void 0){var a=s.next;if(a!==void 0)for(;a!==void 0;)ka={name:a.name,styles:a.styles,next:ka},a=a.next;var o=s.styles+";";return o}return MG(n,e,t)}case"function":{if(n!==void 0){var c=ka,h=t(n);return ka=c,Am(n,e,h)}break}}var d=t;if(e==null)return d;var p=e[d];return p!==void 0?p:d}function MG(n,e,t){var i="";if(Array.isArray(t))for(var r=0;r<t.length;r++)i+=Am(n,e,t[r])+";";else for(var s in t){var a=t[s];if(typeof a!="object"){var o=a;e!=null&&e[o]!==void 0?i+=s+"{"+e[o]+"}":kR(o)&&(i+=yC(s)+":"+NR(s,o)+";")}else if(Array.isArray(a)&&typeof a[0]=="string"&&(e==null||e[a[0]]===void 0))for(var c=0;c<a.length;c++)kR(a[c])&&(i+=yC(s)+":"+NR(s,a[c])+";");else{var h=Am(n,e,a);switch(s){case"animation":case"animationName":{i+=yC(s)+":"+h+";";break}default:i+=s+"{"+h+"}"}}}return i}var FR=/label:\s*([^\s;{]+)\s*(;|$)/g,ka;function qy(n,e,t){if(n.length===1&&typeof n[0]=="object"&&n[0]!==null&&n[0].styles!==void 0)return n[0];var i=!0,r="";ka=void 0;var s=n[0];if(s==null||s.raw===void 0)i=!1,r+=Am(t,e,s);else{var a=s;r+=a[0]}for(var o=1;o<n.length;o++)if(r+=Am(t,e,n[o]),i){var c=s;r+=c[o]}FR.lastIndex=0;for(var h="",d;(d=FR.exec(r))!==null;)h+="-"+d[1];var p=CG(r)+h;return{name:p,styles:r,next:ka}}var TG=function(e){return e()},lk=HI.useInsertionEffect?HI.useInsertionEffect:!1,ck=lk||TG,QR=lk||ie.useLayoutEffect,uk=ie.createContext(typeof HTMLElement<"u"?vG({key:"css"}):null);uk.Provider;var TS=function(e){return ie.forwardRef(function(t,i){var r=ie.useContext(uk);return e(t,r,i)})},Wm=ie.createContext({}),BS={}.hasOwnProperty,z1="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",BG=function(e,t){var i={};for(var r in t)BS.call(t,r)&&(i[r]=t[r]);return i[z1]=e,i},IG=function(e){var t=e.cache,i=e.serialized,r=e.isStringTag;return SS(t,i,r),ck(function(){return MS(t,i,r)}),null},RG=TS(function(n,e,t){var i=n.css;typeof i=="string"&&e.registered[i]!==void 0&&(i=e.registered[i]);var r=n[z1],s=[i],a="";typeof n.className=="string"?a=ak(e.registered,s,n.className):n.className!=null&&(a=n.className+" ");var o=qy(s,void 0,ie.useContext(Wm));a+=e.key+"-"+o.name;var c={};for(var h in n)BS.call(n,h)&&h!=="css"&&h!==z1&&(c[h]=n[h]);return c.className=a,t&&(c.ref=t),ie.createElement(ie.Fragment,null,ie.createElement(IG,{cache:e,serialized:o,isStringTag:typeof r=="string"}),ie.createElement(r,c))}),DG=RG,zR=function(e,t){var i=arguments;if(t==null||!BS.call(t,"css"))return ie.createElement.apply(void 0,i);var r=i.length,s=new Array(r);s[0]=DG,s[1]=BG(e,t);for(var a=2;a<r;a++)s[a]=i[a];return ie.createElement.apply(null,s)};(function(n){var e;e||(e=n.JSX||(n.JSX={}))})(zR||(zR={}));var LG=TS(function(n,e){var t=n.styles,i=qy([t],void 0,ie.useContext(Wm)),r=ie.useRef();return QR(function(){var s=e.key+"-global",a=new e.sheet.constructor({key:s,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),o=!1,c=document.querySelector('style[data-emotion="'+s+" "+i.name+'"]');return e.sheet.tags.length&&(a.before=e.sheet.tags[0]),c!==null&&(o=!0,c.setAttribute("data-emotion",s),a.hydrate([c])),r.current=[a,o],function(){a.flush()}},[e]),QR(function(){var s=r.current,a=s[0],o=s[1];if(o){s[1]=!1;return}if(i.next!==void 0&&MS(e,i.next,!0),a.tags.length){var c=a.tags[a.tags.length-1].nextElementSibling;a.before=c,a.flush()}e.insert("",i,a,!1)},[e,i.name]),null}),OG=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,PG=rk(function(n){return OG.test(n)||n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)<91}),UG=PG,kG=function(e){return e!=="theme"},HR=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?UG:kG},GR=function(e,t,i){var r;if(t){var s=t.shouldForwardProp;r=e.__emotion_forwardProp&&s?function(a){return e.__emotion_forwardProp(a)&&s(a)}:s}return typeof r!="function"&&i&&(r=e.__emotion_forwardProp),r},NG=function(e){var t=e.cache,i=e.serialized,r=e.isStringTag;return SS(t,i,r),ck(function(){return MS(t,i,r)}),null},FG=function n(e,t){var i=e.__emotion_real===e,r=i&&e.__emotion_base||e,s,a;t!==void 0&&(s=t.label,a=t.target);var o=GR(e,t,i),c=o||HR(r),h=!c("as");return function(){var d=arguments,p=i&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&p.push("label:"+s+";"),d[0]==null||d[0].raw===void 0)p.push.apply(p,d);else{var m=d[0];p.push(m[0]);for(var A=d.length,v=1;v<A;v++)p.push(d[v],m[v])}var y=TS(function(E,b,C){var _=h&&E.as||r,w="",T=[],L=E;if(E.theme==null){L={};for(var R in E)L[R]=E[R];L.theme=ie.useContext(Wm)}typeof E.className=="string"?w=ak(b.registered,T,E.className):E.className!=null&&(w=E.className+" ");var P=qy(p.concat(T),b.registered,L);w+=b.key+"-"+P.name,a!==void 0&&(w+=" "+a);var D=h&&o===void 0?HR(_):c,M={};for(var k in E)h&&k==="as"||D(k)&&(M[k]=E[k]);return M.className=w,C&&(M.ref=C),ie.createElement(ie.Fragment,null,ie.createElement(NG,{cache:b,serialized:P,isStringTag:typeof _=="string"}),ie.createElement(_,M))});return y.displayName=s!==void 0?s:"Styled("+(typeof r=="string"?r:r.displayName||r.name||"Component")+")",y.defaultProps=e.defaultProps,y.__emotion_real=y,y.__emotion_base=r,y.__emotion_styles=p,y.__emotion_forwardProp=o,Object.defineProperty(y,"toString",{value:function(){return"."+a}}),y.withComponent=function(E,b){var C=n(E,N1({},t,b,{shouldForwardProp:GR(y,b,!0)}));return C.apply(void 0,p)},y}},QG=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],H1=FG.bind(null);QG.forEach(function(n){H1[n]=H1(n)});function zG(n){return n==null||Object.keys(n).length===0}function hk(n){const{styles:e,defaultTheme:t={}}=n,i=typeof e=="function"?r=>e(zG(r)?t:r):e;return de.jsx(LG,{styles:i})}function dk(n,e){return H1(n,e)}function HG(n,e){Array.isArray(n.__emotion_styles)&&(n.__emotion_styles=e(n.__emotion_styles))}const VR=[];function WR(n){return VR[0]=n,qy(VR)}var bC={exports:{}},Dn={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qR;function GG(){if(qR)return Dn;qR=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.view_transition"),A=Symbol.for("react.client.reference");function v(y){if(typeof y=="object"&&y!==null){var E=y.$$typeof;switch(E){case n:switch(y=y.type,y){case t:case r:case i:case c:case h:case m:return y;default:switch(y=y&&y.$$typeof,y){case a:case o:case p:case d:return y;case s:return y;default:return E}}case e:return E}}}return Dn.ContextConsumer=s,Dn.ContextProvider=a,Dn.Element=n,Dn.ForwardRef=o,Dn.Fragment=t,Dn.Lazy=p,Dn.Memo=d,Dn.Portal=e,Dn.Profiler=r,Dn.StrictMode=i,Dn.Suspense=c,Dn.SuspenseList=h,Dn.isContextConsumer=function(y){return v(y)===s},Dn.isContextProvider=function(y){return v(y)===a},Dn.isElement=function(y){return typeof y=="object"&&y!==null&&y.$$typeof===n},Dn.isForwardRef=function(y){return v(y)===o},Dn.isFragment=function(y){return v(y)===t},Dn.isLazy=function(y){return v(y)===p},Dn.isMemo=function(y){return v(y)===d},Dn.isPortal=function(y){return v(y)===e},Dn.isProfiler=function(y){return v(y)===r},Dn.isStrictMode=function(y){return v(y)===i},Dn.isSuspense=function(y){return v(y)===c},Dn.isSuspenseList=function(y){return v(y)===h},Dn.isValidElementType=function(y){return typeof y=="string"||typeof y=="function"||y===t||y===r||y===i||y===c||y===h||typeof y=="object"&&y!==null&&(y.$$typeof===p||y.$$typeof===d||y.$$typeof===a||y.$$typeof===s||y.$$typeof===o||y.$$typeof===A||y.getModuleId!==void 0)},Dn.typeOf=v,Dn}var jR;function VG(){return jR||(jR=1,bC.exports=GG()),bC.exports}var fk=VG();function Fa(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function pk(n){if(ie.isValidElement(n)||fk.isValidElementType(n)||!Fa(n))return n;const e={};return Object.keys(n).forEach(t=>{e[t]=pk(n[t])}),e}function Nr(n,e,t={clone:!0}){const i=t.clone?{...n}:n;return Fa(n)&&Fa(e)&&Object.keys(e).forEach(r=>{ie.isValidElement(e[r])||fk.isValidElementType(e[r])?i[r]=e[r]:Fa(e[r])&&Object.prototype.hasOwnProperty.call(n,r)&&Fa(n[r])?i[r]=Nr(n[r],e[r],t):t.clone?i[r]=Fa(e[r])?pk(e[r]):e[r]:i[r]=e[r]}),i}const WG=n=>{const e=Object.keys(n).map(t=>({key:t,val:n[t]}))||[];return e.sort((t,i)=>t.val-i.val),e.reduce((t,i)=>({...t,[i.key]:i.val}),{})};function qG(n){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:t="px",step:i=5,...r}=n,s=WG(e),a=Object.keys(s);function o(m){return`@media (min-width:${typeof e[m]=="number"?e[m]:m}${t})`}function c(m){return`@media (max-width:${(typeof e[m]=="number"?e[m]:m)-i/100}${t})`}function h(m,A){const v=a.indexOf(A);return`@media (min-width:${typeof e[m]=="number"?e[m]:m}${t}) and (max-width:${(v!==-1&&typeof e[a[v]]=="number"?e[a[v]]:A)-i/100}${t})`}function d(m){return a.indexOf(m)+1<a.length?h(m,a[a.indexOf(m)+1]):o(m)}function p(m){const A=a.indexOf(m);return A===0?o(a[1]):A===a.length-1?c(a[A]):h(m,a[a.indexOf(m)+1]).replace("@media","@media not all and")}return{keys:a,values:s,up:o,down:c,between:h,only:d,not:p,unit:t,...r}}function jG(n,e){if(!n.containerQueries)return e;const t=Object.keys(e).filter(i=>i.startsWith("@container")).sort((i,r)=>{var a,o;const s=/min-width:\s*([0-9.]+)/;return+(((a=i.match(s))==null?void 0:a[1])||0)-+(((o=r.match(s))==null?void 0:o[1])||0)});return t.length?t.reduce((i,r)=>{const s=e[r];return delete i[r],i[r]=s,i},{...e}):e}function XG(n,e){return e==="@"||e.startsWith("@")&&(n.some(t=>e.startsWith(`@${t}`))||!!e.match(/^@\d/))}function YG(n,e){const t=e.match(/^@([^/]+)?\/?(.+)?$/);if(!t)return null;const[,i,r]=t,s=Number.isNaN(+i)?i||0:+i;return n.containerQueries(r).up(s)}function KG(n){const e=(s,a)=>s.replace("@media",a?`@container ${a}`:"@container");function t(s,a){s.up=(...o)=>e(n.breakpoints.up(...o),a),s.down=(...o)=>e(n.breakpoints.down(...o),a),s.between=(...o)=>e(n.breakpoints.between(...o),a),s.only=(...o)=>e(n.breakpoints.only(...o),a),s.not=(...o)=>{const c=e(n.breakpoints.not(...o),a);return c.includes("not all and")?c.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):c}}const i={},r=s=>(t(i,s),i);return t(r),{...n,containerQueries:r}}const JG={borderRadius:4};function Wp(n,e){return e?Nr(n,e,{clone:!1}):n}const jy={xs:0,sm:600,md:900,lg:1200,xl:1536},XR={keys:["xs","sm","md","lg","xl"],up:n=>`@media (min-width:${jy[n]}px)`},ZG={containerQueries:n=>({up:e=>{let t=typeof e=="number"?e:jy[e]||e;return typeof t=="number"&&(t=`${t}px`),n?`@container ${n} (min-width:${t})`:`@container (min-width:${t})`}})};function ya(n,e,t){const i=n.theme||{};if(Array.isArray(e)){const s=i.breakpoints||XR;return e.reduce((a,o,c)=>(a[s.up(s.keys[c])]=t(e[c]),a),{})}if(typeof e=="object"){const s=i.breakpoints||XR;return Object.keys(e).reduce((a,o)=>{if(XG(s.keys,o)){const c=YG(i.containerQueries?i:ZG,o);c&&(a[c]=t(e[o],o))}else if(Object.keys(s.values||jy).includes(o)){const c=s.up(o);a[c]=t(e[o],o)}else{const c=o;a[c]=e[c]}return a},{})}return t(e)}function mk(n={}){var t;return((t=n.keys)==null?void 0:t.reduce((i,r)=>{const s=n.up(r);return i[s]={},i},{}))||{}}function Ak(n,e){return n.reduce((t,i)=>{const r=t[i];return(!r||Object.keys(r).length===0)&&delete t[i],t},e)}function $G(n,...e){const t=mk(n),i=[t,...e].reduce((r,s)=>Nr(r,s),{});return Ak(Object.keys(t),i)}function eV(n,e){if(typeof n!="object")return{};const t={},i=Object.keys(e);return Array.isArray(n)?i.forEach((r,s)=>{s<n.length&&(t[r]=!0)}):i.forEach(r=>{n[r]!=null&&(t[r]=!0)}),t}function EC({values:n,breakpoints:e,base:t}){const i=t||eV(n,e),r=Object.keys(i);if(r.length===0)return n;let s;return r.reduce((a,o,c)=>(Array.isArray(n)?(a[o]=n[c]!=null?n[c]:n[s],s=c):typeof n=="object"?(a[o]=n[o]!=null?n[o]:n[s],s=o):a[o]=n,a),{})}function Zo(n){if(typeof n!="string")throw new Error(Mu(7));return n.charAt(0).toUpperCase()+n.slice(1)}function Xy(n,e,t=!0){if(!e||typeof e!="string")return null;if(n&&n.vars&&t){const i=`vars.${e}`.split(".").reduce((r,s)=>r&&r[s]?r[s]:null,n);if(i!=null)return i}return e.split(".").reduce((i,r)=>i&&i[r]!=null?i[r]:null,n)}function Ov(n,e,t,i=t){let r;return typeof n=="function"?r=n(t):Array.isArray(n)?r=n[t]||i:r=Xy(n,t)||i,e&&(r=e(r,i,n)),r}function gi(n){const{prop:e,cssProperty:t=n.prop,themeKey:i,transform:r}=n,s=a=>{if(a[e]==null)return null;const o=a[e],c=a.theme,h=Xy(c,i)||{};return ya(a,o,p=>{let m=Ov(h,r,p);return p===m&&typeof p=="string"&&(m=Ov(h,r,`${e}${p==="default"?"":Zo(p)}`,p)),t===!1?m:{[t]:m}})};return s.propTypes={},s.filterProps=[e],s}function tV(n){const e={};return t=>(e[t]===void 0&&(e[t]=n(t)),e[t])}const nV={m:"margin",p:"padding"},iV={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},YR={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},rV=tV(n=>{if(n.length>2)if(YR[n])n=YR[n];else return[n];const[e,t]=n.split(""),i=nV[e],r=iV[t]||"";return Array.isArray(r)?r.map(s=>i+s):[i+r]}),IS=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],RS=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...IS,...RS];function qm(n,e,t,i){const r=Xy(n,e,!0)??t;return typeof r=="number"||typeof r=="string"?s=>typeof s=="string"?s:typeof r=="string"?r.startsWith("var(")&&s===0?0:r.startsWith("var(")&&s===1?r:`calc(${s} * ${r})`:r*s:Array.isArray(r)?s=>{if(typeof s=="string")return s;const a=Math.abs(s),o=r[a];return s>=0?o:typeof o=="number"?-o:typeof o=="string"&&o.startsWith("var(")?`calc(-1 * ${o})`:`-${o}`}:typeof r=="function"?r:()=>{}}function Yy(n){return qm(n,"spacing",8)}function Tu(n,e){return typeof e=="string"||e==null?e:n(e)}function sV(n,e){return t=>n.reduce((i,r)=>(i[r]=Tu(e,t),i),{})}function aV(n,e,t,i){if(!e.includes(t))return null;const r=rV(t),s=sV(r,i),a=n[t];return ya(n,a,s)}function gk(n,e){const t=Yy(n.theme);return Object.keys(n).map(i=>aV(n,e,i,t)).reduce(Wp,{})}function ai(n){return gk(n,IS)}ai.propTypes={};ai.filterProps=IS;function oi(n){return gk(n,RS)}oi.propTypes={};oi.filterProps=RS;function vk(n=8,e=Yy({spacing:n})){if(n.mui)return n;const t=(...i)=>(i.length===0?[1]:i).map(s=>{const a=e(s);return typeof a=="number"?`${a}px`:a}).join(" ");return t.mui=!0,t}function Ky(...n){const e=n.reduce((i,r)=>(r.filterProps.forEach(s=>{i[s]=r}),i),{}),t=i=>Object.keys(i).reduce((r,s)=>e[s]?Wp(r,e[s](i)):r,{});return t.propTypes={},t.filterProps=n.reduce((i,r)=>i.concat(r.filterProps),[]),t}function Ys(n){return typeof n!="number"?n:`${n}px solid`}function ea(n,e){return gi({prop:n,themeKey:"borders",transform:e})}const oV=ea("border",Ys),lV=ea("borderTop",Ys),cV=ea("borderRight",Ys),uV=ea("borderBottom",Ys),hV=ea("borderLeft",Ys),dV=ea("borderColor"),fV=ea("borderTopColor"),pV=ea("borderRightColor"),mV=ea("borderBottomColor"),AV=ea("borderLeftColor"),gV=ea("outline",Ys),vV=ea("outlineColor"),Jy=n=>{if(n.borderRadius!==void 0&&n.borderRadius!==null){const e=qm(n.theme,"shape.borderRadius",4),t=i=>({borderRadius:Tu(e,i)});return ya(n,n.borderRadius,t)}return null};Jy.propTypes={};Jy.filterProps=["borderRadius"];Ky(oV,lV,cV,uV,hV,dV,fV,pV,mV,AV,Jy,gV,vV);const Zy=n=>{if(n.gap!==void 0&&n.gap!==null){const e=qm(n.theme,"spacing",8),t=i=>({gap:Tu(e,i)});return ya(n,n.gap,t)}return null};Zy.propTypes={};Zy.filterProps=["gap"];const $y=n=>{if(n.columnGap!==void 0&&n.columnGap!==null){const e=qm(n.theme,"spacing",8),t=i=>({columnGap:Tu(e,i)});return ya(n,n.columnGap,t)}return null};$y.propTypes={};$y.filterProps=["columnGap"];const eb=n=>{if(n.rowGap!==void 0&&n.rowGap!==null){const e=qm(n.theme,"spacing",8),t=i=>({rowGap:Tu(e,i)});return ya(n,n.rowGap,t)}return null};eb.propTypes={};eb.filterProps=["rowGap"];const yV=gi({prop:"gridColumn"}),bV=gi({prop:"gridRow"}),EV=gi({prop:"gridAutoFlow"}),xV=gi({prop:"gridAutoColumns"}),CV=gi({prop:"gridAutoRows"}),_V=gi({prop:"gridTemplateColumns"}),wV=gi({prop:"gridTemplateRows"}),SV=gi({prop:"gridTemplateAreas"}),MV=gi({prop:"gridArea"});Ky(Zy,$y,eb,yV,bV,EV,xV,CV,_V,wV,SV,MV);function yd(n,e){return e==="grey"?e:n}const TV=gi({prop:"color",themeKey:"palette",transform:yd}),BV=gi({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:yd}),IV=gi({prop:"backgroundColor",themeKey:"palette",transform:yd});Ky(TV,BV,IV);function Ss(n){return n<=1&&n!==0?`${n*100}%`:n}const RV=gi({prop:"width",transform:Ss}),DS=n=>{if(n.maxWidth!==void 0&&n.maxWidth!==null){const e=t=>{var r,s,a,o,c;const i=((a=(s=(r=n.theme)==null?void 0:r.breakpoints)==null?void 0:s.values)==null?void 0:a[t])||jy[t];return i?((c=(o=n.theme)==null?void 0:o.breakpoints)==null?void 0:c.unit)!=="px"?{maxWidth:`${i}${n.theme.breakpoints.unit}`}:{maxWidth:i}:{maxWidth:Ss(t)}};return ya(n,n.maxWidth,e)}return null};DS.filterProps=["maxWidth"];const DV=gi({prop:"minWidth",transform:Ss}),LV=gi({prop:"height",transform:Ss}),OV=gi({prop:"maxHeight",transform:Ss}),PV=gi({prop:"minHeight",transform:Ss});gi({prop:"size",cssProperty:"width",transform:Ss});gi({prop:"size",cssProperty:"height",transform:Ss});const UV=gi({prop:"boxSizing"});Ky(RV,DS,DV,LV,OV,PV,UV);const jm={border:{themeKey:"borders",transform:Ys},borderTop:{themeKey:"borders",transform:Ys},borderRight:{themeKey:"borders",transform:Ys},borderBottom:{themeKey:"borders",transform:Ys},borderLeft:{themeKey:"borders",transform:Ys},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Ys},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Jy},color:{themeKey:"palette",transform:yd},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:yd},backgroundColor:{themeKey:"palette",transform:yd},p:{style:oi},pt:{style:oi},pr:{style:oi},pb:{style:oi},pl:{style:oi},px:{style:oi},py:{style:oi},padding:{style:oi},paddingTop:{style:oi},paddingRight:{style:oi},paddingBottom:{style:oi},paddingLeft:{style:oi},paddingX:{style:oi},paddingY:{style:oi},paddingInline:{style:oi},paddingInlineStart:{style:oi},paddingInlineEnd:{style:oi},paddingBlock:{style:oi},paddingBlockStart:{style:oi},paddingBlockEnd:{style:oi},m:{style:ai},mt:{style:ai},mr:{style:ai},mb:{style:ai},ml:{style:ai},mx:{style:ai},my:{style:ai},margin:{style:ai},marginTop:{style:ai},marginRight:{style:ai},marginBottom:{style:ai},marginLeft:{style:ai},marginX:{style:ai},marginY:{style:ai},marginInline:{style:ai},marginInlineStart:{style:ai},marginInlineEnd:{style:ai},marginBlock:{style:ai},marginBlockStart:{style:ai},marginBlockEnd:{style:ai},displayPrint:{cssProperty:!1,transform:n=>({"@media print":{display:n}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Zy},rowGap:{style:eb},columnGap:{style:$y},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Ss},maxWidth:{style:DS},minWidth:{transform:Ss},height:{transform:Ss},maxHeight:{transform:Ss},minHeight:{transform:Ss},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function kV(...n){const e=n.reduce((i,r)=>i.concat(Object.keys(r)),[]),t=new Set(e);return n.every(i=>t.size===Object.keys(i).length)}function NV(n,e){return typeof n=="function"?n(e):n}function FV(){function n(t,i,r,s){const a={[t]:i,theme:r},o=s[t];if(!o)return{[t]:i};const{cssProperty:c=t,themeKey:h,transform:d,style:p}=o;if(i==null)return null;if(h==="typography"&&i==="inherit")return{[t]:i};const m=Xy(r,h)||{};return p?p(a):ya(a,i,v=>{let y=Ov(m,d,v);return v===y&&typeof v=="string"&&(y=Ov(m,d,`${t}${v==="default"?"":Zo(v)}`,v)),c===!1?y:{[c]:y}})}function e(t){const{sx:i,theme:r={}}=t||{};if(!i)return null;const s=r.unstable_sxConfig??jm;function a(o){let c=o;if(typeof o=="function")c=o(r);else if(typeof o!="object")return o;if(!c)return null;const h=mk(r.breakpoints),d=Object.keys(h);let p=h;return Object.keys(c).forEach(m=>{const A=NV(c[m],r);if(A!=null)if(typeof A=="object")if(s[m])p=Wp(p,n(m,A,r,s));else{const v=ya({theme:r},A,y=>({[m]:y}));kV(v,A)?p[m]=e({sx:A,theme:r}):p=Wp(p,v)}else p=Wp(p,n(m,A,r,s))}),jG(r,Ak(d,p))}return Array.isArray(i)?i.map(a):a(i)}return e}const tc=FV();tc.filterProps=["sx"];function QV(n,e){var i;const t=this;if(t.vars){if(!((i=t.colorSchemes)!=null&&i[n])||typeof t.getColorSchemeSelector!="function")return{};let r=t.getColorSchemeSelector(n);return r==="&"?e:((r.includes("data-")||r.includes("."))&&(r=`*:where(${r.replace(/\s*&$/,"")}) &`),{[r]:e})}return t.palette.mode===n?e:{}}function tb(n={},...e){const{breakpoints:t={},palette:i={},spacing:r,shape:s={},...a}=n,o=qG(t),c=vk(r);let h=Nr({breakpoints:o,direction:"ltr",components:{},palette:{mode:"light",...i},spacing:c,shape:{...JG,...s}},a);return h=KG(h),h.applyStyles=QV,h=e.reduce((d,p)=>Nr(d,p),h),h.unstable_sxConfig={...jm,...a==null?void 0:a.unstable_sxConfig},h.unstable_sx=function(p){return tc({sx:p,theme:this})},h}function zV(n){return Object.keys(n).length===0}function yk(n=null){const e=ie.useContext(Wm);return!e||zV(e)?n:e}const HV=tb();function nb(n=HV){return yk(n)}function GV({styles:n,themeId:e,defaultTheme:t={}}){const i=nb(t),r=typeof n=="function"?n(e&&i[e]||i):n;return de.jsx(hk,{styles:r})}const VV=n=>{var i;const e={systemProps:{},otherProps:{}},t=((i=n==null?void 0:n.theme)==null?void 0:i.unstable_sxConfig)??jm;return Object.keys(n).forEach(r=>{t[r]?e.systemProps[r]=n[r]:e.otherProps[r]=n[r]}),e};function LS(n){const{sx:e,...t}=n,{systemProps:i,otherProps:r}=VV(t);let s;return Array.isArray(e)?s=[i,...e]:typeof e=="function"?s=(...a)=>{const o=e(...a);return Fa(o)?{...i,...o}:i}:s={...i,...e},{...r,sx:s}}const KR=n=>n,WV=()=>{let n=KR;return{configure(e){n=e},generate(e){return n(e)},reset(){n=KR}}},bk=WV();function Ek(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(e=0;e<r;e++)n[e]&&(t=Ek(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function Uu(){for(var n,e,t=0,i="",r=arguments.length;t<r;t++)(n=arguments[t])&&(e=Ek(n))&&(i&&(i+=" "),i+=e);return i}function qV(n={}){const{themeId:e,defaultTheme:t,defaultClassName:i="MuiBox-root",generateClassName:r}=n,s=dk("div",{shouldForwardProp:o=>o!=="theme"&&o!=="sx"&&o!=="as"})(tc);return ie.forwardRef(function(c,h){const d=nb(t),{className:p,component:m="div",...A}=LS(c);return de.jsx(s,{as:m,ref:h,className:Uu(p,r?r(i):i),theme:e&&d[e]||d,...A})})}const jV={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function ku(n,e,t="Mui"){const i=jV[e];return i?`${t}-${i}`:`${bk.generate(n)}-${e}`}function kd(n,e,t="Mui"){const i={};return e.forEach(r=>{i[r]=ku(n,r,t)}),i}function xk(n){const{variants:e,...t}=n,i={variants:e,style:WR(t),isProcessed:!0};return i.style===t||e&&e.forEach(r=>{typeof r.style!="function"&&(r.style=WR(r.style))}),i}const XV=tb();function xC(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}function YV(n){return n?(e,t)=>t[n]:null}function KV(n,e,t){n.theme=ZV(n.theme)?t:n.theme[e]||n.theme}function lv(n,e){const t=typeof e=="function"?e(n):e;if(Array.isArray(t))return t.flatMap(i=>lv(n,i));if(Array.isArray(t==null?void 0:t.variants)){let i;if(t.isProcessed)i=t.style;else{const{variants:r,...s}=t;i=s}return Ck(n,t.variants,[i])}return t!=null&&t.isProcessed?t.style:t}function Ck(n,e,t=[]){var r;let i;e:for(let s=0;s<e.length;s+=1){const a=e[s];if(typeof a.props=="function"){if(i??(i={...n,...n.ownerState,ownerState:n.ownerState}),!a.props(i))continue}else for(const o in a.props)if(n[o]!==a.props[o]&&((r=n.ownerState)==null?void 0:r[o])!==a.props[o])continue e;typeof a.style=="function"?(i??(i={...n,...n.ownerState,ownerState:n.ownerState}),t.push(a.style(i))):t.push(a.style)}return t}function _k(n={}){const{themeId:e,defaultTheme:t=XV,rootShouldForwardProp:i=xC,slotShouldForwardProp:r=xC}=n;function s(o){KV(o,e,t)}return(o,c={})=>{HG(o,T=>T.filter(L=>L!==tc));const{name:h,slot:d,skipVariantsResolver:p,skipSx:m,overridesResolver:A=YV(e9(d)),...v}=c,y=p!==void 0?p:d&&d!=="Root"&&d!=="root"||!1,E=m||!1;let b=xC;d==="Root"||d==="root"?b=i:d?b=r:$V(o)&&(b=void 0);const C=dk(o,{shouldForwardProp:b,label:JV(),...v}),_=T=>{if(typeof T=="function"&&T.__emotion_real!==T)return function(R){return lv(R,T)};if(Fa(T)){const L=xk(T);return L.variants?function(P){return lv(P,L)}:L.style}return T},w=(...T)=>{const L=[],R=T.map(_),P=[];if(L.push(s),h&&A&&P.push(function(V){var z,j;const $=(j=(z=V.theme.components)==null?void 0:z[h])==null?void 0:j.styleOverrides;if(!$)return null;const ae={};for(const Z in $)ae[Z]=lv(V,$[Z]);return A(V,ae)}),h&&!y&&P.push(function(V){var ae,z;const X=V.theme,$=(z=(ae=X==null?void 0:X.components)==null?void 0:ae[h])==null?void 0:z.variants;return $?Ck(V,$):null}),E||P.push(tc),Array.isArray(R[0])){const k=R.shift(),V=new Array(L.length).fill(""),X=new Array(P.length).fill("");let $;$=[...V,...k,...X],$.raw=[...V,...k.raw,...X],L.unshift($)}const D=[...L,...R,...P],M=C(...D);return o.muiName&&(M.muiName=o.muiName),M};return C.withConfig&&(w.withConfig=C.withConfig),w}}function JV(n,e){return void 0}function ZV(n){for(const e in n)return!1;return!0}function $V(n){return typeof n=="string"&&n.charCodeAt(0)>96}function e9(n){return n&&n.charAt(0).toLowerCase()+n.slice(1)}const t9=_k();function Pv(n,e){const t={...e};for(const i in n)if(Object.prototype.hasOwnProperty.call(n,i)){const r=i;if(r==="components"||r==="slots")t[r]={...n[r],...t[r]};else if(r==="componentsProps"||r==="slotProps"){const s=n[r],a=e[r];if(!a)t[r]=s||{};else if(!s)t[r]=a;else{t[r]={...a};for(const o in s)if(Object.prototype.hasOwnProperty.call(s,o)){const c=o;t[r][c]=Pv(s[c],a[c])}}}else t[r]===void 0&&(t[r]=n[r])}return t}function n9(n){const{theme:e,name:t,props:i}=n;return!e||!e.components||!e.components[t]||!e.components[t].defaultProps?i:Pv(e.components[t].defaultProps,i)}function i9({props:n,name:e,defaultTheme:t,themeId:i}){let r=nb(t);return i&&(r=r[i]||r),n9({theme:r,name:e,props:n})}const r9=typeof window<"u"?ie.useLayoutEffect:ie.useEffect;function s9(n,e=Number.MIN_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(n,t))}function OS(n,e=0,t=1){return s9(n,e,t)}function a9(n){n=n.slice(1);const e=new RegExp(`.{1,${n.length>=6?2:1}}`,"g");let t=n.match(e);return t&&t[0].length===1&&(t=t.map(i=>i+i)),t?`rgb${t.length===4?"a":""}(${t.map((i,r)=>r<3?parseInt(i,16):Math.round(parseInt(i,16)/255*1e3)/1e3).join(", ")})`:""}function nc(n){if(n.type)return n;if(n.charAt(0)==="#")return nc(a9(n));const e=n.indexOf("("),t=n.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(t))throw new Error(Mu(9,n));let i=n.substring(e+1,n.length-1),r;if(t==="color"){if(i=i.split(" "),r=i.shift(),i.length===4&&i[3].charAt(0)==="/"&&(i[3]=i[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(r))throw new Error(Mu(10,r))}else i=i.split(",");return i=i.map(s=>parseFloat(s)),{type:t,values:i,colorSpace:r}}const o9=n=>{const e=nc(n);return e.values.slice(0,3).map((t,i)=>e.type.includes("hsl")&&i!==0?`${t}%`:t).join(" ")},Mp=(n,e)=>{try{return o9(n)}catch{return n}};function ib(n){const{type:e,colorSpace:t}=n;let{values:i}=n;return e.includes("rgb")?i=i.map((r,s)=>s<3?parseInt(r,10):r):e.includes("hsl")&&(i[1]=`${i[1]}%`,i[2]=`${i[2]}%`),e.includes("color")?i=`${t} ${i.join(" ")}`:i=`${i.join(", ")}`,`${e}(${i})`}function wk(n){n=nc(n);const{values:e}=n,t=e[0],i=e[1]/100,r=e[2]/100,s=i*Math.min(r,1-r),a=(h,d=(h+t/30)%12)=>r-s*Math.max(Math.min(d-3,9-d,1),-1);let o="rgb";const c=[Math.round(a(0)*255),Math.round(a(8)*255),Math.round(a(4)*255)];return n.type==="hsla"&&(o+="a",c.push(e[3])),ib({type:o,values:c})}function G1(n){n=nc(n);let e=n.type==="hsl"||n.type==="hsla"?nc(wk(n)).values:n.values;return e=e.map(t=>(n.type!=="color"&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function l9(n,e){const t=G1(n),i=G1(e);return(Math.max(t,i)+.05)/(Math.min(t,i)+.05)}function V1(n,e){return n=nc(n),e=OS(e),(n.type==="rgb"||n.type==="hsl")&&(n.type+="a"),n.type==="color"?n.values[3]=`/${e}`:n.values[3]=e,ib(n)}function Tg(n,e,t){try{return V1(n,e)}catch{return n}}function PS(n,e){if(n=nc(n),e=OS(e),n.type.includes("hsl"))n.values[2]*=1-e;else if(n.type.includes("rgb")||n.type.includes("color"))for(let t=0;t<3;t+=1)n.values[t]*=1-e;return ib(n)}function Un(n,e,t){try{return PS(n,e)}catch{return n}}function US(n,e){if(n=nc(n),e=OS(e),n.type.includes("hsl"))n.values[2]+=(100-n.values[2])*e;else if(n.type.includes("rgb"))for(let t=0;t<3;t+=1)n.values[t]+=(255-n.values[t])*e;else if(n.type.includes("color"))for(let t=0;t<3;t+=1)n.values[t]+=(1-n.values[t])*e;return ib(n)}function kn(n,e,t){try{return US(n,e)}catch{return n}}function c9(n,e=.15){return G1(n)>.5?PS(n,e):US(n,e)}function Bg(n,e,t){try{return c9(n,e)}catch{return n}}function Nd(n,e,t=void 0){const i={};for(const r in n){const s=n[r];let a="",o=!0;for(let c=0;c<s.length;c+=1){const h=s[c];h&&(a+=(o===!0?"":" ")+e(h),o=!1,t&&t[h]&&(a+=" "+t[h]))}i[r]=a}return i}const Sk=ie.createContext(null);function kS(){return ie.useContext(Sk)}const u9=typeof Symbol=="function"&&Symbol.for,h9=u9?Symbol.for("mui.nested"):"__THEME_NESTED__";function d9(n,e){return typeof e=="function"?e(n):{...n,...e}}function f9(n){const{children:e,theme:t}=n,i=kS(),r=ie.useMemo(()=>{const s=i===null?{...t}:d9(i,t);return s!=null&&(s[h9]=i!==null),s},[t,i]);return de.jsx(Sk.Provider,{value:r,children:e})}const p9=ie.createContext();function m9({value:n,...e}){return de.jsx(p9.Provider,{value:n??!0,...e})}const Mk=ie.createContext(void 0);function A9({value:n,children:e}){return de.jsx(Mk.Provider,{value:n,children:e})}function g9(n){const{theme:e,name:t,props:i}=n;if(!e||!e.components||!e.components[t])return i;const r=e.components[t];return r.defaultProps?Pv(r.defaultProps,i):!r.styleOverrides&&!r.variants?Pv(r,i):i}function v9({props:n,name:e}){const t=ie.useContext(Mk);return g9({props:n,name:e,theme:{components:t}})}const JR={};function ZR(n,e,t,i=!1){return ie.useMemo(()=>{const r=n&&e[n]||e;if(typeof t=="function"){const s=t(r),a=n?{...e,[n]:s}:s;return i?()=>a:a}return n?{...e,[n]:t}:{...e,...t}},[n,e,t,i])}function Tk(n){const{children:e,theme:t,themeId:i}=n,r=yk(JR),s=kS()||JR,a=ZR(i,r,t),o=ZR(i,s,t,!0),c=(i?a[i]:a).direction==="rtl";return de.jsx(f9,{theme:o,children:de.jsx(Wm.Provider,{value:a,children:de.jsx(m9,{value:c,children:de.jsx(A9,{value:i?a[i].components:a.components,children:e})})})})}const $R={theme:void 0};function y9(n){let e,t;return function(r){let s=e;return(s===void 0||r.theme!==t)&&($R.theme=r.theme,s=xk(n($R)),e=s,t=r.theme),s}}const NS="mode",FS="color-scheme",b9="data-color-scheme";function E9(n){const{defaultMode:e="system",defaultLightColorScheme:t="light",defaultDarkColorScheme:i="dark",modeStorageKey:r=NS,colorSchemeStorageKey:s=FS,attribute:a=b9,colorSchemeNode:o="document.documentElement",nonce:c}=n||{};let h="",d=a;if(a==="class"&&(d=".%s"),a==="data"&&(d="[data-%s]"),d.startsWith(".")){const m=d.substring(1);h+=`${o}.classList.remove('${m}'.replace('%s', light), '${m}'.replace('%s', dark));
      ${o}.classList.add('${m}'.replace('%s', colorScheme));`}const p=d.match(/\[([^\]]+)\]/);if(p){const[m,A]=p[1].split("=");A||(h+=`${o}.removeAttribute('${m}'.replace('%s', light));
      ${o}.removeAttribute('${m}'.replace('%s', dark));`),h+=`
      ${o}.setAttribute('${m}'.replace('%s', colorScheme), ${A?`${A}.replace('%s', colorScheme)`:'""'});`}else h+=`${o}.setAttribute('${d}', colorScheme);`;return de.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?c:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${r}') || '${e}';
  const dark = localStorage.getItem('${s}-dark') || '${i}';
  const light = localStorage.getItem('${s}-light') || '${t}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${h}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function x9(){}const C9=({key:n,storageWindow:e})=>(!e&&typeof window<"u"&&(e=window),{get(t){if(typeof window>"u")return;if(!e)return t;let i;try{i=e.localStorage.getItem(n)}catch{}return i||t},set:t=>{if(e)try{e.localStorage.setItem(n,t)}catch{}},subscribe:t=>{if(!e)return x9;const i=r=>{const s=r.newValue;r.key===n&&t(s)};return e.addEventListener("storage",i),()=>{e.removeEventListener("storage",i)}}});function CC(){}function eD(n){if(typeof window<"u"&&typeof window.matchMedia=="function"&&n==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function Bk(n,e){if(n.mode==="light"||n.mode==="system"&&n.systemMode==="light")return e("light");if(n.mode==="dark"||n.mode==="system"&&n.systemMode==="dark")return e("dark")}function _9(n){return Bk(n,e=>{if(e==="light")return n.lightColorScheme;if(e==="dark")return n.darkColorScheme})}function w9(n){const{defaultMode:e="light",defaultLightColorScheme:t,defaultDarkColorScheme:i,supportedColorSchemes:r=[],modeStorageKey:s=NS,colorSchemeStorageKey:a=FS,storageWindow:o=typeof window>"u"?void 0:window,storageManager:c=C9,noSsr:h=!1}=n,d=r.join(","),p=r.length>1,m=ie.useMemo(()=>c==null?void 0:c({key:s,storageWindow:o}),[c,s,o]),A=ie.useMemo(()=>c==null?void 0:c({key:`${a}-light`,storageWindow:o}),[c,a,o]),v=ie.useMemo(()=>c==null?void 0:c({key:`${a}-dark`,storageWindow:o}),[c,a,o]),[y,E]=ie.useState(()=>{const P=(m==null?void 0:m.get(e))||e,D=(A==null?void 0:A.get(t))||t,M=(v==null?void 0:v.get(i))||i;return{mode:P,systemMode:eD(P),lightColorScheme:D,darkColorScheme:M}}),[b,C]=ie.useState(h||!p);ie.useEffect(()=>{C(!0)},[]);const _=_9(y),w=ie.useCallback(P=>{E(D=>{if(P===D.mode)return D;const M=P??e;return m==null||m.set(M),{...D,mode:M,systemMode:eD(M)}})},[m,e]),T=ie.useCallback(P=>{P?typeof P=="string"?P&&!d.includes(P)?console.error(`\`${P}\` does not exist in \`theme.colorSchemes\`.`):E(D=>{const M={...D};return Bk(D,k=>{k==="light"&&(A==null||A.set(P),M.lightColorScheme=P),k==="dark"&&(v==null||v.set(P),M.darkColorScheme=P)}),M}):E(D=>{const M={...D},k=P.light===null?t:P.light,V=P.dark===null?i:P.dark;return k&&(d.includes(k)?(M.lightColorScheme=k,A==null||A.set(k)):console.error(`\`${k}\` does not exist in \`theme.colorSchemes\`.`)),V&&(d.includes(V)?(M.darkColorScheme=V,v==null||v.set(V)):console.error(`\`${V}\` does not exist in \`theme.colorSchemes\`.`)),M}):E(D=>(A==null||A.set(t),v==null||v.set(i),{...D,lightColorScheme:t,darkColorScheme:i}))},[d,A,v,t,i]),L=ie.useCallback(P=>{y.mode==="system"&&E(D=>{const M=P!=null&&P.matches?"dark":"light";return D.systemMode===M?D:{...D,systemMode:M}})},[y.mode]),R=ie.useRef(L);return R.current=L,ie.useEffect(()=>{if(typeof window.matchMedia!="function"||!p)return;const P=(...M)=>R.current(...M),D=window.matchMedia("(prefers-color-scheme: dark)");return D.addListener(P),P(D),()=>{D.removeListener(P)}},[p]),ie.useEffect(()=>{if(p){const P=(m==null?void 0:m.subscribe(k=>{(!k||["light","dark","system"].includes(k))&&w(k||e)}))||CC,D=(A==null?void 0:A.subscribe(k=>{(!k||d.match(k))&&T({light:k})}))||CC,M=(v==null?void 0:v.subscribe(k=>{(!k||d.match(k))&&T({dark:k})}))||CC;return()=>{P(),D(),M()}}},[T,w,d,e,o,p,m,A,v]),{...y,mode:b?y.mode:void 0,systemMode:b?y.systemMode:void 0,colorScheme:b?_:void 0,setMode:w,setColorScheme:T}}const S9="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function M9(n){const{themeId:e,theme:t={},modeStorageKey:i=NS,colorSchemeStorageKey:r=FS,disableTransitionOnChange:s=!1,defaultColorScheme:a,resolveTheme:o}=n,c={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},h=ie.createContext(void 0),d=()=>ie.useContext(h)||c,p={},m={};function A(b){var q,N,re,ge;const{children:C,theme:_,modeStorageKey:w=i,colorSchemeStorageKey:T=r,disableTransitionOnChange:L=s,storageManager:R,storageWindow:P=typeof window>"u"?void 0:window,documentNode:D=typeof document>"u"?void 0:document,colorSchemeNode:M=typeof document>"u"?void 0:document.documentElement,disableNestedContext:k=!1,disableStyleSheetGeneration:V=!1,defaultMode:X="system",forceThemeRerender:$=!1,noSsr:ae}=b,z=ie.useRef(!1),j=kS(),Z=ie.useContext(h),ce=!!Z&&!k,U=ie.useMemo(()=>_||(typeof t=="function"?t():t),[_]),se=U[e],me=se||U,{colorSchemes:be=p,components:xe=m,cssVarPrefix:Ue}=me,Ne=Object.keys(be).filter(Ie=>!!be[Ie]).join(","),Le=ie.useMemo(()=>Ne.split(","),[Ne]),ue=typeof a=="string"?a:a.light,Oe=typeof a=="string"?a:a.dark,Ge=be[ue]&&be[Oe]?X:((N=(q=be[me.defaultColorScheme])==null?void 0:q.palette)==null?void 0:N.mode)||((re=me.palette)==null?void 0:re.mode),{mode:je,setMode:Me,systemMode:Ce,lightColorScheme:Be,darkColorScheme:Y,colorScheme:ze,setColorScheme:ne}=w9({supportedColorSchemes:Le,defaultLightColorScheme:ue,defaultDarkColorScheme:Oe,modeStorageKey:w,colorSchemeStorageKey:T,defaultMode:Ge,storageManager:R,storageWindow:P,noSsr:ae});let I=je,O=ze;ce&&(I=Z.mode,O=Z.colorScheme);let Q=O||me.defaultColorScheme;me.vars&&!$&&(Q=me.defaultColorScheme);const W=ie.useMemo(()=>{var Ke;const Ie=((Ke=me.generateThemeVars)==null?void 0:Ke.call(me))||me.vars,we={...me,components:xe,colorSchemes:be,cssVarPrefix:Ue,vars:Ie};if(typeof we.generateSpacing=="function"&&(we.spacing=we.generateSpacing()),Q){const Fe=be[Q];Fe&&typeof Fe=="object"&&Object.keys(Fe).forEach(Xe=>{Fe[Xe]&&typeof Fe[Xe]=="object"?we[Xe]={...we[Xe],...Fe[Xe]}:we[Xe]=Fe[Xe]})}return o?o(we):we},[me,Q,xe,be,Ue]),ee=me.colorSchemeSelector;r9(()=>{if(O&&M&&ee&&ee!=="media"){const Ie=ee;let we=ee;if(Ie==="class"&&(we=".%s"),Ie==="data"&&(we="[data-%s]"),Ie!=null&&Ie.startsWith("data-")&&!Ie.includes("%s")&&(we=`[${Ie}="%s"]`),we.startsWith("."))M.classList.remove(...Le.map(Ke=>we.substring(1).replace("%s",Ke))),M.classList.add(we.substring(1).replace("%s",O));else{const Ke=we.replace("%s",O).match(/\[([^\]]+)\]/);if(Ke){const[Fe,Xe]=Ke[1].split("=");Xe||Le.forEach(ht=>{M.removeAttribute(Fe.replace(O,ht))}),M.setAttribute(Fe,Xe?Xe.replace(/"|'/g,""):"")}else M.setAttribute(we,O)}}},[O,ee,M,Le]),ie.useEffect(()=>{let Ie;if(L&&z.current&&D){const we=D.createElement("style");we.appendChild(D.createTextNode(S9)),D.head.appendChild(we),window.getComputedStyle(D.body),Ie=setTimeout(()=>{D.head.removeChild(we)},1)}return()=>{clearTimeout(Ie)}},[O,L,D]),ie.useEffect(()=>(z.current=!0,()=>{z.current=!1}),[]);const he=ie.useMemo(()=>({allColorSchemes:Le,colorScheme:O,darkColorScheme:Y,lightColorScheme:Be,mode:I,setColorScheme:ne,setMode:Me,systemMode:Ce}),[Le,O,Y,Be,I,ne,Me,Ce,W.colorSchemeSelector]);let Te=!0;(V||me.cssVariables===!1||ce&&(j==null?void 0:j.cssVarPrefix)===Ue)&&(Te=!1);const Ye=de.jsxs(ie.Fragment,{children:[de.jsx(Tk,{themeId:se?e:void 0,theme:W,children:C}),Te&&de.jsx(hk,{styles:((ge=W.generateStyleSheets)==null?void 0:ge.call(W))||[]})]});return ce?Ye:de.jsx(h.Provider,{value:he,children:Ye})}const v=typeof a=="string"?a:a.light,y=typeof a=="string"?a:a.dark;return{CssVarsProvider:A,useColorScheme:d,getInitColorSchemeScript:b=>E9({colorSchemeStorageKey:r,defaultLightColorScheme:v,defaultDarkColorScheme:y,modeStorageKey:i,...b})}}function T9(n=""){function e(...i){if(!i.length)return"";const r=i[0];return typeof r=="string"&&!r.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${n?`${n}-`:""}${r}${e(...i.slice(1))})`:`, ${r}`}return(i,...r)=>`var(--${n?`${n}-`:""}${i}${e(...r)})`}const tD=(n,e,t,i=[])=>{let r=n;e.forEach((s,a)=>{a===e.length-1?Array.isArray(r)?r[Number(s)]=t:r&&typeof r=="object"&&(r[s]=t):r&&typeof r=="object"&&(r[s]||(r[s]=i.includes(s)?[]:{}),r=r[s])})},B9=(n,e,t)=>{function i(r,s=[],a=[]){Object.entries(r).forEach(([o,c])=>{(!t||t&&!t([...s,o]))&&c!=null&&(typeof c=="object"&&Object.keys(c).length>0?i(c,[...s,o],Array.isArray(c)?[...a,o]:a):e([...s,o],c,a))})}i(n)},I9=(n,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(i=>n.includes(i))||n[n.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function _C(n,e){const{prefix:t,shouldSkipGeneratingVar:i}=e||{},r={},s={},a={};return B9(n,(o,c,h)=>{if((typeof c=="string"||typeof c=="number")&&(!i||!i(o,c))){const d=`--${t?`${t}-`:""}${o.join("-")}`,p=I9(o,c);Object.assign(r,{[d]:p}),tD(s,o,`var(${d})`,h),tD(a,o,`var(${d}, ${p})`,h)}},o=>o[0]==="vars"),{css:r,vars:s,varsWithDefaults:a}}function R9(n,e={}){const{getSelector:t=E,disableCssColorScheme:i,colorSchemeSelector:r}=e,{colorSchemes:s={},components:a,defaultColorScheme:o="light",...c}=n,{vars:h,css:d,varsWithDefaults:p}=_C(c,e);let m=p;const A={},{[o]:v,...y}=s;if(Object.entries(y||{}).forEach(([_,w])=>{const{vars:T,css:L,varsWithDefaults:R}=_C(w,e);m=Nr(m,R),A[_]={css:L,vars:T}}),v){const{css:_,vars:w,varsWithDefaults:T}=_C(v,e);m=Nr(m,T),A[o]={css:_,vars:w}}function E(_,w){var L,R;let T=r;if(r==="class"&&(T=".%s"),r==="data"&&(T="[data-%s]"),r!=null&&r.startsWith("data-")&&!r.includes("%s")&&(T=`[${r}="%s"]`),_){if(T==="media")return n.defaultColorScheme===_?":root":{[`@media (prefers-color-scheme: ${((R=(L=s[_])==null?void 0:L.palette)==null?void 0:R.mode)||_})`]:{":root":w}};if(T)return n.defaultColorScheme===_?`:root, ${T.replace("%s",String(_))}`:T.replace("%s",String(_))}return":root"}return{vars:m,generateThemeVars:()=>{let _={...h};return Object.entries(A).forEach(([,{vars:w}])=>{_=Nr(_,w)}),_},generateStyleSheets:()=>{var P,D;const _=[],w=n.defaultColorScheme||"light";function T(M,k){Object.keys(k).length&&_.push(typeof M=="string"?{[M]:{...k}}:M)}T(t(void 0,{...d}),d);const{[w]:L,...R}=A;if(L){const{css:M}=L,k=(D=(P=s[w])==null?void 0:P.palette)==null?void 0:D.mode,V=!i&&k?{colorScheme:k,...M}:{...M};T(t(w,{...V}),V)}return Object.entries(R).forEach(([M,{css:k}])=>{var $,ae;const V=(ae=($=s[M])==null?void 0:$.palette)==null?void 0:ae.mode,X=!i&&V?{colorScheme:V,...k}:{...k};T(t(M,{...X}),X)}),_}}}function D9(n){return function(t){return n==="media"?`@media (prefers-color-scheme: ${t})`:n?n.startsWith("data-")&&!n.includes("%s")?`[${n}="${t}"] &`:n==="class"?`.${t} &`:n==="data"?`[data-${t}] &`:`${n.replace("%s",t)} &`:"&"}}const L9=tb(),O9=t9("div",{name:"MuiStack",slot:"Root",overridesResolver:(n,e)=>e.root});function P9(n){return i9({props:n,name:"MuiStack",defaultTheme:L9})}function U9(n,e){const t=ie.Children.toArray(n).filter(Boolean);return t.reduce((i,r,s)=>(i.push(r),s<t.length-1&&i.push(ie.cloneElement(e,{key:`separator-${s}`})),i),[])}const k9=n=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[n],N9=({ownerState:n,theme:e})=>{let t={display:"flex",flexDirection:"column",...ya({theme:e},EC({values:n.direction,breakpoints:e.breakpoints.values}),i=>({flexDirection:i}))};if(n.spacing){const i=Yy(e),r=Object.keys(e.breakpoints.values).reduce((c,h)=>((typeof n.spacing=="object"&&n.spacing[h]!=null||typeof n.direction=="object"&&n.direction[h]!=null)&&(c[h]=!0),c),{}),s=EC({values:n.direction,base:r}),a=EC({values:n.spacing,base:r});typeof s=="object"&&Object.keys(s).forEach((c,h,d)=>{if(!s[c]){const m=h>0?s[d[h-1]]:"column";s[c]=m}}),t=Nr(t,ya({theme:e},a,(c,h)=>n.useFlexGap?{gap:Tu(i,c)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${k9(h?s[h]:n.direction)}`]:Tu(i,c)}}))}return t=$G(e.breakpoints,t),t};function F9(n={}){const{createStyledComponent:e=O9,useThemeProps:t=P9,componentName:i="MuiStack"}=n,r=()=>Nd({root:["root"]},c=>ku(i,c),{}),s=e(N9);return ie.forwardRef(function(c,h){const d=t(c),p=LS(d),{component:m="div",direction:A="column",spacing:v=0,divider:y,children:E,className:b,useFlexGap:C=!1,..._}=p,w={direction:A,spacing:v,useFlexGap:C},T=r();return de.jsx(s,{as:m,ownerState:w,ref:h,className:Uu(T.root,b),..._,children:y?U9(E,y):E})})}function Ik(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:fm.white,default:fm.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const Q9=Ik();function Rk(){return{text:{primary:fm.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:fm.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const nD=Rk();function iD(n,e,t,i){const r=i.light||i,s=i.dark||i*1.5;n[e]||(n.hasOwnProperty(t)?n[e]=n[t]:e==="light"?n.light=US(n.main,r):e==="dark"&&(n.dark=PS(n.main,s)))}function z9(n="light"){return n==="dark"?{main:wh[200],light:wh[50],dark:wh[400]}:{main:wh[700],light:wh[400],dark:wh[800]}}function H9(n="light"){return n==="dark"?{main:_h[200],light:_h[50],dark:_h[400]}:{main:_h[500],light:_h[300],dark:_h[700]}}function G9(n="light"){return n==="dark"?{main:Ch[500],light:Ch[300],dark:Ch[700]}:{main:Ch[700],light:Ch[400],dark:Ch[800]}}function V9(n="light"){return n==="dark"?{main:Sh[400],light:Sh[300],dark:Sh[700]}:{main:Sh[700],light:Sh[500],dark:Sh[900]}}function W9(n="light"){return n==="dark"?{main:Mh[400],light:Mh[300],dark:Mh[700]}:{main:Mh[800],light:Mh[500],dark:Mh[900]}}function q9(n="light"){return n==="dark"?{main:qf[400],light:qf[300],dark:qf[700]}:{main:"#ed6c02",light:qf[500],dark:qf[900]}}function QS(n){const{mode:e="light",contrastThreshold:t=3,tonalOffset:i=.2,...r}=n,s=n.primary||z9(e),a=n.secondary||H9(e),o=n.error||G9(e),c=n.info||V9(e),h=n.success||W9(e),d=n.warning||q9(e);function p(y){return l9(y,nD.text.primary)>=t?nD.text.primary:Q9.text.primary}const m=({color:y,name:E,mainShade:b=500,lightShade:C=300,darkShade:_=700})=>{if(y={...y},!y.main&&y[b]&&(y.main=y[b]),!y.hasOwnProperty("main"))throw new Error(Mu(11,E?` (${E})`:"",b));if(typeof y.main!="string")throw new Error(Mu(12,E?` (${E})`:"",JSON.stringify(y.main)));return iD(y,"light",C,i),iD(y,"dark",_,i),y.contrastText||(y.contrastText=p(y.main)),y};let A;return e==="light"?A=Ik():e==="dark"&&(A=Rk()),Nr({common:{...fm},mode:e,primary:m({color:s,name:"primary"}),secondary:m({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:m({color:o,name:"error"}),warning:m({color:d,name:"warning"}),info:m({color:c,name:"info"}),success:m({color:h,name:"success"}),grey:GH,contrastThreshold:t,getContrastText:p,augmentColor:m,tonalOffset:i,...A},r)}function j9(n){const e={};return Object.entries(n).forEach(i=>{const[r,s]=i;typeof s=="object"&&(e[r]=`${s.fontStyle?`${s.fontStyle} `:""}${s.fontVariant?`${s.fontVariant} `:""}${s.fontWeight?`${s.fontWeight} `:""}${s.fontStretch?`${s.fontStretch} `:""}${s.fontSize||""}${s.lineHeight?`/${s.lineHeight} `:""}${s.fontFamily||""}`)}),e}function X9(n,e){return{toolbar:{minHeight:56,[n.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[n.up("sm")]:{minHeight:64}},...e}}function Y9(n){return Math.round(n*1e5)/1e5}const rD={textTransform:"uppercase"},sD='"Roboto", "Helvetica", "Arial", sans-serif';function Dk(n,e){const{fontFamily:t=sD,fontSize:i=14,fontWeightLight:r=300,fontWeightRegular:s=400,fontWeightMedium:a=500,fontWeightBold:o=700,htmlFontSize:c=16,allVariants:h,pxToRem:d,...p}=typeof e=="function"?e(n):e,m=i/14,A=d||(E=>`${E/c*m}rem`),v=(E,b,C,_,w)=>({fontFamily:t,fontWeight:E,fontSize:A(b),lineHeight:C,...t===sD?{letterSpacing:`${Y9(_/b)}em`}:{},...w,...h}),y={h1:v(r,96,1.167,-1.5),h2:v(r,60,1.2,-.5),h3:v(s,48,1.167,0),h4:v(s,34,1.235,.25),h5:v(s,24,1.334,0),h6:v(a,20,1.6,.15),subtitle1:v(s,16,1.75,.15),subtitle2:v(a,14,1.57,.1),body1:v(s,16,1.5,.15),body2:v(s,14,1.43,.15),button:v(a,14,1.75,.4,rD),caption:v(s,12,1.66,.4),overline:v(s,12,2.66,1,rD),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Nr({htmlFontSize:c,pxToRem:A,fontFamily:t,fontSize:i,fontWeightLight:r,fontWeightRegular:s,fontWeightMedium:a,fontWeightBold:o,...y},p,{clone:!1})}const K9=.2,J9=.14,Z9=.12;function Wn(...n){return[`${n[0]}px ${n[1]}px ${n[2]}px ${n[3]}px rgba(0,0,0,${K9})`,`${n[4]}px ${n[5]}px ${n[6]}px ${n[7]}px rgba(0,0,0,${J9})`,`${n[8]}px ${n[9]}px ${n[10]}px ${n[11]}px rgba(0,0,0,${Z9})`].join(",")}const $9=["none",Wn(0,2,1,-1,0,1,1,0,0,1,3,0),Wn(0,3,1,-2,0,2,2,0,0,1,5,0),Wn(0,3,3,-2,0,3,4,0,0,1,8,0),Wn(0,2,4,-1,0,4,5,0,0,1,10,0),Wn(0,3,5,-1,0,5,8,0,0,1,14,0),Wn(0,3,5,-1,0,6,10,0,0,1,18,0),Wn(0,4,5,-2,0,7,10,1,0,2,16,1),Wn(0,5,5,-3,0,8,10,1,0,3,14,2),Wn(0,5,6,-3,0,9,12,1,0,3,16,2),Wn(0,6,6,-3,0,10,14,1,0,4,18,3),Wn(0,6,7,-4,0,11,15,1,0,4,20,3),Wn(0,7,8,-4,0,12,17,2,0,5,22,4),Wn(0,7,8,-4,0,13,19,2,0,5,24,4),Wn(0,7,9,-4,0,14,21,2,0,5,26,4),Wn(0,8,9,-5,0,15,22,2,0,6,28,5),Wn(0,8,10,-5,0,16,24,2,0,6,30,5),Wn(0,8,11,-5,0,17,26,2,0,6,32,5),Wn(0,9,11,-5,0,18,28,2,0,7,34,6),Wn(0,9,12,-6,0,19,29,2,0,7,36,6),Wn(0,10,13,-6,0,20,31,3,0,8,38,7),Wn(0,10,13,-6,0,21,33,3,0,8,40,7),Wn(0,10,14,-6,0,22,35,3,0,8,42,7),Wn(0,11,14,-7,0,23,36,3,0,9,44,8),Wn(0,11,15,-7,0,24,38,3,0,9,46,8)],e7={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},t7={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function aD(n){return`${Math.round(n)}ms`}function n7(n){if(!n)return 0;const e=n/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function i7(n){const e={...e7,...n.easing},t={...t7,...n.duration};return{getAutoHeightDuration:n7,create:(r=["all"],s={})=>{const{duration:a=t.standard,easing:o=e.easeInOut,delay:c=0,...h}=s;return(Array.isArray(r)?r:[r]).map(d=>`${d} ${typeof a=="string"?a:aD(a)} ${o} ${typeof c=="string"?c:aD(c)}`).join(",")},...n,easing:e,duration:t}}const r7={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function s7(n){return Fa(n)||typeof n>"u"||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||Array.isArray(n)}function Lk(n={}){const e={...n};function t(i){const r=Object.entries(i);for(let s=0;s<r.length;s++){const[a,o]=r[s];!s7(o)||a.startsWith("unstable_")?delete i[a]:Fa(o)&&(i[a]={...o},t(i[a]))}}return t(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function W1(n={},...e){const{breakpoints:t,mixins:i={},spacing:r,palette:s={},transitions:a={},typography:o={},shape:c,...h}=n;if(n.vars&&n.generateThemeVars===void 0)throw new Error(Mu(20));const d=QS(s),p=tb(n);let m=Nr(p,{mixins:X9(p.breakpoints,i),palette:d,shadows:$9.slice(),typography:Dk(d,o),transitions:i7(a),zIndex:{...r7}});return m=Nr(m,h),m=e.reduce((A,v)=>Nr(A,v),m),m.unstable_sxConfig={...jm,...h==null?void 0:h.unstable_sxConfig},m.unstable_sx=function(v){return tc({sx:v,theme:this})},m.toRuntimeSource=Lk,m}function q1(n){let e;return n<1?e=5.11916*n**2:e=4.5*Math.log(n+1)+2,Math.round(e*10)/1e3}const a7=[...Array(25)].map((n,e)=>{if(e===0)return"none";const t=q1(e);return`linear-gradient(rgba(255 255 255 / ${t}), rgba(255 255 255 / ${t}))`});function Ok(n){return{inputPlaceholder:n==="dark"?.5:.42,inputUnderline:n==="dark"?.7:.42,switchTrackDisabled:n==="dark"?.2:.12,switchTrack:n==="dark"?.3:.38}}function Pk(n){return n==="dark"?a7:[]}function o7(n){const{palette:e={mode:"light"},opacity:t,overlays:i,...r}=n,s=QS(e);return{palette:s,opacity:{...Ok(s.mode),...t},overlays:i||Pk(s.mode),...r}}function l7(n){var e;return!!n[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!n[0].match(/sxConfig$/)||n[0]==="palette"&&!!((e=n[1])!=null&&e.match(/(mode|contrastThreshold|tonalOffset)/))}const c7=n=>[...[...Array(25)].map((e,t)=>`--${n?`${n}-`:""}overlays-${t}`),`--${n?`${n}-`:""}palette-AppBar-darkBg`,`--${n?`${n}-`:""}palette-AppBar-darkColor`],u7=n=>(e,t)=>{const i=n.rootSelector||":root",r=n.colorSchemeSelector;let s=r;if(r==="class"&&(s=".%s"),r==="data"&&(s="[data-%s]"),r!=null&&r.startsWith("data-")&&!r.includes("%s")&&(s=`[${r}="%s"]`),n.defaultColorScheme===e){if(e==="dark"){const a={};return c7(n.cssVarPrefix).forEach(o=>{a[o]=t[o],delete t[o]}),s==="media"?{[i]:t,"@media (prefers-color-scheme: dark)":{[i]:a}}:s?{[s.replace("%s",e)]:a,[`${i}, ${s.replace("%s",e)}`]:t}:{[i]:{...t,...a}}}if(s&&s!=="media")return`${i}, ${s.replace("%s",String(e))}`}else if(e){if(s==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[i]:t}};if(s)return s.replace("%s",String(e))}return i};function h7(n,e){e.forEach(t=>{n[t]||(n[t]={})})}function De(n,e,t){!n[e]&&t&&(n[e]=t)}function Tp(n){return typeof n!="string"||!n.startsWith("hsl")?n:wk(n)}function Eo(n,e){`${e}Channel`in n||(n[`${e}Channel`]=Mp(Tp(n[e])))}function d7(n){return typeof n=="number"?`${n}px`:typeof n=="string"||typeof n=="function"||Array.isArray(n)?n:"8px"}const Ia=n=>{try{return n()}catch{}},f7=(n="mui")=>T9(n);function wC(n,e,t,i){if(!e)return;e=e===!0?{}:e;const r=i==="dark"?"dark":"light";if(!t){n[i]=o7({...e,palette:{mode:r,...e==null?void 0:e.palette}});return}const{palette:s,...a}=W1({...t,palette:{mode:r,...e==null?void 0:e.palette}});return n[i]={...e,palette:s,opacity:{...Ok(r),...e==null?void 0:e.opacity},overlays:(e==null?void 0:e.overlays)||Pk(r)},a}function p7(n={},...e){const{colorSchemes:t={light:!0},defaultColorScheme:i,disableCssColorScheme:r=!1,cssVarPrefix:s="mui",shouldSkipGeneratingVar:a=l7,colorSchemeSelector:o=t.light&&t.dark?"media":void 0,rootSelector:c=":root",...h}=n,d=Object.keys(t)[0],p=i||(t.light&&d!=="light"?"light":d),m=f7(s),{[p]:A,light:v,dark:y,...E}=t,b={...E};let C=A;if((p==="dark"&&!("dark"in t)||p==="light"&&!("light"in t))&&(C=!0),!C)throw new Error(Mu(21,p));const _=wC(b,C,h,p);v&&!b.light&&wC(b,v,void 0,"light"),y&&!b.dark&&wC(b,y,void 0,"dark");let w={defaultColorScheme:p,..._,cssVarPrefix:s,colorSchemeSelector:o,rootSelector:c,getCssVar:m,colorSchemes:b,font:{...j9(_.typography),..._.font},spacing:d7(h.spacing)};Object.keys(w.colorSchemes).forEach(D=>{const M=w.colorSchemes[D].palette,k=V=>{const X=V.split("-"),$=X[1],ae=X[2];return m(V,M[$][ae])};if(M.mode==="light"&&(De(M.common,"background","#fff"),De(M.common,"onBackground","#000")),M.mode==="dark"&&(De(M.common,"background","#000"),De(M.common,"onBackground","#fff")),h7(M,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),M.mode==="light"){De(M.Alert,"errorColor",Un(M.error.light,.6)),De(M.Alert,"infoColor",Un(M.info.light,.6)),De(M.Alert,"successColor",Un(M.success.light,.6)),De(M.Alert,"warningColor",Un(M.warning.light,.6)),De(M.Alert,"errorFilledBg",k("palette-error-main")),De(M.Alert,"infoFilledBg",k("palette-info-main")),De(M.Alert,"successFilledBg",k("palette-success-main")),De(M.Alert,"warningFilledBg",k("palette-warning-main")),De(M.Alert,"errorFilledColor",Ia(()=>M.getContrastText(M.error.main))),De(M.Alert,"infoFilledColor",Ia(()=>M.getContrastText(M.info.main))),De(M.Alert,"successFilledColor",Ia(()=>M.getContrastText(M.success.main))),De(M.Alert,"warningFilledColor",Ia(()=>M.getContrastText(M.warning.main))),De(M.Alert,"errorStandardBg",kn(M.error.light,.9)),De(M.Alert,"infoStandardBg",kn(M.info.light,.9)),De(M.Alert,"successStandardBg",kn(M.success.light,.9)),De(M.Alert,"warningStandardBg",kn(M.warning.light,.9)),De(M.Alert,"errorIconColor",k("palette-error-main")),De(M.Alert,"infoIconColor",k("palette-info-main")),De(M.Alert,"successIconColor",k("palette-success-main")),De(M.Alert,"warningIconColor",k("palette-warning-main")),De(M.AppBar,"defaultBg",k("palette-grey-100")),De(M.Avatar,"defaultBg",k("palette-grey-400")),De(M.Button,"inheritContainedBg",k("palette-grey-300")),De(M.Button,"inheritContainedHoverBg",k("palette-grey-A100")),De(M.Chip,"defaultBorder",k("palette-grey-400")),De(M.Chip,"defaultAvatarColor",k("palette-grey-700")),De(M.Chip,"defaultIconColor",k("palette-grey-700")),De(M.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),De(M.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),De(M.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),De(M.LinearProgress,"primaryBg",kn(M.primary.main,.62)),De(M.LinearProgress,"secondaryBg",kn(M.secondary.main,.62)),De(M.LinearProgress,"errorBg",kn(M.error.main,.62)),De(M.LinearProgress,"infoBg",kn(M.info.main,.62)),De(M.LinearProgress,"successBg",kn(M.success.main,.62)),De(M.LinearProgress,"warningBg",kn(M.warning.main,.62)),De(M.Skeleton,"bg",`rgba(${k("palette-text-primaryChannel")} / 0.11)`),De(M.Slider,"primaryTrack",kn(M.primary.main,.62)),De(M.Slider,"secondaryTrack",kn(M.secondary.main,.62)),De(M.Slider,"errorTrack",kn(M.error.main,.62)),De(M.Slider,"infoTrack",kn(M.info.main,.62)),De(M.Slider,"successTrack",kn(M.success.main,.62)),De(M.Slider,"warningTrack",kn(M.warning.main,.62));const V=Bg(M.background.default,.8);De(M.SnackbarContent,"bg",V),De(M.SnackbarContent,"color",Ia(()=>M.getContrastText(V))),De(M.SpeedDialAction,"fabHoverBg",Bg(M.background.paper,.15)),De(M.StepConnector,"border",k("palette-grey-400")),De(M.StepContent,"border",k("palette-grey-400")),De(M.Switch,"defaultColor",k("palette-common-white")),De(M.Switch,"defaultDisabledColor",k("palette-grey-100")),De(M.Switch,"primaryDisabledColor",kn(M.primary.main,.62)),De(M.Switch,"secondaryDisabledColor",kn(M.secondary.main,.62)),De(M.Switch,"errorDisabledColor",kn(M.error.main,.62)),De(M.Switch,"infoDisabledColor",kn(M.info.main,.62)),De(M.Switch,"successDisabledColor",kn(M.success.main,.62)),De(M.Switch,"warningDisabledColor",kn(M.warning.main,.62)),De(M.TableCell,"border",kn(Tg(M.divider,1),.88)),De(M.Tooltip,"bg",Tg(M.grey[700],.92))}if(M.mode==="dark"){De(M.Alert,"errorColor",kn(M.error.light,.6)),De(M.Alert,"infoColor",kn(M.info.light,.6)),De(M.Alert,"successColor",kn(M.success.light,.6)),De(M.Alert,"warningColor",kn(M.warning.light,.6)),De(M.Alert,"errorFilledBg",k("palette-error-dark")),De(M.Alert,"infoFilledBg",k("palette-info-dark")),De(M.Alert,"successFilledBg",k("palette-success-dark")),De(M.Alert,"warningFilledBg",k("palette-warning-dark")),De(M.Alert,"errorFilledColor",Ia(()=>M.getContrastText(M.error.dark))),De(M.Alert,"infoFilledColor",Ia(()=>M.getContrastText(M.info.dark))),De(M.Alert,"successFilledColor",Ia(()=>M.getContrastText(M.success.dark))),De(M.Alert,"warningFilledColor",Ia(()=>M.getContrastText(M.warning.dark))),De(M.Alert,"errorStandardBg",Un(M.error.light,.9)),De(M.Alert,"infoStandardBg",Un(M.info.light,.9)),De(M.Alert,"successStandardBg",Un(M.success.light,.9)),De(M.Alert,"warningStandardBg",Un(M.warning.light,.9)),De(M.Alert,"errorIconColor",k("palette-error-main")),De(M.Alert,"infoIconColor",k("palette-info-main")),De(M.Alert,"successIconColor",k("palette-success-main")),De(M.Alert,"warningIconColor",k("palette-warning-main")),De(M.AppBar,"defaultBg",k("palette-grey-900")),De(M.AppBar,"darkBg",k("palette-background-paper")),De(M.AppBar,"darkColor",k("palette-text-primary")),De(M.Avatar,"defaultBg",k("palette-grey-600")),De(M.Button,"inheritContainedBg",k("palette-grey-800")),De(M.Button,"inheritContainedHoverBg",k("palette-grey-700")),De(M.Chip,"defaultBorder",k("palette-grey-700")),De(M.Chip,"defaultAvatarColor",k("palette-grey-300")),De(M.Chip,"defaultIconColor",k("palette-grey-300")),De(M.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),De(M.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),De(M.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),De(M.LinearProgress,"primaryBg",Un(M.primary.main,.5)),De(M.LinearProgress,"secondaryBg",Un(M.secondary.main,.5)),De(M.LinearProgress,"errorBg",Un(M.error.main,.5)),De(M.LinearProgress,"infoBg",Un(M.info.main,.5)),De(M.LinearProgress,"successBg",Un(M.success.main,.5)),De(M.LinearProgress,"warningBg",Un(M.warning.main,.5)),De(M.Skeleton,"bg",`rgba(${k("palette-text-primaryChannel")} / 0.13)`),De(M.Slider,"primaryTrack",Un(M.primary.main,.5)),De(M.Slider,"secondaryTrack",Un(M.secondary.main,.5)),De(M.Slider,"errorTrack",Un(M.error.main,.5)),De(M.Slider,"infoTrack",Un(M.info.main,.5)),De(M.Slider,"successTrack",Un(M.success.main,.5)),De(M.Slider,"warningTrack",Un(M.warning.main,.5));const V=Bg(M.background.default,.98);De(M.SnackbarContent,"bg",V),De(M.SnackbarContent,"color",Ia(()=>M.getContrastText(V))),De(M.SpeedDialAction,"fabHoverBg",Bg(M.background.paper,.15)),De(M.StepConnector,"border",k("palette-grey-600")),De(M.StepContent,"border",k("palette-grey-600")),De(M.Switch,"defaultColor",k("palette-grey-300")),De(M.Switch,"defaultDisabledColor",k("palette-grey-600")),De(M.Switch,"primaryDisabledColor",Un(M.primary.main,.55)),De(M.Switch,"secondaryDisabledColor",Un(M.secondary.main,.55)),De(M.Switch,"errorDisabledColor",Un(M.error.main,.55)),De(M.Switch,"infoDisabledColor",Un(M.info.main,.55)),De(M.Switch,"successDisabledColor",Un(M.success.main,.55)),De(M.Switch,"warningDisabledColor",Un(M.warning.main,.55)),De(M.TableCell,"border",Un(Tg(M.divider,1),.68)),De(M.Tooltip,"bg",Tg(M.grey[700],.92))}Eo(M.background,"default"),Eo(M.background,"paper"),Eo(M.common,"background"),Eo(M.common,"onBackground"),Eo(M,"divider"),Object.keys(M).forEach(V=>{const X=M[V];V!=="tonalOffset"&&X&&typeof X=="object"&&(X.main&&De(M[V],"mainChannel",Mp(Tp(X.main))),X.light&&De(M[V],"lightChannel",Mp(Tp(X.light))),X.dark&&De(M[V],"darkChannel",Mp(Tp(X.dark))),X.contrastText&&De(M[V],"contrastTextChannel",Mp(Tp(X.contrastText))),V==="text"&&(Eo(M[V],"primary"),Eo(M[V],"secondary")),V==="action"&&(X.active&&Eo(M[V],"active"),X.selected&&Eo(M[V],"selected")))})}),w=e.reduce((D,M)=>Nr(D,M),w);const T={prefix:s,disableCssColorScheme:r,shouldSkipGeneratingVar:a,getSelector:u7(w)},{vars:L,generateThemeVars:R,generateStyleSheets:P}=R9(w,T);return w.vars=L,Object.entries(w.colorSchemes[w.defaultColorScheme]).forEach(([D,M])=>{w[D]=M}),w.generateThemeVars=R,w.generateStyleSheets=P,w.generateSpacing=function(){return vk(h.spacing,Yy(this))},w.getColorSchemeSelector=D9(o),w.spacing=w.generateSpacing(),w.shouldSkipGeneratingVar=a,w.unstable_sxConfig={...jm,...h==null?void 0:h.unstable_sxConfig},w.unstable_sx=function(M){return tc({sx:M,theme:this})},w.toRuntimeSource=Lk,w}function oD(n,e,t){n.colorSchemes&&t&&(n.colorSchemes[e]={...t!==!0&&t,palette:QS({...t===!0?{}:t.palette,mode:e})})}function rb(n={},...e){const{palette:t,cssVariables:i=!1,colorSchemes:r=t?void 0:{light:!0},defaultColorScheme:s=t==null?void 0:t.mode,...a}=n,o=s||"light",c=r==null?void 0:r[o],h={...r,...t?{[o]:{...typeof c!="boolean"&&c,palette:t}}:void 0};if(i===!1){if(!("colorSchemes"in n))return W1(n,...e);let d=t;"palette"in n||h[o]&&(h[o]!==!0?d=h[o].palette:o==="dark"&&(d={mode:"dark"}));const p=W1({...n,palette:d},...e);return p.defaultColorScheme=o,p.colorSchemes=h,p.palette.mode==="light"&&(p.colorSchemes.light={...h.light!==!0&&h.light,palette:p.palette},oD(p,"dark",h.dark)),p.palette.mode==="dark"&&(p.colorSchemes.dark={...h.dark!==!0&&h.dark,palette:p.palette},oD(p,"light",h.light)),p}return!t&&!("light"in h)&&o==="light"&&(h.light=!0),p7({...a,colorSchemes:h,defaultColorScheme:o,...typeof i!="boolean"&&i},...e)}const zS=rb();function m7(){const n=nb(zS);return n[Xa]||n}function A7(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}const g7=n=>A7(n)&&n!=="classes",Fd=_k({themeId:Xa,defaultTheme:zS,rootShouldForwardProp:g7});function SC({theme:n,...e}){const t=Xa in n?n[Xa]:void 0;return de.jsx(Tk,{...e,themeId:t?Xa:void 0,theme:t||n})}const Ig={colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:v7}=M9({themeId:Xa,theme:()=>rb({cssVariables:!0}),colorSchemeStorageKey:Ig.colorSchemeStorageKey,modeStorageKey:Ig.modeStorageKey,defaultColorScheme:{light:Ig.defaultLightColorScheme,dark:Ig.defaultDarkColorScheme},resolveTheme:n=>{const e={...n,typography:Dk(n.palette,n.typography)};return e.unstable_sx=function(i){return tc({sx:i,theme:this})},e}}),y7=v7;function b7({theme:n,...e}){if(typeof n=="function")return de.jsx(SC,{theme:n,...e});const t=Xa in n?n[Xa]:n;return"colorSchemes"in t?de.jsx(y7,{theme:n,...e}):"vars"in t?de.jsx(SC,{theme:n,...e}):de.jsx(SC,{theme:{...n,vars:null},...e})}function E7(n){return de.jsx(GV,{...n,defaultTheme:zS,themeId:Xa})}function Uk(n){return function(t){return de.jsx(E7,{styles:typeof n=="function"?i=>n({theme:i,...t}):n})}}function x7(){return LS}const HS=y9;function Nu(n){return v9(n)}function C7(n){return ku("MuiSvgIcon",n)}kd("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const _7=n=>{const{color:e,fontSize:t,classes:i}=n,r={root:["root",e!=="inherit"&&`color${Zo(e)}`,`fontSize${Zo(t)}`]};return Nd(r,C7,i)},w7=Fd("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.color!=="inherit"&&e[`color${Zo(t.color)}`],e[`fontSize${Zo(t.fontSize)}`]]}})(HS(({theme:n})=>{var e,t,i,r,s,a,o,c,h,d,p,m,A,v;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(r=(e=n.transitions)==null?void 0:e.create)==null?void 0:r.call(e,"fill",{duration:(i=(t=(n.vars??n).transitions)==null?void 0:t.duration)==null?void 0:i.shorter}),variants:[{props:y=>!y.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((a=(s=n.typography)==null?void 0:s.pxToRem)==null?void 0:a.call(s,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((c=(o=n.typography)==null?void 0:o.pxToRem)==null?void 0:c.call(o,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((d=(h=n.typography)==null?void 0:h.pxToRem)==null?void 0:d.call(h,35))||"2.1875rem"}},...Object.entries((n.vars??n).palette).filter(([,y])=>y&&y.main).map(([y])=>{var E,b;return{props:{color:y},style:{color:(b=(E=(n.vars??n).palette)==null?void 0:E[y])==null?void 0:b.main}}}),{props:{color:"action"},style:{color:(m=(p=(n.vars??n).palette)==null?void 0:p.action)==null?void 0:m.active}},{props:{color:"disabled"},style:{color:(v=(A=(n.vars??n).palette)==null?void 0:A.action)==null?void 0:v.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),j1=ie.forwardRef(function(e,t){const i=Nu({props:e,name:"MuiSvgIcon"}),{children:r,className:s,color:a="inherit",component:o="svg",fontSize:c="medium",htmlColor:h,inheritViewBox:d=!1,titleAccess:p,viewBox:m="0 0 24 24",...A}=i,v=ie.isValidElement(r)&&r.type==="svg",y={...i,color:a,component:o,fontSize:c,instanceFontSize:e.fontSize,inheritViewBox:d,viewBox:m,hasSvgAsChild:v},E={};d||(E.viewBox=m);const b=_7(y);return de.jsxs(w7,{as:o,className:Uu(b.root,s),focusable:"false",color:h,"aria-hidden":p?void 0:!0,role:p?"img":void 0,ref:t,...E,...A,...v&&r.props,ownerState:y,children:[v?r.props.children:r,p?de.jsx("title",{children:p}):null]})});j1.muiName="SvgIcon";function Xm(n,e){function t(i,r){return de.jsx(j1,{"data-testid":void 0,ref:r,...i,children:n})}return t.muiName=j1.muiName,ie.memo(ie.forwardRef(t))}function S7(n){return ku("MuiPaper",n)}kd("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const M7=n=>{const{square:e,elevation:t,variant:i,classes:r}=n,s={root:["root",i,!e&&"rounded",i==="elevation"&&`elevation${t}`]};return Nd(s,S7,r)},T7=Fd("div",{name:"MuiPaper",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],!t.square&&e.rounded,t.variant==="elevation"&&e[`elevation${t.elevation}`]]}})(HS(({theme:n})=>({backgroundColor:(n.vars||n).palette.background.paper,color:(n.vars||n).palette.text.primary,transition:n.transitions.create("box-shadow"),variants:[{props:({ownerState:e})=>!e.square,style:{borderRadius:n.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(n.vars||n).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),B7=ie.forwardRef(function(e,t){var A;const i=Nu({props:e,name:"MuiPaper"}),r=m7(),{className:s,component:a="div",elevation:o=1,square:c=!1,variant:h="elevation",...d}=i,p={...i,component:a,elevation:o,square:c,variant:h},m=M7(p);return de.jsx(T7,{as:a,ownerState:p,className:Uu(m.root,s),ref:t,...d,style:{...h==="elevation"&&{"--Paper-shadow":(r.vars||r).shadows[o],...r.vars&&{"--Paper-overlay":(A=r.vars.overlays)==null?void 0:A[o]},...!r.vars&&r.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${V1("#fff",q1(o))}, ${V1("#fff",q1(o))})`}},...d.style}})});function I7(n){return typeof n.main=="string"}function R7(n,e=[]){if(!I7(n))return!1;for(const t of e)if(!n.hasOwnProperty(t)||typeof n[t]!="string")return!1;return!0}function D7(n=[]){return([,e])=>e&&R7(e,n)}function L7(n){return ku("MuiTypography",n)}kd("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const O7={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},P7=x7(),U7=n=>{const{align:e,gutterBottom:t,noWrap:i,paragraph:r,variant:s,classes:a}=n,o={root:["root",s,n.align!=="inherit"&&`align${Zo(e)}`,t&&"gutterBottom",i&&"noWrap",r&&"paragraph"]};return Nd(o,L7,a)},k7=Fd("span",{name:"MuiTypography",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.variant&&e[t.variant],t.align!=="inherit"&&e[`align${Zo(t.align)}`],t.noWrap&&e.noWrap,t.gutterBottom&&e.gutterBottom,t.paragraph&&e.paragraph]}})(HS(({theme:n})=>{var e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(n.typography).filter(([t,i])=>t!=="inherit"&&i&&typeof i=="object").map(([t,i])=>({props:{variant:t},style:i})),...Object.entries(n.palette).filter(D7()).map(([t])=>({props:{color:t},style:{color:(n.vars||n).palette[t].main}})),...Object.entries(((e=n.palette)==null?void 0:e.text)||{}).filter(([,t])=>typeof t=="string").map(([t])=>({props:{color:`text${Zo(t)}`},style:{color:(n.vars||n).palette.text[t]}})),{props:({ownerState:t})=>t.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:t})=>t.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:t})=>t.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:t})=>t.paragraph,style:{marginBottom:16}}]}})),lD={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},MC=ie.forwardRef(function(e,t){const{color:i,...r}=Nu({props:e,name:"MuiTypography"}),s=!O7[i],a=P7({...r,...s&&{color:i}}),{align:o="inherit",className:c,component:h,gutterBottom:d=!1,noWrap:p=!1,paragraph:m=!1,variant:A="body1",variantMapping:v=lD,...y}=a,E={...a,align:o,color:i,className:c,component:h,gutterBottom:d,noWrap:p,paragraph:m,variant:A,variantMapping:v},b=h||(m?"p":v[A]||lD[A])||"span",C=U7(E);return de.jsx(k7,{as:b,ref:t,className:Uu(C.root,c),...y,ownerState:E,style:{...o!=="inherit"&&{"--Typography-textAlign":o},...y.style}})}),N7=kd("MuiBox",["root"]),F7=rb(),Th=qV({themeId:Xa,defaultTheme:F7,defaultClassName:N7.root,generateClassName:bk.generate});function Q7(n){return ku("MuiCard",n)}kd("MuiCard",["root"]);const z7=n=>{const{classes:e}=n;return Nd({root:["root"]},Q7,e)},H7=Fd(B7,{name:"MuiCard",slot:"Root",overridesResolver:(n,e)=>e.root})({overflow:"hidden"}),G7=ie.forwardRef(function(e,t){const i=Nu({props:e,name:"MuiCard"}),{className:r,raised:s=!1,...a}=i,o={...i,raised:s},c=z7(o);return de.jsx(H7,{className:Uu(c.root,r),elevation:s?8:void 0,ref:t,ownerState:o,...a})});function V7(n){return ku("MuiCardContent",n)}kd("MuiCardContent",["root"]);const W7=n=>{const{classes:e}=n;return Nd({root:["root"]},V7,e)},q7=Fd("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(n,e)=>e.root})({padding:16,"&:last-child":{paddingBottom:24}}),j7=ie.forwardRef(function(e,t){const i=Nu({props:e,name:"MuiCardContent"}),{className:r,component:s="div",...a}=i,o={...i,component:s},c=W7(o);return de.jsx(q7,{as:s,className:Uu(c.root,r),ownerState:o,ref:t,...a})}),X1=typeof Uk({})=="function",X7=(n,e)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...e&&!n.vars&&{colorScheme:n.palette.mode}}),Y7=n=>({color:(n.vars||n).palette.text.primary,...n.typography.body1,backgroundColor:(n.vars||n).palette.background.default,"@media print":{backgroundColor:(n.vars||n).palette.common.white}}),kk=(n,e=!1)=>{var s,a;const t={};e&&n.colorSchemes&&typeof n.getColorSchemeSelector=="function"&&Object.entries(n.colorSchemes).forEach(([o,c])=>{var d,p;const h=n.getColorSchemeSelector(o);h.startsWith("@")?t[h]={":root":{colorScheme:(d=c.palette)==null?void 0:d.mode}}:t[h.replace(/\s*&/,"")]={colorScheme:(p=c.palette)==null?void 0:p.mode}});let i={html:X7(n,e),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:n.typography.fontWeightBold},body:{margin:0,...Y7(n),"&::backdrop":{backgroundColor:(n.vars||n).palette.background.default}},...t};const r=(a=(s=n.components)==null?void 0:s.MuiCssBaseline)==null?void 0:a.styleOverrides;return r&&(i=[i,r]),i},cv="mui-ecs",K7=n=>{const e=kk(n,!1),t=Array.isArray(e)?e[0]:e;return!n.vars&&t&&(t.html[`:root:has(${cv})`]={colorScheme:n.palette.mode}),n.colorSchemes&&Object.entries(n.colorSchemes).forEach(([i,r])=>{var a,o;const s=n.getColorSchemeSelector(i);s.startsWith("@")?t[s]={[`:root:not(:has(.${cv}))`]:{colorScheme:(a=r.palette)==null?void 0:a.mode}}:t[s.replace(/\s*&/,"")]={[`&:not(:has(.${cv}))`]:{colorScheme:(o=r.palette)==null?void 0:o.mode}}}),e},J7=Uk(X1?({theme:n,enableColorScheme:e})=>kk(n,e):({theme:n})=>K7(n));function Z7(n){const e=Nu({props:n,name:"MuiCssBaseline"}),{children:t,enableColorScheme:i=!1}=e;return de.jsxs(ie.Fragment,{children:[X1&&de.jsx(J7,{enableColorScheme:i}),!X1&&!i&&de.jsx("span",{className:cv,style:{display:"none"}}),t]})}const cD=F9({createStyledComponent:Fd("div",{name:"MuiStack",slot:"Root",overridesResolver:(n,e)=>e.root}),useThemeProps:n=>Nu({props:n,name:"MuiStack"})}),$7=Xm(de.jsx("path",{d:"M16.59 7.58 10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"})),eW=Xm(de.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m3.59-13L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z"})),tW=Xm(de.jsx("path",{d:"M20 4h-3.17L15 2H9L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 14H4V6h4.05l1.83-2h4.24l1.83 2H20zM12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5m0 8c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3"})),nW=Xm([de.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7M7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 2.88-2.88 7.19-5 9.88C9.92 16.21 7 11.85 7 9"},"0"),de.jsx("circle",{cx:"12",cy:"9",r:"2.5"},"1")]),iW=Xm(de.jsx("path",{d:"M16.48 2.52c3.27 1.55 5.61 4.72 5.97 8.48h1.5C23.44 4.84 18.29 0 12 0l-.66.03 3.81 3.81zm-6.25-.77c-.59-.59-1.54-.59-2.12 0L1.75 8.11c-.59.59-.59 1.54 0 2.12l12.02 12.02c.59.59 1.54.59 2.12 0l6.36-6.36c.59-.59.59-1.54 0-2.12zm4.6 19.44L2.81 9.17l6.36-6.36 12.02 12.02zm-7.31.29C4.25 19.94 1.91 16.76 1.55 13H.05C.56 19.16 5.71 24 12 24l.66-.03-3.81-3.81z"})),GS=({showCamera:n=!0,showLocation:e=!0,showOrientation:t=!0,compact:i=!1,onRequestPermission:r,className:s=""})=>{const{permissionsState:a,requestPermission:o}=JU();if(!a)return null;const c=async p=>{if(r)r(p);else try{switch(p){case en.CAMERA:await navigator.mediaDevices.getUserMedia({video:!0}).then(m=>m.getTracks().forEach(A=>A.stop()));break;case en.LOCATION:navigator.geolocation.getCurrentPosition(()=>{},()=>{});break;case en.ORIENTATION:typeof DeviceOrientationEvent<"u"&&typeof DeviceOrientationEvent.requestPermission=="function"&&await DeviceOrientationEvent.requestPermission();break}await o(p)}catch{await o(p)}},h=p=>{switch(p){case en.CAMERA:return de.jsx(tW,{fontSize:i?"small":"medium"});case en.LOCATION:return de.jsx(nW,{fontSize:i?"small":"medium"});case en.ORIENTATION:return de.jsx(iW,{fontSize:i?"small":"medium"});default:return null}},d=(p,m)=>{const v=a.results[p]===Aa.GRANTED;h(p);const y=E=>{const b="var(--color-dark)";switch(E){case en.CAMERA:return{backgroundColor:b,backgroundImage:`
              radial-gradient(circle 200px at 80% 20%, var(--color-blue) 0%, transparent 70%),
              radial-gradient(circle 200px at 20% 60%, var(--color-green) 0%, transparent 70%),
              radial-gradient(circle 200px at 50% 40%, var(--color-blue) 0%, transparent 70%)
            `};case en.LOCATION:return{backgroundColor:b,backgroundImage:`
              radial-gradient(circle 200px at 30% 30%, var(--color-green) 0%, transparent 70%),
              radial-gradient(circle 200px at 70% 50%, var(--color-blue) 0%, transparent 70%),
              radial-gradient(circle 200px at 40% 70%, var(--color-green) 0%, transparent 70%)
            `};case en.ORIENTATION:return{backgroundColor:b,backgroundImage:`
              radial-gradient(circle 200px at 60% 10%, var(--color-blue) 0%, transparent 70%),
              radial-gradient(circle 200px at 10% 40%, var(--color-green) 0%, transparent 70%),
              radial-gradient(circle 200px at 80% 60%, var(--color-blue) 0%, transparent 70%)
            `};default:return{backgroundColor:b,backgroundImage:`
              radial-gradient(circle 200px at 75% 25%, var(--color-blue) 0%, transparent 70%),
              radial-gradient(circle 200px at 25% 65%, var(--color-green) 0%, transparent 70%),
              radial-gradient(circle 200px at 50% 45%, var(--color-blue) 0%, transparent 70%)
            `}}};if(i){const E=p===en.CAMERA?"C":p===en.LOCATION?"L":p===en.ORIENTATION?"M":"";return de.jsxs(Th,{onClick:()=>c(p),sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"24px",height:"24px",m:.5,cursor:"pointer",position:"relative",backgroundColor:"transparent","&:hover":{opacity:.8}},children:[de.jsx(MC,{variant:"caption",sx:{fontWeight:"bold",color:"var(--color-light)",fontSize:"0.75rem",textShadow:"0 1px 1px rgba(0,0,0,0.5)",lineHeight:1,zIndex:2},children:E}),de.jsx(Th,{sx:{position:"absolute",top:"50%",left:"50%",width:"16px",height:"16px",borderRadius:"50%",transform:"translate(-50%, -50%)",border:"0.5px solid var(--color-dark)",boxShadow:"0 0 2px rgba(0,0,0,0.3)",backgroundColor:v?"var(--color-green)":"var(--color-pink)",zIndex:1}})]})}return de.jsxs(Th,{onClick:()=>c(p),sx:{display:"flex",alignItems:"center",mb:0,mt:0,p:"0rem",minHeight:"50px",width:"110vw",maxWidth:"110vw",marginLeft:"-5vw",borderRadius:0,...v?{...y(p),cursor:"pointer","&:hover":{opacity:.9,boxShadow:"0 0 8px rgba(0,0,0,0.2)"}}:{backgroundColor:"var(--color-pink)",cursor:"pointer","&:hover":{opacity:.85,boxShadow:"0 0 8px rgba(0,0,0,0.3)"}},opacity:.9},children:[v?de.jsx($7,{sx:{color:"var(--color-light)",textShadow:"0 1px 2px rgba(0,0,0,0.3)",fontSize:"0.4rem",height:"100px",width:"100px",marginRight:"0.75rem",flexShrink:0}}):de.jsx(eW,{sx:{color:"var(--color-light)",textShadow:"0 1px 2px rgba(0,0,0,0.3)",fontSize:"3.5rem",height:"100px",width:"100px",marginRight:"0.75rem",flexShrink:0}}),de.jsxs(Th,{sx:{flexGrow:1,alignSelf:"center",pr:1},children:[de.jsxs(MC,{variant:"body1",sx:{color:"var(--color-light)",fontWeight:"bold",textShadow:"0 1px 2px rgba(0,0,0,0.2)",textTransform:"uppercase",letterSpacing:"0.3px",fontSize:"1.5rem",mb:0},children:[p===en.CAMERA&&"CAMERA ACCESS",p===en.LOCATION&&"LOCATION",p===en.ORIENTATION&&"MOTION"]}),de.jsxs(MC,{variant:"body2",sx:{color:"var(--color-light)",opacity:1,fontSize:"0.7rem",lineHeight:1,maxWidth:"100%",display:"flex",justifyContent:"space-between",alignItems:"flex-end"},children:[de.jsxs("span",{style:{paddingRight:"1rem"},children:[p===en.CAMERA&&"Wayside.at is an augmented reality experience and needs your camera to see the world.",p===en.LOCATION&&"We use geolocation for certain features such as the real-time map.",p===en.ORIENTATION&&"We need access to your device's gyroscope."]}),de.jsx(Th,{component:"span",sx:{display:"inline-block",ml:1,fontStyle:"italic",fontSize:"0.7rem",whiteSpace:"nowrap",flexShrink:0},children:v?"(Click to verify)":"(Click to enable)"})]})]})]})};return de.jsx(Th,{className:s,children:i?de.jsxs(cD,{direction:"column",spacing:.5,sx:{position:"fixed",bottom:"20px",right:"20px",zIndex:10},children:[n&&d(en.CAMERA),e&&d(en.LOCATION),t&&d(en.ORIENTATION)]}):de.jsx(G7,{variant:"elevation",elevation:0,sx:{bgcolor:"transparent",maxWidth:"100%",border:"none",boxShadow:"none",borderRadius:0},children:de.jsx(j7,{sx:{p:0,"&:last-child":{pb:0},borderRadius:0,"& > div":{borderRadius:0}},children:de.jsxs(cD,{spacing:0,sx:{borderRadius:0,overflow:"hidden"},children:[n&&d(en.CAMERA),e&&d(en.LOCATION),t&&d(en.ORIENTATION)]})})})})};/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const sb="173",rW={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},sW={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Nk=0,Y1=1,Fk=2,aW=3,oW=0,VS=1,Qk=2,Da=3,$o=0,Fr=1,Qa=2,Vo=0,yu=1,K1=2,J1=3,Z1=4,zk=5,Ql=100,Hk=101,Gk=102,Vk=103,Wk=104,qk=200,jk=201,Xk=202,Yk=203,Uv=204,kv=205,Kk=206,Jk=207,Zk=208,$k=209,eN=210,tN=211,nN=212,iN=213,rN=214,Nv=0,Fv=1,Qv=2,Bu=3,zv=4,Hv=5,Gv=6,Vv=7,Ym=0,sN=1,aN=2,Wo=0,oN=1,lN=2,cN=3,uN=4,hN=5,dN=6,fN=7,$1="attached",pN="detached",ab=300,el=301,ic=302,gm=303,vm=304,Qd=306,ym=1e3,Js=1001,bm=1002,rr=1003,WS=1004,lW=1004,ad=1005,cW=1005,Ui=1006,qp=1007,uW=1007,Ga=1008,hW=1008,$a=1009,qS=1010,jS=1011,Id=1012,ob=1013,tl=1014,Or=1015,zd=1016,lb=1017,cb=1018,Yl=1020,XS=35902,YS=1021,KS=1022,kr=1023,JS=1024,ZS=1025,Kl=1026,Jl=1027,ub=1028,Km=1029,$S=1030,hb=1031,dW=1032,db=1033,jp=33776,Xp=33777,Yp=33778,Kp=33779,Wv=35840,qv=35841,jv=35842,Xv=35843,Yv=36196,Kv=37492,Jv=37496,Zv=37808,$v=37809,ey=37810,ty=37811,ny=37812,iy=37813,ry=37814,sy=37815,ay=37816,oy=37817,ly=37818,cy=37819,uy=37820,hy=37821,Jp=36492,dy=36494,fy=36495,e2=36283,py=36284,my=36285,Ay=36286,mN=2200,AN=2201,gN=2202,Em=2300,gy=2301,uv=2302,lu=2400,cu=2401,xm=2402,fb=2500,t2=2501,fW=0,pW=1,mW=2,vN=3200,yN=3201,AW=3202,gW=3203,lc=0,bN=1,Po="",Kr="srgb",Iu="srgb-linear",Cm="linear",Sn="srgb",vW=0,nu=7680,yW=7681,bW=7682,EW=7683,xW=34055,CW=34056,_W=5386,wW=512,SW=513,MW=514,TW=515,BW=516,IW=517,RW=518,ew=519,EN=512,xN=513,CN=514,n2=515,_N=516,wN=517,SN=518,MN=519,_m=35044,DW=35048,LW=35040,OW=35045,PW=35049,UW=35041,kW=35046,NW=35050,FW=35042,QW="100",tw="300 es",ga=2e3,wm=2001,zW={COMPUTE:"compute",RENDER:"render"};class to{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const r=i[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}}const or=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let uD=1234567;const bu=Math.PI/180,Rd=180/Math.PI;function Rs(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(or[n&255]+or[n>>8&255]+or[n>>16&255]+or[n>>24&255]+"-"+or[e&255]+or[e>>8&255]+"-"+or[e>>16&15|64]+or[e>>24&255]+"-"+or[t&63|128]+or[t>>8&255]+"-"+or[t>>16&255]+or[t>>24&255]+or[i&255]+or[i>>8&255]+or[i>>16&255]+or[i>>24&255]).toLowerCase()}function Ut(n,e,t){return Math.max(e,Math.min(t,n))}function i2(n,e){return(n%e+e)%e}function HW(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function GW(n,e,t){return n!==e?(t-n)/(e-n):0}function Zp(n,e,t){return(1-t)*n+t*e}function VW(n,e,t,i){return Zp(n,e,1-Math.exp(-t*i))}function WW(n,e=1){return e-Math.abs(i2(n,e*2)-e)}function qW(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function jW(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function XW(n,e){return n+Math.floor(Math.random()*(e-n+1))}function YW(n,e){return n+Math.random()*(e-n)}function KW(n){return n*(.5-Math.random())}function JW(n){n!==void 0&&(uD=n);let e=uD+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function ZW(n){return n*bu}function $W(n){return n*Rd}function eq(n){return(n&n-1)===0&&n!==0}function tq(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function nq(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function iq(n,e,t,i,r){const s=Math.cos,a=Math.sin,o=s(t/2),c=a(t/2),h=s((e+i)/2),d=a((e+i)/2),p=s((e-i)/2),m=a((e-i)/2),A=s((i-e)/2),v=a((i-e)/2);switch(r){case"XYX":n.set(o*d,c*p,c*m,o*h);break;case"YZY":n.set(c*m,o*d,c*p,o*h);break;case"ZXZ":n.set(c*p,c*m,o*d,o*h);break;case"XZX":n.set(o*d,c*v,c*A,o*h);break;case"YXY":n.set(c*A,o*d,c*v,o*h);break;case"ZYZ":n.set(c*v,c*A,o*d,o*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Pr(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Ft(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const rq={DEG2RAD:bu,RAD2DEG:Rd,generateUUID:Rs,clamp:Ut,euclideanModulo:i2,mapLinear:HW,inverseLerp:GW,lerp:Zp,damp:VW,pingpong:WW,smoothstep:qW,smootherstep:jW,randInt:XW,randFloat:YW,randFloatSpread:KW,seededRandom:JW,degToRad:ZW,radToDeg:$W,isPowerOfTwo:eq,ceilPowerOfTwo:tq,floorPowerOfTwo:nq,setQuaternionFromProperEuler:iq,normalize:Ft,denormalize:Pr};class He{constructor(e=0,t=0){He.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Ut(this.x,e.x,t.x),this.y=Ut(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Ut(this.x,e,t),this.y=Ut(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Ut(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Ut(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*i-a*r+e.x,this.y=s*r+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Pt{constructor(e,t,i,r,s,a,o,c,h){Pt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,a,o,c,h)}set(e,t,i,r,s,a,o,c,h){const d=this.elements;return d[0]=e,d[1]=r,d[2]=o,d[3]=t,d[4]=s,d[5]=c,d[6]=i,d[7]=a,d[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],o=i[3],c=i[6],h=i[1],d=i[4],p=i[7],m=i[2],A=i[5],v=i[8],y=r[0],E=r[3],b=r[6],C=r[1],_=r[4],w=r[7],T=r[2],L=r[5],R=r[8];return s[0]=a*y+o*C+c*T,s[3]=a*E+o*_+c*L,s[6]=a*b+o*w+c*R,s[1]=h*y+d*C+p*T,s[4]=h*E+d*_+p*L,s[7]=h*b+d*w+p*R,s[2]=m*y+A*C+v*T,s[5]=m*E+A*_+v*L,s[8]=m*b+A*w+v*R,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],c=e[6],h=e[7],d=e[8];return t*a*d-t*o*h-i*s*d+i*o*c+r*s*h-r*a*c}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],c=e[6],h=e[7],d=e[8],p=d*a-o*h,m=o*c-d*s,A=h*s-a*c,v=t*p+i*m+r*A;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/v;return e[0]=p*y,e[1]=(r*h-d*i)*y,e[2]=(o*i-r*a)*y,e[3]=m*y,e[4]=(d*t-r*c)*y,e[5]=(r*s-o*t)*y,e[6]=A*y,e[7]=(i*c-h*t)*y,e[8]=(a*t-i*s)*y,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,a,o){const c=Math.cos(s),h=Math.sin(s);return this.set(i*c,i*h,-i*(c*a+h*o)+a+e,-r*h,r*c,-r*(-h*a+c*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(TC.makeScale(e,t)),this}rotate(e){return this.premultiply(TC.makeRotation(-e)),this}translate(e,t){return this.premultiply(TC.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const TC=new Pt;function TN(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const sq={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function od(n,e){return new sq[n](e)}function Sm(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function BN(){const n=Sm("canvas");return n.style.display="block",n}const hD={};function nd(n){n in hD||(hD[n]=!0,console.warn(n))}function aq(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}function oq(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function lq(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const dD=new Pt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),fD=new Pt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function cq(){const n={enabled:!0,workingColorSpace:Iu,spaces:{},convert:function(r,s,a){return this.enabled===!1||s===a||!s||!a||(this.spaces[s].transfer===Sn&&(r.r=qo(r.r),r.g=qo(r.g),r.b=qo(r.b)),this.spaces[s].primaries!==this.spaces[a].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===Sn&&(r.r=bd(r.r),r.g=bd(r.g),r.b=bd(r.b))),r},fromWorkingColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},toWorkingColorSpace:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Po?Cm:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,a){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[Iu]:{primaries:e,whitePoint:i,transfer:Cm,toXYZ:dD,fromXYZ:fD,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Kr},outputColorSpaceConfig:{drawingBufferColorSpace:Kr}},[Kr]:{primaries:e,whitePoint:i,transfer:Sn,toXYZ:dD,fromXYZ:fD,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Kr}}}),n}const cn=cq();function qo(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function bd(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Bh;class IN{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Bh===void 0&&(Bh=Sm("canvas")),Bh.width=e.width,Bh.height=e.height;const i=Bh.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Bh}return t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Sm("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let a=0;a<s.length;a++)s[a]=qo(s[a]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(qo(t[i]/255)*255):t[i]=qo(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let uq=0;class uu{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:uq++}),this.uuid=Rs(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let a=0,o=r.length;a<o;a++)r[a].isDataTexture?s.push(BC(r[a].image)):s.push(BC(r[a]))}else s=BC(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function BC(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?IN.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let hq=0;class ci extends to{constructor(e=ci.DEFAULT_IMAGE,t=ci.DEFAULT_MAPPING,i=Js,r=Js,s=Ui,a=Ga,o=kr,c=$a,h=ci.DEFAULT_ANISOTROPY,d=Po){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:hq++}),this.uuid=Rs(),this.name="",this.source=new uu(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=a,this.anisotropy=h,this.format=o,this.internalFormat=null,this.type=c,this.offset=new He(0,0),this.repeat=new He(1,1),this.center=new He(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Pt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==ab)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ym:e.x=e.x-Math.floor(e.x);break;case Js:e.x=e.x<0?0:1;break;case bm:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ym:e.y=e.y-Math.floor(e.y);break;case Js:e.y=e.y<0?0:1;break;case bm:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}ci.DEFAULT_IMAGE=null;ci.DEFAULT_MAPPING=ab;ci.DEFAULT_ANISOTROPY=1;class dn{constructor(e=0,t=0,i=0,r=1){dn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r+a[12]*s,this.y=a[1]*t+a[5]*i+a[9]*r+a[13]*s,this.z=a[2]*t+a[6]*i+a[10]*r+a[14]*s,this.w=a[3]*t+a[7]*i+a[11]*r+a[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const c=e.elements,h=c[0],d=c[4],p=c[8],m=c[1],A=c[5],v=c[9],y=c[2],E=c[6],b=c[10];if(Math.abs(d-m)<.01&&Math.abs(p-y)<.01&&Math.abs(v-E)<.01){if(Math.abs(d+m)<.1&&Math.abs(p+y)<.1&&Math.abs(v+E)<.1&&Math.abs(h+A+b-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const _=(h+1)/2,w=(A+1)/2,T=(b+1)/2,L=(d+m)/4,R=(p+y)/4,P=(v+E)/4;return _>w&&_>T?_<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(_),r=L/i,s=R/i):w>T?w<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(w),i=L/r,s=P/r):T<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(T),i=R/s,r=P/s),this.set(i,r,s,t),this}let C=Math.sqrt((E-v)*(E-v)+(p-y)*(p-y)+(m-d)*(m-d));return Math.abs(C)<.001&&(C=1),this.x=(E-v)/C,this.y=(p-y)/C,this.z=(m-d)/C,this.w=Math.acos((h+A+b-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Ut(this.x,e.x,t.x),this.y=Ut(this.y,e.y,t.y),this.z=Ut(this.z,e.z,t.z),this.w=Ut(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Ut(this.x,e,t),this.y=Ut(this.y,e,t),this.z=Ut(this.z,e,t),this.w=Ut(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Ut(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class pb extends to{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new dn(0,0,e,t),this.scissorTest=!1,this.viewport=new dn(0,0,e,t);const r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Ui,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new ci(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const a=i.count;for(let o=0;o<a;o++)this.textures[o]=s.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,r=e.textures.length;i<r;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0,this.textures[i].renderTarget=this;const t=Object.assign({},e.texture.image);return this.texture.source=new uu(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ba extends pb{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class Jm extends ci{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=rr,this.minFilter=rr,this.wrapR=Js,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class dq extends ba{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Jm(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class mb extends ci{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=rr,this.minFilter=rr,this.wrapR=Js,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class fq extends ba{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new mb(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class is{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,a,o){let c=i[r+0],h=i[r+1],d=i[r+2],p=i[r+3];const m=s[a+0],A=s[a+1],v=s[a+2],y=s[a+3];if(o===0){e[t+0]=c,e[t+1]=h,e[t+2]=d,e[t+3]=p;return}if(o===1){e[t+0]=m,e[t+1]=A,e[t+2]=v,e[t+3]=y;return}if(p!==y||c!==m||h!==A||d!==v){let E=1-o;const b=c*m+h*A+d*v+p*y,C=b>=0?1:-1,_=1-b*b;if(_>Number.EPSILON){const T=Math.sqrt(_),L=Math.atan2(T,b*C);E=Math.sin(E*L)/T,o=Math.sin(o*L)/T}const w=o*C;if(c=c*E+m*w,h=h*E+A*w,d=d*E+v*w,p=p*E+y*w,E===1-o){const T=1/Math.sqrt(c*c+h*h+d*d+p*p);c*=T,h*=T,d*=T,p*=T}}e[t]=c,e[t+1]=h,e[t+2]=d,e[t+3]=p}static multiplyQuaternionsFlat(e,t,i,r,s,a){const o=i[r],c=i[r+1],h=i[r+2],d=i[r+3],p=s[a],m=s[a+1],A=s[a+2],v=s[a+3];return e[t]=o*v+d*p+c*A-h*m,e[t+1]=c*v+d*m+h*p-o*A,e[t+2]=h*v+d*A+o*m-c*p,e[t+3]=d*v-o*p-c*m-h*A,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,a=e._order,o=Math.cos,c=Math.sin,h=o(i/2),d=o(r/2),p=o(s/2),m=c(i/2),A=c(r/2),v=c(s/2);switch(a){case"XYZ":this._x=m*d*p+h*A*v,this._y=h*A*p-m*d*v,this._z=h*d*v+m*A*p,this._w=h*d*p-m*A*v;break;case"YXZ":this._x=m*d*p+h*A*v,this._y=h*A*p-m*d*v,this._z=h*d*v-m*A*p,this._w=h*d*p+m*A*v;break;case"ZXY":this._x=m*d*p-h*A*v,this._y=h*A*p+m*d*v,this._z=h*d*v+m*A*p,this._w=h*d*p-m*A*v;break;case"ZYX":this._x=m*d*p-h*A*v,this._y=h*A*p+m*d*v,this._z=h*d*v-m*A*p,this._w=h*d*p+m*A*v;break;case"YZX":this._x=m*d*p+h*A*v,this._y=h*A*p+m*d*v,this._z=h*d*v-m*A*p,this._w=h*d*p-m*A*v;break;case"XZY":this._x=m*d*p-h*A*v,this._y=h*A*p-m*d*v,this._z=h*d*v+m*A*p,this._w=h*d*p+m*A*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],a=t[1],o=t[5],c=t[9],h=t[2],d=t[6],p=t[10],m=i+o+p;if(m>0){const A=.5/Math.sqrt(m+1);this._w=.25/A,this._x=(d-c)*A,this._y=(s-h)*A,this._z=(a-r)*A}else if(i>o&&i>p){const A=2*Math.sqrt(1+i-o-p);this._w=(d-c)/A,this._x=.25*A,this._y=(r+a)/A,this._z=(s+h)/A}else if(o>p){const A=2*Math.sqrt(1+o-i-p);this._w=(s-h)/A,this._x=(r+a)/A,this._y=.25*A,this._z=(c+d)/A}else{const A=2*Math.sqrt(1+p-i-o);this._w=(a-r)/A,this._x=(s+h)/A,this._y=(c+d)/A,this._z=.25*A}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ut(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,a=e._w,o=t._x,c=t._y,h=t._z,d=t._w;return this._x=i*d+a*o+r*h-s*c,this._y=r*d+a*c+s*o-i*h,this._z=s*d+a*h+i*c-r*o,this._w=a*d-i*o-r*c-s*h,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,a=this._w;let o=a*e._w+i*e._x+r*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=i,this._y=r,this._z=s,this;const c=1-o*o;if(c<=Number.EPSILON){const A=1-t;return this._w=A*a+t*this._w,this._x=A*i+t*this._x,this._y=A*r+t*this._y,this._z=A*s+t*this._z,this.normalize(),this}const h=Math.sqrt(c),d=Math.atan2(h,o),p=Math.sin((1-t)*d)/h,m=Math.sin(t*d)/h;return this._w=a*p+this._w*m,this._x=i*p+this._x*m,this._y=r*p+this._y*m,this._z=s*p+this._z*m,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class K{constructor(e=0,t=0,i=0){K.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(pD.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(pD.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,a=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*a,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*a,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*a,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,a=e.y,o=e.z,c=e.w,h=2*(a*r-o*i),d=2*(o*t-s*r),p=2*(s*i-a*t);return this.x=t+c*h+a*p-o*d,this.y=i+c*d+o*h-s*p,this.z=r+c*p+s*d-a*h,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Ut(this.x,e.x,t.x),this.y=Ut(this.y,e.y,t.y),this.z=Ut(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Ut(this.x,e,t),this.y=Ut(this.y,e,t),this.z=Ut(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Ut(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,a=t.x,o=t.y,c=t.z;return this.x=r*c-s*o,this.y=s*a-i*c,this.z=i*o-r*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return IC.copy(this).projectOnVector(e),this.sub(IC)}reflect(e){return this.sub(IC.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Ut(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const IC=new K,pD=new is;class Qr{constructor(e=new K(1/0,1/0,1/0),t=new K(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(oa.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(oa.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=oa.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,o=s.count;a<o;a++)e.isMesh===!0?e.getVertexPosition(a,oa):oa.fromBufferAttribute(s,a),oa.applyMatrix4(e.matrixWorld),this.expandByPoint(oa);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Rg.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Rg.copy(i.boundingBox)),Rg.applyMatrix4(e.matrixWorld),this.union(Rg)}const r=e.children;for(let s=0,a=r.length;s<a;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,oa),oa.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Xf),Dg.subVectors(this.max,Xf),Ih.subVectors(e.a,Xf),Rh.subVectors(e.b,Xf),Dh.subVectors(e.c,Xf),Sl.subVectors(Rh,Ih),Ml.subVectors(Dh,Rh),Rc.subVectors(Ih,Dh);let t=[0,-Sl.z,Sl.y,0,-Ml.z,Ml.y,0,-Rc.z,Rc.y,Sl.z,0,-Sl.x,Ml.z,0,-Ml.x,Rc.z,0,-Rc.x,-Sl.y,Sl.x,0,-Ml.y,Ml.x,0,-Rc.y,Rc.x,0];return!RC(t,Ih,Rh,Dh,Dg)||(t=[1,0,0,0,1,0,0,0,1],!RC(t,Ih,Rh,Dh,Dg))?!1:(Lg.crossVectors(Sl,Ml),t=[Lg.x,Lg.y,Lg.z],RC(t,Ih,Rh,Dh,Dg))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,oa).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(oa).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(xo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),xo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),xo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),xo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),xo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),xo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),xo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),xo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(xo),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const xo=[new K,new K,new K,new K,new K,new K,new K,new K],oa=new K,Rg=new Qr,Ih=new K,Rh=new K,Dh=new K,Sl=new K,Ml=new K,Rc=new K,Xf=new K,Dg=new K,Lg=new K,Dc=new K;function RC(n,e,t,i,r){for(let s=0,a=n.length-3;s<=a;s+=3){Dc.fromArray(n,s);const o=r.x*Math.abs(Dc.x)+r.y*Math.abs(Dc.y)+r.z*Math.abs(Dc.z),c=e.dot(Dc),h=t.dot(Dc),d=i.dot(Dc);if(Math.max(-Math.max(c,h,d),Math.min(c,h,d))>o)return!1}return!0}const pq=new Qr,Yf=new K,DC=new K;class vr{constructor(e=new K,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):pq.setFromPoints(e).getCenter(i);let r=0;for(let s=0,a=e.length;s<a;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Yf.subVectors(e,this.center);const t=Yf.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Yf,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(DC.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Yf.copy(e.center).add(DC)),this.expandByPoint(Yf.copy(e.center).sub(DC))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Co=new K,LC=new K,Og=new K,Tl=new K,OC=new K,Pg=new K,PC=new K;class Hd{constructor(e=new K,t=new K(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Co)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Co.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Co.copy(this.origin).addScaledVector(this.direction,t),Co.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){LC.copy(e).add(t).multiplyScalar(.5),Og.copy(t).sub(e).normalize(),Tl.copy(this.origin).sub(LC);const s=e.distanceTo(t)*.5,a=-this.direction.dot(Og),o=Tl.dot(this.direction),c=-Tl.dot(Og),h=Tl.lengthSq(),d=Math.abs(1-a*a);let p,m,A,v;if(d>0)if(p=a*c-o,m=a*o-c,v=s*d,p>=0)if(m>=-v)if(m<=v){const y=1/d;p*=y,m*=y,A=p*(p+a*m+2*o)+m*(a*p+m+2*c)+h}else m=s,p=Math.max(0,-(a*m+o)),A=-p*p+m*(m+2*c)+h;else m=-s,p=Math.max(0,-(a*m+o)),A=-p*p+m*(m+2*c)+h;else m<=-v?(p=Math.max(0,-(-a*s+o)),m=p>0?-s:Math.min(Math.max(-s,-c),s),A=-p*p+m*(m+2*c)+h):m<=v?(p=0,m=Math.min(Math.max(-s,-c),s),A=m*(m+2*c)+h):(p=Math.max(0,-(a*s+o)),m=p>0?s:Math.min(Math.max(-s,-c),s),A=-p*p+m*(m+2*c)+h);else m=a>0?-s:s,p=Math.max(0,-(a*m+o)),A=-p*p+m*(m+2*c)+h;return i&&i.copy(this.origin).addScaledVector(this.direction,p),r&&r.copy(LC).addScaledVector(Og,m),A}intersectSphere(e,t){Co.subVectors(e.center,this.origin);const i=Co.dot(this.direction),r=Co.dot(Co)-i*i,s=e.radius*e.radius;if(r>s)return null;const a=Math.sqrt(s-r),o=i-a,c=i+a;return c<0?null:o<0?this.at(c,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,a,o,c;const h=1/this.direction.x,d=1/this.direction.y,p=1/this.direction.z,m=this.origin;return h>=0?(i=(e.min.x-m.x)*h,r=(e.max.x-m.x)*h):(i=(e.max.x-m.x)*h,r=(e.min.x-m.x)*h),d>=0?(s=(e.min.y-m.y)*d,a=(e.max.y-m.y)*d):(s=(e.max.y-m.y)*d,a=(e.min.y-m.y)*d),i>a||s>r||((s>i||isNaN(i))&&(i=s),(a<r||isNaN(r))&&(r=a),p>=0?(o=(e.min.z-m.z)*p,c=(e.max.z-m.z)*p):(o=(e.max.z-m.z)*p,c=(e.min.z-m.z)*p),i>c||o>r)||((o>i||i!==i)&&(i=o),(c<r||r!==r)&&(r=c),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Co)!==null}intersectTriangle(e,t,i,r,s){OC.subVectors(t,e),Pg.subVectors(i,e),PC.crossVectors(OC,Pg);let a=this.direction.dot(PC),o;if(a>0){if(r)return null;o=1}else if(a<0)o=-1,a=-a;else return null;Tl.subVectors(this.origin,e);const c=o*this.direction.dot(Pg.crossVectors(Tl,Pg));if(c<0)return null;const h=o*this.direction.dot(OC.cross(Tl));if(h<0||c+h>a)return null;const d=-o*Tl.dot(PC);return d<0?null:this.at(d/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class It{constructor(e,t,i,r,s,a,o,c,h,d,p,m,A,v,y,E){It.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,a,o,c,h,d,p,m,A,v,y,E)}set(e,t,i,r,s,a,o,c,h,d,p,m,A,v,y,E){const b=this.elements;return b[0]=e,b[4]=t,b[8]=i,b[12]=r,b[1]=s,b[5]=a,b[9]=o,b[13]=c,b[2]=h,b[6]=d,b[10]=p,b[14]=m,b[3]=A,b[7]=v,b[11]=y,b[15]=E,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new It().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Lh.setFromMatrixColumn(e,0).length(),s=1/Lh.setFromMatrixColumn(e,1).length(),a=1/Lh.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*a,t[9]=i[9]*a,t[10]=i[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,a=Math.cos(i),o=Math.sin(i),c=Math.cos(r),h=Math.sin(r),d=Math.cos(s),p=Math.sin(s);if(e.order==="XYZ"){const m=a*d,A=a*p,v=o*d,y=o*p;t[0]=c*d,t[4]=-c*p,t[8]=h,t[1]=A+v*h,t[5]=m-y*h,t[9]=-o*c,t[2]=y-m*h,t[6]=v+A*h,t[10]=a*c}else if(e.order==="YXZ"){const m=c*d,A=c*p,v=h*d,y=h*p;t[0]=m+y*o,t[4]=v*o-A,t[8]=a*h,t[1]=a*p,t[5]=a*d,t[9]=-o,t[2]=A*o-v,t[6]=y+m*o,t[10]=a*c}else if(e.order==="ZXY"){const m=c*d,A=c*p,v=h*d,y=h*p;t[0]=m-y*o,t[4]=-a*p,t[8]=v+A*o,t[1]=A+v*o,t[5]=a*d,t[9]=y-m*o,t[2]=-a*h,t[6]=o,t[10]=a*c}else if(e.order==="ZYX"){const m=a*d,A=a*p,v=o*d,y=o*p;t[0]=c*d,t[4]=v*h-A,t[8]=m*h+y,t[1]=c*p,t[5]=y*h+m,t[9]=A*h-v,t[2]=-h,t[6]=o*c,t[10]=a*c}else if(e.order==="YZX"){const m=a*c,A=a*h,v=o*c,y=o*h;t[0]=c*d,t[4]=y-m*p,t[8]=v*p+A,t[1]=p,t[5]=a*d,t[9]=-o*d,t[2]=-h*d,t[6]=A*p+v,t[10]=m-y*p}else if(e.order==="XZY"){const m=a*c,A=a*h,v=o*c,y=o*h;t[0]=c*d,t[4]=-p,t[8]=h*d,t[1]=m*p+y,t[5]=a*d,t[9]=A*p-v,t[2]=v*p-A,t[6]=o*d,t[10]=y*p+m}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(mq,e,Aq)}lookAt(e,t,i){const r=this.elements;return As.subVectors(e,t),As.lengthSq()===0&&(As.z=1),As.normalize(),Bl.crossVectors(i,As),Bl.lengthSq()===0&&(Math.abs(i.z)===1?As.x+=1e-4:As.z+=1e-4,As.normalize(),Bl.crossVectors(i,As)),Bl.normalize(),Ug.crossVectors(As,Bl),r[0]=Bl.x,r[4]=Ug.x,r[8]=As.x,r[1]=Bl.y,r[5]=Ug.y,r[9]=As.y,r[2]=Bl.z,r[6]=Ug.z,r[10]=As.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],o=i[4],c=i[8],h=i[12],d=i[1],p=i[5],m=i[9],A=i[13],v=i[2],y=i[6],E=i[10],b=i[14],C=i[3],_=i[7],w=i[11],T=i[15],L=r[0],R=r[4],P=r[8],D=r[12],M=r[1],k=r[5],V=r[9],X=r[13],$=r[2],ae=r[6],z=r[10],j=r[14],Z=r[3],ce=r[7],U=r[11],se=r[15];return s[0]=a*L+o*M+c*$+h*Z,s[4]=a*R+o*k+c*ae+h*ce,s[8]=a*P+o*V+c*z+h*U,s[12]=a*D+o*X+c*j+h*se,s[1]=d*L+p*M+m*$+A*Z,s[5]=d*R+p*k+m*ae+A*ce,s[9]=d*P+p*V+m*z+A*U,s[13]=d*D+p*X+m*j+A*se,s[2]=v*L+y*M+E*$+b*Z,s[6]=v*R+y*k+E*ae+b*ce,s[10]=v*P+y*V+E*z+b*U,s[14]=v*D+y*X+E*j+b*se,s[3]=C*L+_*M+w*$+T*Z,s[7]=C*R+_*k+w*ae+T*ce,s[11]=C*P+_*V+w*z+T*U,s[15]=C*D+_*X+w*j+T*se,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],a=e[1],o=e[5],c=e[9],h=e[13],d=e[2],p=e[6],m=e[10],A=e[14],v=e[3],y=e[7],E=e[11],b=e[15];return v*(+s*c*p-r*h*p-s*o*m+i*h*m+r*o*A-i*c*A)+y*(+t*c*A-t*h*m+s*a*m-r*a*A+r*h*d-s*c*d)+E*(+t*h*p-t*o*A-s*a*p+i*a*A+s*o*d-i*h*d)+b*(-r*o*d-t*c*p+t*o*m+r*a*p-i*a*m+i*c*d)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],c=e[6],h=e[7],d=e[8],p=e[9],m=e[10],A=e[11],v=e[12],y=e[13],E=e[14],b=e[15],C=p*E*h-y*m*h+y*c*A-o*E*A-p*c*b+o*m*b,_=v*m*h-d*E*h-v*c*A+a*E*A+d*c*b-a*m*b,w=d*y*h-v*p*h+v*o*A-a*y*A-d*o*b+a*p*b,T=v*p*c-d*y*c-v*o*m+a*y*m+d*o*E-a*p*E,L=t*C+i*_+r*w+s*T;if(L===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const R=1/L;return e[0]=C*R,e[1]=(y*m*s-p*E*s-y*r*A+i*E*A+p*r*b-i*m*b)*R,e[2]=(o*E*s-y*c*s+y*r*h-i*E*h-o*r*b+i*c*b)*R,e[3]=(p*c*s-o*m*s-p*r*h+i*m*h+o*r*A-i*c*A)*R,e[4]=_*R,e[5]=(d*E*s-v*m*s+v*r*A-t*E*A-d*r*b+t*m*b)*R,e[6]=(v*c*s-a*E*s-v*r*h+t*E*h+a*r*b-t*c*b)*R,e[7]=(a*m*s-d*c*s+d*r*h-t*m*h-a*r*A+t*c*A)*R,e[8]=w*R,e[9]=(v*p*s-d*y*s-v*i*A+t*y*A+d*i*b-t*p*b)*R,e[10]=(a*y*s-v*o*s+v*i*h-t*y*h-a*i*b+t*o*b)*R,e[11]=(d*o*s-a*p*s-d*i*h+t*p*h+a*i*A-t*o*A)*R,e[12]=T*R,e[13]=(d*y*r-v*p*r+v*i*m-t*y*m-d*i*E+t*p*E)*R,e[14]=(v*o*r-a*y*r-v*i*c+t*y*c+a*i*E-t*o*E)*R,e[15]=(a*p*r-d*o*r+d*i*c-t*p*c-a*i*m+t*o*m)*R,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,a=e.x,o=e.y,c=e.z,h=s*a,d=s*o;return this.set(h*a+i,h*o-r*c,h*c+r*o,0,h*o+r*c,d*o+i,d*c-r*a,0,h*c-r*o,d*c+r*a,s*c*c+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,a){return this.set(1,i,s,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,a=t._y,o=t._z,c=t._w,h=s+s,d=a+a,p=o+o,m=s*h,A=s*d,v=s*p,y=a*d,E=a*p,b=o*p,C=c*h,_=c*d,w=c*p,T=i.x,L=i.y,R=i.z;return r[0]=(1-(y+b))*T,r[1]=(A+w)*T,r[2]=(v-_)*T,r[3]=0,r[4]=(A-w)*L,r[5]=(1-(m+b))*L,r[6]=(E+C)*L,r[7]=0,r[8]=(v+_)*R,r[9]=(E-C)*R,r[10]=(1-(m+y))*R,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Lh.set(r[0],r[1],r[2]).length();const a=Lh.set(r[4],r[5],r[6]).length(),o=Lh.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],la.copy(this);const h=1/s,d=1/a,p=1/o;return la.elements[0]*=h,la.elements[1]*=h,la.elements[2]*=h,la.elements[4]*=d,la.elements[5]*=d,la.elements[6]*=d,la.elements[8]*=p,la.elements[9]*=p,la.elements[10]*=p,t.setFromRotationMatrix(la),i.x=s,i.y=a,i.z=o,this}makePerspective(e,t,i,r,s,a,o=ga){const c=this.elements,h=2*s/(t-e),d=2*s/(i-r),p=(t+e)/(t-e),m=(i+r)/(i-r);let A,v;if(o===ga)A=-(a+s)/(a-s),v=-2*a*s/(a-s);else if(o===wm)A=-a/(a-s),v=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return c[0]=h,c[4]=0,c[8]=p,c[12]=0,c[1]=0,c[5]=d,c[9]=m,c[13]=0,c[2]=0,c[6]=0,c[10]=A,c[14]=v,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,i,r,s,a,o=ga){const c=this.elements,h=1/(t-e),d=1/(i-r),p=1/(a-s),m=(t+e)*h,A=(i+r)*d;let v,y;if(o===ga)v=(a+s)*p,y=-2*p;else if(o===wm)v=s*p,y=-1*p;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return c[0]=2*h,c[4]=0,c[8]=0,c[12]=-m,c[1]=0,c[5]=2*d,c[9]=0,c[13]=-A,c[2]=0,c[6]=0,c[10]=y,c[14]=-v,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Lh=new K,la=new It,mq=new K(0,0,0),Aq=new K(1,1,1),Bl=new K,Ug=new K,As=new K,mD=new It,AD=new is;class Os{constructor(e=0,t=0,i=0,r=Os.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],a=r[4],o=r[8],c=r[1],h=r[5],d=r[9],p=r[2],m=r[6],A=r[10];switch(t){case"XYZ":this._y=Math.asin(Ut(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-d,A),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(m,h),this._z=0);break;case"YXZ":this._x=Math.asin(-Ut(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(o,A),this._z=Math.atan2(c,h)):(this._y=Math.atan2(-p,s),this._z=0);break;case"ZXY":this._x=Math.asin(Ut(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-p,A),this._z=Math.atan2(-a,h)):(this._y=0,this._z=Math.atan2(c,s));break;case"ZYX":this._y=Math.asin(-Ut(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(m,A),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-a,h));break;case"YZX":this._z=Math.asin(Ut(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,h),this._y=Math.atan2(-p,s)):(this._x=0,this._y=Math.atan2(o,A));break;case"XZY":this._z=Math.asin(-Ut(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(m,h),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-d,A),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return mD.makeRotationFromQuaternion(e),this.setFromRotationMatrix(mD,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return AD.setFromEuler(this),this.setFromQuaternion(AD,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Os.DEFAULT_ORDER="XYZ";class Ab{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let gq=0;const gD=new K,Oh=new is,_o=new It,kg=new K,Kf=new K,vq=new K,yq=new is,vD=new K(1,0,0),yD=new K(0,1,0),bD=new K(0,0,1),ED={type:"added"},bq={type:"removed"},Ph={type:"childadded",child:null},UC={type:"childremoved",child:null};class fn extends to{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:gq++}),this.uuid=Rs(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=fn.DEFAULT_UP.clone();const e=new K,t=new Os,i=new is,r=new K(1,1,1);function s(){i.setFromEuler(t,!1)}function a(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new It},normalMatrix:{value:new Pt}}),this.matrix=new It,this.matrixWorld=new It,this.matrixAutoUpdate=fn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=fn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Ab,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Oh.setFromAxisAngle(e,t),this.quaternion.multiply(Oh),this}rotateOnWorldAxis(e,t){return Oh.setFromAxisAngle(e,t),this.quaternion.premultiply(Oh),this}rotateX(e){return this.rotateOnAxis(vD,e)}rotateY(e){return this.rotateOnAxis(yD,e)}rotateZ(e){return this.rotateOnAxis(bD,e)}translateOnAxis(e,t){return gD.copy(e).applyQuaternion(this.quaternion),this.position.add(gD.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(vD,e)}translateY(e){return this.translateOnAxis(yD,e)}translateZ(e){return this.translateOnAxis(bD,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(_o.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?kg.copy(e):kg.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Kf.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_o.lookAt(Kf,kg,this.up):_o.lookAt(kg,Kf,this.up),this.quaternion.setFromRotationMatrix(_o),r&&(_o.extractRotation(r.matrixWorld),Oh.setFromRotationMatrix(_o),this.quaternion.premultiply(Oh.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(ED),Ph.child=e,this.dispatchEvent(Ph),Ph.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(bq),UC.child=e,this.dispatchEvent(UC),UC.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),_o.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),_o.multiply(e.parent.matrixWorld)),e.applyMatrix4(_o),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(ED),Ph.child=e,this.dispatchEvent(Ph),Ph.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const a=this.children[i].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Kf,e,vq),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Kf,yq,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(o=>({boxInitialized:o.boxInitialized,boxMin:o.box.min.toArray(),boxMax:o.box.max.toArray(),sphereInitialized:o.sphereInitialized,sphereRadius:o.sphere.radius,sphereCenter:o.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(o,c){return o[c.uuid]===void 0&&(o[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const c=o.shapes;if(Array.isArray(c))for(let h=0,d=c.length;h<d;h++){const p=c[h];s(e.shapes,p)}else s(e.shapes,c)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let c=0,h=this.material.length;c<h;c++)o.push(s(e.materials,this.material[c]));r.material=o}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let o=0;o<this.animations.length;o++){const c=this.animations[o];r.animations.push(s(e.animations,c))}}if(t){const o=a(e.geometries),c=a(e.materials),h=a(e.textures),d=a(e.images),p=a(e.shapes),m=a(e.skeletons),A=a(e.animations),v=a(e.nodes);o.length>0&&(i.geometries=o),c.length>0&&(i.materials=c),h.length>0&&(i.textures=h),d.length>0&&(i.images=d),p.length>0&&(i.shapes=p),m.length>0&&(i.skeletons=m),A.length>0&&(i.animations=A),v.length>0&&(i.nodes=v)}return i.object=r,i;function a(o){const c=[];for(const h in o){const d=o[h];delete d.metadata,c.push(d)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}fn.DEFAULT_UP=new K(0,1,0);fn.DEFAULT_MATRIX_AUTO_UPDATE=!0;fn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ca=new K,wo=new K,kC=new K,So=new K,Uh=new K,kh=new K,xD=new K,NC=new K,FC=new K,QC=new K,zC=new dn,HC=new dn,GC=new dn;class Jr{constructor(e=new K,t=new K,i=new K){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),ca.subVectors(e,t),r.cross(ca);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){ca.subVectors(r,t),wo.subVectors(i,t),kC.subVectors(e,t);const a=ca.dot(ca),o=ca.dot(wo),c=ca.dot(kC),h=wo.dot(wo),d=wo.dot(kC),p=a*h-o*o;if(p===0)return s.set(0,0,0),null;const m=1/p,A=(h*c-o*d)*m,v=(a*d-o*c)*m;return s.set(1-A-v,v,A)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,So)===null?!1:So.x>=0&&So.y>=0&&So.x+So.y<=1}static getInterpolation(e,t,i,r,s,a,o,c){return this.getBarycoord(e,t,i,r,So)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(s,So.x),c.addScaledVector(a,So.y),c.addScaledVector(o,So.z),c)}static getInterpolatedAttribute(e,t,i,r,s,a){return zC.setScalar(0),HC.setScalar(0),GC.setScalar(0),zC.fromBufferAttribute(e,t),HC.fromBufferAttribute(e,i),GC.fromBufferAttribute(e,r),a.setScalar(0),a.addScaledVector(zC,s.x),a.addScaledVector(HC,s.y),a.addScaledVector(GC,s.z),a}static isFrontFacing(e,t,i,r){return ca.subVectors(i,t),wo.subVectors(e,t),ca.cross(wo).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ca.subVectors(this.c,this.b),wo.subVectors(this.a,this.b),ca.cross(wo).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Jr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Jr.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return Jr.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Jr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Jr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let a,o;Uh.subVectors(r,i),kh.subVectors(s,i),NC.subVectors(e,i);const c=Uh.dot(NC),h=kh.dot(NC);if(c<=0&&h<=0)return t.copy(i);FC.subVectors(e,r);const d=Uh.dot(FC),p=kh.dot(FC);if(d>=0&&p<=d)return t.copy(r);const m=c*p-d*h;if(m<=0&&c>=0&&d<=0)return a=c/(c-d),t.copy(i).addScaledVector(Uh,a);QC.subVectors(e,s);const A=Uh.dot(QC),v=kh.dot(QC);if(v>=0&&A<=v)return t.copy(s);const y=A*h-c*v;if(y<=0&&h>=0&&v<=0)return o=h/(h-v),t.copy(i).addScaledVector(kh,o);const E=d*v-A*p;if(E<=0&&p-d>=0&&A-v>=0)return xD.subVectors(s,r),o=(p-d)/(p-d+(A-v)),t.copy(r).addScaledVector(xD,o);const b=1/(E+y+m);return a=y*b,o=m*b,t.copy(i).addScaledVector(Uh,a).addScaledVector(kh,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const RN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Il={h:0,s:0,l:0},Ng={h:0,s:0,l:0};function VC(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class ut{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Kr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,cn.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=cn.workingColorSpace){return this.r=e,this.g=t,this.b=i,cn.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=cn.workingColorSpace){if(e=i2(e,1),t=Ut(t,0,1),i=Ut(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,a=2*i-s;this.r=VC(a,s,e+1/3),this.g=VC(a,s,e),this.b=VC(a,s,e-1/3)}return cn.toWorkingColorSpace(this,r),this}setStyle(e,t=Kr){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=r[1],o=r[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Kr){const i=RN[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=qo(e.r),this.g=qo(e.g),this.b=qo(e.b),this}copyLinearToSRGB(e){return this.r=bd(e.r),this.g=bd(e.g),this.b=bd(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Kr){return cn.fromWorkingColorSpace(lr.copy(this),e),Math.round(Ut(lr.r*255,0,255))*65536+Math.round(Ut(lr.g*255,0,255))*256+Math.round(Ut(lr.b*255,0,255))}getHexString(e=Kr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=cn.workingColorSpace){cn.fromWorkingColorSpace(lr.copy(this),t);const i=lr.r,r=lr.g,s=lr.b,a=Math.max(i,r,s),o=Math.min(i,r,s);let c,h;const d=(o+a)/2;if(o===a)c=0,h=0;else{const p=a-o;switch(h=d<=.5?p/(a+o):p/(2-a-o),a){case i:c=(r-s)/p+(r<s?6:0);break;case r:c=(s-i)/p+2;break;case s:c=(i-r)/p+4;break}c/=6}return e.h=c,e.s=h,e.l=d,e}getRGB(e,t=cn.workingColorSpace){return cn.fromWorkingColorSpace(lr.copy(this),t),e.r=lr.r,e.g=lr.g,e.b=lr.b,e}getStyle(e=Kr){cn.fromWorkingColorSpace(lr.copy(this),e);const t=lr.r,i=lr.g,r=lr.b;return e!==Kr?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Il),this.setHSL(Il.h+e,Il.s+t,Il.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Il),e.getHSL(Ng);const i=Zp(Il.h,Ng.h,t),r=Zp(Il.s,Ng.s,t),s=Zp(Il.l,Ng.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const lr=new ut;ut.NAMES=RN;let Eq=0;class yr extends to{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Eq++}),this.uuid=Rs(),this.name="",this.type="Material",this.blending=yu,this.side=$o,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Uv,this.blendDst=kv,this.blendEquation=Ql,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ut(0,0,0),this.blendAlpha=0,this.depthFunc=Bu,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=ew,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=nu,this.stencilZFail=nu,this.stencilZPass=nu,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==yu&&(i.blending=this.blending),this.side!==$o&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==Uv&&(i.blendSrc=this.blendSrc),this.blendDst!==kv&&(i.blendDst=this.blendDst),this.blendEquation!==Ql&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Bu&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==ew&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==nu&&(i.stencilFail=this.stencilFail),this.stencilZFail!==nu&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==nu&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const a=[];for(const o in s){const c=s[o];delete c.metadata,a.push(c)}return a}if(t){const s=r(e.textures),a=r(e.images);s.length>0&&(i.textures=s),a.length>0&&(i.images=a)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class cc extends yr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ut(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Os,this.combine=Ym,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Uo=xq();function xq(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let c=0;c<256;++c){const h=c-127;h<-27?(i[c]=0,i[c|256]=32768,r[c]=24,r[c|256]=24):h<-14?(i[c]=1024>>-h-14,i[c|256]=1024>>-h-14|32768,r[c]=-h-1,r[c|256]=-h-1):h<=15?(i[c]=h+15<<10,i[c|256]=h+15<<10|32768,r[c]=13,r[c|256]=13):h<128?(i[c]=31744,i[c|256]=64512,r[c]=24,r[c|256]=24):(i[c]=31744,i[c|256]=64512,r[c]=13,r[c|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let c=1;c<1024;++c){let h=c<<13,d=0;for(;(h&8388608)===0;)h<<=1,d-=8388608;h&=-8388609,d+=947912704,s[c]=h|d}for(let c=1024;c<2048;++c)s[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)a[c]=c<<23;a[31]=1199570944,a[32]=2147483648;for(let c=33;c<63;++c)a[c]=2147483648+(c-32<<23);a[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(o[c]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:a,offsetTable:o}}function jr(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Ut(n,-65504,65504),Uo.floatView[0]=n;const e=Uo.uint32View[0],t=e>>23&511;return Uo.baseTable[t]+((e&8388607)>>Uo.shiftTable[t])}function Bp(n){const e=n>>10;return Uo.uint32View[0]=Uo.mantissaTable[Uo.offsetTable[e]+(n&1023)]+Uo.exponentTable[e],Uo.floatView[0]}const Cq={toHalfFloat:jr,fromHalfFloat:Bp},xi=new K,Fg=new He;let _q=0;class Ln{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:_q++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=_m,this.updateRanges=[],this.gpuType=Or,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Fg.fromBufferAttribute(this,t),Fg.applyMatrix3(e),this.setXY(t,Fg.x,Fg.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)xi.fromBufferAttribute(this,t),xi.applyMatrix3(e),this.setXYZ(t,xi.x,xi.y,xi.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)xi.fromBufferAttribute(this,t),xi.applyMatrix4(e),this.setXYZ(t,xi.x,xi.y,xi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)xi.fromBufferAttribute(this,t),xi.applyNormalMatrix(e),this.setXYZ(t,xi.x,xi.y,xi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)xi.fromBufferAttribute(this,t),xi.transformDirection(e),this.setXYZ(t,xi.x,xi.y,xi.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Pr(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Ft(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Pr(t,this.array)),t}setX(e,t){return this.normalized&&(t=Ft(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Pr(t,this.array)),t}setY(e,t){return this.normalized&&(t=Ft(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Pr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Ft(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Pr(t,this.array)),t}setW(e,t){return this.normalized&&(t=Ft(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Ft(t,this.array),i=Ft(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Ft(t,this.array),i=Ft(i,this.array),r=Ft(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Ft(t,this.array),i=Ft(i,this.array),r=Ft(r,this.array),s=Ft(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==_m&&(e.usage=this.usage),e}}class wq extends Ln{constructor(e,t,i){super(new Int8Array(e),t,i)}}class Sq extends Ln{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class Mq extends Ln{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class Tq extends Ln{constructor(e,t,i){super(new Int16Array(e),t,i)}}class r2 extends Ln{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class Bq extends Ln{constructor(e,t,i){super(new Int32Array(e),t,i)}}class s2 extends Ln{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class Iq extends Ln{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=Bp(this.array[e*this.itemSize]);return this.normalized&&(t=Pr(t,this.array)),t}setX(e,t){return this.normalized&&(t=Ft(t,this.array)),this.array[e*this.itemSize]=jr(t),this}getY(e){let t=Bp(this.array[e*this.itemSize+1]);return this.normalized&&(t=Pr(t,this.array)),t}setY(e,t){return this.normalized&&(t=Ft(t,this.array)),this.array[e*this.itemSize+1]=jr(t),this}getZ(e){let t=Bp(this.array[e*this.itemSize+2]);return this.normalized&&(t=Pr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Ft(t,this.array)),this.array[e*this.itemSize+2]=jr(t),this}getW(e){let t=Bp(this.array[e*this.itemSize+3]);return this.normalized&&(t=Pr(t,this.array)),t}setW(e,t){return this.normalized&&(t=Ft(t,this.array)),this.array[e*this.itemSize+3]=jr(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Ft(t,this.array),i=Ft(i,this.array)),this.array[e+0]=jr(t),this.array[e+1]=jr(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Ft(t,this.array),i=Ft(i,this.array),r=Ft(r,this.array)),this.array[e+0]=jr(t),this.array[e+1]=jr(i),this.array[e+2]=jr(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Ft(t,this.array),i=Ft(i,this.array),r=Ft(r,this.array),s=Ft(s,this.array)),this.array[e+0]=jr(t),this.array[e+1]=jr(i),this.array[e+2]=jr(r),this.array[e+3]=jr(s),this}}class mt extends Ln{constructor(e,t,i){super(new Float32Array(e),t,i)}}let Rq=0;const Gs=new It,WC=new fn,Nh=new K,gs=new Qr,Jf=new Qr,Hi=new K;class Vt extends to{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Rq++}),this.uuid=Rs(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(TN(e)?s2:r2)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Pt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Gs.makeRotationFromQuaternion(e),this.applyMatrix4(Gs),this}rotateX(e){return Gs.makeRotationX(e),this.applyMatrix4(Gs),this}rotateY(e){return Gs.makeRotationY(e),this.applyMatrix4(Gs),this}rotateZ(e){return Gs.makeRotationZ(e),this.applyMatrix4(Gs),this}translate(e,t,i){return Gs.makeTranslation(e,t,i),this.applyMatrix4(Gs),this}scale(e,t,i){return Gs.makeScale(e,t,i),this.applyMatrix4(Gs),this}lookAt(e){return WC.lookAt(e),WC.updateMatrix(),this.applyMatrix4(WC.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Nh).negate(),this.translate(Nh.x,Nh.y,Nh.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let r=0,s=e.length;r<s;r++){const a=e[r];i.push(a.x,a.y,a.z||0)}this.setAttribute("position",new mt(i,3))}else{const i=Math.min(e.length,t.count);for(let r=0;r<i;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Qr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new K(-1/0,-1/0,-1/0),new K(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];gs.setFromBufferAttribute(s),this.morphTargetsRelative?(Hi.addVectors(this.boundingBox.min,gs.min),this.boundingBox.expandByPoint(Hi),Hi.addVectors(this.boundingBox.max,gs.max),this.boundingBox.expandByPoint(Hi)):(this.boundingBox.expandByPoint(gs.min),this.boundingBox.expandByPoint(gs.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new vr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new K,1/0);return}if(e){const i=this.boundingSphere.center;if(gs.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){const o=t[s];Jf.setFromBufferAttribute(o),this.morphTargetsRelative?(Hi.addVectors(gs.min,Jf.min),gs.expandByPoint(Hi),Hi.addVectors(gs.max,Jf.max),gs.expandByPoint(Hi)):(gs.expandByPoint(Jf.min),gs.expandByPoint(Jf.max))}gs.getCenter(i);let r=0;for(let s=0,a=e.count;s<a;s++)Hi.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Hi));if(t)for(let s=0,a=t.length;s<a;s++){const o=t[s],c=this.morphTargetsRelative;for(let h=0,d=o.count;h<d;h++)Hi.fromBufferAttribute(o,h),c&&(Nh.fromBufferAttribute(e,h),Hi.add(Nh)),r=Math.max(r,i.distanceToSquared(Hi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ln(new Float32Array(4*i.count),4));const a=this.getAttribute("tangent"),o=[],c=[];for(let P=0;P<i.count;P++)o[P]=new K,c[P]=new K;const h=new K,d=new K,p=new K,m=new He,A=new He,v=new He,y=new K,E=new K;function b(P,D,M){h.fromBufferAttribute(i,P),d.fromBufferAttribute(i,D),p.fromBufferAttribute(i,M),m.fromBufferAttribute(s,P),A.fromBufferAttribute(s,D),v.fromBufferAttribute(s,M),d.sub(h),p.sub(h),A.sub(m),v.sub(m);const k=1/(A.x*v.y-v.x*A.y);isFinite(k)&&(y.copy(d).multiplyScalar(v.y).addScaledVector(p,-A.y).multiplyScalar(k),E.copy(p).multiplyScalar(A.x).addScaledVector(d,-v.x).multiplyScalar(k),o[P].add(y),o[D].add(y),o[M].add(y),c[P].add(E),c[D].add(E),c[M].add(E))}let C=this.groups;C.length===0&&(C=[{start:0,count:e.count}]);for(let P=0,D=C.length;P<D;++P){const M=C[P],k=M.start,V=M.count;for(let X=k,$=k+V;X<$;X+=3)b(e.getX(X+0),e.getX(X+1),e.getX(X+2))}const _=new K,w=new K,T=new K,L=new K;function R(P){T.fromBufferAttribute(r,P),L.copy(T);const D=o[P];_.copy(D),_.sub(T.multiplyScalar(T.dot(D))).normalize(),w.crossVectors(L,D);const k=w.dot(c[P])<0?-1:1;a.setXYZW(P,_.x,_.y,_.z,k)}for(let P=0,D=C.length;P<D;++P){const M=C[P],k=M.start,V=M.count;for(let X=k,$=k+V;X<$;X+=3)R(e.getX(X+0)),R(e.getX(X+1)),R(e.getX(X+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Ln(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let m=0,A=i.count;m<A;m++)i.setXYZ(m,0,0,0);const r=new K,s=new K,a=new K,o=new K,c=new K,h=new K,d=new K,p=new K;if(e)for(let m=0,A=e.count;m<A;m+=3){const v=e.getX(m+0),y=e.getX(m+1),E=e.getX(m+2);r.fromBufferAttribute(t,v),s.fromBufferAttribute(t,y),a.fromBufferAttribute(t,E),d.subVectors(a,s),p.subVectors(r,s),d.cross(p),o.fromBufferAttribute(i,v),c.fromBufferAttribute(i,y),h.fromBufferAttribute(i,E),o.add(d),c.add(d),h.add(d),i.setXYZ(v,o.x,o.y,o.z),i.setXYZ(y,c.x,c.y,c.z),i.setXYZ(E,h.x,h.y,h.z)}else for(let m=0,A=t.count;m<A;m+=3)r.fromBufferAttribute(t,m+0),s.fromBufferAttribute(t,m+1),a.fromBufferAttribute(t,m+2),d.subVectors(a,s),p.subVectors(r,s),d.cross(p),i.setXYZ(m+0,d.x,d.y,d.z),i.setXYZ(m+1,d.x,d.y,d.z),i.setXYZ(m+2,d.x,d.y,d.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Hi.fromBufferAttribute(e,t),Hi.normalize(),e.setXYZ(t,Hi.x,Hi.y,Hi.z)}toNonIndexed(){function e(o,c){const h=o.array,d=o.itemSize,p=o.normalized,m=new h.constructor(c.length*d);let A=0,v=0;for(let y=0,E=c.length;y<E;y++){o.isInterleavedBufferAttribute?A=c[y]*o.data.stride+o.offset:A=c[y]*d;for(let b=0;b<d;b++)m[v++]=h[A++]}return new Ln(m,d,p)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Vt,i=this.index.array,r=this.attributes;for(const o in r){const c=r[o],h=e(c,i);t.setAttribute(o,h)}const s=this.morphAttributes;for(const o in s){const c=[],h=s[o];for(let d=0,p=h.length;d<p;d++){const m=h[d],A=e(m,i);c.push(A)}t.morphAttributes[o]=c}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,c=a.length;o<c;o++){const h=a[o];t.addGroup(h.start,h.count,h.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const h in c)c[h]!==void 0&&(e[h]=c[h]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const c in i){const h=i[c];e.data.attributes[c]=h.toJSON(e.data)}const r={};let s=!1;for(const c in this.morphAttributes){const h=this.morphAttributes[c],d=[];for(let p=0,m=h.length;p<m;p++){const A=h[p];d.push(A.toJSON(e.data))}d.length>0&&(r[c]=d,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const h in r){const d=r[h];this.setAttribute(h,d.clone(t))}const s=e.morphAttributes;for(const h in s){const d=[],p=s[h];for(let m=0,A=p.length;m<A;m++)d.push(p[m].clone(t));this.morphAttributes[h]=d}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let h=0,d=a.length;h<d;h++){const p=a[h];this.addGroup(p.start,p.count,p.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const CD=new It,Lc=new Hd,Qg=new vr,_D=new K,zg=new K,Hg=new K,Gg=new K,qC=new K,Vg=new K,wD=new K,Wg=new K;class Mi extends fn{constructor(e=new Vt,t=new cc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,a=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const o=this.morphTargetInfluences;if(s&&o){Vg.set(0,0,0);for(let c=0,h=s.length;c<h;c++){const d=o[c],p=s[c];d!==0&&(qC.fromBufferAttribute(p,e),a?Vg.addScaledVector(qC,d):Vg.addScaledVector(qC.sub(t),d))}t.add(Vg)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Qg.copy(i.boundingSphere),Qg.applyMatrix4(s),Lc.copy(e.ray).recast(e.near),!(Qg.containsPoint(Lc.origin)===!1&&(Lc.intersectSphere(Qg,_D)===null||Lc.origin.distanceToSquared(_D)>(e.far-e.near)**2))&&(CD.copy(s).invert(),Lc.copy(e.ray).applyMatrix4(CD),!(i.boundingBox!==null&&Lc.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Lc)))}_computeIntersections(e,t,i){let r;const s=this.geometry,a=this.material,o=s.index,c=s.attributes.position,h=s.attributes.uv,d=s.attributes.uv1,p=s.attributes.normal,m=s.groups,A=s.drawRange;if(o!==null)if(Array.isArray(a))for(let v=0,y=m.length;v<y;v++){const E=m[v],b=a[E.materialIndex],C=Math.max(E.start,A.start),_=Math.min(o.count,Math.min(E.start+E.count,A.start+A.count));for(let w=C,T=_;w<T;w+=3){const L=o.getX(w),R=o.getX(w+1),P=o.getX(w+2);r=qg(this,b,e,i,h,d,p,L,R,P),r&&(r.faceIndex=Math.floor(w/3),r.face.materialIndex=E.materialIndex,t.push(r))}}else{const v=Math.max(0,A.start),y=Math.min(o.count,A.start+A.count);for(let E=v,b=y;E<b;E+=3){const C=o.getX(E),_=o.getX(E+1),w=o.getX(E+2);r=qg(this,a,e,i,h,d,p,C,_,w),r&&(r.faceIndex=Math.floor(E/3),t.push(r))}}else if(c!==void 0)if(Array.isArray(a))for(let v=0,y=m.length;v<y;v++){const E=m[v],b=a[E.materialIndex],C=Math.max(E.start,A.start),_=Math.min(c.count,Math.min(E.start+E.count,A.start+A.count));for(let w=C,T=_;w<T;w+=3){const L=w,R=w+1,P=w+2;r=qg(this,b,e,i,h,d,p,L,R,P),r&&(r.faceIndex=Math.floor(w/3),r.face.materialIndex=E.materialIndex,t.push(r))}}else{const v=Math.max(0,A.start),y=Math.min(c.count,A.start+A.count);for(let E=v,b=y;E<b;E+=3){const C=E,_=E+1,w=E+2;r=qg(this,a,e,i,h,d,p,C,_,w),r&&(r.faceIndex=Math.floor(E/3),t.push(r))}}}}function Dq(n,e,t,i,r,s,a,o){let c;if(e.side===Fr?c=i.intersectTriangle(a,s,r,!0,o):c=i.intersectTriangle(r,s,a,e.side===$o,o),c===null)return null;Wg.copy(o),Wg.applyMatrix4(n.matrixWorld);const h=t.ray.origin.distanceTo(Wg);return h<t.near||h>t.far?null:{distance:h,point:Wg.clone(),object:n}}function qg(n,e,t,i,r,s,a,o,c,h){n.getVertexPosition(o,zg),n.getVertexPosition(c,Hg),n.getVertexPosition(h,Gg);const d=Dq(n,e,t,i,zg,Hg,Gg,wD);if(d){const p=new K;Jr.getBarycoord(wD,zg,Hg,Gg,p),r&&(d.uv=Jr.getInterpolatedAttribute(r,o,c,h,p,new He)),s&&(d.uv1=Jr.getInterpolatedAttribute(s,o,c,h,p,new He)),a&&(d.normal=Jr.getInterpolatedAttribute(a,o,c,h,p,new K),d.normal.dot(i.direction)>0&&d.normal.multiplyScalar(-1));const m={a:o,b:c,c:h,normal:new K,materialIndex:0};Jr.getNormal(zg,Hg,Gg,m.normal),d.face=m,d.barycoord=p}return d}class Fu extends Vt{constructor(e=1,t=1,i=1,r=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:a};const o=this;r=Math.floor(r),s=Math.floor(s),a=Math.floor(a);const c=[],h=[],d=[],p=[];let m=0,A=0;v("z","y","x",-1,-1,i,t,e,a,s,0),v("z","y","x",1,-1,i,t,-e,a,s,1),v("x","z","y",1,1,e,i,t,r,a,2),v("x","z","y",1,-1,e,i,-t,r,a,3),v("x","y","z",1,-1,e,t,i,r,s,4),v("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(c),this.setAttribute("position",new mt(h,3)),this.setAttribute("normal",new mt(d,3)),this.setAttribute("uv",new mt(p,2));function v(y,E,b,C,_,w,T,L,R,P,D){const M=w/R,k=T/P,V=w/2,X=T/2,$=L/2,ae=R+1,z=P+1;let j=0,Z=0;const ce=new K;for(let U=0;U<z;U++){const se=U*k-X;for(let me=0;me<ae;me++){const be=me*M-V;ce[y]=be*C,ce[E]=se*_,ce[b]=$,h.push(ce.x,ce.y,ce.z),ce[y]=0,ce[E]=0,ce[b]=L>0?1:-1,d.push(ce.x,ce.y,ce.z),p.push(me/R),p.push(1-U/P),j+=1}}for(let U=0;U<P;U++)for(let se=0;se<R;se++){const me=m+se+ae*U,be=m+se+ae*(U+1),xe=m+(se+1)+ae*(U+1),Ue=m+(se+1)+ae*U;c.push(me,be,Ue),c.push(be,xe,Ue),Z+=6}o.addGroup(A,Z,D),A+=Z,m+=j}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fu(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Dd(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Mr(n){const e={};for(let t=0;t<n.length;t++){const i=Dd(n[t]);for(const r in i)e[r]=i[r]}return e}function Lq(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function DN(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:cn.workingColorSpace}const LN={clone:Dd,merge:Mr};var Oq=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Pq=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ea extends yr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Oq,this.fragmentShader=Pq,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Dd(e.uniforms),this.uniformsGroups=Lq(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const a=this.uniforms[r].value;a&&a.isTexture?t.uniforms[r]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[r]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[r]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[r]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[r]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[r]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[r]={type:"m4",value:a.toArray()}:t.uniforms[r]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class gb extends fn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new It,this.projectionMatrix=new It,this.projectionMatrixInverse=new It,this.coordinateSystem=ga}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Rl=new K,SD=new He,MD=new He;class $i extends gb{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Rd*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(bu*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Rd*2*Math.atan(Math.tan(bu*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Rl.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Rl.x,Rl.y).multiplyScalar(-e/Rl.z),Rl.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Rl.x,Rl.y).multiplyScalar(-e/Rl.z)}getViewSize(e,t){return this.getViewBounds(e,SD,MD),t.subVectors(MD,SD)}setViewOffset(e,t,i,r,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(bu*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const a=this.view;if(this.view!==null&&this.view.enabled){const c=a.fullWidth,h=a.fullHeight;s+=a.offsetX*r/c,t-=a.offsetY*i/h,r*=a.width/c,i*=a.height/h}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Fh=-90,Qh=1;class ON extends fn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new $i(Fh,Qh,e,t);r.layers=this.layers,this.add(r);const s=new $i(Fh,Qh,e,t);s.layers=this.layers,this.add(s);const a=new $i(Fh,Qh,e,t);a.layers=this.layers,this.add(a);const o=new $i(Fh,Qh,e,t);o.layers=this.layers,this.add(o);const c=new $i(Fh,Qh,e,t);c.layers=this.layers,this.add(c);const h=new $i(Fh,Qh,e,t);h.layers=this.layers,this.add(h)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,a,o,c]=t;for(const h of t)this.remove(h);if(e===ga)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===wm)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const h of t)this.add(h),h.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,o,c,h,d]=this.children,p=e.getRenderTarget(),m=e.getActiveCubeFace(),A=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const y=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,a),e.setRenderTarget(i,2,r),e.render(t,o),e.setRenderTarget(i,3,r),e.render(t,c),e.setRenderTarget(i,4,r),e.render(t,h),i.texture.generateMipmaps=y,e.setRenderTarget(i,5,r),e.render(t,d),e.setRenderTarget(p,m,A),e.xr.enabled=v,i.texture.needsPMREMUpdate=!0}}class Zm extends ci{constructor(e,t,i,r,s,a,o,c,h,d){e=e!==void 0?e:[],t=t!==void 0?t:el,super(e,t,i,r,s,a,o,c,h,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class PN extends ba{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Zm(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Ui}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Fu(5,5,5),s=new Ea({name:"CubemapFromEquirect",uniforms:Dd(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Fr,blending:Vo});s.uniforms.tEquirect.value=t;const a=new Mi(r,s),o=t.minFilter;return t.minFilter===Ga&&(t.minFilter=Ui),new ON(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,i,r);e.setRenderTarget(s)}}class ld extends fn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Uq={type:"move"};class hv{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ld,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ld,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new K,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new K),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ld,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new K,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new K),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,a=null;const o=this._targetRay,c=this._grip,h=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(h&&e.hand){a=!0;for(const y of e.hand.values()){const E=t.getJointPose(y,i),b=this._getHandJoint(h,y);E!==null&&(b.matrix.fromArray(E.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),b.matrixWorldNeedsUpdate=!0,b.jointRadius=E.radius),b.visible=E!==null}const d=h.joints["index-finger-tip"],p=h.joints["thumb-tip"],m=d.position.distanceTo(p.position),A=.02,v=.005;h.inputState.pinching&&m>A+v?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!h.inputState.pinching&&m<=A-v&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));o!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(Uq)))}return o!==null&&(o.visible=r!==null),c!==null&&(c.visible=s!==null),h!==null&&(h.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new ld;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class vb{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new ut(e),this.density=t}clone(){return new vb(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class yb{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new ut(e),this.near=t,this.far=i}clone(){return new yb(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class UN extends fn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Os,this.environmentIntensity=1,this.environmentRotation=new Os,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class bb{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=_m,this.updateRanges=[],this.version=0,this.uuid=Rs()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Rs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Rs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const _r=new K;class Ru{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)_r.fromBufferAttribute(this,t),_r.applyMatrix4(e),this.setXYZ(t,_r.x,_r.y,_r.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)_r.fromBufferAttribute(this,t),_r.applyNormalMatrix(e),this.setXYZ(t,_r.x,_r.y,_r.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)_r.fromBufferAttribute(this,t),_r.transformDirection(e),this.setXYZ(t,_r.x,_r.y,_r.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Pr(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Ft(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=Ft(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Ft(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Ft(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Ft(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Pr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Pr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Pr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Pr(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ft(t,this.array),i=Ft(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ft(t,this.array),i=Ft(i,this.array),r=Ft(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ft(t,this.array),i=Ft(i,this.array),r=Ft(r,this.array),s=Ft(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Ln(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ru(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class a2 extends yr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ut(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let zh;const Zf=new K,Hh=new K,Gh=new K,Vh=new He,$f=new He,kN=new It,jg=new K,ep=new K,Xg=new K,TD=new He,jC=new He,BD=new He;class NN extends fn{constructor(e=new a2){if(super(),this.isSprite=!0,this.type="Sprite",zh===void 0){zh=new Vt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new bb(t,5);zh.setIndex([0,1,2,0,2,3]),zh.setAttribute("position",new Ru(i,3,0,!1)),zh.setAttribute("uv",new Ru(i,2,3,!1))}this.geometry=zh,this.material=e,this.center=new He(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Hh.setFromMatrixScale(this.matrixWorld),kN.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Gh.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Hh.multiplyScalar(-Gh.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const a=this.center;Yg(jg.set(-.5,-.5,0),Gh,a,Hh,r,s),Yg(ep.set(.5,-.5,0),Gh,a,Hh,r,s),Yg(Xg.set(.5,.5,0),Gh,a,Hh,r,s),TD.set(0,0),jC.set(1,0),BD.set(1,1);let o=e.ray.intersectTriangle(jg,ep,Xg,!1,Zf);if(o===null&&(Yg(ep.set(-.5,.5,0),Gh,a,Hh,r,s),jC.set(0,1),o=e.ray.intersectTriangle(jg,Xg,ep,!1,Zf),o===null))return;const c=e.ray.origin.distanceTo(Zf);c<e.near||c>e.far||t.push({distance:c,point:Zf.clone(),uv:Jr.getInterpolation(Zf,jg,ep,Xg,TD,jC,BD,new He),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Yg(n,e,t,i,r,s){Vh.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?($f.x=s*Vh.x-r*Vh.y,$f.y=r*Vh.x+s*Vh.y):$f.copy(Vh),n.copy(e),n.x+=$f.x,n.y+=$f.y,n.applyMatrix4(kN)}const Kg=new K,ID=new K;class FN extends fn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const r=t.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){Kg.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Kg);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Kg.setFromMatrixPosition(e.matrixWorld),ID.setFromMatrixPosition(this.matrixWorld);const i=Kg.distanceTo(ID)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let a=t[r].distance;if(t[r].object.visible&&(a-=a*t[r].hysteresis),i>=a)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const a=i[r];t.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return t}}const RD=new K,DD=new dn,LD=new dn,kq=new K,OD=new It,Jg=new K,XC=new vr,PD=new It,YC=new Hd;class QN extends Mi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=$1,this.bindMatrix=new It,this.bindMatrixInverse=new It,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Qr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Jg),this.boundingBox.expandByPoint(Jg)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new vr),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Jg),this.boundingSphere.expandByPoint(Jg)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),XC.copy(this.boundingSphere),XC.applyMatrix4(r),e.ray.intersectsSphere(XC)!==!1&&(PD.copy(r).invert(),YC.copy(e.ray).applyMatrix4(PD),!(this.boundingBox!==null&&YC.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,YC)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new dn,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===$1?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===pN?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;DD.fromBufferAttribute(r.attributes.skinIndex,e),LD.fromBufferAttribute(r.attributes.skinWeight,e),RD.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const a=LD.getComponent(s);if(a!==0){const o=DD.getComponent(s);OD.multiplyMatrices(i.bones[o].matrixWorld,i.boneInverses[o]),t.addScaledVector(kq.copy(RD).applyMatrix4(OD),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}class o2 extends fn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Ka extends ci{constructor(e=null,t=1,i=1,r,s,a,o,c,h=rr,d=rr,p,m){super(null,a,o,c,h,d,r,s,p,m),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const UD=new It,Nq=new It;class Eb{constructor(e=[],t=[]){this.uuid=Rs(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new It)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new It;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,a=e.length;s<a;s++){const o=e[s]?e[s].matrixWorld:Nq;UD.multiplyMatrices(o,t[s]),UD.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Eb(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Ka(t,e,e,kr,Or);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let a=t[s];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new o2),this.bones.push(a),this.boneInverses.push(new It().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const a=t[r];e.bones.push(a.uuid);const o=i[r];e.boneInverses.push(o.toArray())}return e}}class Ld extends Ln{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Wh=new It,kD=new It,Zg=[],ND=new Qr,Fq=new It,tp=new Mi,np=new vr;class zN extends Mi{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Ld(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,Fq)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Qr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Wh),ND.copy(e.boundingBox).applyMatrix4(Wh),this.boundingBox.union(ND)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new vr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Wh),np.copy(e.boundingSphere).applyMatrix4(Wh),this.boundingSphere.union(np)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,a=e*s+1;for(let o=0;o<i.length;o++)i[o]=r[a+o]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(tp.geometry=this.geometry,tp.material=this.material,tp.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),np.copy(this.boundingSphere),np.applyMatrix4(i),e.ray.intersectsSphere(np)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Wh),kD.multiplyMatrices(i,Wh),tp.matrixWorld=kD,tp.raycast(e,Zg);for(let a=0,o=Zg.length;a<o;a++){const c=Zg[a];c.instanceId=s,c.object=this,t.push(c)}Zg.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Ld(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new Ka(new Float32Array(r*this.count),r,this.count,ub,Or));const s=this.morphTexture.source.data.data;let a=0;for(let h=0;h<i.length;h++)a+=i[h];const o=this.geometry.morphTargetsRelative?1:1-a,c=r*e;s[c]=o,s.set(i,c+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}const KC=new K,Qq=new K,zq=new Pt;class Nl{constructor(e=new K(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=KC.subVectors(i,t).cross(Qq.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(KC),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||zq.getNormalMatrix(e),r=this.coplanarPoint(KC).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Oc=new vr,$g=new K;class $m{constructor(e=new Nl,t=new Nl,i=new Nl,r=new Nl,s=new Nl,a=new Nl){this.planes=[e,t,i,r,s,a]}set(e,t,i,r,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(i),o[3].copy(r),o[4].copy(s),o[5].copy(a),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=ga){const i=this.planes,r=e.elements,s=r[0],a=r[1],o=r[2],c=r[3],h=r[4],d=r[5],p=r[6],m=r[7],A=r[8],v=r[9],y=r[10],E=r[11],b=r[12],C=r[13],_=r[14],w=r[15];if(i[0].setComponents(c-s,m-h,E-A,w-b).normalize(),i[1].setComponents(c+s,m+h,E+A,w+b).normalize(),i[2].setComponents(c+a,m+d,E+v,w+C).normalize(),i[3].setComponents(c-a,m-d,E-v,w-C).normalize(),i[4].setComponents(c-o,m-p,E-y,w-_).normalize(),t===ga)i[5].setComponents(c+o,m+p,E+y,w+_).normalize();else if(t===wm)i[5].setComponents(o,p,y,_).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Oc.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Oc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Oc)}intersectsSprite(e){return Oc.center.set(0,0,0),Oc.radius=.7071067811865476,Oc.applyMatrix4(e.matrixWorld),this.intersectsSphere(Oc)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if($g.x=r.normal.x>0?e.max.x:e.min.x,$g.y=r.normal.y>0?e.max.y:e.min.y,$g.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint($g)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function JC(n,e){return n-e}function Hq(n,e){return n.z-e.z}function Gq(n,e){return e.z-n.z}class Vq{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,r){const s=this.pool,a=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const o=s[this.index];a.push(o),this.index++,o.start=e,o.count=t,o.z=i,o.index=r}reset(){this.list.length=0,this.index=0}}const qr=new It,Wq=new ut(1,1,1),ZC=new $m,e0=new Qr,Pc=new vr,ip=new K,FD=new K,qq=new K,$C=new Vq,cr=new Mi,t0=[];function jq(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let a=0;a<i;a++)e.setComponent(s+t,a,n.getComponent(s,a))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function Uc(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class HN extends Mi{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(e,t,i=t*2,r){super(new Vt,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new Ka(t,e,e,kr,Or);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new Ka(t,e,e,Km,tl);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new Ka(t,e,e,kr,Or);i.colorSpace=cn.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const a=e.getAttribute(s),{array:o,itemSize:c,normalized:h}=a,d=new o.constructor(i*c),p=new Ln(d,c,h);t.setAttribute(s,p)}if(e.getIndex()!==null){const s=i>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new Ln(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Qr);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,qr),this.getBoundingBoxAt(s,e0).applyMatrix4(qr),e.union(e0)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new vr);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,qr),this.getBoundingSphereAt(s,Pc).applyMatrix4(qr),e.union(Pc)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(JC),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const s=this._matricesTexture;qr.identity().toArray(s.image.data,r*16),s.needsUpdate=!0;const a=this._colorsTexture;return a&&(Wq.toArray(a.image.data,r*4),a.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const a=e.getIndex();if(a!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?a.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let c;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(JC),c=this._availableGeometryIds.shift(),s[c]=r):(c=this._geometryCount,this._geometryCount++,s.push(r)),this.setGeometryAt(c,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,c}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),a=t.getIndex(),o=this._geometryInfo[e];if(r&&a.count>o.reservedIndexCount||t.attributes.position.count>o.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const c=o.vertexStart,h=o.reservedVertexCount;o.vertexCount=t.getAttribute("position").count;for(const d in i.attributes){const p=t.getAttribute(d),m=i.getAttribute(d);jq(p,m,c);const A=p.itemSize;for(let v=p.count,y=h;v<y;v++){const E=c+v;for(let b=0;b<A;b++)m.setComponent(E,b,0)}m.needsUpdate=!0,m.addUpdateRange(c*A,h*A)}if(r){const d=o.indexStart,p=o.reservedIndexCount;o.indexCount=t.getIndex().count;for(let m=0;m<a.count;m++)s.setX(d+m,c+a.getX(m));for(let m=a.count,A=p;m<A;m++)s.setX(d+m,c);s.needsUpdate=!0,s.addUpdateRange(d,o.reservedIndexCount)}return o.start=r?o.indexStart:o.vertexStart,o.count=r?o.indexCount:o.vertexCount,o.boundingBox=null,t.boundingBox!==null&&(o.boundingBox=t.boundingBox.clone()),o.boundingSphere=null,t.boundingSphere!==null&&(o.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,s=i.length;r<s;r++)i[r].active&&i[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,r=i.map((a,o)=>o).sort((a,o)=>i[a].vertexStart-i[o].vertexStart),s=this.geometry;for(let a=0,o=i.length;a<o;a++){const c=r[a],h=i[c];if(h.active!==!1){if(s.index!==null){if(h.indexStart!==t){const{indexStart:d,vertexStart:p,reservedIndexCount:m}=h,A=s.index,v=A.array,y=e-p;for(let E=d;E<d+m;E++)v[E]=v[E]+y;A.array.copyWithin(t,d,d+m),A.addUpdateRange(t,m),h.indexStart=t}t+=h.reservedIndexCount}if(h.vertexStart!==e){const{vertexStart:d,reservedVertexCount:p}=h,m=s.attributes;for(const A in m){const v=m[A],{array:y,itemSize:E}=v;y.copyWithin(e*E,d*E,(d+p)*E),v.addUpdateRange(e*E,p*E)}h.vertexStart=e}e+=h.reservedVertexCount,h.start=s.index?h.indexStart:h.vertexStart,this._nextIndexStart=s.index?h.indexStart+h.reservedIndexCount:0,this._nextVertexStart=h.vertexStart+h.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const s=new Qr,a=i.index,o=i.attributes.position;for(let c=r.start,h=r.start+r.count;c<h;c++){let d=c;a&&(d=a.getX(d)),s.expandByPoint(ip.fromBufferAttribute(o,d))}r.boundingBox=s}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const s=new vr;this.getBoundingBoxAt(e,e0),e0.getCenter(s.center);const a=i.index,o=i.attributes.position;let c=0;for(let h=r.start,d=r.start+r.count;h<d;h++){let p=h;a&&(p=a.getX(p)),ip.fromBufferAttribute(o,p),c=Math.max(c,s.center.distanceToSquared(ip))}s.radius=Math.sqrt(c),r.boundingSphere=s}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(JC);t[t.length-1]===i.length;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),s=new Int32Array(e);Uc(this._multiDrawCounts,r),Uc(this._multiDrawStarts,s),this._multiDrawCounts=r,this._multiDrawStarts=s,this._maxInstanceCount=e;const a=this._indirectTexture,o=this._matricesTexture,c=this._colorsTexture;a.dispose(),this._initIndirectTexture(),Uc(a.image.data,this._indirectTexture.image.data),o.dispose(),this._initMatricesTexture(),Uc(o.image.data,this._matricesTexture.image.data),c&&(c.dispose(),this._initColorsTexture(),Uc(c.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(o=>o.active);if(Math.max(...i.map(o=>o.vertexStart+o.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(c=>c.indexStart+c.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Vt,this._initializeGeometry(s));const a=this.geometry;s.index&&Uc(s.index.array,a.index.array);for(const o in s.attributes)Uc(s.attributes[o].array,a.attributes[o].array)}raycast(e,t){const i=this._instanceInfo,r=this._geometryInfo,s=this.matrixWorld,a=this.geometry;cr.material=this.material,cr.geometry.index=a.index,cr.geometry.attributes=a.attributes,cr.geometry.boundingBox===null&&(cr.geometry.boundingBox=new Qr),cr.geometry.boundingSphere===null&&(cr.geometry.boundingSphere=new vr);for(let o=0,c=i.length;o<c;o++){if(!i[o].visible||!i[o].active)continue;const h=i[o].geometryIndex,d=r[h];cr.geometry.setDrawRange(d.start,d.count),this.getMatrixAt(o,cr.matrixWorld).premultiply(s),this.getBoundingBoxAt(h,cr.geometry.boundingBox),this.getBoundingSphereAt(h,cr.geometry.boundingSphere),cr.raycast(e,t0);for(let p=0,m=t0.length;p<m;p++){const A=t0[p];A.object=this,A.batchId=o,t.push(A)}t0.length=0}cr.material=null,cr.geometry.index=null,cr.geometry.attributes={},cr.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=r.getIndex(),o=a===null?1:a.array.BYTES_PER_ELEMENT,c=this._instanceInfo,h=this._multiDrawStarts,d=this._multiDrawCounts,p=this._geometryInfo,m=this.perObjectFrustumCulled,A=this._indirectTexture,v=A.image.data;m&&(qr.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),ZC.setFromProjectionMatrix(qr,e.coordinateSystem));let y=0;if(this.sortObjects){qr.copy(this.matrixWorld).invert(),ip.setFromMatrixPosition(i.matrixWorld).applyMatrix4(qr),FD.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(qr);for(let C=0,_=c.length;C<_;C++)if(c[C].visible&&c[C].active){const w=c[C].geometryIndex;this.getMatrixAt(C,qr),this.getBoundingSphereAt(w,Pc).applyMatrix4(qr);let T=!1;if(m&&(T=!ZC.intersectsSphere(Pc)),!T){const L=p[w],R=qq.subVectors(Pc.center,ip).dot(FD);$C.push(L.start,L.count,R,C)}}const E=$C.list,b=this.customSort;b===null?E.sort(s.transparent?Gq:Hq):b.call(this,E,i);for(let C=0,_=E.length;C<_;C++){const w=E[C];h[y]=w.start*o,d[y]=w.count,v[y]=w.index,y++}$C.reset()}else for(let E=0,b=c.length;E<b;E++)if(c[E].visible&&c[E].active){const C=c[E].geometryIndex;let _=!1;if(m&&(this.getMatrixAt(E,qr),this.getBoundingSphereAt(C,Pc).applyMatrix4(qr),_=!ZC.intersectsSphere(Pc)),!_){const w=p[C];h[y]=w.start*o,d[y]=w.count,v[y]=E,y++}}A.needsUpdate=!0,this._multiDrawCount=y,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,a){this.onBeforeRender(e,null,r,s,a)}}class zr extends yr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ut(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const vy=new K,yy=new K,QD=new It,rp=new Hd,n0=new vr,e_=new K,zD=new K;class rc extends fn{constructor(e=new Vt,t=new zr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)vy.fromBufferAttribute(t,r-1),yy.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=vy.distanceTo(yy);e.setAttribute("lineDistance",new mt(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),n0.copy(i.boundingSphere),n0.applyMatrix4(r),n0.radius+=s,e.ray.intersectsSphere(n0)===!1)return;QD.copy(r).invert(),rp.copy(e.ray).applyMatrix4(QD);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=o*o,h=this.isLineSegments?2:1,d=i.index,m=i.attributes.position;if(d!==null){const A=Math.max(0,a.start),v=Math.min(d.count,a.start+a.count);for(let y=A,E=v-1;y<E;y+=h){const b=d.getX(y),C=d.getX(y+1),_=i0(this,e,rp,c,b,C,y);_&&t.push(_)}if(this.isLineLoop){const y=d.getX(v-1),E=d.getX(A),b=i0(this,e,rp,c,y,E,v-1);b&&t.push(b)}}else{const A=Math.max(0,a.start),v=Math.min(m.count,a.start+a.count);for(let y=A,E=v-1;y<E;y+=h){const b=i0(this,e,rp,c,y,y+1,y);b&&t.push(b)}if(this.isLineLoop){const y=i0(this,e,rp,c,v-1,A,v-1);y&&t.push(y)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function i0(n,e,t,i,r,s,a){const o=n.geometry.attributes.position;if(vy.fromBufferAttribute(o,r),yy.fromBufferAttribute(o,s),t.distanceSqToSegment(vy,yy,e_,zD)>i)return;e_.applyMatrix4(n.matrixWorld);const h=e.ray.origin.distanceTo(e_);if(!(h<e.near||h>e.far))return{distance:h,point:zD.clone().applyMatrix4(n.matrixWorld),index:a,face:null,faceIndex:null,barycoord:null,object:n}}const HD=new K,GD=new K;class no extends rc{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)HD.fromBufferAttribute(t,r),GD.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+HD.distanceTo(GD);e.setAttribute("lineDistance",new mt(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class GN extends rc{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class l2 extends yr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ut(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const VD=new It,nw=new Hd,r0=new vr,s0=new K;class VN extends fn{constructor(e=new Vt,t=new l2){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),r0.copy(i.boundingSphere),r0.applyMatrix4(r),r0.radius+=s,e.ray.intersectsSphere(r0)===!1)return;VD.copy(r).invert(),nw.copy(e.ray).applyMatrix4(VD);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=o*o,h=i.index,p=i.attributes.position;if(h!==null){const m=Math.max(0,a.start),A=Math.min(h.count,a.start+a.count);for(let v=m,y=A;v<y;v++){const E=h.getX(v);s0.fromBufferAttribute(p,E),WD(s0,E,c,r,e,t,this)}}else{const m=Math.max(0,a.start),A=Math.min(p.count,a.start+a.count);for(let v=m,y=A;v<y;v++)s0.fromBufferAttribute(p,v),WD(s0,v,c,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function WD(n,e,t,i,r,s,a){const o=nw.distanceSqToPoint(n);if(o<t){const c=new K;nw.closestPointToPoint(n,c),c.applyMatrix4(i);const h=r.ray.origin.distanceTo(c);if(h<r.near||h>r.far)return;s.push({distance:h,distanceToRay:Math.sqrt(o),point:c,index:e,face:null,faceIndex:null,barycoord:null,object:a})}}class WN extends ci{constructor(e,t,i,r,s,a,o,c,h){super(e,t,i,r,s,a,o,c,h),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:Ui,this.magFilter=s!==void 0?s:Ui,this.generateMipmaps=!1;const d=this;function p(){d.needsUpdate=!0,e.requestVideoFrameCallback(p)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(p)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Xq extends WN{constructor(e,t,i,r,s,a,o,c){super({},e,t,i,r,s,a,o,c),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class Yq extends ci{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=rr,this.minFilter=rr,this.generateMipmaps=!1,this.needsUpdate=!0}}class xb extends ci{constructor(e,t,i,r,s,a,o,c,h,d,p,m){super(null,a,o,c,h,d,r,s,p,m),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Kq extends xb{constructor(e,t,i,r,s,a){super(e,t,i,s,a),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Js,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Jq extends xb{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,el),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Zq extends ci{constructor(e,t,i,r,s,a,o,c,h){super(e,t,i,r,s,a,o,c,h),this.isCanvasTexture=!0,this.needsUpdate=!0}}class c2 extends ci{constructor(e,t,i,r,s,a,o,c,h,d=Kl){if(d!==Kl&&d!==Jl)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&d===Kl&&(i=tl),i===void 0&&d===Jl&&(i=Yl),super(null,r,s,a,o,c,d,i,h),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:rr,this.minFilter=c!==void 0?c:rr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class xa{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let a=1;a<=e;a++)i=this.getPoint(a/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let a;t?a=t:a=e*i[s-1];let o=0,c=s-1,h;for(;o<=c;)if(r=Math.floor(o+(c-o)/2),h=i[r]-a,h<0)o=r+1;else if(h>0)c=r-1;else{c=r;break}if(r=c,i[r]===a)return r/(s-1);const d=i[r],m=i[r+1]-d,A=(a-d)/m;return(r+A)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const a=this.getPoint(r),o=this.getPoint(s),c=t||(a.isVector2?new He:new K);return c.copy(o).sub(a).normalize(),c}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new K,r=[],s=[],a=[],o=new K,c=new It;for(let A=0;A<=e;A++){const v=A/e;r[A]=this.getTangentAt(v,new K)}s[0]=new K,a[0]=new K;let h=Number.MAX_VALUE;const d=Math.abs(r[0].x),p=Math.abs(r[0].y),m=Math.abs(r[0].z);d<=h&&(h=d,i.set(1,0,0)),p<=h&&(h=p,i.set(0,1,0)),m<=h&&i.set(0,0,1),o.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],o),a[0].crossVectors(r[0],s[0]);for(let A=1;A<=e;A++){if(s[A]=s[A-1].clone(),a[A]=a[A-1].clone(),o.crossVectors(r[A-1],r[A]),o.length()>Number.EPSILON){o.normalize();const v=Math.acos(Ut(r[A-1].dot(r[A]),-1,1));s[A].applyMatrix4(c.makeRotationAxis(o,v))}a[A].crossVectors(r[A],s[A])}if(t===!0){let A=Math.acos(Ut(s[0].dot(s[e]),-1,1));A/=e,r[0].dot(o.crossVectors(s[0],s[e]))>0&&(A=-A);for(let v=1;v<=e;v++)s[v].applyMatrix4(c.makeRotationAxis(r[v],A*v)),a[v].crossVectors(r[v],s[v])}return{tangents:r,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Cb extends xa{constructor(e=0,t=0,i=1,r=1,s=0,a=Math.PI*2,o=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=o,this.aRotation=c}getPoint(e,t=new He){const i=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(a?s=0:s=r),this.aClockwise===!0&&!a&&(s===r?s=-r:s=s-r);const o=this.aStartAngle+e*s;let c=this.aX+this.xRadius*Math.cos(o),h=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const d=Math.cos(this.aRotation),p=Math.sin(this.aRotation),m=c-this.aX,A=h-this.aY;c=m*d-A*p+this.aX,h=m*p+A*d+this.aY}return i.set(c,h)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class qN extends Cb{constructor(e,t,i,r,s,a){super(e,t,i,i,r,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function u2(){let n=0,e=0,t=0,i=0;function r(s,a,o,c){n=s,e=o,t=-3*s+3*a-2*o-c,i=2*s-2*a+o+c}return{initCatmullRom:function(s,a,o,c,h){r(a,o,h*(o-s),h*(c-a))},initNonuniformCatmullRom:function(s,a,o,c,h,d,p){let m=(a-s)/h-(o-s)/(h+d)+(o-a)/d,A=(o-a)/d-(c-a)/(d+p)+(c-o)/p;m*=d,A*=d,r(a,o,m,A)},calc:function(s){const a=s*s,o=a*s;return n+e*s+t*a+i*o}}}const a0=new K,t_=new u2,n_=new u2,i_=new u2;class jN extends xa{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new K){const i=t,r=this.points,s=r.length,a=(s-(this.closed?0:1))*e;let o=Math.floor(a),c=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/s)+1)*s:c===0&&o===s-1&&(o=s-2,c=1);let h,d;this.closed||o>0?h=r[(o-1)%s]:(a0.subVectors(r[0],r[1]).add(r[0]),h=a0);const p=r[o%s],m=r[(o+1)%s];if(this.closed||o+2<s?d=r[(o+2)%s]:(a0.subVectors(r[s-1],r[s-2]).add(r[s-1]),d=a0),this.curveType==="centripetal"||this.curveType==="chordal"){const A=this.curveType==="chordal"?.5:.25;let v=Math.pow(h.distanceToSquared(p),A),y=Math.pow(p.distanceToSquared(m),A),E=Math.pow(m.distanceToSquared(d),A);y<1e-4&&(y=1),v<1e-4&&(v=y),E<1e-4&&(E=y),t_.initNonuniformCatmullRom(h.x,p.x,m.x,d.x,v,y,E),n_.initNonuniformCatmullRom(h.y,p.y,m.y,d.y,v,y,E),i_.initNonuniformCatmullRom(h.z,p.z,m.z,d.z,v,y,E)}else this.curveType==="catmullrom"&&(t_.initCatmullRom(h.x,p.x,m.x,d.x,this.tension),n_.initCatmullRom(h.y,p.y,m.y,d.y,this.tension),i_.initCatmullRom(h.z,p.z,m.z,d.z,this.tension));return i.set(t_.calc(c),n_.calc(c),i_.calc(c)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new K().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function qD(n,e,t,i,r){const s=(i-e)*.5,a=(r-t)*.5,o=n*n,c=n*o;return(2*t-2*i+s+a)*c+(-3*t+3*i-2*s-a)*o+s*n+t}function $q(n,e){const t=1-n;return t*t*e}function ej(n,e){return 2*(1-n)*n*e}function tj(n,e){return n*n*e}function $p(n,e,t,i){return $q(n,e)+ej(n,t)+tj(n,i)}function nj(n,e){const t=1-n;return t*t*t*e}function ij(n,e){const t=1-n;return 3*t*t*n*e}function rj(n,e){return 3*(1-n)*n*n*e}function sj(n,e){return n*n*n*e}function em(n,e,t,i,r){return nj(n,e)+ij(n,t)+rj(n,i)+sj(n,r)}class h2 extends xa{constructor(e=new He,t=new He,i=new He,r=new He){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new He){const i=t,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return i.set(em(e,r.x,s.x,a.x,o.x),em(e,r.y,s.y,a.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class XN extends xa{constructor(e=new K,t=new K,i=new K,r=new K){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new K){const i=t,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return i.set(em(e,r.x,s.x,a.x,o.x),em(e,r.y,s.y,a.y,o.y),em(e,r.z,s.z,a.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class d2 extends xa{constructor(e=new He,t=new He){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new He){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new He){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class YN extends xa{constructor(e=new K,t=new K){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new K){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new K){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class f2 extends xa{constructor(e=new He,t=new He,i=new He){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new He){const i=t,r=this.v0,s=this.v1,a=this.v2;return i.set($p(e,r.x,s.x,a.x),$p(e,r.y,s.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class p2 extends xa{constructor(e=new K,t=new K,i=new K){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new K){const i=t,r=this.v0,s=this.v1,a=this.v2;return i.set($p(e,r.x,s.x,a.x),$p(e,r.y,s.y,a.y),$p(e,r.z,s.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class m2 extends xa{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new He){const i=t,r=this.points,s=(r.length-1)*e,a=Math.floor(s),o=s-a,c=r[a===0?a:a-1],h=r[a],d=r[a>r.length-2?r.length-1:a+1],p=r[a>r.length-3?r.length-1:a+2];return i.set(qD(o,c.x,h.x,d.x,p.x),qD(o,c.y,h.y,d.y,p.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new He().fromArray(r))}return this}}var by=Object.freeze({__proto__:null,ArcCurve:qN,CatmullRomCurve3:jN,CubicBezierCurve:h2,CubicBezierCurve3:XN,EllipseCurve:Cb,LineCurve:d2,LineCurve3:YN,QuadraticBezierCurve:f2,QuadraticBezierCurve3:p2,SplineCurve:m2});class KN extends xa{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new by[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const a=r[s]-i,o=this.curves[s],c=o.getLength(),h=c===0?0:1-a/c;return o.getPointAt(h,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const a=s[r],o=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,c=a.getPoints(o);for(let h=0;h<c.length;h++){const d=c[h];i&&i.equals(d)||(t.push(d),i=d)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new by[r.type]().fromJSON(r))}return this}}class Mm extends KN{constructor(e){super(),this.type="Path",this.currentPoint=new He,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new d2(this.currentPoint.clone(),new He(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new f2(this.currentPoint.clone(),new He(e,t),new He(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,a){const o=new h2(this.currentPoint.clone(),new He(e,t),new He(i,r),new He(s,a));return this.curves.push(o),this.currentPoint.set(s,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new m2(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,a){const o=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+o,t+c,i,r,s,a),this}absarc(e,t,i,r,s,a){return this.absellipse(e,t,i,i,r,s,a),this}ellipse(e,t,i,r,s,a,o,c){const h=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+h,t+d,i,r,s,a,o,c),this}absellipse(e,t,i,r,s,a,o,c){const h=new Cb(e,t,i,r,s,a,o,c);if(this.curves.length>0){const p=h.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(h);const d=h.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class eA extends Vt{constructor(e=[new He(0,-.5),new He(.5,0),new He(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Ut(r,0,Math.PI*2);const s=[],a=[],o=[],c=[],h=[],d=1/t,p=new K,m=new He,A=new K,v=new K,y=new K;let E=0,b=0;for(let C=0;C<=e.length-1;C++)switch(C){case 0:E=e[C+1].x-e[C].x,b=e[C+1].y-e[C].y,A.x=b*1,A.y=-E,A.z=b*0,y.copy(A),A.normalize(),c.push(A.x,A.y,A.z);break;case e.length-1:c.push(y.x,y.y,y.z);break;default:E=e[C+1].x-e[C].x,b=e[C+1].y-e[C].y,A.x=b*1,A.y=-E,A.z=b*0,v.copy(A),A.x+=y.x,A.y+=y.y,A.z+=y.z,A.normalize(),c.push(A.x,A.y,A.z),y.copy(v)}for(let C=0;C<=t;C++){const _=i+C*d*r,w=Math.sin(_),T=Math.cos(_);for(let L=0;L<=e.length-1;L++){p.x=e[L].x*w,p.y=e[L].y,p.z=e[L].x*T,a.push(p.x,p.y,p.z),m.x=C/t,m.y=L/(e.length-1),o.push(m.x,m.y);const R=c[3*L+0]*w,P=c[3*L+1],D=c[3*L+0]*T;h.push(R,P,D)}}for(let C=0;C<t;C++)for(let _=0;_<e.length-1;_++){const w=_+C*e.length,T=w,L=w+e.length,R=w+e.length+1,P=w+1;s.push(T,L,P),s.push(R,P,L)}this.setIndex(s),this.setAttribute("position",new mt(a,3)),this.setAttribute("uv",new mt(o,2)),this.setAttribute("normal",new mt(h,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new eA(e.points,e.segments,e.phiStart,e.phiLength)}}class _b extends eA{constructor(e=1,t=1,i=4,r=8){const s=new Mm;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new _b(e.radius,e.length,e.capSegments,e.radialSegments)}}class wb extends Vt{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],a=[],o=[],c=[],h=new K,d=new He;a.push(0,0,0),o.push(0,0,1),c.push(.5,.5);for(let p=0,m=3;p<=t;p++,m+=3){const A=i+p/t*r;h.x=e*Math.cos(A),h.y=e*Math.sin(A),a.push(h.x,h.y,h.z),o.push(0,0,1),d.x=(a[m]/e+1)/2,d.y=(a[m+1]/e+1)/2,c.push(d.x,d.y)}for(let p=1;p<=t;p++)s.push(p,p+1,0);this.setIndex(s),this.setAttribute("position",new mt(a,3)),this.setAttribute("normal",new mt(o,3)),this.setAttribute("uv",new mt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wb(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Gd extends Vt{constructor(e=1,t=1,i=1,r=32,s=1,a=!1,o=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:c};const h=this;r=Math.floor(r),s=Math.floor(s);const d=[],p=[],m=[],A=[];let v=0;const y=[],E=i/2;let b=0;C(),a===!1&&(e>0&&_(!0),t>0&&_(!1)),this.setIndex(d),this.setAttribute("position",new mt(p,3)),this.setAttribute("normal",new mt(m,3)),this.setAttribute("uv",new mt(A,2));function C(){const w=new K,T=new K;let L=0;const R=(t-e)/i;for(let P=0;P<=s;P++){const D=[],M=P/s,k=M*(t-e)+e;for(let V=0;V<=r;V++){const X=V/r,$=X*c+o,ae=Math.sin($),z=Math.cos($);T.x=k*ae,T.y=-M*i+E,T.z=k*z,p.push(T.x,T.y,T.z),w.set(ae,R,z).normalize(),m.push(w.x,w.y,w.z),A.push(X,1-M),D.push(v++)}y.push(D)}for(let P=0;P<r;P++)for(let D=0;D<s;D++){const M=y[D][P],k=y[D+1][P],V=y[D+1][P+1],X=y[D][P+1];(e>0||D!==0)&&(d.push(M,k,X),L+=3),(t>0||D!==s-1)&&(d.push(k,V,X),L+=3)}h.addGroup(b,L,0),b+=L}function _(w){const T=v,L=new He,R=new K;let P=0;const D=w===!0?e:t,M=w===!0?1:-1;for(let V=1;V<=r;V++)p.push(0,E*M,0),m.push(0,M,0),A.push(.5,.5),v++;const k=v;for(let V=0;V<=r;V++){const $=V/r*c+o,ae=Math.cos($),z=Math.sin($);R.x=D*z,R.y=E*M,R.z=D*ae,p.push(R.x,R.y,R.z),m.push(0,M,0),L.x=ae*.5+.5,L.y=z*.5*M+.5,A.push(L.x,L.y),v++}for(let V=0;V<r;V++){const X=T+V,$=k+V;w===!0?d.push($,$+1,X):d.push($+1,$,X),P+=3}h.addGroup(b,P,w===!0?1:2),b+=P}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Gd(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Sb extends Gd{constructor(e=1,t=1,i=32,r=1,s=!1,a=0,o=Math.PI*2){super(0,e,t,i,r,s,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:o}}static fromJSON(e){return new Sb(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class uc extends Vt{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],a=[];o(r),h(i),d(),this.setAttribute("position",new mt(s,3)),this.setAttribute("normal",new mt(s.slice(),3)),this.setAttribute("uv",new mt(a,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function o(C){const _=new K,w=new K,T=new K;for(let L=0;L<t.length;L+=3)A(t[L+0],_),A(t[L+1],w),A(t[L+2],T),c(_,w,T,C)}function c(C,_,w,T){const L=T+1,R=[];for(let P=0;P<=L;P++){R[P]=[];const D=C.clone().lerp(w,P/L),M=_.clone().lerp(w,P/L),k=L-P;for(let V=0;V<=k;V++)V===0&&P===L?R[P][V]=D:R[P][V]=D.clone().lerp(M,V/k)}for(let P=0;P<L;P++)for(let D=0;D<2*(L-P)-1;D++){const M=Math.floor(D/2);D%2===0?(m(R[P][M+1]),m(R[P+1][M]),m(R[P][M])):(m(R[P][M+1]),m(R[P+1][M+1]),m(R[P+1][M]))}}function h(C){const _=new K;for(let w=0;w<s.length;w+=3)_.x=s[w+0],_.y=s[w+1],_.z=s[w+2],_.normalize().multiplyScalar(C),s[w+0]=_.x,s[w+1]=_.y,s[w+2]=_.z}function d(){const C=new K;for(let _=0;_<s.length;_+=3){C.x=s[_+0],C.y=s[_+1],C.z=s[_+2];const w=E(C)/2/Math.PI+.5,T=b(C)/Math.PI+.5;a.push(w,1-T)}v(),p()}function p(){for(let C=0;C<a.length;C+=6){const _=a[C+0],w=a[C+2],T=a[C+4],L=Math.max(_,w,T),R=Math.min(_,w,T);L>.9&&R<.1&&(_<.2&&(a[C+0]+=1),w<.2&&(a[C+2]+=1),T<.2&&(a[C+4]+=1))}}function m(C){s.push(C.x,C.y,C.z)}function A(C,_){const w=C*3;_.x=e[w+0],_.y=e[w+1],_.z=e[w+2]}function v(){const C=new K,_=new K,w=new K,T=new K,L=new He,R=new He,P=new He;for(let D=0,M=0;D<s.length;D+=9,M+=6){C.set(s[D+0],s[D+1],s[D+2]),_.set(s[D+3],s[D+4],s[D+5]),w.set(s[D+6],s[D+7],s[D+8]),L.set(a[M+0],a[M+1]),R.set(a[M+2],a[M+3]),P.set(a[M+4],a[M+5]),T.copy(C).add(_).add(w).divideScalar(3);const k=E(T);y(L,M+0,C,k),y(R,M+2,_,k),y(P,M+4,w,k)}}function y(C,_,w,T){T<0&&C.x===1&&(a[_]=C.x-1),w.x===0&&w.z===0&&(a[_]=T/2/Math.PI+.5)}function E(C){return Math.atan2(C.z,-C.x)}function b(C){return Math.atan2(-C.y,Math.sqrt(C.x*C.x+C.z*C.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new uc(e.vertices,e.indices,e.radius,e.details)}}class Mb extends uc{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Mb(e.radius,e.detail)}}const o0=new K,l0=new K,r_=new K,c0=new Jr;class JN extends Vt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(bu*t),a=e.getIndex(),o=e.getAttribute("position"),c=a?a.count:o.count,h=[0,0,0],d=["a","b","c"],p=new Array(3),m={},A=[];for(let v=0;v<c;v+=3){a?(h[0]=a.getX(v),h[1]=a.getX(v+1),h[2]=a.getX(v+2)):(h[0]=v,h[1]=v+1,h[2]=v+2);const{a:y,b:E,c:b}=c0;if(y.fromBufferAttribute(o,h[0]),E.fromBufferAttribute(o,h[1]),b.fromBufferAttribute(o,h[2]),c0.getNormal(r_),p[0]=`${Math.round(y.x*r)},${Math.round(y.y*r)},${Math.round(y.z*r)}`,p[1]=`${Math.round(E.x*r)},${Math.round(E.y*r)},${Math.round(E.z*r)}`,p[2]=`${Math.round(b.x*r)},${Math.round(b.y*r)},${Math.round(b.z*r)}`,!(p[0]===p[1]||p[1]===p[2]||p[2]===p[0]))for(let C=0;C<3;C++){const _=(C+1)%3,w=p[C],T=p[_],L=c0[d[C]],R=c0[d[_]],P=`${w}_${T}`,D=`${T}_${w}`;D in m&&m[D]?(r_.dot(m[D].normal)<=s&&(A.push(L.x,L.y,L.z),A.push(R.x,R.y,R.z)),m[D]=null):P in m||(m[P]={index0:h[C],index1:h[_],normal:r_.clone()})}}for(const v in m)if(m[v]){const{index0:y,index1:E}=m[v];o0.fromBufferAttribute(o,y),l0.fromBufferAttribute(o,E),A.push(o0.x,o0.y,o0.z),A.push(l0.x,l0.y,l0.z)}this.setAttribute("position",new mt(A,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Eu extends Mm{constructor(e){super(e),this.uuid=Rs(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new Mm().fromJSON(r))}return this}}const aj={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=ZN(n,0,r,t,!0);const a=[];if(!s||s.next===s.prev)return a;let o,c,h,d,p,m,A;if(i&&(s=hj(n,e,s,t)),n.length>80*t){o=h=n[0],c=d=n[1];for(let v=t;v<r;v+=t)p=n[v],m=n[v+1],p<o&&(o=p),m<c&&(c=m),p>h&&(h=p),m>d&&(d=m);A=Math.max(h-o,d-c),A=A!==0?32767/A:0}return Tm(s,a,t,o,c,A,0),a}};function ZN(n,e,t,i,r){let s,a;if(r===xj(n,e,t,i)>0)for(s=e;s<t;s+=i)a=jD(s,n[s],n[s+1],a);else for(s=t-i;s>=e;s-=i)a=jD(s,n[s],n[s+1],a);return a&&Tb(a,a.next)&&(Im(a),a=a.next),a}function Du(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(Tb(t,t.next)||$n(t.prev,t,t.next)===0)){if(Im(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Tm(n,e,t,i,r,s,a){if(!n)return;!a&&s&&Aj(n,i,r,s);let o=n,c,h;for(;n.prev!==n.next;){if(c=n.prev,h=n.next,s?lj(n,i,r,s):oj(n)){e.push(c.i/t|0),e.push(n.i/t|0),e.push(h.i/t|0),Im(n),n=h.next,o=h.next;continue}if(n=h,n===o){a?a===1?(n=cj(Du(n),e,t),Tm(n,e,t,i,r,s,2)):a===2&&uj(n,e,t,i,r,s):Tm(Du(n),e,t,i,r,s,1);break}}}function oj(n){const e=n.prev,t=n,i=n.next;if($n(e,t,i)>=0)return!1;const r=e.x,s=t.x,a=i.x,o=e.y,c=t.y,h=i.y,d=r<s?r<a?r:a:s<a?s:a,p=o<c?o<h?o:h:c<h?c:h,m=r>s?r>a?r:a:s>a?s:a,A=o>c?o>h?o:h:c>h?c:h;let v=i.next;for(;v!==e;){if(v.x>=d&&v.x<=m&&v.y>=p&&v.y<=A&&cd(r,o,s,c,a,h,v.x,v.y)&&$n(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function lj(n,e,t,i){const r=n.prev,s=n,a=n.next;if($n(r,s,a)>=0)return!1;const o=r.x,c=s.x,h=a.x,d=r.y,p=s.y,m=a.y,A=o<c?o<h?o:h:c<h?c:h,v=d<p?d<m?d:m:p<m?p:m,y=o>c?o>h?o:h:c>h?c:h,E=d>p?d>m?d:m:p>m?p:m,b=iw(A,v,e,t,i),C=iw(y,E,e,t,i);let _=n.prevZ,w=n.nextZ;for(;_&&_.z>=b&&w&&w.z<=C;){if(_.x>=A&&_.x<=y&&_.y>=v&&_.y<=E&&_!==r&&_!==a&&cd(o,d,c,p,h,m,_.x,_.y)&&$n(_.prev,_,_.next)>=0||(_=_.prevZ,w.x>=A&&w.x<=y&&w.y>=v&&w.y<=E&&w!==r&&w!==a&&cd(o,d,c,p,h,m,w.x,w.y)&&$n(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;_&&_.z>=b;){if(_.x>=A&&_.x<=y&&_.y>=v&&_.y<=E&&_!==r&&_!==a&&cd(o,d,c,p,h,m,_.x,_.y)&&$n(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;w&&w.z<=C;){if(w.x>=A&&w.x<=y&&w.y>=v&&w.y<=E&&w!==r&&w!==a&&cd(o,d,c,p,h,m,w.x,w.y)&&$n(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function cj(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!Tb(r,s)&&$N(r,i,i.next,s)&&Bm(r,s)&&Bm(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),Im(i),Im(i.next),i=n=s),i=i.next}while(i!==n);return Du(i)}function uj(n,e,t,i,r,s){let a=n;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&yj(a,o)){let c=eF(a,o);a=Du(a,a.next),c=Du(c,c.next),Tm(a,e,t,i,r,s,0),Tm(c,e,t,i,r,s,0);return}o=o.next}a=a.next}while(a!==n)}function hj(n,e,t,i){const r=[];let s,a,o,c,h;for(s=0,a=e.length;s<a;s++)o=e[s]*i,c=s<a-1?e[s+1]*i:n.length,h=ZN(n,o,c,i,!1),h===h.next&&(h.steiner=!0),r.push(vj(h));for(r.sort(dj),s=0;s<r.length;s++)t=fj(r[s],t);return t}function dj(n,e){return n.x-e.x}function fj(n,e){const t=pj(n,e);if(!t)return e;const i=eF(t,n);return Du(i,i.next),Du(t,t.next)}function pj(n,e){let t=e,i=-1/0,r;const s=n.x,a=n.y;do{if(a<=t.y&&a>=t.next.y&&t.next.y!==t.y){const m=t.x+(a-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(m<=s&&m>i&&(i=m,r=t.x<t.next.x?t:t.next,m===s))return r}t=t.next}while(t!==e);if(!r)return null;const o=r,c=r.x,h=r.y;let d=1/0,p;t=r;do s>=t.x&&t.x>=c&&s!==t.x&&cd(a<h?s:i,a,c,h,a<h?i:s,a,t.x,t.y)&&(p=Math.abs(a-t.y)/(s-t.x),Bm(t,n)&&(p<d||p===d&&(t.x>r.x||t.x===r.x&&mj(r,t)))&&(r=t,d=p)),t=t.next;while(t!==o);return r}function mj(n,e){return $n(n.prev,n,e.prev)<0&&$n(e.next,n,n.next)<0}function Aj(n,e,t,i){let r=n;do r.z===0&&(r.z=iw(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,gj(r)}function gj(n){let e,t,i,r,s,a,o,c,h=1;do{for(t=n,n=null,s=null,a=0;t;){for(a++,i=t,o=0,e=0;e<h&&(o++,i=i.nextZ,!!i);e++);for(c=h;o>0||c>0&&i;)o!==0&&(c===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,o--):(r=i,i=i.nextZ,c--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,h*=2}while(a>1);return n}function iw(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function vj(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function cd(n,e,t,i,r,s,a,o){return(r-a)*(e-o)>=(n-a)*(s-o)&&(n-a)*(i-o)>=(t-a)*(e-o)&&(t-a)*(s-o)>=(r-a)*(i-o)}function yj(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!bj(n,e)&&(Bm(n,e)&&Bm(e,n)&&Ej(n,e)&&($n(n.prev,n,e.prev)||$n(n,e.prev,e))||Tb(n,e)&&$n(n.prev,n,n.next)>0&&$n(e.prev,e,e.next)>0)}function $n(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Tb(n,e){return n.x===e.x&&n.y===e.y}function $N(n,e,t,i){const r=h0($n(n,e,t)),s=h0($n(n,e,i)),a=h0($n(t,i,n)),o=h0($n(t,i,e));return!!(r!==s&&a!==o||r===0&&u0(n,t,e)||s===0&&u0(n,i,e)||a===0&&u0(t,n,i)||o===0&&u0(t,e,i))}function u0(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function h0(n){return n>0?1:n<0?-1:0}function bj(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&$N(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Bm(n,e){return $n(n.prev,n,n.next)<0?$n(n,e,n.next)>=0&&$n(n,n.prev,e)>=0:$n(n,e,n.prev)<0||$n(n,n.next,e)<0}function Ej(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function eF(n,e){const t=new rw(n.i,n.x,n.y),i=new rw(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function jD(n,e,t,i){const r=new rw(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Im(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function rw(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function xj(n,e,t,i){let r=0;for(let s=e,a=t-i;s<t;s+=i)r+=(n[a]-n[s])*(n[s+1]+n[a+1]),a=s;return r}class Ja{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return Ja.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];XD(e),YD(i,e);let a=e.length;t.forEach(XD);for(let c=0;c<t.length;c++)r.push(a),a+=t[c].length,YD(i,t[c]);const o=aj.triangulate(i,r);for(let c=0;c<o.length;c+=3)s.push(o.slice(c,c+3));return s}}function XD(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function YD(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Bb extends Vt{constructor(e=new Eu([new He(.5,.5),new He(-.5,.5),new He(-.5,-.5),new He(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let o=0,c=e.length;o<c;o++){const h=e[o];a(h)}this.setAttribute("position",new mt(r,3)),this.setAttribute("uv",new mt(s,2)),this.computeVertexNormals();function a(o){const c=[],h=t.curveSegments!==void 0?t.curveSegments:12,d=t.steps!==void 0?t.steps:1,p=t.depth!==void 0?t.depth:1;let m=t.bevelEnabled!==void 0?t.bevelEnabled:!0,A=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:A-.1,y=t.bevelOffset!==void 0?t.bevelOffset:0,E=t.bevelSegments!==void 0?t.bevelSegments:3;const b=t.extrudePath,C=t.UVGenerator!==void 0?t.UVGenerator:Cj;let _,w=!1,T,L,R,P;b&&(_=b.getSpacedPoints(d),w=!0,m=!1,T=b.computeFrenetFrames(d,!1),L=new K,R=new K,P=new K),m||(E=0,A=0,v=0,y=0);const D=o.extractPoints(h);let M=D.shape;const k=D.holes;if(!Ja.isClockWise(M)){M=M.reverse();for(let Me=0,Ce=k.length;Me<Ce;Me++){const Be=k[Me];Ja.isClockWise(Be)&&(k[Me]=Be.reverse())}}const X=Ja.triangulateShape(M,k),$=M;for(let Me=0,Ce=k.length;Me<Ce;Me++){const Be=k[Me];M=M.concat(Be)}function ae(Me,Ce,Be){return Ce||console.error("THREE.ExtrudeGeometry: vec does not exist"),Me.clone().addScaledVector(Ce,Be)}const z=M.length,j=X.length;function Z(Me,Ce,Be){let Y,ze,ne;const I=Me.x-Ce.x,O=Me.y-Ce.y,Q=Be.x-Me.x,W=Be.y-Me.y,ee=I*I+O*O,he=I*W-O*Q;if(Math.abs(he)>Number.EPSILON){const Te=Math.sqrt(ee),Ye=Math.sqrt(Q*Q+W*W),q=Ce.x-O/Te,N=Ce.y+I/Te,re=Be.x-W/Ye,ge=Be.y+Q/Ye,Ie=((re-q)*W-(ge-N)*Q)/(I*W-O*Q);Y=q+I*Ie-Me.x,ze=N+O*Ie-Me.y;const we=Y*Y+ze*ze;if(we<=2)return new He(Y,ze);ne=Math.sqrt(we/2)}else{let Te=!1;I>Number.EPSILON?Q>Number.EPSILON&&(Te=!0):I<-Number.EPSILON?Q<-Number.EPSILON&&(Te=!0):Math.sign(O)===Math.sign(W)&&(Te=!0),Te?(Y=-O,ze=I,ne=Math.sqrt(ee)):(Y=I,ze=O,ne=Math.sqrt(ee/2))}return new He(Y/ne,ze/ne)}const ce=[];for(let Me=0,Ce=$.length,Be=Ce-1,Y=Me+1;Me<Ce;Me++,Be++,Y++)Be===Ce&&(Be=0),Y===Ce&&(Y=0),ce[Me]=Z($[Me],$[Be],$[Y]);const U=[];let se,me=ce.concat();for(let Me=0,Ce=k.length;Me<Ce;Me++){const Be=k[Me];se=[];for(let Y=0,ze=Be.length,ne=ze-1,I=Y+1;Y<ze;Y++,ne++,I++)ne===ze&&(ne=0),I===ze&&(I=0),se[Y]=Z(Be[Y],Be[ne],Be[I]);U.push(se),me=me.concat(se)}for(let Me=0;Me<E;Me++){const Ce=Me/E,Be=A*Math.cos(Ce*Math.PI/2),Y=v*Math.sin(Ce*Math.PI/2)+y;for(let ze=0,ne=$.length;ze<ne;ze++){const I=ae($[ze],ce[ze],Y);Le(I.x,I.y,-Be)}for(let ze=0,ne=k.length;ze<ne;ze++){const I=k[ze];se=U[ze];for(let O=0,Q=I.length;O<Q;O++){const W=ae(I[O],se[O],Y);Le(W.x,W.y,-Be)}}}const be=v+y;for(let Me=0;Me<z;Me++){const Ce=m?ae(M[Me],me[Me],be):M[Me];w?(R.copy(T.normals[0]).multiplyScalar(Ce.x),L.copy(T.binormals[0]).multiplyScalar(Ce.y),P.copy(_[0]).add(R).add(L),Le(P.x,P.y,P.z)):Le(Ce.x,Ce.y,0)}for(let Me=1;Me<=d;Me++)for(let Ce=0;Ce<z;Ce++){const Be=m?ae(M[Ce],me[Ce],be):M[Ce];w?(R.copy(T.normals[Me]).multiplyScalar(Be.x),L.copy(T.binormals[Me]).multiplyScalar(Be.y),P.copy(_[Me]).add(R).add(L),Le(P.x,P.y,P.z)):Le(Be.x,Be.y,p/d*Me)}for(let Me=E-1;Me>=0;Me--){const Ce=Me/E,Be=A*Math.cos(Ce*Math.PI/2),Y=v*Math.sin(Ce*Math.PI/2)+y;for(let ze=0,ne=$.length;ze<ne;ze++){const I=ae($[ze],ce[ze],Y);Le(I.x,I.y,p+Be)}for(let ze=0,ne=k.length;ze<ne;ze++){const I=k[ze];se=U[ze];for(let O=0,Q=I.length;O<Q;O++){const W=ae(I[O],se[O],Y);w?Le(W.x,W.y+_[d-1].y,_[d-1].x+Be):Le(W.x,W.y,p+Be)}}}xe(),Ue();function xe(){const Me=r.length/3;if(m){let Ce=0,Be=z*Ce;for(let Y=0;Y<j;Y++){const ze=X[Y];ue(ze[2]+Be,ze[1]+Be,ze[0]+Be)}Ce=d+E*2,Be=z*Ce;for(let Y=0;Y<j;Y++){const ze=X[Y];ue(ze[0]+Be,ze[1]+Be,ze[2]+Be)}}else{for(let Ce=0;Ce<j;Ce++){const Be=X[Ce];ue(Be[2],Be[1],Be[0])}for(let Ce=0;Ce<j;Ce++){const Be=X[Ce];ue(Be[0]+z*d,Be[1]+z*d,Be[2]+z*d)}}i.addGroup(Me,r.length/3-Me,0)}function Ue(){const Me=r.length/3;let Ce=0;Ne($,Ce),Ce+=$.length;for(let Be=0,Y=k.length;Be<Y;Be++){const ze=k[Be];Ne(ze,Ce),Ce+=ze.length}i.addGroup(Me,r.length/3-Me,1)}function Ne(Me,Ce){let Be=Me.length;for(;--Be>=0;){const Y=Be;let ze=Be-1;ze<0&&(ze=Me.length-1);for(let ne=0,I=d+E*2;ne<I;ne++){const O=z*ne,Q=z*(ne+1),W=Ce+Y+O,ee=Ce+ze+O,he=Ce+ze+Q,Te=Ce+Y+Q;Oe(W,ee,he,Te)}}}function Le(Me,Ce,Be){c.push(Me),c.push(Ce),c.push(Be)}function ue(Me,Ce,Be){Ge(Me),Ge(Ce),Ge(Be);const Y=r.length/3,ze=C.generateTopUV(i,r,Y-3,Y-2,Y-1);je(ze[0]),je(ze[1]),je(ze[2])}function Oe(Me,Ce,Be,Y){Ge(Me),Ge(Ce),Ge(Y),Ge(Ce),Ge(Be),Ge(Y);const ze=r.length/3,ne=C.generateSideWallUV(i,r,ze-6,ze-3,ze-2,ze-1);je(ne[0]),je(ne[1]),je(ne[3]),je(ne[1]),je(ne[2]),je(ne[3])}function Ge(Me){r.push(c[Me*3+0]),r.push(c[Me*3+1]),r.push(c[Me*3+2])}function je(Me){s.push(Me.x),s.push(Me.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return _j(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,a=e.shapes.length;s<a;s++){const o=t[e.shapes[s]];i.push(o)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new by[r.type]().fromJSON(r)),new Bb(i,e.options)}}const Cj={generateTopUV:function(n,e,t,i,r){const s=e[t*3],a=e[t*3+1],o=e[i*3],c=e[i*3+1],h=e[r*3],d=e[r*3+1];return[new He(s,a),new He(o,c),new He(h,d)]},generateSideWallUV:function(n,e,t,i,r,s){const a=e[t*3],o=e[t*3+1],c=e[t*3+2],h=e[i*3],d=e[i*3+1],p=e[i*3+2],m=e[r*3],A=e[r*3+1],v=e[r*3+2],y=e[s*3],E=e[s*3+1],b=e[s*3+2];return Math.abs(o-d)<Math.abs(a-h)?[new He(a,1-c),new He(h,1-p),new He(m,1-v),new He(y,1-b)]:[new He(o,1-c),new He(d,1-p),new He(A,1-v),new He(E,1-b)]}};function _j(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Ib extends uc{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ib(e.radius,e.detail)}}class tA extends uc{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new tA(e.radius,e.detail)}}class Vd extends Vt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,a=t/2,o=Math.floor(i),c=Math.floor(r),h=o+1,d=c+1,p=e/o,m=t/c,A=[],v=[],y=[],E=[];for(let b=0;b<d;b++){const C=b*m-a;for(let _=0;_<h;_++){const w=_*p-s;v.push(w,-C,0),y.push(0,0,1),E.push(_/o),E.push(1-b/c)}}for(let b=0;b<c;b++)for(let C=0;C<o;C++){const _=C+h*b,w=C+h*(b+1),T=C+1+h*(b+1),L=C+1+h*b;A.push(_,w,L),A.push(w,T,L)}this.setIndex(A),this.setAttribute("position",new mt(v,3)),this.setAttribute("normal",new mt(y,3)),this.setAttribute("uv",new mt(E,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vd(e.width,e.height,e.widthSegments,e.heightSegments)}}class Rb extends Vt{constructor(e=.5,t=1,i=32,r=1,s=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:a},i=Math.max(3,i),r=Math.max(1,r);const o=[],c=[],h=[],d=[];let p=e;const m=(t-e)/r,A=new K,v=new He;for(let y=0;y<=r;y++){for(let E=0;E<=i;E++){const b=s+E/i*a;A.x=p*Math.cos(b),A.y=p*Math.sin(b),c.push(A.x,A.y,A.z),h.push(0,0,1),v.x=(A.x/t+1)/2,v.y=(A.y/t+1)/2,d.push(v.x,v.y)}p+=m}for(let y=0;y<r;y++){const E=y*(i+1);for(let b=0;b<i;b++){const C=b+E,_=C,w=C+i+1,T=C+i+2,L=C+1;o.push(_,w,L),o.push(w,T,L)}}this.setIndex(o),this.setAttribute("position",new mt(c,3)),this.setAttribute("normal",new mt(h,3)),this.setAttribute("uv",new mt(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Rb(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Db extends Vt{constructor(e=new Eu([new He(0,.5),new He(-.5,-.5),new He(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],a=[];let o=0,c=0;if(Array.isArray(e)===!1)h(e);else for(let d=0;d<e.length;d++)h(e[d]),this.addGroup(o,c,d),o+=c,c=0;this.setIndex(i),this.setAttribute("position",new mt(r,3)),this.setAttribute("normal",new mt(s,3)),this.setAttribute("uv",new mt(a,2));function h(d){const p=r.length/3,m=d.extractPoints(t);let A=m.shape;const v=m.holes;Ja.isClockWise(A)===!1&&(A=A.reverse());for(let E=0,b=v.length;E<b;E++){const C=v[E];Ja.isClockWise(C)===!0&&(v[E]=C.reverse())}const y=Ja.triangulateShape(A,v);for(let E=0,b=v.length;E<b;E++){const C=v[E];A=A.concat(C)}for(let E=0,b=A.length;E<b;E++){const C=A[E];r.push(C.x,C.y,0),s.push(0,0,1),a.push(C.x,C.y)}for(let E=0,b=y.length;E<b;E++){const C=y[E],_=C[0]+p,w=C[1]+p,T=C[2]+p;i.push(_,w,T),c+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return wj(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const a=t[e.shapes[r]];i.push(a)}return new Db(i,e.curveSegments)}}function wj(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class nA extends Vt{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const c=Math.min(a+o,Math.PI);let h=0;const d=[],p=new K,m=new K,A=[],v=[],y=[],E=[];for(let b=0;b<=i;b++){const C=[],_=b/i;let w=0;b===0&&a===0?w=.5/t:b===i&&c===Math.PI&&(w=-.5/t);for(let T=0;T<=t;T++){const L=T/t;p.x=-e*Math.cos(r+L*s)*Math.sin(a+_*o),p.y=e*Math.cos(a+_*o),p.z=e*Math.sin(r+L*s)*Math.sin(a+_*o),v.push(p.x,p.y,p.z),m.copy(p).normalize(),y.push(m.x,m.y,m.z),E.push(L+w,1-_),C.push(h++)}d.push(C)}for(let b=0;b<i;b++)for(let C=0;C<t;C++){const _=d[b][C+1],w=d[b][C],T=d[b+1][C],L=d[b+1][C+1];(b!==0||a>0)&&A.push(_,w,L),(b!==i-1||c<Math.PI)&&A.push(w,T,L)}this.setIndex(A),this.setAttribute("position",new mt(v,3)),this.setAttribute("normal",new mt(y,3)),this.setAttribute("uv",new mt(E,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new nA(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Lb extends uc{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Lb(e.radius,e.detail)}}class Ob extends Vt{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const a=[],o=[],c=[],h=[],d=new K,p=new K,m=new K;for(let A=0;A<=i;A++)for(let v=0;v<=r;v++){const y=v/r*s,E=A/i*Math.PI*2;p.x=(e+t*Math.cos(E))*Math.cos(y),p.y=(e+t*Math.cos(E))*Math.sin(y),p.z=t*Math.sin(E),o.push(p.x,p.y,p.z),d.x=e*Math.cos(y),d.y=e*Math.sin(y),m.subVectors(p,d).normalize(),c.push(m.x,m.y,m.z),h.push(v/r),h.push(A/i)}for(let A=1;A<=i;A++)for(let v=1;v<=r;v++){const y=(r+1)*A+v-1,E=(r+1)*(A-1)+v-1,b=(r+1)*(A-1)+v,C=(r+1)*A+v;a.push(y,E,C),a.push(E,b,C)}this.setIndex(a),this.setAttribute("position",new mt(o,3)),this.setAttribute("normal",new mt(c,3)),this.setAttribute("uv",new mt(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ob(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Pb extends Vt{constructor(e=1,t=.4,i=64,r=8,s=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:a},i=Math.floor(i),r=Math.floor(r);const o=[],c=[],h=[],d=[],p=new K,m=new K,A=new K,v=new K,y=new K,E=new K,b=new K;for(let _=0;_<=i;++_){const w=_/i*s*Math.PI*2;C(w,s,a,e,A),C(w+.01,s,a,e,v),E.subVectors(v,A),b.addVectors(v,A),y.crossVectors(E,b),b.crossVectors(y,E),y.normalize(),b.normalize();for(let T=0;T<=r;++T){const L=T/r*Math.PI*2,R=-t*Math.cos(L),P=t*Math.sin(L);p.x=A.x+(R*b.x+P*y.x),p.y=A.y+(R*b.y+P*y.y),p.z=A.z+(R*b.z+P*y.z),c.push(p.x,p.y,p.z),m.subVectors(p,A).normalize(),h.push(m.x,m.y,m.z),d.push(_/i),d.push(T/r)}}for(let _=1;_<=i;_++)for(let w=1;w<=r;w++){const T=(r+1)*(_-1)+(w-1),L=(r+1)*_+(w-1),R=(r+1)*_+w,P=(r+1)*(_-1)+w;o.push(T,L,P),o.push(L,R,P)}this.setIndex(o),this.setAttribute("position",new mt(c,3)),this.setAttribute("normal",new mt(h,3)),this.setAttribute("uv",new mt(d,2));function C(_,w,T,L,R){const P=Math.cos(_),D=Math.sin(_),M=T/w*_,k=Math.cos(M);R.x=L*(2+k)*.5*P,R.y=L*(2+k)*D*.5,R.z=L*Math.sin(M)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Pb(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Ub extends Vt{constructor(e=new p2(new K(-1,-1,0),new K(-1,1,0),new K(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const a=e.computeFrenetFrames(t,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const o=new K,c=new K,h=new He;let d=new K;const p=[],m=[],A=[],v=[];y(),this.setIndex(v),this.setAttribute("position",new mt(p,3)),this.setAttribute("normal",new mt(m,3)),this.setAttribute("uv",new mt(A,2));function y(){for(let _=0;_<t;_++)E(_);E(s===!1?t:0),C(),b()}function E(_){d=e.getPointAt(_/t,d);const w=a.normals[_],T=a.binormals[_];for(let L=0;L<=r;L++){const R=L/r*Math.PI*2,P=Math.sin(R),D=-Math.cos(R);c.x=D*w.x+P*T.x,c.y=D*w.y+P*T.y,c.z=D*w.z+P*T.z,c.normalize(),m.push(c.x,c.y,c.z),o.x=d.x+i*c.x,o.y=d.y+i*c.y,o.z=d.z+i*c.z,p.push(o.x,o.y,o.z)}}function b(){for(let _=1;_<=t;_++)for(let w=1;w<=r;w++){const T=(r+1)*(_-1)+(w-1),L=(r+1)*_+(w-1),R=(r+1)*_+w,P=(r+1)*(_-1)+w;v.push(T,L,P),v.push(L,R,P)}}function C(){for(let _=0;_<=t;_++)for(let w=0;w<=r;w++)h.x=_/t,h.y=w/r,A.push(h.x,h.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Ub(new by[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class tF extends Vt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new K,s=new K;if(e.index!==null){const a=e.attributes.position,o=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:o.count,materialIndex:0}]);for(let h=0,d=c.length;h<d;++h){const p=c[h],m=p.start,A=p.count;for(let v=m,y=m+A;v<y;v+=3)for(let E=0;E<3;E++){const b=o.getX(v+E),C=o.getX(v+(E+1)%3);r.fromBufferAttribute(a,b),s.fromBufferAttribute(a,C),KD(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const a=e.attributes.position;for(let o=0,c=a.count/3;o<c;o++)for(let h=0;h<3;h++){const d=3*o+h,p=3*o+(h+1)%3;r.fromBufferAttribute(a,d),s.fromBufferAttribute(a,p),KD(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new mt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function KD(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var JD=Object.freeze({__proto__:null,BoxGeometry:Fu,CapsuleGeometry:_b,CircleGeometry:wb,ConeGeometry:Sb,CylinderGeometry:Gd,DodecahedronGeometry:Mb,EdgesGeometry:JN,ExtrudeGeometry:Bb,IcosahedronGeometry:Ib,LatheGeometry:eA,OctahedronGeometry:tA,PlaneGeometry:Vd,PolyhedronGeometry:uc,RingGeometry:Rb,ShapeGeometry:Db,SphereGeometry:nA,TetrahedronGeometry:Lb,TorusGeometry:Ob,TorusKnotGeometry:Pb,TubeGeometry:Ub,WireframeGeometry:tF});class nF extends yr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ut(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class iF extends Ea{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class A2 extends yr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new ut(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lc,this.normalScale=new He(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Os,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class rF extends A2{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new He(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ut(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ut(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ut(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ut(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class sF extends yr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ut(16777215),this.specular=new ut(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lc,this.normalScale=new He(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Os,this.combine=Ym,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class aF extends yr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ut(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lc,this.normalScale=new He(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class oF extends yr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lc,this.normalScale=new He(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class lF extends yr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ut(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lc,this.normalScale=new He(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Os,this.combine=Ym,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class g2 extends yr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=vN,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class v2 extends yr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class cF extends yr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ut(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lc,this.normalScale=new He(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class uF extends zr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function hu(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function hF(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function dF(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function sw(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,a=0;a!==i;++s){const o=t[s]*e;for(let c=0;c!==e;++c)r[a++]=n[o+c]}return r}function y2(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let a=s[i];if(a!==void 0)if(Array.isArray(a))do a=s[i],a!==void 0&&(e.push(s.time),t.push.apply(t,a)),s=n[r++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[i],a!==void 0&&(e.push(s.time),a.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do a=s[i],a!==void 0&&(e.push(s.time),t.push(a)),s=n[r++];while(s!==void 0)}function Sj(n,e,t,i,r=30){const s=n.clone();s.name=e;const a=[];for(let c=0;c<s.tracks.length;++c){const h=s.tracks[c],d=h.getValueSize(),p=[],m=[];for(let A=0;A<h.times.length;++A){const v=h.times[A]*r;if(!(v<t||v>=i)){p.push(h.times[A]);for(let y=0;y<d;++y)m.push(h.values[A*d+y])}}p.length!==0&&(h.times=hu(p,h.times.constructor),h.values=hu(m,h.values.constructor),a.push(h))}s.tracks=a;let o=1/0;for(let c=0;c<s.tracks.length;++c)o>s.tracks[c].times[0]&&(o=s.tracks[c].times[0]);for(let c=0;c<s.tracks.length;++c)s.tracks[c].shift(-1*o);return s.resetDuration(),s}function Mj(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let a=0;a<r;++a){const o=t.tracks[a],c=o.ValueTypeName;if(c==="bool"||c==="string")continue;const h=n.tracks.find(function(b){return b.name===o.name&&b.ValueTypeName===c});if(h===void 0)continue;let d=0;const p=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=p/3);let m=0;const A=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=A/3);const v=o.times.length-1;let y;if(s<=o.times[0]){const b=d,C=p-d;y=o.values.slice(b,C)}else if(s>=o.times[v]){const b=v*p+d,C=b+p-d;y=o.values.slice(b,C)}else{const b=o.createInterpolant(),C=d,_=p-d;b.evaluate(s),y=b.resultBuffer.slice(C,_)}c==="quaternion"&&new is().fromArray(y).normalize().conjugate().toArray(y);const E=h.times.length;for(let b=0;b<E;++b){const C=b*A+m;if(c==="quaternion")is.multiplyQuaternionsFlat(h.values,C,y,0,h.values,C);else{const _=A-m*2;for(let w=0;w<_;++w)h.values[C+w]-=y[w]}}}return n.blendMode=t2,n}const Tj={convertArray:hu,isTypedArray:hF,getKeyframeOrder:dF,sortedArray:sw,flattenJSON:y2,subclip:Sj,makeClipAdditive:Mj};class iA{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let a;n:{i:if(!(e<r)){for(let o=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===o)break;if(s=r,r=t[++i],e<r)break t}a=t.length;break n}if(!(e>=s)){const o=t[1];e<o&&(i=2,s=o);for(let c=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(r=s,s=t[--i-1],e>=s)break t}a=i,i=0;break n}break e}for(;i<a;){const o=i+a>>>1;e<t[o]?a=o:i=o+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let a=0;a!==r;++a)t[a]=i[s+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class fF extends iA{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:lu,endingEnd:lu}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,a=e+1,o=r[s],c=r[a];if(o===void 0)switch(this.getSettings_().endingStart){case cu:s=e,o=2*t-i;break;case xm:s=r.length-2,o=t+r[s]-r[s+1];break;default:s=e,o=i}if(c===void 0)switch(this.getSettings_().endingEnd){case cu:a=e,c=2*i-t;break;case xm:a=1,c=i+r[1]-r[0];break;default:a=e-1,c=t}const h=(i-t)*.5,d=this.valueSize;this._weightPrev=h/(t-o),this._weightNext=h/(c-i),this._offsetPrev=s*d,this._offsetNext=a*d}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,c=e*o,h=c-o,d=this._offsetPrev,p=this._offsetNext,m=this._weightPrev,A=this._weightNext,v=(i-t)/(r-t),y=v*v,E=y*v,b=-m*E+2*m*y-m*v,C=(1+m)*E+(-1.5-2*m)*y+(-.5+m)*v+1,_=(-1-A)*E+(1.5+A)*y+.5*v,w=A*E-A*y;for(let T=0;T!==o;++T)s[T]=b*a[d+T]+C*a[h+T]+_*a[c+T]+w*a[p+T];return s}}class b2 extends iA{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,c=e*o,h=c-o,d=(i-t)/(r-t),p=1-d;for(let m=0;m!==o;++m)s[m]=a[h+m]*p+a[c+m]*d;return s}}class pF extends iA{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ca{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=hu(t,this.TimeBufferType),this.values=hu(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:hu(e.times,Array),values:hu(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new pF(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new b2(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new fF(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Em:t=this.InterpolantFactoryMethodDiscrete;break;case gy:t=this.InterpolantFactoryMethodLinear;break;case uv:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Em;case this.InterpolantFactoryMethodLinear:return gy;case this.InterpolantFactoryMethodSmooth:return uv}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,a=r-1;for(;s!==r&&i[s]<e;)++s;for(;a!==-1&&i[a]>t;)--a;if(++a,s!==0||a!==r){s>=a&&(a=Math.max(a,1),s=a-1);const o=this.getValueSize();this.times=i.slice(s,a),this.values=this.values.slice(s*o,a*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let o=0;o!==s;o++){const c=i[o];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,c),e=!1;break}if(a!==null&&a>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,c,a),e=!1;break}a=c}if(r!==void 0&&hF(r))for(let o=0,c=r.length;o!==c;++o){const h=r[o];if(isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,h),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===uv,s=e.length-1;let a=1;for(let o=1;o<s;++o){let c=!1;const h=e[o],d=e[o+1];if(h!==d&&(o!==1||h!==e[0]))if(r)c=!0;else{const p=o*i,m=p-i,A=p+i;for(let v=0;v!==i;++v){const y=t[p+v];if(y!==t[m+v]||y!==t[A+v]){c=!0;break}}}if(c){if(o!==a){e[a]=e[o];const p=o*i,m=a*i;for(let A=0;A!==i;++A)t[m+A]=t[p+A]}++a}}if(s>0){e[a]=e[s];for(let o=s*i,c=a*i,h=0;h!==i;++h)t[c+h]=t[o+h];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Ca.prototype.TimeBufferType=Float32Array;Ca.prototype.ValueBufferType=Float32Array;Ca.prototype.DefaultInterpolation=gy;class Qu extends Ca{constructor(e,t,i){super(e,t,i)}}Qu.prototype.ValueTypeName="bool";Qu.prototype.ValueBufferType=Array;Qu.prototype.DefaultInterpolation=Em;Qu.prototype.InterpolantFactoryMethodLinear=void 0;Qu.prototype.InterpolantFactoryMethodSmooth=void 0;class E2 extends Ca{}E2.prototype.ValueTypeName="color";class Rm extends Ca{}Rm.prototype.ValueTypeName="number";class mF extends iA{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,c=(i-t)/(r-t);let h=e*o;for(let d=h+o;h!==d;h+=4)is.slerpFlat(s,0,a,h-o,a,h,c);return s}}class rA extends Ca{InterpolantFactoryMethodLinear(e){return new mF(this.times,this.values,this.getValueSize(),e)}}rA.prototype.ValueTypeName="quaternion";rA.prototype.InterpolantFactoryMethodSmooth=void 0;class zu extends Ca{constructor(e,t,i){super(e,t,i)}}zu.prototype.ValueTypeName="string";zu.prototype.ValueBufferType=Array;zu.prototype.DefaultInterpolation=Em;zu.prototype.InterpolantFactoryMethodLinear=void 0;zu.prototype.InterpolantFactoryMethodSmooth=void 0;class Dm extends Ca{}Dm.prototype.ValueTypeName="vector";class Lm{constructor(e="",t=-1,i=[],r=fb){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Rs(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let a=0,o=i.length;a!==o;++a)t.push(Ij(i[a]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,a=i.length;s!==a;++s)t.push(Ca.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,a=[];for(let o=0;o<s;o++){let c=[],h=[];c.push((o+s-1)%s,o,(o+1)%s),h.push(0,1,0);const d=dF(c);c=sw(c,1,d),h=sw(h,1,d),!r&&c[0]===0&&(c.push(s),h.push(h[0])),a.push(new Rm(".morphTargetInfluences["+t[o].name+"]",c,h).scale(1/i))}return new this(e,-1,a)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let o=0,c=e.length;o<c;o++){const h=e[o],d=h.name.match(s);if(d&&d.length>1){const p=d[1];let m=r[p];m||(r[p]=m=[]),m.push(h)}}const a=[];for(const o in r)a.push(this.CreateFromMorphTargetSequence(o,r[o],t,i));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(p,m,A,v,y){if(A.length!==0){const E=[],b=[];y2(A,E,b,v),E.length!==0&&y.push(new p(m,E,b))}},r=[],s=e.name||"default",a=e.fps||30,o=e.blendMode;let c=e.length||-1;const h=e.hierarchy||[];for(let p=0;p<h.length;p++){const m=h[p].keys;if(!(!m||m.length===0))if(m[0].morphTargets){const A={};let v;for(v=0;v<m.length;v++)if(m[v].morphTargets)for(let y=0;y<m[v].morphTargets.length;y++)A[m[v].morphTargets[y]]=-1;for(const y in A){const E=[],b=[];for(let C=0;C!==m[v].morphTargets.length;++C){const _=m[v];E.push(_.time),b.push(_.morphTarget===y?1:0)}r.push(new Rm(".morphTargetInfluence["+y+"]",E,b))}c=A.length*a}else{const A=".bones["+t[p].name+"]";i(Dm,A+".position",m,"pos",r),i(rA,A+".quaternion",m,"rot",r),i(Dm,A+".scale",m,"scl",r)}}return r.length===0?null:new this(s,c,r,o)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Bj(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Rm;case"vector":case"vector2":case"vector3":case"vector4":return Dm;case"color":return E2;case"quaternion":return rA;case"bool":case"boolean":return Qu;case"string":return zu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function Ij(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Bj(n.type);if(n.times===void 0){const t=[],i=[];y2(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const No={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class x2{constructor(e,t,i){const r=this;let s=!1,a=0,o=0,c;const h=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(d){o++,s===!1&&r.onStart!==void 0&&r.onStart(d,a,o),s=!0},this.itemEnd=function(d){a++,r.onProgress!==void 0&&r.onProgress(d,a,o),a===o&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(d){r.onError!==void 0&&r.onError(d)},this.resolveURL=function(d){return c?c(d):d},this.setURLModifier=function(d){return c=d,this},this.addHandler=function(d,p){return h.push(d,p),this},this.removeHandler=function(d){const p=h.indexOf(d);return p!==-1&&h.splice(p,2),this},this.getHandler=function(d){for(let p=0,m=h.length;p<m;p+=2){const A=h[p],v=h[p+1];if(A.global&&(A.lastIndex=0),A.test(d))return v}return null}}}const AF=new x2;class as{constructor(e){this.manager=e!==void 0?e:AF,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}as.DEFAULT_MATERIAL_NAME="__DEFAULT";const Mo={};class Rj extends Error{constructor(e,t){super(e),this.response=t}}class nl extends as{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=No.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Mo[e]!==void 0){Mo[e].push({onLoad:t,onProgress:i,onError:r});return}Mo[e]=[],Mo[e].push({onLoad:t,onProgress:i,onError:r});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,c=this.responseType;fetch(a).then(h=>{if(h.status===200||h.status===0){if(h.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||h.body===void 0||h.body.getReader===void 0)return h;const d=Mo[e],p=h.body.getReader(),m=h.headers.get("X-File-Size")||h.headers.get("Content-Length"),A=m?parseInt(m):0,v=A!==0;let y=0;const E=new ReadableStream({start(b){C();function C(){p.read().then(({done:_,value:w})=>{if(_)b.close();else{y+=w.byteLength;const T=new ProgressEvent("progress",{lengthComputable:v,loaded:y,total:A});for(let L=0,R=d.length;L<R;L++){const P=d[L];P.onProgress&&P.onProgress(T)}b.enqueue(w),C()}},_=>{b.error(_)})}}});return new Response(E)}else throw new Rj(`fetch for "${h.url}" responded with ${h.status}: ${h.statusText}`,h)}).then(h=>{switch(c){case"arraybuffer":return h.arrayBuffer();case"blob":return h.blob();case"document":return h.text().then(d=>new DOMParser().parseFromString(d,o));case"json":return h.json();default:if(o===void 0)return h.text();{const p=/charset="?([^;"\s]*)"?/i.exec(o),m=p&&p[1]?p[1].toLowerCase():void 0,A=new TextDecoder(m);return h.arrayBuffer().then(v=>A.decode(v))}}}).then(h=>{No.add(e,h);const d=Mo[e];delete Mo[e];for(let p=0,m=d.length;p<m;p++){const A=d[p];A.onLoad&&A.onLoad(h)}}).catch(h=>{const d=Mo[e];if(d===void 0)throw this.manager.itemError(e),h;delete Mo[e];for(let p=0,m=d.length;p<m;p++){const A=d[p];A.onError&&A.onError(h)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Dj extends as{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new nl(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=Lm.parse(e[i]);t.push(r)}return t}}class Lj extends as{constructor(e){super(e)}load(e,t,i,r){const s=this,a=[],o=new xb,c=new nl(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(s.withCredentials);let h=0;function d(p){c.load(e[p],function(m){const A=s.parse(m,!0);a[p]={width:A.width,height:A.height,format:A.format,mipmaps:A.mipmaps},h+=1,h===6&&(A.mipmapCount===1&&(o.minFilter=Ui),o.image=a,o.format=A.format,o.needsUpdate=!0,t&&t(o))},i,r)}if(Array.isArray(e))for(let p=0,m=e.length;p<m;++p)d(p);else c.load(e,function(p){const m=s.parse(p,!0);if(m.isCubemap){const A=m.mipmaps.length/m.mipmapCount;for(let v=0;v<A;v++){a[v]={mipmaps:[]};for(let y=0;y<m.mipmapCount;y++)a[v].mipmaps.push(m.mipmaps[v*m.mipmapCount+y]),a[v].format=m.format,a[v].width=m.width,a[v].height=m.height}o.image=a}else o.image.width=m.width,o.image.height=m.height,o.mipmaps=m.mipmaps;m.mipmapCount===1&&(o.minFilter=Ui),o.format=m.format,o.needsUpdate=!0,t&&t(o)},i,r);return o}}class Om extends as{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=No.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const o=Sm("img");function c(){d(),No.add(e,this),t&&t(this),s.manager.itemEnd(e)}function h(p){d(),r&&r(p),s.manager.itemError(e),s.manager.itemEnd(e)}function d(){o.removeEventListener("load",c,!1),o.removeEventListener("error",h,!1)}return o.addEventListener("load",c,!1),o.addEventListener("error",h,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),s.manager.itemStart(e),o.src=e,o}}class Oj extends as{constructor(e){super(e)}load(e,t,i,r){const s=new Zm;s.colorSpace=Kr;const a=new Om(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let o=0;function c(h){a.load(e[h],function(d){s.images[h]=d,o++,o===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let h=0;h<e.length;++h)c(h);return s}}class Pj extends as{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new Ka,o=new nl(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(s.withCredentials),o.load(e,function(c){let h;try{h=s.parse(c)}catch(d){if(r!==void 0)r(d);else{console.error(d);return}}h.image!==void 0?a.image=h.image:h.data!==void 0&&(a.image.width=h.width,a.image.height=h.height,a.image.data=h.data),a.wrapS=h.wrapS!==void 0?h.wrapS:Js,a.wrapT=h.wrapT!==void 0?h.wrapT:Js,a.magFilter=h.magFilter!==void 0?h.magFilter:Ui,a.minFilter=h.minFilter!==void 0?h.minFilter:Ui,a.anisotropy=h.anisotropy!==void 0?h.anisotropy:1,h.colorSpace!==void 0&&(a.colorSpace=h.colorSpace),h.flipY!==void 0&&(a.flipY=h.flipY),h.format!==void 0&&(a.format=h.format),h.type!==void 0&&(a.type=h.type),h.mipmaps!==void 0&&(a.mipmaps=h.mipmaps,a.minFilter=Ga),h.mipmapCount===1&&(a.minFilter=Ui),h.generateMipmaps!==void 0&&(a.generateMipmaps=h.generateMipmaps),a.needsUpdate=!0,t&&t(a,h)},i,r),a}}class Uj extends as{constructor(e){super(e)}load(e,t,i,r){const s=new ci,a=new Om(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){s.image=o,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class hc extends fn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new ut(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class gF extends hc{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(fn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ut(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const s_=new It,ZD=new K,$D=new K;class C2{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new He(512,512),this.map=null,this.mapPass=null,this.matrix=new It,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new $m,this._frameExtents=new He(1,1),this._viewportCount=1,this._viewports=[new dn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;ZD.setFromMatrixPosition(e.matrixWorld),t.position.copy(ZD),$D.setFromMatrixPosition(e.target.matrixWorld),t.lookAt($D),t.updateMatrixWorld(),s_.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(s_),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(s_)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class kj extends C2{constructor(){super(new $i(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=Rd*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class vF extends hc{constructor(e,t,i=0,r=Math.PI/3,s=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(fn.DEFAULT_UP),this.updateMatrix(),this.target=new fn,this.distance=i,this.angle=r,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new kj}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const eL=new It,sp=new K,a_=new K;class Nj extends C2{constructor(){super(new $i(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new He(4,2),this._viewportCount=6,this._viewports=[new dn(2,1,1,1),new dn(0,1,1,1),new dn(3,1,1,1),new dn(1,1,1,1),new dn(3,0,1,1),new dn(1,0,1,1)],this._cubeDirections=[new K(1,0,0),new K(-1,0,0),new K(0,0,1),new K(0,0,-1),new K(0,1,0),new K(0,-1,0)],this._cubeUps=[new K(0,1,0),new K(0,1,0),new K(0,1,0),new K(0,1,0),new K(0,0,1),new K(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),sp.setFromMatrixPosition(e.matrixWorld),i.position.copy(sp),a_.copy(i.position),a_.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(a_),i.updateMatrixWorld(),r.makeTranslation(-sp.x,-sp.y,-sp.z),eL.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(eL)}}class yF extends hc{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new Nj}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class kb extends gb{constructor(e=-1,t=1,i=1,r=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,a=i+e,o=r+t,c=r-t;if(this.view!==null&&this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=h*this.view.offsetX,a=s+h*this.view.width,o-=d*this.view.offsetY,c=o-d*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class Fj extends C2{constructor(){super(new kb(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class bF extends hc{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(fn.DEFAULT_UP),this.updateMatrix(),this.target=new fn,this.shadow=new Fj}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class EF extends hc{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class xF extends hc{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class CF{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new K)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*s),t.addScaledVector(a[3],.488603*i),t.addScaledVector(a[4],1.092548*(i*r)),t.addScaledVector(a[5],1.092548*(r*s)),t.addScaledVector(a[6],.315392*(3*s*s-1)),t.addScaledVector(a[7],1.092548*(i*s)),t.addScaledVector(a[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*r),t.addScaledVector(a[2],2*.511664*s),t.addScaledVector(a[3],2*.511664*i),t.addScaledVector(a[4],2*.429043*i*r),t.addScaledVector(a[5],2*.429043*r*s),t.addScaledVector(a[6],.743125*s*s-.247708),t.addScaledVector(a[7],2*.429043*i*s),t.addScaledVector(a[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class _F extends hc{constructor(e=new CF,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Nb extends as{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,a=new nl(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new ut().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const a=e.uniforms[s];switch(r.uniforms[s]={},a.type){case"t":r.uniforms[s].value=i(a.value);break;case"c":r.uniforms[s].value=new ut().setHex(a.value);break;case"v2":r.uniforms[s].value=new He().fromArray(a.value);break;case"v3":r.uniforms[s].value=new K().fromArray(a.value);break;case"v4":r.uniforms[s].value=new dn().fromArray(a.value);break;case"m3":r.uniforms[s].value=new Pt().fromArray(a.value);break;case"m4":r.uniforms[s].value=new It().fromArray(a.value);break;default:r.uniforms[s].value=a.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new He().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new He().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return Nb.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:nF,SpriteMaterial:a2,RawShaderMaterial:iF,ShaderMaterial:Ea,PointsMaterial:l2,MeshPhysicalMaterial:rF,MeshStandardMaterial:A2,MeshPhongMaterial:sF,MeshToonMaterial:aF,MeshNormalMaterial:oF,MeshLambertMaterial:lF,MeshDepthMaterial:g2,MeshDistanceMaterial:v2,MeshBasicMaterial:cc,MeshMatcapMaterial:cF,LineDashedMaterial:uF,LineBasicMaterial:zr,Material:yr};return new t[e]}}class aw{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class wF extends Vt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class SF extends as{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new nl(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(A,v){if(t[v]!==void 0)return t[v];const E=A.interleavedBuffers[v],b=s(A,E.buffer),C=od(E.type,b),_=new bb(C,E.stride);return _.uuid=E.uuid,t[v]=_,_}function s(A,v){if(i[v]!==void 0)return i[v];const E=A.arrayBuffers[v],b=new Uint32Array(E).buffer;return i[v]=b,b}const a=e.isInstancedBufferGeometry?new wF:new Vt,o=e.data.index;if(o!==void 0){const A=od(o.type,o.array);a.setIndex(new Ln(A,1))}const c=e.data.attributes;for(const A in c){const v=c[A];let y;if(v.isInterleavedBufferAttribute){const E=r(e.data,v.data);y=new Ru(E,v.itemSize,v.offset,v.normalized)}else{const E=od(v.type,v.array),b=v.isInstancedBufferAttribute?Ld:Ln;y=new b(E,v.itemSize,v.normalized)}v.name!==void 0&&(y.name=v.name),v.usage!==void 0&&y.setUsage(v.usage),a.setAttribute(A,y)}const h=e.data.morphAttributes;if(h)for(const A in h){const v=h[A],y=[];for(let E=0,b=v.length;E<b;E++){const C=v[E];let _;if(C.isInterleavedBufferAttribute){const w=r(e.data,C.data);_=new Ru(w,C.itemSize,C.offset,C.normalized)}else{const w=od(C.type,C.array);_=new Ln(w,C.itemSize,C.normalized)}C.name!==void 0&&(_.name=C.name),y.push(_)}a.morphAttributes[A]=y}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const p=e.data.groups||e.data.drawcalls||e.data.offsets;if(p!==void 0)for(let A=0,v=p.length;A!==v;++A){const y=p[A];a.addGroup(y.start,y.count,y.materialIndex)}const m=e.data.boundingSphere;if(m!==void 0){const A=new K;m.center!==void 0&&A.fromArray(m.center),a.boundingSphere=new vr(A,m.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class Qj extends as{constructor(e){super(e)}load(e,t,i,r){const s=this,a=this.path===""?aw.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const o=new nl(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(c){let h=null;try{h=JSON.parse(c)}catch(p){r!==void 0&&r(p),console.error("THREE:ObjectLoader: Can't parse "+e+".",p.message);return}const d=h.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(h,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?aw.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new nl(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const a=await s.loadAsync(e,t),o=JSON.parse(a),c=o.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(o)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,function(){t!==void 0&&t(h)}),o=this.parseTextures(e.textures,a),c=this.parseMaterials(e.materials,o),h=this.parseObject(e.object,s,c,o,i),d=this.parseSkeletons(e.skeletons,h);if(this.bindSkeletons(h,d),this.bindLightTargets(h),t!==void 0){let p=!1;for(const m in a)if(a[m].data instanceof HTMLImageElement){p=!0;break}p===!1&&t(h)}return h}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,s),o=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,r,o,a,t),h=this.parseSkeletons(e.skeletons,c);return this.bindSkeletons(c,h),this.bindLightTargets(c),c}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new Eu().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=new Eb().fromJSON(e[s],r);i[o.uuid]=o}return i}parseGeometries(e,t){const i={};if(e!==void 0){const s=new SF;for(let a=0,o=e.length;a<o;a++){let c;const h=e[a];switch(h.type){case"BufferGeometry":case"InstancedBufferGeometry":c=s.parse(h);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE){var r=new THREE.LegacyJSONLoader;c=r.parse(h,this.resourcePath).geometry}else console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:h.type in JD?c=JD[h.type].fromJSON(h,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${h.type}"`)}c.uuid=h.uuid,h.name!==void 0&&(c.name=h.name),h.userData!==void 0&&(c.userData=h.userData),i[h.uuid]=c}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new Nb;s.setTextures(t);for(let a=0,o=e.length;a<o;a++){const c=e[a];i[c.uuid]===void 0&&(i[c.uuid]=s.parse(c)),r[c.uuid]=i[c.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=Lm.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function a(c){return i.manager.itemStart(c),s.load(c,function(){i.manager.itemEnd(c)},void 0,function(){i.manager.itemError(c),i.manager.itemEnd(c)})}function o(c){if(typeof c=="string"){const h=c,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:i.resourcePath+h;return a(d)}else return c.data?{data:od(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){const c=new x2(t);s=new Om(c),s.setCrossOrigin(this.crossOrigin);for(let h=0,d=e.length;h<d;h++){const p=e[h],m=p.url;if(Array.isArray(m)){const A=[];for(let v=0,y=m.length;v<y;v++){const E=m[v],b=o(E);b!==null&&(b instanceof HTMLImageElement?A.push(b):A.push(new Ka(b.data,b.width,b.height)))}r[p.uuid]=new uu(A)}else{const A=o(p.url);r[p.uuid]=new uu(A)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(a){if(typeof a=="string"){const o=a,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:t.resourcePath+o;return await r.loadAsync(c)}else return a.data?{data:od(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){r=new Om(this.manager),r.setCrossOrigin(this.crossOrigin);for(let a=0,o=e.length;a<o;a++){const c=e[a],h=c.url;if(Array.isArray(h)){const d=[];for(let p=0,m=h.length;p<m;p++){const A=h[p],v=await s(A);v!==null&&(v instanceof HTMLImageElement?d.push(v):d.push(new Ka(v.data,v.width,v.height)))}i[c.uuid]=new uu(d)}else{const d=await s(c.url);i[c.uuid]=new uu(d)}}}return i}parseTextures(e,t){function i(s,a){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),a[s])}const r={};if(e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=e[s];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),t[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const c=t[o.image],h=c.data;let d;Array.isArray(h)?(d=new Zm,h.length===6&&(d.needsUpdate=!0)):(h&&h.data?d=new Ka:d=new ci,h&&(d.needsUpdate=!0)),d.source=c,d.uuid=o.uuid,o.name!==void 0&&(d.name=o.name),o.mapping!==void 0&&(d.mapping=i(o.mapping,zj)),o.channel!==void 0&&(d.channel=o.channel),o.offset!==void 0&&d.offset.fromArray(o.offset),o.repeat!==void 0&&d.repeat.fromArray(o.repeat),o.center!==void 0&&d.center.fromArray(o.center),o.rotation!==void 0&&(d.rotation=o.rotation),o.wrap!==void 0&&(d.wrapS=i(o.wrap[0],tL),d.wrapT=i(o.wrap[1],tL)),o.format!==void 0&&(d.format=o.format),o.internalFormat!==void 0&&(d.internalFormat=o.internalFormat),o.type!==void 0&&(d.type=o.type),o.colorSpace!==void 0&&(d.colorSpace=o.colorSpace),o.minFilter!==void 0&&(d.minFilter=i(o.minFilter,nL)),o.magFilter!==void 0&&(d.magFilter=i(o.magFilter,nL)),o.anisotropy!==void 0&&(d.anisotropy=o.anisotropy),o.flipY!==void 0&&(d.flipY=o.flipY),o.generateMipmaps!==void 0&&(d.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(d.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(d.compareFunction=o.compareFunction),o.userData!==void 0&&(d.userData=o.userData),r[o.uuid]=d}return r}parseObject(e,t,i,r,s){let a;function o(m){return t[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",m),t[m]}function c(m){if(m!==void 0){if(Array.isArray(m)){const A=[];for(let v=0,y=m.length;v<y;v++){const E=m[v];i[E]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",E),A.push(i[E])}return A}return i[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",m),i[m]}}function h(m){return r[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",m),r[m]}let d,p;switch(e.type){case"Scene":a=new UN,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new ut(e.background):a.background=h(e.background)),e.environment!==void 0&&(a.environment=h(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new yb(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new vb(e.fog.color,e.fog.density)),e.fog.name!==""&&(a.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(a.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&a.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(a.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&a.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":a=new $i(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new kb(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new EF(e.color,e.intensity);break;case"DirectionalLight":a=new bF(e.color,e.intensity),a.target=e.target||"";break;case"PointLight":a=new yF(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new xF(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new vF(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),a.target=e.target||"";break;case"HemisphereLight":a=new gF(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new _F().fromJSON(e);break;case"SkinnedMesh":d=o(e.geometry),p=c(e.material),a=new QN(d,p),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":d=o(e.geometry),p=c(e.material),a=new Mi(d,p);break;case"InstancedMesh":d=o(e.geometry),p=c(e.material);const m=e.count,A=e.instanceMatrix,v=e.instanceColor;a=new zN(d,p,m),a.instanceMatrix=new Ld(new Float32Array(A.array),16),v!==void 0&&(a.instanceColor=new Ld(new Float32Array(v.array),v.itemSize));break;case"BatchedMesh":d=o(e.geometry),p=c(e.material),a=new HN(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,p),a.geometry=d,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._visibility=e.visibility,a._active=e.active,a._bounds=e.bounds.map(y=>{const E=new Qr;E.min.fromArray(y.boxMin),E.max.fromArray(y.boxMax);const b=new vr;return b.radius=y.sphereRadius,b.center.fromArray(y.sphereCenter),{boxInitialized:y.boxInitialized,box:E,sphereInitialized:y.sphereInitialized,sphere:b}}),a._maxInstanceCount=e.maxInstanceCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._geometryCount=e.geometryCount,a._matricesTexture=h(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(a._colorsTexture=h(e.colorsTexture.uuid));break;case"LOD":a=new FN;break;case"Line":a=new rc(o(e.geometry),c(e.material));break;case"LineLoop":a=new GN(o(e.geometry),c(e.material));break;case"LineSegments":a=new no(o(e.geometry),c(e.material));break;case"PointCloud":case"Points":a=new VN(o(e.geometry),c(e.material));break;case"Sprite":a=new NN(c(e.material));break;case"Group":a=new ld;break;case"Bone":a=new o2;break;default:a=new fn}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.up!==void 0&&a.up.fromArray(e.up),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(a.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const m=e.children;for(let A=0;A<m.length;A++)a.add(this.parseObject(m[A],t,i,r,s))}if(e.animations!==void 0){const m=e.animations;for(let A=0;A<m.length;A++){const v=m[A];a.animations.push(s[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const m=e.levels;for(let A=0;A<m.length;A++){const v=m[A],y=a.getObjectByProperty("uuid",v.object);y!==void 0&&a.addLevel(y,v.distance,v.hysteresis)}}return a}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,r=e.getObjectByProperty("uuid",i);r!==void 0?t.target=r:t.target=new fn}})}}const zj={UVMapping:ab,CubeReflectionMapping:el,CubeRefractionMapping:ic,EquirectangularReflectionMapping:gm,EquirectangularRefractionMapping:vm,CubeUVReflectionMapping:Qd},tL={RepeatWrapping:ym,ClampToEdgeWrapping:Js,MirroredRepeatWrapping:bm},nL={NearestFilter:rr,NearestMipmapNearestFilter:WS,NearestMipmapLinearFilter:ad,LinearFilter:Ui,LinearMipmapNearestFilter:qp,LinearMipmapLinearFilter:Ga};class Hj extends as{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=No.get(e);if(a!==void 0){if(s.manager.itemStart(e),a.then){a.then(h=>{t&&t(h),s.manager.itemEnd(e)}).catch(h=>{r&&r(h)});return}return setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a}const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader;const c=fetch(e,o).then(function(h){return h.blob()}).then(function(h){return createImageBitmap(h,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(h){return No.add(e,h),t&&t(h),s.manager.itemEnd(e),h}).catch(function(h){r&&r(h),No.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});No.add(e,c),s.manager.itemStart(e)}}let d0;class _2{static getContext(){return d0===void 0&&(d0=new(window.AudioContext||window.webkitAudioContext)),d0}static setContext(e){d0=e}}class Gj extends as{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new nl(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(c){try{const h=c.slice(0);_2.getContext().decodeAudioData(h,function(p){t(p)}).catch(o)}catch(h){o(h)}},i,r);function o(c){r?r(c):console.error(c),s.manager.itemError(e)}}}const iL=new It,rL=new It,kc=new It;class Vj{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new $i,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new $i,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,kc.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,a=t.near*Math.tan(bu*t.fov*.5)/t.zoom;let o,c;rL.elements[12]=-r,iL.elements[12]=r,o=-a*t.aspect+s,c=a*t.aspect+s,kc.elements[0]=2*t.near/(c-o),kc.elements[8]=(c+o)/(c-o),this.cameraL.projectionMatrix.copy(kc),o=-a*t.aspect-s,c=a*t.aspect-s,kc.elements[0]=2*t.near/(c-o),kc.elements[8]=(c+o)/(c-o),this.cameraR.projectionMatrix.copy(kc)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(rL),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(iL)}}class MF extends $i{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}class TF{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=sL(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=sL();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function sL(){return performance.now()}const Nc=new K,aL=new is,Wj=new K,Fc=new K;class qj extends fn{constructor(){super(),this.type="AudioListener",this.context=_2.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new TF}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Nc,aL,Wj),Fc.set(0,0,-1).applyQuaternion(aL),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Nc.x,r),t.positionY.linearRampToValueAtTime(Nc.y,r),t.positionZ.linearRampToValueAtTime(Nc.z,r),t.forwardX.linearRampToValueAtTime(Fc.x,r),t.forwardY.linearRampToValueAtTime(Fc.y,r),t.forwardZ.linearRampToValueAtTime(Fc.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(Nc.x,Nc.y,Nc.z),t.setOrientation(Fc.x,Fc.y,Fc.z,i.x,i.y,i.z)}}class BF extends fn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Qc=new K,oL=new is,jj=new K,zc=new K;class Xj extends BF{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Qc,oL,jj),zc.set(0,0,1).applyQuaternion(oL);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Qc.x,i),t.positionY.linearRampToValueAtTime(Qc.y,i),t.positionZ.linearRampToValueAtTime(Qc.z,i),t.orientationX.linearRampToValueAtTime(zc.x,i),t.orientationY.linearRampToValueAtTime(zc.y,i),t.orientationZ.linearRampToValueAtTime(zc.z,i)}else t.setPosition(Qc.x,Qc.y,Qc.z),t.setOrientation(zc.x,zc.y,zc.z)}}class Yj{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class IF{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,a;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let a=this.cumulativeWeight;if(a===0){for(let o=0;o!==r;++o)i[s+o]=i[o];a=t}else{a+=t;const o=t/a;this._mixBufferRegion(i,s,0,o,r)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const c=t*this._origIndex;this._mixBufferRegion(i,r,c,1-s,t)}a>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let c=t,h=t+t;c!==h;++c)if(i[c]!==i[c+t]){o.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,a=r;s!==a;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let a=0;a!==s;++a)e[t+a]=e[i+a]}_slerp(e,t,i,r){is.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const a=this._workIndex*s;is.multiplyQuaternionsFlat(e,a,e,t,e,i),is.slerpFlat(e,t,e,t,e,a,r)}_lerp(e,t,i,r,s){const a=1-r;for(let o=0;o!==s;++o){const c=t+o;e[c]=e[c]*a+e[i+o]*r}}_lerpAdditive(e,t,i,r,s){for(let a=0;a!==s;++a){const o=t+a;e[o]=e[o]+e[i+a]*r}}}const w2="\\[\\]\\.:\\/",Kj=new RegExp("["+w2+"]","g"),S2="[^"+w2+"]",Jj="[^"+w2.replace("\\.","")+"]",Zj=/((?:WC+[\/:])*)/.source.replace("WC",S2),$j=/(WCOD+)?/.source.replace("WCOD",Jj),eX=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",S2),tX=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",S2),nX=new RegExp("^"+Zj+$j+eX+tX+"$"),iX=["material","materials","bones","map"];class rX{constructor(e,t,i){const r=i||hn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class hn{constructor(e,t,i){this.path=t,this.parsedPath=i||hn.parseTrackName(t),this.node=hn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new hn.Composite(e,t,i):new hn(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Kj,"")}static parseTrackName(e){const t=nX.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);iX.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let a=0;a<s.length;a++){const o=s[a];if(o.name===t||o.uuid===t)return o;const c=i(o.children);if(c)return c}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=hn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let h=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===h){h=d;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(h!==void 0){if(e[h]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[h]}}const a=e[r];if(a===void 0){const h=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+r+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?o=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}hn.Composite=rX;hn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};hn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};hn.prototype.GetterByBindingType=[hn.prototype._getValue_direct,hn.prototype._getValue_array,hn.prototype._getValue_arrayElement,hn.prototype._getValue_toArray];hn.prototype.SetterByBindingTypeAndVersioning=[[hn.prototype._setValue_direct,hn.prototype._setValue_direct_setNeedsUpdate,hn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[hn.prototype._setValue_array,hn.prototype._setValue_array_setNeedsUpdate,hn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[hn.prototype._setValue_arrayElement,hn.prototype._setValue_arrayElement_setNeedsUpdate,hn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[hn.prototype._setValue_fromArray,hn.prototype._setValue_fromArray_setNeedsUpdate,hn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class sX{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Rs(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,a=s.length;let o,c=e.length,h=this.nCachedObjects_;for(let d=0,p=arguments.length;d!==p;++d){const m=arguments[d],A=m.uuid;let v=t[A];if(v===void 0){v=c++,t[A]=v,e.push(m);for(let y=0,E=a;y!==E;++y)s[y].push(new hn(m,i[y],r[y]))}else if(v<h){o=e[v];const y=--h,E=e[y];t[E.uuid]=v,e[v]=E,t[A]=y,e[y]=m;for(let b=0,C=a;b!==C;++b){const _=s[b],w=_[y];let T=_[v];_[v]=w,T===void 0&&(T=new hn(m,i[b],r[b])),_[y]=T}}else e[v]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=h}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let a=0,o=arguments.length;a!==o;++a){const c=arguments[a],h=c.uuid,d=t[h];if(d!==void 0&&d>=s){const p=s++,m=e[p];t[m.uuid]=d,e[d]=m,t[h]=p,e[p]=c;for(let A=0,v=r;A!==v;++A){const y=i[A],E=y[p],b=y[d];y[d]=E,y[p]=b}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,a=e.length;for(let o=0,c=arguments.length;o!==c;++o){const h=arguments[o],d=h.uuid,p=t[d];if(p!==void 0)if(delete t[d],p<s){const m=--s,A=e[m],v=--a,y=e[v];t[A.uuid]=p,e[p]=A,t[y.uuid]=m,e[m]=y,e.pop();for(let E=0,b=r;E!==b;++E){const C=i[E],_=C[m],w=C[v];C[p]=_,C[m]=w,C.pop()}}else{const m=--a,A=e[m];m>0&&(t[A.uuid]=p),e[p]=A,e.pop();for(let v=0,y=r;v!==y;++v){const E=i[v];E[p]=E[m],E.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const a=this._paths,o=this._parsedPaths,c=this._objects,h=c.length,d=this.nCachedObjects_,p=new Array(h);r=s.length,i[e]=r,a.push(e),o.push(t),s.push(p);for(let m=d,A=c.length;m!==A;++m){const v=c[m];p[m]=new hn(v,e,t)}return p}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,a=this._bindings,o=a.length-1,c=a[o],h=e[o];t[h]=i,a[i]=c,a.pop(),s[i]=s[o],s.pop(),r[i]=r[o],r.pop()}}}class RF{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,a=s.length,o=new Array(a),c={endingStart:lu,endingEnd:lu};for(let h=0;h!==a;++h){const d=s[h].createInterpolant(null);o[h]=d,d.settings=c}this._interpolantSettings=c,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=AN,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,a=s/r,o=r/s;e.warp(1,a,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,a=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const c=o.parameterPositions,h=o.sampleValues;return c[0]=s,c[1]=s+i,h[0]=e/a,h[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const c=(e-s)*i;c<0||i===0?t=0:(this._startTime=null,t=i*c)}t*=this._updateTimeScale(e);const a=this._updateTime(t),o=this._updateWeight(e);if(o>0){const c=this._interpolants,h=this._propertyBindings;switch(this.blendMode){case t2:for(let d=0,p=c.length;d!==p;++d)c[d].evaluate(a),h[d].accumulateAdditive(o);break;case fb:default:for(let d=0,p=c.length;d!==p;++d)c[d].evaluate(a),h[d].accumulate(r,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const a=i===gN;if(e===0)return s===-1?r:a&&(s&1)===1?t-r:r;if(i===mN){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),r>=t||r<0){const o=Math.floor(r/t);r-=t*o,s+=Math.abs(o);const c=this.repetitions-s;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const h=e<0;this._setEndings(h,!h,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(a&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=cu,r.endingEnd=cu):(e?r.endingStart=this.zeroSlopeAtStart?cu:lu:r.endingStart=xm,t?r.endingEnd=this.zeroSlopeAtEnd?cu:lu:r.endingEnd=xm)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let a=this._weightInterpolant;a===null&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,c=a.sampleValues;return o[0]=s,c[0]=t,o[1]=s+e,c[1]=i,this}}const aX=new Float32Array(1);class oX extends to{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,a=e._propertyBindings,o=e._interpolants,c=i.uuid,h=this._bindingsByRootAndName;let d=h[c];d===void 0&&(d={},h[c]=d);for(let p=0;p!==s;++p){const m=r[p],A=m.name;let v=d[A];if(v!==void 0)++v.referenceCount,a[p]=v;else{if(v=a[p],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,c,A));continue}const y=t&&t._propertyBindings[p].binding.parsedPath;v=new IF(hn.create(i,A,y),m.ValueTypeName,m.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,c,A),a[p]=v}o[p].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let a=s[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=a;else{const o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,a=this._actionsByClip,o=a[s],c=o.knownActions,h=c[c.length-1],d=e._byClipCacheIndex;h._byClipCacheIndex=d,c[d]=h,c.pop(),e._byClipCacheIndex=null;const p=o.actionByRoot,m=(e._localRoot||this._root).uuid;delete p[m],c.length===0&&delete a[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let a=r[t];a===void 0&&(a={},r[t]=a),a[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,a=this._bindingsByRootAndName,o=a[r],c=t[t.length-1],h=e._cacheIndex;c._cacheIndex=h,t[h]=c,t.pop(),delete o[s],Object.keys(o).length===0&&delete a[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new b2(new Float32Array(2),new Float32Array(2),1,aX),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let a=typeof e=="string"?Lm.findByName(r,e):e;const o=a!==null?a.uuid:e,c=this._actionsByClip[o];let h=null;if(i===void 0&&(a!==null?i=a.blendMode:i=fb),c!==void 0){const p=c.actionByRoot[s];if(p!==void 0&&p.blendMode===i)return p;h=c.knownActions[0],a===null&&(a=h._clip)}if(a===null)return null;const d=new RF(this,a,t,i);return this._bindAction(d,h),this._addInactiveAction(d,o,s),d}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?Lm.findByName(i,e):e,a=s?s.uuid:e,o=this._actionsByClip[a];return o!==void 0&&o.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),a=this._accuIndex^=1;for(let h=0;h!==i;++h)t[h]._update(r,e,s,a);const o=this._bindings,c=this._nActiveBindings;for(let h=0;h!==c;++h)o[h].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const a=s.knownActions;for(let o=0,c=a.length;o!==c;++o){const h=a[o];this._deactivateAction(h);const d=h._cacheIndex,p=t[t.length-1];h._cacheIndex=null,h._byClipCacheIndex=null,p._cacheIndex=d,t[d]=p,t.pop(),this._removeInactiveBindingsForAction(h)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const a in i){const o=i[a].actionByRoot,c=o[t];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const a in s){const o=s[a];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class lX extends pb{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=i,this.texture=new mb(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class cX extends pb{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTargetArray=!0,this.depth=i,this.texture=new Jm(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class M2{constructor(e){this.value=e}clone(){return new M2(this.value.clone===void 0?this.value:this.value.clone())}}let uX=0;class hX extends to{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:uX++}),this.name="",this.usage=_m,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let a=0;a<s.length;a++)this.uniforms.push(s[a].clone())}return this}clone(){return new this.constructor().copy(this)}}class dX extends bb{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class fX{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const lL=new It;class pX{constructor(e,t,i=0,r=1/0){this.ray=new Hd(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Ab,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return lL.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(lL),this}intersectObject(e,t=!0,i=[]){return ow(e,this,i,t),i.sort(cL),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)ow(e[r],this,i,t);return i.sort(cL),i}}function cL(n,e){return n.distance-e.distance}function ow(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){const s=n.children;for(let a=0,o=s.length;a<o;a++)ow(s[a],e,t,!0)}}class mX{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Ut(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Ut(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class AX{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class T2{constructor(e,t,i,r){T2.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=i,s[3]=r,this}}const uL=new He;class gX{constructor(e=new He(1/0,1/0),t=new He(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=uL.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,uL).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const hL=new K,f0=new K;class vX{constructor(e=new K,t=new K){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){hL.subVectors(e,this.start),f0.subVectors(this.end,this.start);const i=f0.dot(f0);let s=f0.dot(hL)/i;return t&&(s=Ut(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const dL=new K;class yX extends fn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new Vt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,o=1,c=32;a<c;a++,o++){const h=a/c*Math.PI*2,d=o/c*Math.PI*2;r.push(Math.cos(h),Math.sin(h),1,Math.cos(d),Math.sin(d),1)}i.setAttribute("position",new mt(r,3));const s=new zr({fog:!1,toneMapped:!1});this.cone=new no(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),dL.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(dL),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Dl=new K,p0=new It,o_=new It;class bX extends no{constructor(e){const t=DF(e),i=new Vt,r=[],s=[],a=new ut(0,0,1),o=new ut(0,1,0);for(let h=0;h<t.length;h++){const d=t[h];d.parent&&d.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(a.r,a.g,a.b),s.push(o.r,o.g,o.b))}i.setAttribute("position",new mt(r,3)),i.setAttribute("color",new mt(s,3));const c=new zr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,c),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");o_.copy(this.root.matrixWorld).invert();for(let s=0,a=0;s<t.length;s++){const o=t[s];o.parent&&o.parent.isBone&&(p0.multiplyMatrices(o_,o.matrixWorld),Dl.setFromMatrixPosition(p0),r.setXYZ(a,Dl.x,Dl.y,Dl.z),p0.multiplyMatrices(o_,o.parent.matrixWorld),Dl.setFromMatrixPosition(p0),r.setXYZ(a+1,Dl.x,Dl.y,Dl.z),a+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function DF(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,DF(n.children[t]));return e}class EX extends Mi{constructor(e,t,i){const r=new nA(t,4,2),s=new cc({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const xX=new K,fL=new ut,pL=new ut;class CX extends fn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new tA(t);r.rotateY(Math.PI*.5),this.material=new cc({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),a=new Float32Array(s.count*3);r.setAttribute("color",new Ln(a,3)),this.add(new Mi(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");fL.copy(this.light.color),pL.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?fL:pL;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(xX.setFromMatrixPosition(this.light.matrixWorld).negate())}}class _X extends no{constructor(e=10,t=10,i=4473924,r=8947848){i=new ut(i),r=new ut(r);const s=t/2,a=e/t,o=e/2,c=[],h=[];for(let m=0,A=0,v=-o;m<=t;m++,v+=a){c.push(-o,0,v,o,0,v),c.push(v,0,-o,v,0,o);const y=m===s?i:r;y.toArray(h,A),A+=3,y.toArray(h,A),A+=3,y.toArray(h,A),A+=3,y.toArray(h,A),A+=3}const d=new Vt;d.setAttribute("position",new mt(c,3)),d.setAttribute("color",new mt(h,3));const p=new zr({vertexColors:!0,toneMapped:!1});super(d,p),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class wX extends no{constructor(e=10,t=16,i=8,r=64,s=4473924,a=8947848){s=new ut(s),a=new ut(a);const o=[],c=[];if(t>1)for(let p=0;p<t;p++){const m=p/t*(Math.PI*2),A=Math.sin(m)*e,v=Math.cos(m)*e;o.push(0,0,0),o.push(A,0,v);const y=p&1?s:a;c.push(y.r,y.g,y.b),c.push(y.r,y.g,y.b)}for(let p=0;p<i;p++){const m=p&1?s:a,A=e-e/i*p;for(let v=0;v<r;v++){let y=v/r*(Math.PI*2),E=Math.sin(y)*A,b=Math.cos(y)*A;o.push(E,0,b),c.push(m.r,m.g,m.b),y=(v+1)/r*(Math.PI*2),E=Math.sin(y)*A,b=Math.cos(y)*A,o.push(E,0,b),c.push(m.r,m.g,m.b)}}const h=new Vt;h.setAttribute("position",new mt(o,3)),h.setAttribute("color",new mt(c,3));const d=new zr({vertexColors:!0,toneMapped:!1});super(h,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const mL=new K,m0=new K,AL=new K;class SX extends fn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Vt;r.setAttribute("position",new mt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new zr({fog:!1,toneMapped:!1});this.lightPlane=new rc(r,s),this.add(this.lightPlane),r=new Vt,r.setAttribute("position",new mt([0,0,0,0,0,1],3)),this.targetLine=new rc(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),mL.setFromMatrixPosition(this.light.matrixWorld),m0.setFromMatrixPosition(this.light.target.matrixWorld),AL.subVectors(m0,mL),this.lightPlane.lookAt(m0),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(m0),this.targetLine.scale.z=AL.length()}}const A0=new K,si=new gb;class MX extends no{constructor(e){const t=new Vt,i=new zr({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],a={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(v,y){c(v),c(y)}function c(v){r.push(0,0,0),s.push(0,0,0),a[v]===void 0&&(a[v]=[]),a[v].push(r.length/3-1)}t.setAttribute("position",new mt(r,3)),t.setAttribute("color",new mt(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const h=new ut(16755200),d=new ut(16711680),p=new ut(43775),m=new ut(16777215),A=new ut(3355443);this.setColors(h,d,p,m,A)}setColors(e,t,i,r,s){const o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,i.r,i.g,i.b),o.setXYZ(33,i.r,i.g,i.b),o.setXYZ(34,i.r,i.g,i.b),o.setXYZ(35,i.r,i.g,i.b),o.setXYZ(36,i.r,i.g,i.b),o.setXYZ(37,i.r,i.g,i.b),o.setXYZ(38,r.r,r.g,r.b),o.setXYZ(39,r.r,r.g,r.b),o.setXYZ(40,s.r,s.g,s.b),o.setXYZ(41,s.r,s.g,s.b),o.setXYZ(42,s.r,s.g,s.b),o.setXYZ(43,s.r,s.g,s.b),o.setXYZ(44,s.r,s.g,s.b),o.setXYZ(45,s.r,s.g,s.b),o.setXYZ(46,s.r,s.g,s.b),o.setXYZ(47,s.r,s.g,s.b),o.setXYZ(48,s.r,s.g,s.b),o.setXYZ(49,s.r,s.g,s.b),o.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;si.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const s=this.camera.coordinateSystem===ga?-1:0;di("c",t,e,si,0,0,s),di("t",t,e,si,0,0,1),di("n1",t,e,si,-1,-1,s),di("n2",t,e,si,i,-1,s),di("n3",t,e,si,-1,r,s),di("n4",t,e,si,i,r,s),di("f1",t,e,si,-1,-1,1),di("f2",t,e,si,i,-1,1),di("f3",t,e,si,-1,r,1),di("f4",t,e,si,i,r,1),di("u1",t,e,si,i*.7,r*1.1,s),di("u2",t,e,si,-1*.7,r*1.1,s),di("u3",t,e,si,0,r*2,s),di("cf1",t,e,si,-1,0,1),di("cf2",t,e,si,i,0,1),di("cf3",t,e,si,0,-1,1),di("cf4",t,e,si,0,r,1),di("cn1",t,e,si,-1,0,s),di("cn2",t,e,si,i,0,s),di("cn3",t,e,si,0,-1,s),di("cn4",t,e,si,0,r,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function di(n,e,t,i,r,s,a){A0.set(r,s,a).unproject(i);const o=e[n];if(o!==void 0){const c=t.getAttribute("position");for(let h=0,d=o.length;h<d;h++)c.setXYZ(o[h],A0.x,A0.y,A0.z)}}const g0=new Qr;class TX extends no{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new Vt;s.setIndex(new Ln(i,1)),s.setAttribute("position",new Ln(r,3)),super(s,new zr({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&g0.setFromObject(this.object),g0.isEmpty())return;const t=g0.min,i=g0.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class BX extends no{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Vt;s.setIndex(new Ln(i,1)),s.setAttribute("position",new mt(r,3)),super(s,new zr({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class IX extends rc{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new Vt;a.setAttribute("position",new mt(s,3)),a.computeBoundingSphere(),super(a,new zr({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new Vt;c.setAttribute("position",new mt(o,3)),c.computeBoundingSphere(),this.add(new Mi(c,new cc({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const gL=new K;let v0,l_;class RX extends fn{constructor(e=new K(0,0,1),t=new K(0,0,0),i=1,r=16776960,s=i*.2,a=s*.2){super(),this.type="ArrowHelper",v0===void 0&&(v0=new Vt,v0.setAttribute("position",new mt([0,0,0,0,1,0],3)),l_=new Gd(0,.5,1,5,1),l_.translate(0,-.5,0)),this.position.copy(t),this.line=new rc(v0,new zr({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mi(l_,new cc({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{gL.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(gL,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class DX extends no{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Vt;r.setAttribute("position",new mt(t,3)),r.setAttribute("color",new mt(i,3));const s=new zr({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new ut,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class LX{constructor(){this.type="ShapePath",this.color=new ut,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Mm,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,a){return this.currentPath.bezierCurveTo(e,t,i,r,s,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(b){const C=[];for(let _=0,w=b.length;_<w;_++){const T=b[_],L=new Eu;L.curves=T.curves,C.push(L)}return C}function i(b,C){const _=C.length;let w=!1;for(let T=_-1,L=0;L<_;T=L++){let R=C[T],P=C[L],D=P.x-R.x,M=P.y-R.y;if(Math.abs(M)>Number.EPSILON){if(M<0&&(R=C[L],D=-D,P=C[T],M=-M),b.y<R.y||b.y>P.y)continue;if(b.y===R.y){if(b.x===R.x)return!0}else{const k=M*(b.x-R.x)-D*(b.y-R.y);if(k===0)return!0;if(k<0)continue;w=!w}}else{if(b.y!==R.y)continue;if(P.x<=b.x&&b.x<=R.x||R.x<=b.x&&b.x<=P.x)return!0}}return w}const r=Ja.isClockWise,s=this.subPaths;if(s.length===0)return[];let a,o,c;const h=[];if(s.length===1)return o=s[0],c=new Eu,c.curves=o.curves,h.push(c),h;let d=!r(s[0].getPoints());d=e?!d:d;const p=[],m=[];let A=[],v=0,y;m[v]=void 0,A[v]=[];for(let b=0,C=s.length;b<C;b++)o=s[b],y=o.getPoints(),a=r(y),a=e?!a:a,a?(!d&&m[v]&&v++,m[v]={s:new Eu,p:y},m[v].s.curves=o.curves,d&&v++,A[v]=[]):A[v].push({h:o,p:y[0]});if(!m[0])return t(s);if(m.length>1){let b=!1,C=0;for(let _=0,w=m.length;_<w;_++)p[_]=[];for(let _=0,w=m.length;_<w;_++){const T=A[_];for(let L=0;L<T.length;L++){const R=T[L];let P=!0;for(let D=0;D<m.length;D++)i(R.p,m[D].p)&&(_!==D&&C++,P?(P=!1,p[D].push(R)):b=!0);P&&p[_].push(R)}}C>0&&b===!1&&(A=p)}let E;for(let b=0,C=m.length;b<C;b++){c=m[b].s,h.push(c),E=A[b];for(let _=0,w=E.length;_<w;_++)c.holes.push(E[_].h)}return h}}class OX extends to{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function PX(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function UX(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function kX(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function lw(n,e,t,i){const r=NX(i);switch(t){case YS:return n*e;case JS:return n*e;case ZS:return n*e*2;case ub:return n*e/r.components*r.byteLength;case Km:return n*e/r.components*r.byteLength;case $S:return n*e*2/r.components*r.byteLength;case hb:return n*e*2/r.components*r.byteLength;case KS:return n*e*3/r.components*r.byteLength;case kr:return n*e*4/r.components*r.byteLength;case db:return n*e*4/r.components*r.byteLength;case jp:case Xp:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Yp:case Kp:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case qv:case Xv:return Math.max(n,16)*Math.max(e,8)/4;case Wv:case jv:return Math.max(n,8)*Math.max(e,8)/2;case Yv:case Kv:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Jv:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Zv:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case $v:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case ey:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case ty:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case ny:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case iy:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case ry:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case sy:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case ay:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case oy:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case ly:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case cy:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case uy:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case hy:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case Jp:case dy:case fy:return Math.ceil(n/4)*Math.ceil(e/4)*16;case e2:case py:return Math.ceil(n/4)*Math.ceil(e/4)*8;case my:case Ay:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function NX(n){switch(n){case $a:case qS:return{byteLength:1,components:1};case Id:case jS:case zd:return{byteLength:2,components:1};case lb:case cb:return{byteLength:2,components:4};case tl:case ob:case Or:return{byteLength:4,components:1};case XS:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}const FX={contain:PX,cover:UX,fill:kX,getByteLength:lw};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:sb}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=sb);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function LF(){let n=null,e=!1,t=null,i=null;function r(s,a){t(s,a),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function QX(n){const e=new WeakMap;function t(o,c){const h=o.array,d=o.usage,p=h.byteLength,m=n.createBuffer();n.bindBuffer(c,m),n.bufferData(c,h,d),o.onUploadCallback();let A;if(h instanceof Float32Array)A=n.FLOAT;else if(h instanceof Uint16Array)o.isFloat16BufferAttribute?A=n.HALF_FLOAT:A=n.UNSIGNED_SHORT;else if(h instanceof Int16Array)A=n.SHORT;else if(h instanceof Uint32Array)A=n.UNSIGNED_INT;else if(h instanceof Int32Array)A=n.INT;else if(h instanceof Int8Array)A=n.BYTE;else if(h instanceof Uint8Array)A=n.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)A=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:m,type:A,bytesPerElement:h.BYTES_PER_ELEMENT,version:o.version,size:p}}function i(o,c,h){const d=c.array,p=c.updateRanges;if(n.bindBuffer(h,o),p.length===0)n.bufferSubData(h,0,d);else{p.sort((A,v)=>A.start-v.start);let m=0;for(let A=1;A<p.length;A++){const v=p[m],y=p[A];y.start<=v.start+v.count+1?v.count=Math.max(v.count,y.start+y.count-v.start):(++m,p[m]=y)}p.length=m+1;for(let A=0,v=p.length;A<v;A++){const y=p[A];n.bufferSubData(h,y.start*d.BYTES_PER_ELEMENT,d,y.start,y.count)}c.clearUpdateRanges()}c.onUploadCallback()}function r(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function s(o){o.isInterleavedBufferAttribute&&(o=o.data);const c=e.get(o);c&&(n.deleteBuffer(c.buffer),e.delete(o))}function a(o,c){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const d=e.get(o);(!d||d.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const h=e.get(o);if(h===void 0)e.set(o,t(o,c));else if(h.version<o.version){if(h.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(h.buffer,o,c),h.version=o.version}}return{get:r,remove:s,update:a}}var zX=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,HX=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,GX=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,VX=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,WX=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,qX=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,jX=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,XX=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,YX=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,KX=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,JX=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,ZX=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,$X=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,eY=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,tY=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,nY=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,iY=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,rY=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,sY=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,aY=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,oY=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,lY=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,cY=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,uY=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,hY=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,dY=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,fY=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,pY=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,mY=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,AY=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,gY="gl_FragColor = linearToOutputTexel( gl_FragColor );",vY=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,yY=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,bY=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,EY=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,xY=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,CY=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,_Y=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,wY=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,SY=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,MY=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,TY=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,BY=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,IY=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,RY=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,DY=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,LY=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,OY=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,PY=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,UY=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,kY=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,NY=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,FY=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,QY=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,zY=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,HY=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,GY=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,VY=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,WY=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,qY=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,jY=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,XY=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,YY=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,KY=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,JY=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,ZY=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,$Y=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,eK=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,tK=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,nK=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,iK=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,rK=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,sK=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,aK=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,oK=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,lK=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,cK=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,uK=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,hK=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,dK=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,fK=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,pK=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,mK=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,AK=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,gK=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,vK=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,yK=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,bK=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,EK=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,xK=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,CK=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,_K=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,wK=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,SK=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,MK=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,TK=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,BK=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,IK=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,RK=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,DK=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,LK=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,OK=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,PK=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,UK=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,kK=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,NK=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,FK=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const QK=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,zK=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,HK=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,GK=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,VK=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,WK=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,qK=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,jK=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,XK=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,YK=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,KK=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,JK=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,ZK=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,$K=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,eJ=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,tJ=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nJ=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,iJ=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rJ=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,sJ=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,aJ=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,oJ=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,lJ=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,cJ=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,uJ=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,hJ=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dJ=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fJ=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pJ=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,mJ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,AJ=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,gJ=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,vJ=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,yJ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Gt={alphahash_fragment:zX,alphahash_pars_fragment:HX,alphamap_fragment:GX,alphamap_pars_fragment:VX,alphatest_fragment:WX,alphatest_pars_fragment:qX,aomap_fragment:jX,aomap_pars_fragment:XX,batching_pars_vertex:YX,batching_vertex:KX,begin_vertex:JX,beginnormal_vertex:ZX,bsdfs:$X,iridescence_fragment:eY,bumpmap_pars_fragment:tY,clipping_planes_fragment:nY,clipping_planes_pars_fragment:iY,clipping_planes_pars_vertex:rY,clipping_planes_vertex:sY,color_fragment:aY,color_pars_fragment:oY,color_pars_vertex:lY,color_vertex:cY,common:uY,cube_uv_reflection_fragment:hY,defaultnormal_vertex:dY,displacementmap_pars_vertex:fY,displacementmap_vertex:pY,emissivemap_fragment:mY,emissivemap_pars_fragment:AY,colorspace_fragment:gY,colorspace_pars_fragment:vY,envmap_fragment:yY,envmap_common_pars_fragment:bY,envmap_pars_fragment:EY,envmap_pars_vertex:xY,envmap_physical_pars_fragment:LY,envmap_vertex:CY,fog_vertex:_Y,fog_pars_vertex:wY,fog_fragment:SY,fog_pars_fragment:MY,gradientmap_pars_fragment:TY,lightmap_pars_fragment:BY,lights_lambert_fragment:IY,lights_lambert_pars_fragment:RY,lights_pars_begin:DY,lights_toon_fragment:OY,lights_toon_pars_fragment:PY,lights_phong_fragment:UY,lights_phong_pars_fragment:kY,lights_physical_fragment:NY,lights_physical_pars_fragment:FY,lights_fragment_begin:QY,lights_fragment_maps:zY,lights_fragment_end:HY,logdepthbuf_fragment:GY,logdepthbuf_pars_fragment:VY,logdepthbuf_pars_vertex:WY,logdepthbuf_vertex:qY,map_fragment:jY,map_pars_fragment:XY,map_particle_fragment:YY,map_particle_pars_fragment:KY,metalnessmap_fragment:JY,metalnessmap_pars_fragment:ZY,morphinstance_vertex:$Y,morphcolor_vertex:eK,morphnormal_vertex:tK,morphtarget_pars_vertex:nK,morphtarget_vertex:iK,normal_fragment_begin:rK,normal_fragment_maps:sK,normal_pars_fragment:aK,normal_pars_vertex:oK,normal_vertex:lK,normalmap_pars_fragment:cK,clearcoat_normal_fragment_begin:uK,clearcoat_normal_fragment_maps:hK,clearcoat_pars_fragment:dK,iridescence_pars_fragment:fK,opaque_fragment:pK,packing:mK,premultiplied_alpha_fragment:AK,project_vertex:gK,dithering_fragment:vK,dithering_pars_fragment:yK,roughnessmap_fragment:bK,roughnessmap_pars_fragment:EK,shadowmap_pars_fragment:xK,shadowmap_pars_vertex:CK,shadowmap_vertex:_K,shadowmask_pars_fragment:wK,skinbase_vertex:SK,skinning_pars_vertex:MK,skinning_vertex:TK,skinnormal_vertex:BK,specularmap_fragment:IK,specularmap_pars_fragment:RK,tonemapping_fragment:DK,tonemapping_pars_fragment:LK,transmission_fragment:OK,transmission_pars_fragment:PK,uv_pars_fragment:UK,uv_pars_vertex:kK,uv_vertex:NK,worldpos_vertex:FK,background_vert:QK,background_frag:zK,backgroundCube_vert:HK,backgroundCube_frag:GK,cube_vert:VK,cube_frag:WK,depth_vert:qK,depth_frag:jK,distanceRGBA_vert:XK,distanceRGBA_frag:YK,equirect_vert:KK,equirect_frag:JK,linedashed_vert:ZK,linedashed_frag:$K,meshbasic_vert:eJ,meshbasic_frag:tJ,meshlambert_vert:nJ,meshlambert_frag:iJ,meshmatcap_vert:rJ,meshmatcap_frag:sJ,meshnormal_vert:aJ,meshnormal_frag:oJ,meshphong_vert:lJ,meshphong_frag:cJ,meshphysical_vert:uJ,meshphysical_frag:hJ,meshtoon_vert:dJ,meshtoon_frag:fJ,points_vert:pJ,points_frag:mJ,shadow_vert:AJ,shadow_frag:gJ,sprite_vert:vJ,sprite_frag:yJ},lt={common:{diffuse:{value:new ut(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Pt},alphaMap:{value:null},alphaMapTransform:{value:new Pt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Pt}},envmap:{envMap:{value:null},envMapRotation:{value:new Pt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Pt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Pt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Pt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Pt},normalScale:{value:new He(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Pt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Pt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Pt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Pt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ut(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ut(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Pt},alphaTest:{value:0},uvTransform:{value:new Pt}},sprite:{diffuse:{value:new ut(16777215)},opacity:{value:1},center:{value:new He(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Pt},alphaMap:{value:null},alphaMapTransform:{value:new Pt},alphaTest:{value:0}}},pa={basic:{uniforms:Mr([lt.common,lt.specularmap,lt.envmap,lt.aomap,lt.lightmap,lt.fog]),vertexShader:Gt.meshbasic_vert,fragmentShader:Gt.meshbasic_frag},lambert:{uniforms:Mr([lt.common,lt.specularmap,lt.envmap,lt.aomap,lt.lightmap,lt.emissivemap,lt.bumpmap,lt.normalmap,lt.displacementmap,lt.fog,lt.lights,{emissive:{value:new ut(0)}}]),vertexShader:Gt.meshlambert_vert,fragmentShader:Gt.meshlambert_frag},phong:{uniforms:Mr([lt.common,lt.specularmap,lt.envmap,lt.aomap,lt.lightmap,lt.emissivemap,lt.bumpmap,lt.normalmap,lt.displacementmap,lt.fog,lt.lights,{emissive:{value:new ut(0)},specular:{value:new ut(1118481)},shininess:{value:30}}]),vertexShader:Gt.meshphong_vert,fragmentShader:Gt.meshphong_frag},standard:{uniforms:Mr([lt.common,lt.envmap,lt.aomap,lt.lightmap,lt.emissivemap,lt.bumpmap,lt.normalmap,lt.displacementmap,lt.roughnessmap,lt.metalnessmap,lt.fog,lt.lights,{emissive:{value:new ut(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Gt.meshphysical_vert,fragmentShader:Gt.meshphysical_frag},toon:{uniforms:Mr([lt.common,lt.aomap,lt.lightmap,lt.emissivemap,lt.bumpmap,lt.normalmap,lt.displacementmap,lt.gradientmap,lt.fog,lt.lights,{emissive:{value:new ut(0)}}]),vertexShader:Gt.meshtoon_vert,fragmentShader:Gt.meshtoon_frag},matcap:{uniforms:Mr([lt.common,lt.bumpmap,lt.normalmap,lt.displacementmap,lt.fog,{matcap:{value:null}}]),vertexShader:Gt.meshmatcap_vert,fragmentShader:Gt.meshmatcap_frag},points:{uniforms:Mr([lt.points,lt.fog]),vertexShader:Gt.points_vert,fragmentShader:Gt.points_frag},dashed:{uniforms:Mr([lt.common,lt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Gt.linedashed_vert,fragmentShader:Gt.linedashed_frag},depth:{uniforms:Mr([lt.common,lt.displacementmap]),vertexShader:Gt.depth_vert,fragmentShader:Gt.depth_frag},normal:{uniforms:Mr([lt.common,lt.bumpmap,lt.normalmap,lt.displacementmap,{opacity:{value:1}}]),vertexShader:Gt.meshnormal_vert,fragmentShader:Gt.meshnormal_frag},sprite:{uniforms:Mr([lt.sprite,lt.fog]),vertexShader:Gt.sprite_vert,fragmentShader:Gt.sprite_frag},background:{uniforms:{uvTransform:{value:new Pt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Gt.background_vert,fragmentShader:Gt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Pt}},vertexShader:Gt.backgroundCube_vert,fragmentShader:Gt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Gt.cube_vert,fragmentShader:Gt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Gt.equirect_vert,fragmentShader:Gt.equirect_frag},distanceRGBA:{uniforms:Mr([lt.common,lt.displacementmap,{referencePosition:{value:new K},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Gt.distanceRGBA_vert,fragmentShader:Gt.distanceRGBA_frag},shadow:{uniforms:Mr([lt.lights,lt.fog,{color:{value:new ut(0)},opacity:{value:1}}]),vertexShader:Gt.shadow_vert,fragmentShader:Gt.shadow_frag}};pa.physical={uniforms:Mr([pa.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Pt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Pt},clearcoatNormalScale:{value:new He(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Pt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Pt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Pt},sheen:{value:0},sheenColor:{value:new ut(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Pt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Pt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Pt},transmissionSamplerSize:{value:new He},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Pt},attenuationDistance:{value:0},attenuationColor:{value:new ut(0)},specularColor:{value:new ut(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Pt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Pt},anisotropyVector:{value:new He},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Pt}}]),vertexShader:Gt.meshphysical_vert,fragmentShader:Gt.meshphysical_frag};const y0={r:0,b:0,g:0},Hc=new Os,bJ=new It;function EJ(n,e,t,i,r,s,a){const o=new ut(0);let c=s===!0?0:1,h,d,p=null,m=0,A=null;function v(_){let w=_.isScene===!0?_.background:null;return w&&w.isTexture&&(w=(_.backgroundBlurriness>0?t:e).get(w)),w}function y(_){let w=!1;const T=v(_);T===null?b(o,c):T&&T.isColor&&(b(T,1),w=!0);const L=n.xr.getEnvironmentBlendMode();L==="additive"?i.buffers.color.setClear(0,0,0,1,a):L==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,a),(n.autoClear||w)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function E(_,w){const T=v(w);T&&(T.isCubeTexture||T.mapping===Qd)?(d===void 0&&(d=new Mi(new Fu(1e4,1e4,1e4),new Ea({name:"BackgroundCubeMaterial",uniforms:Dd(pa.backgroundCube.uniforms),vertexShader:pa.backgroundCube.vertexShader,fragmentShader:pa.backgroundCube.fragmentShader,side:Fr,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(L,R,P){this.matrixWorld.copyPosition(P.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(d)),Hc.copy(w.backgroundRotation),Hc.x*=-1,Hc.y*=-1,Hc.z*=-1,T.isCubeTexture&&T.isRenderTargetTexture===!1&&(Hc.y*=-1,Hc.z*=-1),d.material.uniforms.envMap.value=T,d.material.uniforms.flipEnvMap.value=T.isCubeTexture&&T.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=w.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(bJ.makeRotationFromEuler(Hc)),d.material.toneMapped=cn.getTransfer(T.colorSpace)!==Sn,(p!==T||m!==T.version||A!==n.toneMapping)&&(d.material.needsUpdate=!0,p=T,m=T.version,A=n.toneMapping),d.layers.enableAll(),_.unshift(d,d.geometry,d.material,0,0,null)):T&&T.isTexture&&(h===void 0&&(h=new Mi(new Vd(2,2),new Ea({name:"BackgroundMaterial",uniforms:Dd(pa.background.uniforms),vertexShader:pa.background.vertexShader,fragmentShader:pa.background.fragmentShader,side:$o,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(h)),h.material.uniforms.t2D.value=T,h.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,h.material.toneMapped=cn.getTransfer(T.colorSpace)!==Sn,T.matrixAutoUpdate===!0&&T.updateMatrix(),h.material.uniforms.uvTransform.value.copy(T.matrix),(p!==T||m!==T.version||A!==n.toneMapping)&&(h.material.needsUpdate=!0,p=T,m=T.version,A=n.toneMapping),h.layers.enableAll(),_.unshift(h,h.geometry,h.material,0,0,null))}function b(_,w){_.getRGB(y0,DN(n)),i.buffers.color.setClear(y0.r,y0.g,y0.b,w,a)}function C(){d!==void 0&&(d.geometry.dispose(),d.material.dispose(),d=void 0),h!==void 0&&(h.geometry.dispose(),h.material.dispose(),h=void 0)}return{getClearColor:function(){return o},setClearColor:function(_,w=1){o.set(_),c=w,b(o,c)},getClearAlpha:function(){return c},setClearAlpha:function(_){c=_,b(o,c)},render:y,addToRenderList:E,dispose:C}}function xJ(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=m(null);let s=r,a=!1;function o(M,k,V,X,$){let ae=!1;const z=p(X,V,k);s!==z&&(s=z,h(s.object)),ae=A(M,X,V,$),ae&&v(M,X,V,$),$!==null&&e.update($,n.ELEMENT_ARRAY_BUFFER),(ae||a)&&(a=!1,w(M,k,V,X),$!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get($).buffer))}function c(){return n.createVertexArray()}function h(M){return n.bindVertexArray(M)}function d(M){return n.deleteVertexArray(M)}function p(M,k,V){const X=V.wireframe===!0;let $=i[M.id];$===void 0&&($={},i[M.id]=$);let ae=$[k.id];ae===void 0&&(ae={},$[k.id]=ae);let z=ae[X];return z===void 0&&(z=m(c()),ae[X]=z),z}function m(M){const k=[],V=[],X=[];for(let $=0;$<t;$++)k[$]=0,V[$]=0,X[$]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:k,enabledAttributes:V,attributeDivisors:X,object:M,attributes:{},index:null}}function A(M,k,V,X){const $=s.attributes,ae=k.attributes;let z=0;const j=V.getAttributes();for(const Z in j)if(j[Z].location>=0){const U=$[Z];let se=ae[Z];if(se===void 0&&(Z==="instanceMatrix"&&M.instanceMatrix&&(se=M.instanceMatrix),Z==="instanceColor"&&M.instanceColor&&(se=M.instanceColor)),U===void 0||U.attribute!==se||se&&U.data!==se.data)return!0;z++}return s.attributesNum!==z||s.index!==X}function v(M,k,V,X){const $={},ae=k.attributes;let z=0;const j=V.getAttributes();for(const Z in j)if(j[Z].location>=0){let U=ae[Z];U===void 0&&(Z==="instanceMatrix"&&M.instanceMatrix&&(U=M.instanceMatrix),Z==="instanceColor"&&M.instanceColor&&(U=M.instanceColor));const se={};se.attribute=U,U&&U.data&&(se.data=U.data),$[Z]=se,z++}s.attributes=$,s.attributesNum=z,s.index=X}function y(){const M=s.newAttributes;for(let k=0,V=M.length;k<V;k++)M[k]=0}function E(M){b(M,0)}function b(M,k){const V=s.newAttributes,X=s.enabledAttributes,$=s.attributeDivisors;V[M]=1,X[M]===0&&(n.enableVertexAttribArray(M),X[M]=1),$[M]!==k&&(n.vertexAttribDivisor(M,k),$[M]=k)}function C(){const M=s.newAttributes,k=s.enabledAttributes;for(let V=0,X=k.length;V<X;V++)k[V]!==M[V]&&(n.disableVertexAttribArray(V),k[V]=0)}function _(M,k,V,X,$,ae,z){z===!0?n.vertexAttribIPointer(M,k,V,$,ae):n.vertexAttribPointer(M,k,V,X,$,ae)}function w(M,k,V,X){y();const $=X.attributes,ae=V.getAttributes(),z=k.defaultAttributeValues;for(const j in ae){const Z=ae[j];if(Z.location>=0){let ce=$[j];if(ce===void 0&&(j==="instanceMatrix"&&M.instanceMatrix&&(ce=M.instanceMatrix),j==="instanceColor"&&M.instanceColor&&(ce=M.instanceColor)),ce!==void 0){const U=ce.normalized,se=ce.itemSize,me=e.get(ce);if(me===void 0)continue;const be=me.buffer,xe=me.type,Ue=me.bytesPerElement,Ne=xe===n.INT||xe===n.UNSIGNED_INT||ce.gpuType===ob;if(ce.isInterleavedBufferAttribute){const Le=ce.data,ue=Le.stride,Oe=ce.offset;if(Le.isInstancedInterleavedBuffer){for(let Ge=0;Ge<Z.locationSize;Ge++)b(Z.location+Ge,Le.meshPerAttribute);M.isInstancedMesh!==!0&&X._maxInstanceCount===void 0&&(X._maxInstanceCount=Le.meshPerAttribute*Le.count)}else for(let Ge=0;Ge<Z.locationSize;Ge++)E(Z.location+Ge);n.bindBuffer(n.ARRAY_BUFFER,be);for(let Ge=0;Ge<Z.locationSize;Ge++)_(Z.location+Ge,se/Z.locationSize,xe,U,ue*Ue,(Oe+se/Z.locationSize*Ge)*Ue,Ne)}else{if(ce.isInstancedBufferAttribute){for(let Le=0;Le<Z.locationSize;Le++)b(Z.location+Le,ce.meshPerAttribute);M.isInstancedMesh!==!0&&X._maxInstanceCount===void 0&&(X._maxInstanceCount=ce.meshPerAttribute*ce.count)}else for(let Le=0;Le<Z.locationSize;Le++)E(Z.location+Le);n.bindBuffer(n.ARRAY_BUFFER,be);for(let Le=0;Le<Z.locationSize;Le++)_(Z.location+Le,se/Z.locationSize,xe,U,se*Ue,se/Z.locationSize*Le*Ue,Ne)}}else if(z!==void 0){const U=z[j];if(U!==void 0)switch(U.length){case 2:n.vertexAttrib2fv(Z.location,U);break;case 3:n.vertexAttrib3fv(Z.location,U);break;case 4:n.vertexAttrib4fv(Z.location,U);break;default:n.vertexAttrib1fv(Z.location,U)}}}}C()}function T(){P();for(const M in i){const k=i[M];for(const V in k){const X=k[V];for(const $ in X)d(X[$].object),delete X[$];delete k[V]}delete i[M]}}function L(M){if(i[M.id]===void 0)return;const k=i[M.id];for(const V in k){const X=k[V];for(const $ in X)d(X[$].object),delete X[$];delete k[V]}delete i[M.id]}function R(M){for(const k in i){const V=i[k];if(V[M.id]===void 0)continue;const X=V[M.id];for(const $ in X)d(X[$].object),delete X[$];delete V[M.id]}}function P(){D(),a=!0,s!==r&&(s=r,h(s.object))}function D(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:o,reset:P,resetDefaultState:D,dispose:T,releaseStatesOfGeometry:L,releaseStatesOfProgram:R,initAttributes:y,enableAttribute:E,disableUnusedAttributes:C}}function CJ(n,e,t){let i;function r(h){i=h}function s(h,d){n.drawArrays(i,h,d),t.update(d,i,1)}function a(h,d,p){p!==0&&(n.drawArraysInstanced(i,h,d,p),t.update(d,i,p))}function o(h,d,p){if(p===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,h,0,d,0,p);let A=0;for(let v=0;v<p;v++)A+=d[v];t.update(A,i,1)}function c(h,d,p,m){if(p===0)return;const A=e.get("WEBGL_multi_draw");if(A===null)for(let v=0;v<h.length;v++)a(h[v],d[v],m[v]);else{A.multiDrawArraysInstancedWEBGL(i,h,0,d,0,m,0,p);let v=0;for(let y=0;y<p;y++)v+=d[y]*m[y];t.update(v,i,1)}}this.setMode=r,this.render=s,this.renderInstances=a,this.renderMultiDraw=o,this.renderMultiDrawInstances=c}function _J(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const R=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(R.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function a(R){return!(R!==kr&&i.convert(R)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(R){const P=R===zd&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(R!==$a&&i.convert(R)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&R!==Or&&!P)}function c(R){if(R==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";R="mediump"}return R==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let h=t.precision!==void 0?t.precision:"highp";const d=c(h);d!==h&&(console.warn("THREE.WebGLRenderer:",h,"not supported, using",d,"instead."),h=d);const p=t.logarithmicDepthBuffer===!0,m=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),A=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),y=n.getParameter(n.MAX_TEXTURE_SIZE),E=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),b=n.getParameter(n.MAX_VERTEX_ATTRIBS),C=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),_=n.getParameter(n.MAX_VARYING_VECTORS),w=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),T=v>0,L=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:c,textureFormatReadable:a,textureTypeReadable:o,precision:h,logarithmicDepthBuffer:p,reverseDepthBuffer:m,maxTextures:A,maxVertexTextures:v,maxTextureSize:y,maxCubemapSize:E,maxAttributes:b,maxVertexUniforms:C,maxVaryings:_,maxFragmentUniforms:w,vertexTextures:T,maxSamples:L}}function wJ(n){const e=this;let t=null,i=0,r=!1,s=!1;const a=new Nl,o=new Pt,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(p,m){const A=p.length!==0||m||i!==0||r;return r=m,i=p.length,A},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(p,m){t=d(p,m,0)},this.setState=function(p,m,A){const v=p.clippingPlanes,y=p.clipIntersection,E=p.clipShadows,b=n.get(p);if(!r||v===null||v.length===0||s&&!E)s?d(null):h();else{const C=s?0:i,_=C*4;let w=b.clippingState||null;c.value=w,w=d(v,m,_,A);for(let T=0;T!==_;++T)w[T]=t[T];b.clippingState=w,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=C}};function h(){c.value!==t&&(c.value=t,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function d(p,m,A,v){const y=p!==null?p.length:0;let E=null;if(y!==0){if(E=c.value,v!==!0||E===null){const b=A+y*4,C=m.matrixWorldInverse;o.getNormalMatrix(C),(E===null||E.length<b)&&(E=new Float32Array(b));for(let _=0,w=A;_!==y;++_,w+=4)a.copy(p[_]).applyMatrix4(C,o),a.normal.toArray(E,w),E[w+3]=a.constant}c.value=E,c.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,E}}function SJ(n){let e=new WeakMap;function t(a,o){return o===gm?a.mapping=el:o===vm&&(a.mapping=ic),a}function i(a){if(a&&a.isTexture){const o=a.mapping;if(o===gm||o===vm)if(e.has(a)){const c=e.get(a).texture;return t(c,a.mapping)}else{const c=a.image;if(c&&c.height>0){const h=new PN(c.height);return h.fromEquirectangularTexture(n,a),e.set(a,h),a.addEventListener("dispose",r),t(h.texture,a.mapping)}else return null}}return a}function r(a){const o=a.target;o.removeEventListener("dispose",r);const c=e.get(o);c!==void 0&&(e.delete(o),c.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}const ud=4,vL=[.125,.215,.35,.446,.526,.582],su=20,c_=new kb,yL=new ut;let u_=null,h_=0,d_=0,f_=!1;const iu=(1+Math.sqrt(5))/2,qh=1/iu,bL=[new K(-iu,qh,0),new K(iu,qh,0),new K(-qh,0,iu),new K(qh,0,iu),new K(0,iu,-qh),new K(0,iu,qh),new K(-1,1,-1),new K(1,1,-1),new K(-1,1,1),new K(1,1,1)];class cw{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){u_=this._renderer.getRenderTarget(),h_=this._renderer.getActiveCubeFace(),d_=this._renderer.getActiveMipmapLevel(),f_=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=CL(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=xL(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(u_,h_,d_),this._renderer.xr.enabled=f_,e.scissorTest=!1,b0(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===el||e.mapping===ic?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),u_=this._renderer.getRenderTarget(),h_=this._renderer.getActiveCubeFace(),d_=this._renderer.getActiveMipmapLevel(),f_=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Ui,minFilter:Ui,generateMipmaps:!1,type:zd,format:kr,colorSpace:Iu,depthBuffer:!1},r=EL(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=EL(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=MJ(s)),this._blurMaterial=TJ(s,e,t)}return r}_compileMaterial(e){const t=new Mi(this._lodPlanes[0],e);this._renderer.compile(t,c_)}_sceneToCubeUV(e,t,i,r){const o=new $i(90,1,t,i),c=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],d=this._renderer,p=d.autoClear,m=d.toneMapping;d.getClearColor(yL),d.toneMapping=Wo,d.autoClear=!1;const A=new cc({name:"PMREM.Background",side:Fr,depthWrite:!1,depthTest:!1}),v=new Mi(new Fu,A);let y=!1;const E=e.background;E?E.isColor&&(A.color.copy(E),e.background=null,y=!0):(A.color.copy(yL),y=!0);for(let b=0;b<6;b++){const C=b%3;C===0?(o.up.set(0,c[b],0),o.lookAt(h[b],0,0)):C===1?(o.up.set(0,0,c[b]),o.lookAt(0,h[b],0)):(o.up.set(0,c[b],0),o.lookAt(0,0,h[b]));const _=this._cubeSize;b0(r,C*_,b>2?_:0,_,_),d.setRenderTarget(r),y&&d.render(v,o),d.render(e,o)}v.geometry.dispose(),v.material.dispose(),d.toneMapping=m,d.autoClear=p,e.background=E}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===el||e.mapping===ic;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=CL()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=xL());const s=r?this._cubemapMaterial:this._equirectMaterial,a=new Mi(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;const c=this._cubeSize;b0(t,0,0,3*c,2*c),i.setRenderTarget(t),i.render(a,c_)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),o=bL[(r-s-1)%bL.length];this._blur(e,s-1,s,a,o)}t.autoClear=i}_blur(e,t,i,r,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,i,r,"latitudinal",s),this._halfBlur(a,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,a,o){const c=this._renderer,h=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,p=new Mi(this._lodPlanes[r],h),m=h.uniforms,A=this._sizeLods[i]-1,v=isFinite(s)?Math.PI/(2*A):2*Math.PI/(2*su-1),y=s/v,E=isFinite(s)?1+Math.floor(d*y):su;E>su&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${E} samples when the maximum is set to ${su}`);const b=[];let C=0;for(let R=0;R<su;++R){const P=R/y,D=Math.exp(-P*P/2);b.push(D),R===0?C+=D:R<E&&(C+=2*D)}for(let R=0;R<b.length;R++)b[R]=b[R]/C;m.envMap.value=e.texture,m.samples.value=E,m.weights.value=b,m.latitudinal.value=a==="latitudinal",o&&(m.poleAxis.value=o);const{_lodMax:_}=this;m.dTheta.value=v,m.mipInt.value=_-i;const w=this._sizeLods[r],T=3*w*(r>_-ud?r-_+ud:0),L=4*(this._cubeSize-w);b0(t,T,L,3*w,2*w),c.setRenderTarget(t),c.render(p,c_)}}function MJ(n){const e=[],t=[],i=[];let r=n;const s=n-ud+1+vL.length;for(let a=0;a<s;a++){const o=Math.pow(2,r);t.push(o);let c=1/o;a>n-ud?c=vL[a-n+ud-1]:a===0&&(c=0),i.push(c);const h=1/(o-2),d=-h,p=1+h,m=[d,d,p,d,p,p,d,d,p,p,d,p],A=6,v=6,y=3,E=2,b=1,C=new Float32Array(y*v*A),_=new Float32Array(E*v*A),w=new Float32Array(b*v*A);for(let L=0;L<A;L++){const R=L%3*2/3-1,P=L>2?0:-1,D=[R,P,0,R+2/3,P,0,R+2/3,P+1,0,R,P,0,R+2/3,P+1,0,R,P+1,0];C.set(D,y*v*L),_.set(m,E*v*L);const M=[L,L,L,L,L,L];w.set(M,b*v*L)}const T=new Vt;T.setAttribute("position",new Ln(C,y)),T.setAttribute("uv",new Ln(_,E)),T.setAttribute("faceIndex",new Ln(w,b)),e.push(T),r>ud&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function EL(n,e,t){const i=new ba(n,e,t);return i.texture.mapping=Qd,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function b0(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function TJ(n,e,t){const i=new Float32Array(su),r=new K(0,1,0);return new Ea({name:"SphericalGaussianBlur",defines:{n:su,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:B2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Vo,depthTest:!1,depthWrite:!1})}function xL(){return new Ea({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:B2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Vo,depthTest:!1,depthWrite:!1})}function CL(){return new Ea({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:B2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Vo,depthTest:!1,depthWrite:!1})}function B2(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function BJ(n){let e=new WeakMap,t=null;function i(o){if(o&&o.isTexture){const c=o.mapping,h=c===gm||c===vm,d=c===el||c===ic;if(h||d){let p=e.get(o);const m=p!==void 0?p.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==m)return t===null&&(t=new cw(n)),p=h?t.fromEquirectangular(o,p):t.fromCubemap(o,p),p.texture.pmremVersion=o.pmremVersion,e.set(o,p),p.texture;if(p!==void 0)return p.texture;{const A=o.image;return h&&A&&A.height>0||d&&A&&r(A)?(t===null&&(t=new cw(n)),p=h?t.fromEquirectangular(o):t.fromCubemap(o),p.texture.pmremVersion=o.pmremVersion,e.set(o,p),o.addEventListener("dispose",s),p.texture):null}}}return o}function r(o){let c=0;const h=6;for(let d=0;d<h;d++)o[d]!==void 0&&c++;return c===h}function s(o){const c=o.target;c.removeEventListener("dispose",s);const h=e.get(c);h!==void 0&&(e.delete(c),h.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:a}}function IJ(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&nd("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function RJ(n,e,t,i){const r={},s=new WeakMap;function a(p){const m=p.target;m.index!==null&&e.remove(m.index);for(const v in m.attributes)e.remove(m.attributes[v]);m.removeEventListener("dispose",a),delete r[m.id];const A=s.get(m);A&&(e.remove(A),s.delete(m)),i.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&&delete m._maxInstanceCount,t.memory.geometries--}function o(p,m){return r[m.id]===!0||(m.addEventListener("dispose",a),r[m.id]=!0,t.memory.geometries++),m}function c(p){const m=p.attributes;for(const A in m)e.update(m[A],n.ARRAY_BUFFER)}function h(p){const m=[],A=p.index,v=p.attributes.position;let y=0;if(A!==null){const C=A.array;y=A.version;for(let _=0,w=C.length;_<w;_+=3){const T=C[_+0],L=C[_+1],R=C[_+2];m.push(T,L,L,R,R,T)}}else if(v!==void 0){const C=v.array;y=v.version;for(let _=0,w=C.length/3-1;_<w;_+=3){const T=_+0,L=_+1,R=_+2;m.push(T,L,L,R,R,T)}}else return;const E=new(TN(m)?s2:r2)(m,1);E.version=y;const b=s.get(p);b&&e.remove(b),s.set(p,E)}function d(p){const m=s.get(p);if(m){const A=p.index;A!==null&&m.version<A.version&&h(p)}else h(p);return s.get(p)}return{get:o,update:c,getWireframeAttribute:d}}function DJ(n,e,t){let i;function r(m){i=m}let s,a;function o(m){s=m.type,a=m.bytesPerElement}function c(m,A){n.drawElements(i,A,s,m*a),t.update(A,i,1)}function h(m,A,v){v!==0&&(n.drawElementsInstanced(i,A,s,m*a,v),t.update(A,i,v))}function d(m,A,v){if(v===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,A,0,s,m,0,v);let E=0;for(let b=0;b<v;b++)E+=A[b];t.update(E,i,1)}function p(m,A,v,y){if(v===0)return;const E=e.get("WEBGL_multi_draw");if(E===null)for(let b=0;b<m.length;b++)h(m[b]/a,A[b],y[b]);else{E.multiDrawElementsInstancedWEBGL(i,A,0,s,m,0,y,0,v);let b=0;for(let C=0;C<v;C++)b+=A[C]*y[C];t.update(b,i,1)}}this.setMode=r,this.setIndex=o,this.render=c,this.renderInstances=h,this.renderMultiDraw=d,this.renderMultiDrawInstances=p}function LJ(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,a,o){switch(t.calls++,a){case n.TRIANGLES:t.triangles+=o*(s/3);break;case n.LINES:t.lines+=o*(s/2);break;case n.LINE_STRIP:t.lines+=o*(s-1);break;case n.LINE_LOOP:t.lines+=o*s;break;case n.POINTS:t.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function OJ(n,e,t){const i=new WeakMap,r=new dn;function s(a,o,c){const h=a.morphTargetInfluences,d=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,p=d!==void 0?d.length:0;let m=i.get(o);if(m===void 0||m.count!==p){let M=function(){P.dispose(),i.delete(o),o.removeEventListener("dispose",M)};var A=M;m!==void 0&&m.texture.dispose();const v=o.morphAttributes.position!==void 0,y=o.morphAttributes.normal!==void 0,E=o.morphAttributes.color!==void 0,b=o.morphAttributes.position||[],C=o.morphAttributes.normal||[],_=o.morphAttributes.color||[];let w=0;v===!0&&(w=1),y===!0&&(w=2),E===!0&&(w=3);let T=o.attributes.position.count*w,L=1;T>e.maxTextureSize&&(L=Math.ceil(T/e.maxTextureSize),T=e.maxTextureSize);const R=new Float32Array(T*L*4*p),P=new Jm(R,T,L,p);P.type=Or,P.needsUpdate=!0;const D=w*4;for(let k=0;k<p;k++){const V=b[k],X=C[k],$=_[k],ae=T*L*4*k;for(let z=0;z<V.count;z++){const j=z*D;v===!0&&(r.fromBufferAttribute(V,z),R[ae+j+0]=r.x,R[ae+j+1]=r.y,R[ae+j+2]=r.z,R[ae+j+3]=0),y===!0&&(r.fromBufferAttribute(X,z),R[ae+j+4]=r.x,R[ae+j+5]=r.y,R[ae+j+6]=r.z,R[ae+j+7]=0),E===!0&&(r.fromBufferAttribute($,z),R[ae+j+8]=r.x,R[ae+j+9]=r.y,R[ae+j+10]=r.z,R[ae+j+11]=$.itemSize===4?r.w:1)}}m={count:p,texture:P,size:new He(T,L)},i.set(o,m),o.addEventListener("dispose",M)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)c.getUniforms().setValue(n,"morphTexture",a.morphTexture,t);else{let v=0;for(let E=0;E<h.length;E++)v+=h[E];const y=o.morphTargetsRelative?1:1-v;c.getUniforms().setValue(n,"morphTargetBaseInfluence",y),c.getUniforms().setValue(n,"morphTargetInfluences",h)}c.getUniforms().setValue(n,"morphTargetsTexture",m.texture,t),c.getUniforms().setValue(n,"morphTargetsTextureSize",m.size)}return{update:s}}class PJ{constructor(e,t,i){if(this.renderer=e,this.DEFAULT_NUMVIEWS=2,this.maxNumViews=0,this.gl=i,this.extensions=t,this.available=this.extensions.has("OCULUS_multiview"),this.available){const s=this.extensions.get("OCULUS_multiview");this.maxNumViews=this.gl.getParameter(s.MAX_VIEWS_OVR),this.mat4=[],this.mat3=[],this.cameraArray=[];for(var r=0;r<this.maxNumViews;r++)this.mat4[r]=new It,this.mat3[r]=new Pt}}getCameraArray(e){return e.isArrayCamera?e.cameras:(this.cameraArray[0]=e,this.cameraArray)}updateCameraProjectionMatricesUniform(e,t){for(var i=this.getCameraArray(e),r=0;r<i.length;r++)this.mat4[r].copy(i[r].projectionMatrix);t.setValue(this.gl,"projectionMatrices",this.mat4)}updateCameraViewMatricesUniform(e,t){for(var i=this.getCameraArray(e),r=0;r<i.length;r++)this.mat4[r].copy(i[r].matrixWorldInverse);t.setValue(this.gl,"viewMatrices",this.mat4)}updateObjectMatricesUniforms(e,t,i){for(var r=this.getCameraArray(t),s=0;s<r.length;s++)this.mat4[s].multiplyMatrices(r[s].matrixWorldInverse,e.matrixWorld),this.mat3[s].getNormalMatrix(this.mat4[s]);i.setValue(this.gl,"modelViewMatrices",this.mat4),i.setValue(this.gl,"normalMatrices",this.mat3)}}function UJ(n,e,t,i){let r=new WeakMap;function s(c){const h=i.render.frame,d=c.geometry,p=e.get(c,d);if(r.get(p)!==h&&(e.update(p),r.set(p,h)),c.isInstancedMesh&&(c.hasEventListener("dispose",o)===!1&&c.addEventListener("dispose",o),r.get(c)!==h&&(t.update(c.instanceMatrix,n.ARRAY_BUFFER),c.instanceColor!==null&&t.update(c.instanceColor,n.ARRAY_BUFFER),r.set(c,h))),c.isSkinnedMesh){const m=c.skeleton;r.get(m)!==h&&(m.update(),r.set(m,h))}return p}function a(){r=new WeakMap}function o(c){const h=c.target;h.removeEventListener("dispose",o),t.remove(h.instanceMatrix),h.instanceColor!==null&&t.remove(h.instanceColor)}return{update:s,dispose:a}}const OF=new ci,_L=new c2(1,1),PF=new Jm,UF=new mb,kF=new Zm,wL=[],SL=[],ML=new Float32Array(16),TL=new Float32Array(9),BL=new Float32Array(4);function Wd(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=wL[r];if(s===void 0&&(s=new Float32Array(r),wL[r]=s),e!==0){i.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=t,n[a].toArray(s,o)}return s}function ki(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Ni(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Fb(n,e){let t=SL[e];t===void 0&&(t=new Int32Array(e),SL[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function kJ(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function NJ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ki(t,e))return;n.uniform2fv(this.addr,e),Ni(t,e)}}function FJ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ki(t,e))return;n.uniform3fv(this.addr,e),Ni(t,e)}}function QJ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ki(t,e))return;n.uniform4fv(this.addr,e),Ni(t,e)}}function zJ(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ki(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Ni(t,e)}else{if(ki(t,i))return;BL.set(i),n.uniformMatrix2fv(this.addr,!1,BL),Ni(t,i)}}function HJ(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ki(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Ni(t,e)}else{if(ki(t,i))return;TL.set(i),n.uniformMatrix3fv(this.addr,!1,TL),Ni(t,i)}}function GJ(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ki(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Ni(t,e)}else{if(ki(t,i))return;ML.set(i),n.uniformMatrix4fv(this.addr,!1,ML),Ni(t,i)}}function VJ(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function WJ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ki(t,e))return;n.uniform2iv(this.addr,e),Ni(t,e)}}function qJ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ki(t,e))return;n.uniform3iv(this.addr,e),Ni(t,e)}}function jJ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ki(t,e))return;n.uniform4iv(this.addr,e),Ni(t,e)}}function XJ(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function YJ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ki(t,e))return;n.uniform2uiv(this.addr,e),Ni(t,e)}}function KJ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ki(t,e))return;n.uniform3uiv(this.addr,e),Ni(t,e)}}function JJ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ki(t,e))return;n.uniform4uiv(this.addr,e),Ni(t,e)}}function ZJ(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(_L.compareFunction=n2,s=_L):s=OF,t.setTexture2D(e||s,r)}function $J(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||UF,r)}function eZ(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||kF,r)}function tZ(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||PF,r)}function nZ(n){switch(n){case 5126:return kJ;case 35664:return NJ;case 35665:return FJ;case 35666:return QJ;case 35674:return zJ;case 35675:return HJ;case 35676:return GJ;case 5124:case 35670:return VJ;case 35667:case 35671:return WJ;case 35668:case 35672:return qJ;case 35669:case 35673:return jJ;case 5125:return XJ;case 36294:return YJ;case 36295:return KJ;case 36296:return JJ;case 35678:case 36198:case 36298:case 36306:case 35682:return ZJ;case 35679:case 36299:case 36307:return $J;case 35680:case 36300:case 36308:case 36293:return eZ;case 36289:case 36303:case 36311:case 36292:return tZ}}function iZ(n,e){n.uniform1fv(this.addr,e)}function rZ(n,e){const t=Wd(e,this.size,2);n.uniform2fv(this.addr,t)}function sZ(n,e){const t=Wd(e,this.size,3);n.uniform3fv(this.addr,t)}function aZ(n,e){const t=Wd(e,this.size,4);n.uniform4fv(this.addr,t)}function oZ(n,e){const t=Wd(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function lZ(n,e){const t=Wd(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function cZ(n,e){const t=Wd(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function uZ(n,e){n.uniform1iv(this.addr,e)}function hZ(n,e){n.uniform2iv(this.addr,e)}function dZ(n,e){n.uniform3iv(this.addr,e)}function fZ(n,e){n.uniform4iv(this.addr,e)}function pZ(n,e){n.uniform1uiv(this.addr,e)}function mZ(n,e){n.uniform2uiv(this.addr,e)}function AZ(n,e){n.uniform3uiv(this.addr,e)}function gZ(n,e){n.uniform4uiv(this.addr,e)}function vZ(n,e,t){const i=this.cache,r=e.length,s=Fb(t,r);ki(i,s)||(n.uniform1iv(this.addr,s),Ni(i,s));for(let a=0;a!==r;++a)t.setTexture2D(e[a]||OF,s[a])}function yZ(n,e,t){const i=this.cache,r=e.length,s=Fb(t,r);ki(i,s)||(n.uniform1iv(this.addr,s),Ni(i,s));for(let a=0;a!==r;++a)t.setTexture3D(e[a]||UF,s[a])}function bZ(n,e,t){const i=this.cache,r=e.length,s=Fb(t,r);ki(i,s)||(n.uniform1iv(this.addr,s),Ni(i,s));for(let a=0;a!==r;++a)t.setTextureCube(e[a]||kF,s[a])}function EZ(n,e,t){const i=this.cache,r=e.length,s=Fb(t,r);ki(i,s)||(n.uniform1iv(this.addr,s),Ni(i,s));for(let a=0;a!==r;++a)t.setTexture2DArray(e[a]||PF,s[a])}function xZ(n){switch(n){case 5126:return iZ;case 35664:return rZ;case 35665:return sZ;case 35666:return aZ;case 35674:return oZ;case 35675:return lZ;case 35676:return cZ;case 5124:case 35670:return uZ;case 35667:case 35671:return hZ;case 35668:case 35672:return dZ;case 35669:case 35673:return fZ;case 5125:return pZ;case 36294:return mZ;case 36295:return AZ;case 36296:return gZ;case 35678:case 36198:case 36298:case 36306:case 35682:return vZ;case 35679:case 36299:case 36307:return yZ;case 35680:case 36300:case 36308:case 36293:return bZ;case 36289:case 36303:case 36311:case 36292:return EZ}}class CZ{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=nZ(t.type)}}class _Z{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=xZ(t.type)}}class wZ{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,a=r.length;s!==a;++s){const o=r[s];o.setValue(e,t[o.id],i)}}}const p_=/(\w+)(\])?(\[|\.)?/g;function IL(n,e){n.seq.push(e),n.map[e.id]=e}function SZ(n,e,t){const i=n.name,r=i.length;for(p_.lastIndex=0;;){const s=p_.exec(i),a=p_.lastIndex;let o=s[1];const c=s[2]==="]",h=s[3];if(c&&(o=o|0),h===void 0||h==="["&&a+2===r){IL(t,h===void 0?new CZ(o,n,e):new _Z(o,n,e));break}else{let p=t.map[o];p===void 0&&(p=new wZ(o),IL(t,p)),t=p}}}class dv{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),a=e.getUniformLocation(t,s.name);SZ(s,a,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,a=t.length;s!==a;++s){const o=t[s],c=i[o.id];c.needsUpdate!==!1&&o.setValue(e,c.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const a=e[r];a.id in t&&i.push(a)}return i}}function RL(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const MZ=37297;let TZ=0;function BZ(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=r;a<s;a++){const o=a+1;i.push(`${o===e?">":" "} ${o}: ${t[a]}`)}return i.join(`
`)}const DL=new Pt;function IZ(n){cn._getMatrix(DL,cn.workingColorSpace,n);const e=`mat3( ${DL.elements.map(t=>t.toFixed(4))} )`;switch(cn.getTransfer(n)){case Cm:return[e,"LinearTransferOETF"];case Sn:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function LL(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const a=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+BZ(n.getShaderSource(e),a)}else return r}function RZ(n,e){const t=IZ(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function DZ(n,e){let t;switch(e){case oN:t="Linear";break;case lN:t="Reinhard";break;case cN:t="Cineon";break;case uN:t="ACESFilmic";break;case dN:t="AgX";break;case fN:t="Neutral";break;case hN:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const E0=new K;function LZ(){cn.getLuminanceCoefficients(E0);const n=E0.x.toFixed(4),e=E0.y.toFixed(4),t=E0.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function OZ(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Ip).join(`
`)}function PZ(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function UZ(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),a=s.name;let o=1;s.type===n.FLOAT_MAT2&&(o=2),s.type===n.FLOAT_MAT3&&(o=3),s.type===n.FLOAT_MAT4&&(o=4),t[a]={type:s.type,location:n.getAttribLocation(e,a),locationSize:o}}return t}function Ip(n){return n!==""}function OL(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function PL(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const kZ=/^[ \t]*#include +<([\w\d./]+)>/gm;function uw(n){return n.replace(kZ,FZ)}const NZ=new Map;function FZ(n,e){let t=Gt[e];if(t===void 0){const i=NZ.get(e);if(i!==void 0)t=Gt[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return uw(t)}const QZ=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function UL(n){return n.replace(QZ,zZ)}function zZ(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function kL(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function HZ(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===VS?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Qk?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Da&&(e="SHADOWMAP_TYPE_VSM"),e}function GZ(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case el:case ic:e="ENVMAP_TYPE_CUBE";break;case Qd:e="ENVMAP_TYPE_CUBE_UV";break}return e}function VZ(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case ic:e="ENVMAP_MODE_REFRACTION";break}return e}function WZ(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Ym:e="ENVMAP_BLENDING_MULTIPLY";break;case sN:e="ENVMAP_BLENDING_MIX";break;case aN:e="ENVMAP_BLENDING_ADD";break}return e}function qZ(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function jZ(n,e,t,i){const r=n.getContext(),s=t.defines;let a=t.vertexShader,o=t.fragmentShader;const c=HZ(t),h=GZ(t),d=VZ(t),p=WZ(t),m=qZ(t),A=OZ(t),v=PZ(s),y=r.createProgram();let E,b,C=t.glslVersion?"#version "+t.glslVersion+`
`:"";const _=t.numMultiviewViews;t.isRawShaderMaterial?(E=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(Ip).join(`
`),E.length>0&&(E+=`
`),b=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(Ip).join(`
`),b.length>0&&(b+=`
`)):(E=[kL(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ip).join(`
`),b=[kL(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.envMap?"#define "+d:"",t.envMap?"#define "+p:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Wo?"#define TONE_MAPPING":"",t.toneMapping!==Wo?Gt.tonemapping_pars_fragment:"",t.toneMapping!==Wo?DZ("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Gt.colorspace_pars_fragment,RZ("linearToOutputTexel",t.outputColorSpace),LZ(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Ip).join(`
`)),a=uw(a),a=OL(a,t),a=PL(a,t),o=uw(o),o=OL(o,t),o=PL(o,t),a=UL(a),o=UL(o),t.isRawShaderMaterial!==!0&&(C=`#version 300 es
`,E=[A,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+E,b=["#define varying in",t.glslVersion===tw?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===tw?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+b,_>0&&(E=["#extension GL_OVR_multiview : require","layout(num_views = "+_+") in;","#define VIEW_ID gl_ViewID_OVR"].join(`
`)+`
`+E,E=E.replace(["uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;"].join(`
`),["uniform mat4 modelViewMatrices["+_+"];","uniform mat4 projectionMatrices["+_+"];","uniform mat4 viewMatrices["+_+"];","uniform mat3 normalMatrices["+_+"];","#define modelViewMatrix modelViewMatrices[VIEW_ID]","#define projectionMatrix projectionMatrices[VIEW_ID]","#define viewMatrix viewMatrices[VIEW_ID]","#define normalMatrix normalMatrices[VIEW_ID]"].join(`
`)),b=["#extension GL_OVR_multiview : require","#define VIEW_ID gl_ViewID_OVR"].join(`
`)+`
`+b,b=b.replace("uniform mat4 viewMatrix;",["uniform mat4 viewMatrices["+_+"];","#define viewMatrix viewMatrices[VIEW_ID]"].join(`
`))));const w=C+E+a,T=C+b+o,L=RL(r,r.VERTEX_SHADER,w),R=RL(r,r.FRAGMENT_SHADER,T);r.attachShader(y,L),r.attachShader(y,R),t.index0AttributeName!==void 0?r.bindAttribLocation(y,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(y,0,"position"),r.linkProgram(y);function P(V){if(n.debug.checkShaderErrors){const X=r.getProgramInfoLog(y).trim(),$=r.getShaderInfoLog(L).trim(),ae=r.getShaderInfoLog(R).trim();let z=!0,j=!0;if(r.getProgramParameter(y,r.LINK_STATUS)===!1)if(z=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,y,L,R);else{const Z=LL(r,L,"vertex"),ce=LL(r,R,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(y,r.VALIDATE_STATUS)+`

Material Name: `+V.name+`
Material Type: `+V.type+`

Program Info Log: `+X+`
`+Z+`
`+ce)}else X!==""?console.warn("THREE.WebGLProgram: Program Info Log:",X):($===""||ae==="")&&(j=!1);j&&(V.diagnostics={runnable:z,programLog:X,vertexShader:{log:$,prefix:E},fragmentShader:{log:ae,prefix:b}})}r.deleteShader(L),r.deleteShader(R),D=new dv(r,y),M=UZ(r,y)}let D;this.getUniforms=function(){return D===void 0&&P(this),D};let M;this.getAttributes=function(){return M===void 0&&P(this),M};let k=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return k===!1&&(k=r.getProgramParameter(y,MZ)),k},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(y),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=TZ++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=L,this.fragmentShader=R,this.numMultiviewViews=_,this}let XZ=0;class YZ{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),a=this._getShaderCacheForMaterial(e);return a.has(r)===!1&&(a.add(r),r.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new KZ(e),t.set(e,i)),i}}class KZ{constructor(e){this.id=XZ++,this.code=e,this.usedTimes=0}}function JZ(n,e,t,i,r,s,a){const o=new Ab,c=new YZ,h=new Set,d=[],p=r.logarithmicDepthBuffer,m=r.vertexTextures;let A=r.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(D){return h.add(D),D===0?"uv":`uv${D}`}function E(D,M,k,V,X){const $=V.fog,ae=X.geometry,z=D.isMeshStandardMaterial?V.environment:null,j=(D.isMeshStandardMaterial?t:e).get(D.envMap||z),Z=j&&j.mapping===Qd?j.image.height:null,ce=v[D.type];D.precision!==null&&(A=r.getMaxPrecision(D.precision),A!==D.precision&&console.warn("THREE.WebGLProgram.getParameters:",D.precision,"not supported, using",A,"instead."));const U=ae.morphAttributes.position||ae.morphAttributes.normal||ae.morphAttributes.color,se=U!==void 0?U.length:0;let me=0;ae.morphAttributes.position!==void 0&&(me=1),ae.morphAttributes.normal!==void 0&&(me=2),ae.morphAttributes.color!==void 0&&(me=3);let be,xe,Ue,Ne;if(ce){const nt=pa[ce];be=nt.vertexShader,xe=nt.fragmentShader}else be=D.vertexShader,xe=D.fragmentShader,c.update(D),Ue=c.getVertexShaderID(D),Ne=c.getFragmentShaderID(D);const Le=n.getRenderTarget(),ue=n.state.buffers.depth.getReversed(),Oe=Le&&Le.isWebGLMultiviewRenderTarget?Le.numViews:0,Ge=X.isInstancedMesh===!0,je=X.isBatchedMesh===!0,Me=!!D.map,Ce=!!D.matcap,Be=!!j,Y=!!D.aoMap,ze=!!D.lightMap,ne=!!D.bumpMap,I=!!D.normalMap,O=!!D.displacementMap,Q=!!D.emissiveMap,W=!!D.metalnessMap,ee=!!D.roughnessMap,he=D.anisotropy>0,Te=D.clearcoat>0,Ye=D.dispersion>0,q=D.iridescence>0,N=D.sheen>0,re=D.transmission>0,ge=he&&!!D.anisotropyMap,Ie=Te&&!!D.clearcoatMap,we=Te&&!!D.clearcoatNormalMap,Ke=Te&&!!D.clearcoatRoughnessMap,Fe=q&&!!D.iridescenceMap,Xe=q&&!!D.iridescenceThicknessMap,ht=N&&!!D.sheenColorMap,Ze=N&&!!D.sheenRoughnessMap,ct=!!D.specularMap,Dt=!!D.specularColorMap,J=!!D.specularIntensityMap,Re=re&&!!D.transmissionMap,Ve=re&&!!D.thicknessMap,$e=!!D.gradientMap,et=!!D.alphaMap,at=D.alphaTest>0,Et=!!D.alphaHash,tt=!!D.extensions;let it=Wo;D.toneMapped&&(Le===null||Le.isXRRenderTarget===!0)&&(it=n.toneMapping);const We={shaderID:ce,shaderType:D.type,shaderName:D.name,vertexShader:be,fragmentShader:xe,defines:D.defines,customVertexShaderID:Ue,customFragmentShaderID:Ne,isRawShaderMaterial:D.isRawShaderMaterial===!0,glslVersion:D.glslVersion,precision:A,batching:je,batchingColor:je&&X._colorsTexture!==null,instancing:Ge,instancingColor:Ge&&X.instanceColor!==null,instancingMorph:Ge&&X.morphTexture!==null,supportsVertexTextures:m,numMultiviewViews:Oe,outputColorSpace:Le===null?n.outputColorSpace:Le.isXRRenderTarget===!0?Le.texture.colorSpace:Iu,alphaToCoverage:!!D.alphaToCoverage,map:Me,matcap:Ce,envMap:Be,envMapMode:Be&&j.mapping,envMapCubeUVHeight:Z,aoMap:Y,lightMap:ze,bumpMap:ne,normalMap:I,displacementMap:m&&O,emissiveMap:Q,normalMapObjectSpace:I&&D.normalMapType===bN,normalMapTangentSpace:I&&D.normalMapType===lc,metalnessMap:W,roughnessMap:ee,anisotropy:he,anisotropyMap:ge,clearcoat:Te,clearcoatMap:Ie,clearcoatNormalMap:we,clearcoatRoughnessMap:Ke,dispersion:Ye,iridescence:q,iridescenceMap:Fe,iridescenceThicknessMap:Xe,sheen:N,sheenColorMap:ht,sheenRoughnessMap:Ze,specularMap:ct,specularColorMap:Dt,specularIntensityMap:J,transmission:re,transmissionMap:Re,thicknessMap:Ve,gradientMap:$e,opaque:D.transparent===!1&&D.blending===yu&&D.alphaToCoverage===!1,alphaMap:et,alphaTest:at,alphaHash:Et,combine:D.combine,mapUv:Me&&y(D.map.channel),aoMapUv:Y&&y(D.aoMap.channel),lightMapUv:ze&&y(D.lightMap.channel),bumpMapUv:ne&&y(D.bumpMap.channel),normalMapUv:I&&y(D.normalMap.channel),displacementMapUv:O&&y(D.displacementMap.channel),emissiveMapUv:Q&&y(D.emissiveMap.channel),metalnessMapUv:W&&y(D.metalnessMap.channel),roughnessMapUv:ee&&y(D.roughnessMap.channel),anisotropyMapUv:ge&&y(D.anisotropyMap.channel),clearcoatMapUv:Ie&&y(D.clearcoatMap.channel),clearcoatNormalMapUv:we&&y(D.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ke&&y(D.clearcoatRoughnessMap.channel),iridescenceMapUv:Fe&&y(D.iridescenceMap.channel),iridescenceThicknessMapUv:Xe&&y(D.iridescenceThicknessMap.channel),sheenColorMapUv:ht&&y(D.sheenColorMap.channel),sheenRoughnessMapUv:Ze&&y(D.sheenRoughnessMap.channel),specularMapUv:ct&&y(D.specularMap.channel),specularColorMapUv:Dt&&y(D.specularColorMap.channel),specularIntensityMapUv:J&&y(D.specularIntensityMap.channel),transmissionMapUv:Re&&y(D.transmissionMap.channel),thicknessMapUv:Ve&&y(D.thicknessMap.channel),alphaMapUv:et&&y(D.alphaMap.channel),vertexTangents:!!ae.attributes.tangent&&(I||he),vertexColors:D.vertexColors,vertexAlphas:D.vertexColors===!0&&!!ae.attributes.color&&ae.attributes.color.itemSize===4,pointsUvs:X.isPoints===!0&&!!ae.attributes.uv&&(Me||et),fog:!!$,useFog:D.fog===!0,fogExp2:!!$&&$.isFogExp2,flatShading:D.flatShading===!0,sizeAttenuation:D.sizeAttenuation===!0,logarithmicDepthBuffer:p,reverseDepthBuffer:ue,skinning:X.isSkinnedMesh===!0,morphTargets:ae.morphAttributes.position!==void 0,morphNormals:ae.morphAttributes.normal!==void 0,morphColors:ae.morphAttributes.color!==void 0,morphTargetsCount:se,morphTextureStride:me,numDirLights:M.directional.length,numPointLights:M.point.length,numSpotLights:M.spot.length,numSpotLightMaps:M.spotLightMap.length,numRectAreaLights:M.rectArea.length,numHemiLights:M.hemi.length,numDirLightShadows:M.directionalShadowMap.length,numPointLightShadows:M.pointShadowMap.length,numSpotLightShadows:M.spotShadowMap.length,numSpotLightShadowsWithMaps:M.numSpotLightShadowsWithMaps,numLightProbes:M.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:D.dithering,shadowMapEnabled:n.shadowMap.enabled&&k.length>0,shadowMapType:n.shadowMap.type,toneMapping:it,decodeVideoTexture:Me&&D.map.isVideoTexture===!0&&cn.getTransfer(D.map.colorSpace)===Sn,decodeVideoTextureEmissive:Q&&D.emissiveMap.isVideoTexture===!0&&cn.getTransfer(D.emissiveMap.colorSpace)===Sn,premultipliedAlpha:D.premultipliedAlpha,doubleSided:D.side===Qa,flipSided:D.side===Fr,useDepthPacking:D.depthPacking>=0,depthPacking:D.depthPacking||0,index0AttributeName:D.index0AttributeName,extensionClipCullDistance:tt&&D.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(tt&&D.extensions.multiDraw===!0||je)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:D.customProgramCacheKey()};return We.vertexUv1s=h.has(1),We.vertexUv2s=h.has(2),We.vertexUv3s=h.has(3),h.clear(),We}function b(D){const M=[];if(D.shaderID?M.push(D.shaderID):(M.push(D.customVertexShaderID),M.push(D.customFragmentShaderID)),D.defines!==void 0)for(const k in D.defines)M.push(k),M.push(D.defines[k]);return D.isRawShaderMaterial===!1&&(C(M,D),_(M,D),M.push(n.outputColorSpace)),M.push(D.customProgramCacheKey),M.join()}function C(D,M){D.push(M.precision),D.push(M.outputColorSpace),D.push(M.envMapMode),D.push(M.envMapCubeUVHeight),D.push(M.mapUv),D.push(M.alphaMapUv),D.push(M.lightMapUv),D.push(M.aoMapUv),D.push(M.bumpMapUv),D.push(M.normalMapUv),D.push(M.displacementMapUv),D.push(M.emissiveMapUv),D.push(M.metalnessMapUv),D.push(M.roughnessMapUv),D.push(M.anisotropyMapUv),D.push(M.clearcoatMapUv),D.push(M.clearcoatNormalMapUv),D.push(M.clearcoatRoughnessMapUv),D.push(M.iridescenceMapUv),D.push(M.iridescenceThicknessMapUv),D.push(M.sheenColorMapUv),D.push(M.sheenRoughnessMapUv),D.push(M.specularMapUv),D.push(M.specularColorMapUv),D.push(M.specularIntensityMapUv),D.push(M.transmissionMapUv),D.push(M.thicknessMapUv),D.push(M.combine),D.push(M.fogExp2),D.push(M.sizeAttenuation),D.push(M.morphTargetsCount),D.push(M.morphAttributeCount),D.push(M.numDirLights),D.push(M.numPointLights),D.push(M.numSpotLights),D.push(M.numSpotLightMaps),D.push(M.numHemiLights),D.push(M.numRectAreaLights),D.push(M.numDirLightShadows),D.push(M.numPointLightShadows),D.push(M.numSpotLightShadows),D.push(M.numSpotLightShadowsWithMaps),D.push(M.numLightProbes),D.push(M.shadowMapType),D.push(M.toneMapping),D.push(M.numClippingPlanes),D.push(M.numClipIntersection),D.push(M.depthPacking)}function _(D,M){o.disableAll(),M.supportsVertexTextures&&o.enable(0),M.instancing&&o.enable(1),M.instancingColor&&o.enable(2),M.instancingMorph&&o.enable(3),M.matcap&&o.enable(4),M.envMap&&o.enable(5),M.normalMapObjectSpace&&o.enable(6),M.normalMapTangentSpace&&o.enable(7),M.clearcoat&&o.enable(8),M.iridescence&&o.enable(9),M.alphaTest&&o.enable(10),M.vertexColors&&o.enable(11),M.vertexAlphas&&o.enable(12),M.vertexUv1s&&o.enable(13),M.vertexUv2s&&o.enable(14),M.vertexUv3s&&o.enable(15),M.vertexTangents&&o.enable(16),M.anisotropy&&o.enable(17),M.alphaHash&&o.enable(18),M.batching&&o.enable(19),M.dispersion&&o.enable(20),M.batchingColor&&o.enable(21),D.push(o.mask),o.disableAll(),M.fog&&o.enable(0),M.useFog&&o.enable(1),M.flatShading&&o.enable(2),M.logarithmicDepthBuffer&&o.enable(3),M.reverseDepthBuffer&&o.enable(4),M.skinning&&o.enable(5),M.morphTargets&&o.enable(6),M.morphNormals&&o.enable(7),M.morphColors&&o.enable(8),M.premultipliedAlpha&&o.enable(9),M.shadowMapEnabled&&o.enable(10),M.doubleSided&&o.enable(11),M.flipSided&&o.enable(12),M.useDepthPacking&&o.enable(13),M.dithering&&o.enable(14),M.transmission&&o.enable(15),M.sheen&&o.enable(16),M.opaque&&o.enable(17),M.pointsUvs&&o.enable(18),M.decodeVideoTexture&&o.enable(19),M.decodeVideoTextureEmissive&&o.enable(20),M.alphaToCoverage&&o.enable(21),M.numMultiviewViews&&o.enable(21),D.push(o.mask)}function w(D){const M=v[D.type];let k;if(M){const V=pa[M];k=LN.clone(V.uniforms)}else k=D.uniforms;return k}function T(D,M){let k;for(let V=0,X=d.length;V<X;V++){const $=d[V];if($.cacheKey===M){k=$,++k.usedTimes;break}}return k===void 0&&(k=new jZ(n,M,D,s),d.push(k)),k}function L(D){if(--D.usedTimes===0){const M=d.indexOf(D);d[M]=d[d.length-1],d.pop(),D.destroy()}}function R(D){c.remove(D)}function P(){c.dispose()}return{getParameters:E,getProgramCacheKey:b,getUniforms:w,acquireProgram:T,releaseProgram:L,releaseShaderCache:R,programs:d,dispose:P}}function ZZ(){let n=new WeakMap;function e(a){return n.has(a)}function t(a){let o=n.get(a);return o===void 0&&(o={},n.set(a,o)),o}function i(a){n.delete(a)}function r(a,o,c){n.get(a)[o]=c}function s(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:s}}function $Z(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function NL(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function FL(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function a(p,m,A,v,y,E){let b=n[e];return b===void 0?(b={id:p.id,object:p,geometry:m,material:A,groupOrder:v,renderOrder:p.renderOrder,z:y,group:E},n[e]=b):(b.id=p.id,b.object=p,b.geometry=m,b.material=A,b.groupOrder=v,b.renderOrder=p.renderOrder,b.z=y,b.group=E),e++,b}function o(p,m,A,v,y,E){const b=a(p,m,A,v,y,E);A.transmission>0?i.push(b):A.transparent===!0?r.push(b):t.push(b)}function c(p,m,A,v,y,E){const b=a(p,m,A,v,y,E);A.transmission>0?i.unshift(b):A.transparent===!0?r.unshift(b):t.unshift(b)}function h(p,m){t.length>1&&t.sort(p||$Z),i.length>1&&i.sort(m||NL),r.length>1&&r.sort(m||NL)}function d(){for(let p=e,m=n.length;p<m;p++){const A=n[p];if(A.id===null)break;A.id=null,A.object=null,A.geometry=null,A.material=null,A.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:o,unshift:c,finish:d,sort:h}}function e$(){let n=new WeakMap;function e(i,r){const s=n.get(i);let a;return s===void 0?(a=new FL,n.set(i,[a])):r>=s.length?(a=new FL,s.push(a)):a=s[r],a}function t(){n=new WeakMap}return{get:e,dispose:t}}function t$(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new K,color:new ut};break;case"SpotLight":t={position:new K,direction:new K,color:new ut,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new K,color:new ut,distance:0,decay:0};break;case"HemisphereLight":t={direction:new K,skyColor:new ut,groundColor:new ut};break;case"RectAreaLight":t={color:new ut,position:new K,halfWidth:new K,halfHeight:new K};break}return n[e.id]=t,t}}}function n$(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new He};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new He};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new He,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let i$=0;function r$(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function s$(n){const e=new t$,t=n$(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let h=0;h<9;h++)i.probe.push(new K);const r=new K,s=new It,a=new It;function o(h){let d=0,p=0,m=0;for(let D=0;D<9;D++)i.probe[D].set(0,0,0);let A=0,v=0,y=0,E=0,b=0,C=0,_=0,w=0,T=0,L=0,R=0;h.sort(r$);for(let D=0,M=h.length;D<M;D++){const k=h[D],V=k.color,X=k.intensity,$=k.distance,ae=k.shadow&&k.shadow.map?k.shadow.map.texture:null;if(k.isAmbientLight)d+=V.r*X,p+=V.g*X,m+=V.b*X;else if(k.isLightProbe){for(let z=0;z<9;z++)i.probe[z].addScaledVector(k.sh.coefficients[z],X);R++}else if(k.isDirectionalLight){const z=e.get(k);if(z.color.copy(k.color).multiplyScalar(k.intensity),k.castShadow){const j=k.shadow,Z=t.get(k);Z.shadowIntensity=j.intensity,Z.shadowBias=j.bias,Z.shadowNormalBias=j.normalBias,Z.shadowRadius=j.radius,Z.shadowMapSize=j.mapSize,i.directionalShadow[A]=Z,i.directionalShadowMap[A]=ae,i.directionalShadowMatrix[A]=k.shadow.matrix,C++}i.directional[A]=z,A++}else if(k.isSpotLight){const z=e.get(k);z.position.setFromMatrixPosition(k.matrixWorld),z.color.copy(V).multiplyScalar(X),z.distance=$,z.coneCos=Math.cos(k.angle),z.penumbraCos=Math.cos(k.angle*(1-k.penumbra)),z.decay=k.decay,i.spot[y]=z;const j=k.shadow;if(k.map&&(i.spotLightMap[T]=k.map,T++,j.updateMatrices(k),k.castShadow&&L++),i.spotLightMatrix[y]=j.matrix,k.castShadow){const Z=t.get(k);Z.shadowIntensity=j.intensity,Z.shadowBias=j.bias,Z.shadowNormalBias=j.normalBias,Z.shadowRadius=j.radius,Z.shadowMapSize=j.mapSize,i.spotShadow[y]=Z,i.spotShadowMap[y]=ae,w++}y++}else if(k.isRectAreaLight){const z=e.get(k);z.color.copy(V).multiplyScalar(X),z.halfWidth.set(k.width*.5,0,0),z.halfHeight.set(0,k.height*.5,0),i.rectArea[E]=z,E++}else if(k.isPointLight){const z=e.get(k);if(z.color.copy(k.color).multiplyScalar(k.intensity),z.distance=k.distance,z.decay=k.decay,k.castShadow){const j=k.shadow,Z=t.get(k);Z.shadowIntensity=j.intensity,Z.shadowBias=j.bias,Z.shadowNormalBias=j.normalBias,Z.shadowRadius=j.radius,Z.shadowMapSize=j.mapSize,Z.shadowCameraNear=j.camera.near,Z.shadowCameraFar=j.camera.far,i.pointShadow[v]=Z,i.pointShadowMap[v]=ae,i.pointShadowMatrix[v]=k.shadow.matrix,_++}i.point[v]=z,v++}else if(k.isHemisphereLight){const z=e.get(k);z.skyColor.copy(k.color).multiplyScalar(X),z.groundColor.copy(k.groundColor).multiplyScalar(X),i.hemi[b]=z,b++}}E>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=lt.LTC_FLOAT_1,i.rectAreaLTC2=lt.LTC_FLOAT_2):(i.rectAreaLTC1=lt.LTC_HALF_1,i.rectAreaLTC2=lt.LTC_HALF_2)),i.ambient[0]=d,i.ambient[1]=p,i.ambient[2]=m;const P=i.hash;(P.directionalLength!==A||P.pointLength!==v||P.spotLength!==y||P.rectAreaLength!==E||P.hemiLength!==b||P.numDirectionalShadows!==C||P.numPointShadows!==_||P.numSpotShadows!==w||P.numSpotMaps!==T||P.numLightProbes!==R)&&(i.directional.length=A,i.spot.length=y,i.rectArea.length=E,i.point.length=v,i.hemi.length=b,i.directionalShadow.length=C,i.directionalShadowMap.length=C,i.pointShadow.length=_,i.pointShadowMap.length=_,i.spotShadow.length=w,i.spotShadowMap.length=w,i.directionalShadowMatrix.length=C,i.pointShadowMatrix.length=_,i.spotLightMatrix.length=w+T-L,i.spotLightMap.length=T,i.numSpotLightShadowsWithMaps=L,i.numLightProbes=R,P.directionalLength=A,P.pointLength=v,P.spotLength=y,P.rectAreaLength=E,P.hemiLength=b,P.numDirectionalShadows=C,P.numPointShadows=_,P.numSpotShadows=w,P.numSpotMaps=T,P.numLightProbes=R,i.version=i$++)}function c(h,d){let p=0,m=0,A=0,v=0,y=0;const E=d.matrixWorldInverse;for(let b=0,C=h.length;b<C;b++){const _=h[b];if(_.isDirectionalLight){const w=i.directional[p];w.direction.setFromMatrixPosition(_.matrixWorld),r.setFromMatrixPosition(_.target.matrixWorld),w.direction.sub(r),w.direction.transformDirection(E),p++}else if(_.isSpotLight){const w=i.spot[A];w.position.setFromMatrixPosition(_.matrixWorld),w.position.applyMatrix4(E),w.direction.setFromMatrixPosition(_.matrixWorld),r.setFromMatrixPosition(_.target.matrixWorld),w.direction.sub(r),w.direction.transformDirection(E),A++}else if(_.isRectAreaLight){const w=i.rectArea[v];w.position.setFromMatrixPosition(_.matrixWorld),w.position.applyMatrix4(E),a.identity(),s.copy(_.matrixWorld),s.premultiply(E),a.extractRotation(s),w.halfWidth.set(_.width*.5,0,0),w.halfHeight.set(0,_.height*.5,0),w.halfWidth.applyMatrix4(a),w.halfHeight.applyMatrix4(a),v++}else if(_.isPointLight){const w=i.point[m];w.position.setFromMatrixPosition(_.matrixWorld),w.position.applyMatrix4(E),m++}else if(_.isHemisphereLight){const w=i.hemi[y];w.direction.setFromMatrixPosition(_.matrixWorld),w.direction.transformDirection(E),y++}}}return{setup:o,setupView:c,state:i}}function QL(n){const e=new s$(n),t=[],i=[];function r(d){h.camera=d,t.length=0,i.length=0}function s(d){t.push(d)}function a(d){i.push(d)}function o(){e.setup(t)}function c(d){e.setupView(t,d)}const h={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:h,setupLights:o,setupLightsView:c,pushLight:s,pushShadow:a}}function a$(n){let e=new WeakMap;function t(r,s=0){const a=e.get(r);let o;return a===void 0?(o=new QL(n),e.set(r,[o])):s>=a.length?(o=new QL(n),a.push(o)):o=a[s],o}function i(){e=new WeakMap}return{get:t,dispose:i}}const o$=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,l$=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function c$(n,e,t){let i=new $m;const r=new He,s=new He,a=new dn,o=new g2({depthPacking:yN}),c=new v2,h={},d=t.maxTextureSize,p={[$o]:Fr,[Fr]:$o,[Qa]:Qa},m=new Ea({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new He},radius:{value:4}},vertexShader:o$,fragmentShader:l$}),A=m.clone();A.defines.HORIZONTAL_PASS=1;const v=new Vt;v.setAttribute("position",new Ln(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new Mi(v,m),E=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=VS;let b=this.type;this.render=function(L,R,P){if(E.enabled===!1||E.autoUpdate===!1&&E.needsUpdate===!1||L.length===0)return;const D=n.getRenderTarget(),M=n.getActiveCubeFace(),k=n.getActiveMipmapLevel(),V=n.state;V.setBlending(Vo),V.buffers.color.setClear(1,1,1,1),V.buffers.depth.setTest(!0),V.setScissorTest(!1);const X=b!==Da&&this.type===Da,$=b===Da&&this.type!==Da;for(let ae=0,z=L.length;ae<z;ae++){const j=L[ae],Z=j.shadow;if(Z===void 0){console.warn("THREE.WebGLShadowMap:",j,"has no shadow.");continue}if(Z.autoUpdate===!1&&Z.needsUpdate===!1)continue;r.copy(Z.mapSize);const ce=Z.getFrameExtents();if(r.multiply(ce),s.copy(Z.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(s.x=Math.floor(d/ce.x),r.x=s.x*ce.x,Z.mapSize.x=s.x),r.y>d&&(s.y=Math.floor(d/ce.y),r.y=s.y*ce.y,Z.mapSize.y=s.y)),Z.map===null||X===!0||$===!0){const se=this.type!==Da?{minFilter:rr,magFilter:rr}:{};Z.map!==null&&Z.map.dispose(),Z.map=new ba(r.x,r.y,se),Z.map.texture.name=j.name+".shadowMap",Z.camera.updateProjectionMatrix()}n.setRenderTarget(Z.map),n.clear();const U=Z.getViewportCount();for(let se=0;se<U;se++){const me=Z.getViewport(se);a.set(s.x*me.x,s.y*me.y,s.x*me.z,s.y*me.w),V.viewport(a),Z.updateMatrices(j,se),i=Z.getFrustum(),w(R,P,Z.camera,j,this.type)}Z.isPointLightShadow!==!0&&this.type===Da&&C(Z,P),Z.needsUpdate=!1}b=this.type,E.needsUpdate=!1,n.setRenderTarget(D,M,k)};function C(L,R){const P=e.update(y);m.defines.VSM_SAMPLES!==L.blurSamples&&(m.defines.VSM_SAMPLES=L.blurSamples,A.defines.VSM_SAMPLES=L.blurSamples,m.needsUpdate=!0,A.needsUpdate=!0),L.mapPass===null&&(L.mapPass=new ba(r.x,r.y)),m.uniforms.shadow_pass.value=L.map.texture,m.uniforms.resolution.value=L.mapSize,m.uniforms.radius.value=L.radius,n.setRenderTarget(L.mapPass),n.clear(),n.renderBufferDirect(R,null,P,m,y,null),A.uniforms.shadow_pass.value=L.mapPass.texture,A.uniforms.resolution.value=L.mapSize,A.uniforms.radius.value=L.radius,n.setRenderTarget(L.map),n.clear(),n.renderBufferDirect(R,null,P,A,y,null)}function _(L,R,P,D){let M=null;const k=P.isPointLight===!0?L.customDistanceMaterial:L.customDepthMaterial;if(k!==void 0)M=k;else if(M=P.isPointLight===!0?c:o,n.localClippingEnabled&&R.clipShadows===!0&&Array.isArray(R.clippingPlanes)&&R.clippingPlanes.length!==0||R.displacementMap&&R.displacementScale!==0||R.alphaMap&&R.alphaTest>0||R.map&&R.alphaTest>0){const V=M.uuid,X=R.uuid;let $=h[V];$===void 0&&($={},h[V]=$);let ae=$[X];ae===void 0&&(ae=M.clone(),$[X]=ae,R.addEventListener("dispose",T)),M=ae}if(M.visible=R.visible,M.wireframe=R.wireframe,D===Da?M.side=R.shadowSide!==null?R.shadowSide:R.side:M.side=R.shadowSide!==null?R.shadowSide:p[R.side],M.alphaMap=R.alphaMap,M.alphaTest=R.alphaTest,M.map=R.map,M.clipShadows=R.clipShadows,M.clippingPlanes=R.clippingPlanes,M.clipIntersection=R.clipIntersection,M.displacementMap=R.displacementMap,M.displacementScale=R.displacementScale,M.displacementBias=R.displacementBias,M.wireframeLinewidth=R.wireframeLinewidth,M.linewidth=R.linewidth,P.isPointLight===!0&&M.isMeshDistanceMaterial===!0){const V=n.properties.get(M);V.light=P}return M}function w(L,R,P,D,M){if(L.visible===!1)return;if(L.layers.test(R.layers)&&(L.isMesh||L.isLine||L.isPoints)&&(L.castShadow||L.receiveShadow&&M===Da)&&(!L.frustumCulled||i.intersectsObject(L))){L.modelViewMatrix.multiplyMatrices(P.matrixWorldInverse,L.matrixWorld);const X=e.update(L),$=L.material;if(Array.isArray($)){const ae=X.groups;for(let z=0,j=ae.length;z<j;z++){const Z=ae[z],ce=$[Z.materialIndex];if(ce&&ce.visible){const U=_(L,ce,D,M);L.onBeforeShadow(n,L,R,P,X,U,Z),n.renderBufferDirect(P,null,X,U,L,Z),L.onAfterShadow(n,L,R,P,X,U,Z)}}}else if($.visible){const ae=_(L,$,D,M);L.onBeforeShadow(n,L,R,P,X,ae,null),n.renderBufferDirect(P,null,X,ae,L,null),L.onAfterShadow(n,L,R,P,X,ae,null)}}const V=L.children;for(let X=0,$=V.length;X<$;X++)w(V[X],R,P,D,M)}function T(L){L.target.removeEventListener("dispose",T);for(const P in h){const D=h[P],M=L.target.uuid;M in D&&(D[M].dispose(),delete D[M])}}}const u$={[Nv]:Fv,[Qv]:Gv,[zv]:Vv,[Bu]:Hv,[Fv]:Nv,[Gv]:Qv,[Vv]:zv,[Hv]:Bu};function h$(n,e){function t(){let J=!1;const Re=new dn;let Ve=null;const $e=new dn(0,0,0,0);return{setMask:function(et){Ve!==et&&!J&&(n.colorMask(et,et,et,et),Ve=et)},setLocked:function(et){J=et},setClear:function(et,at,Et,tt,it){it===!0&&(et*=tt,at*=tt,Et*=tt),Re.set(et,at,Et,tt),$e.equals(Re)===!1&&(n.clearColor(et,at,Et,tt),$e.copy(Re))},reset:function(){J=!1,Ve=null,$e.set(-1,0,0,0)}}}function i(){let J=!1,Re=!1,Ve=null,$e=null,et=null;return{setReversed:function(at){if(Re!==at){const Et=e.get("EXT_clip_control");Re?Et.clipControlEXT(Et.LOWER_LEFT_EXT,Et.ZERO_TO_ONE_EXT):Et.clipControlEXT(Et.LOWER_LEFT_EXT,Et.NEGATIVE_ONE_TO_ONE_EXT);const tt=et;et=null,this.setClear(tt)}Re=at},getReversed:function(){return Re},setTest:function(at){at?Le(n.DEPTH_TEST):ue(n.DEPTH_TEST)},setMask:function(at){Ve!==at&&!J&&(n.depthMask(at),Ve=at)},setFunc:function(at){if(Re&&(at=u$[at]),$e!==at){switch(at){case Nv:n.depthFunc(n.NEVER);break;case Fv:n.depthFunc(n.ALWAYS);break;case Qv:n.depthFunc(n.LESS);break;case Bu:n.depthFunc(n.LEQUAL);break;case zv:n.depthFunc(n.EQUAL);break;case Hv:n.depthFunc(n.GEQUAL);break;case Gv:n.depthFunc(n.GREATER);break;case Vv:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}$e=at}},setLocked:function(at){J=at},setClear:function(at){et!==at&&(Re&&(at=1-at),n.clearDepth(at),et=at)},reset:function(){J=!1,Ve=null,$e=null,et=null,Re=!1}}}function r(){let J=!1,Re=null,Ve=null,$e=null,et=null,at=null,Et=null,tt=null,it=null;return{setTest:function(We){J||(We?Le(n.STENCIL_TEST):ue(n.STENCIL_TEST))},setMask:function(We){Re!==We&&!J&&(n.stencilMask(We),Re=We)},setFunc:function(We,nt,At){(Ve!==We||$e!==nt||et!==At)&&(n.stencilFunc(We,nt,At),Ve=We,$e=nt,et=At)},setOp:function(We,nt,At){(at!==We||Et!==nt||tt!==At)&&(n.stencilOp(We,nt,At),at=We,Et=nt,tt=At)},setLocked:function(We){J=We},setClear:function(We){it!==We&&(n.clearStencil(We),it=We)},reset:function(){J=!1,Re=null,Ve=null,$e=null,et=null,at=null,Et=null,tt=null,it=null}}}const s=new t,a=new i,o=new r,c=new WeakMap,h=new WeakMap;let d={},p={},m=new WeakMap,A=[],v=null,y=!1,E=null,b=null,C=null,_=null,w=null,T=null,L=null,R=new ut(0,0,0),P=0,D=!1,M=null,k=null,V=null,X=null,$=null;const ae=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let z=!1,j=0;const Z=n.getParameter(n.VERSION);Z.indexOf("WebGL")!==-1?(j=parseFloat(/^WebGL (\d)/.exec(Z)[1]),z=j>=1):Z.indexOf("OpenGL ES")!==-1&&(j=parseFloat(/^OpenGL ES (\d)/.exec(Z)[1]),z=j>=2);let ce=null,U={};const se=n.getParameter(n.SCISSOR_BOX),me=n.getParameter(n.VIEWPORT),be=new dn().fromArray(se),xe=new dn().fromArray(me);function Ue(J,Re,Ve,$e){const et=new Uint8Array(4),at=n.createTexture();n.bindTexture(J,at),n.texParameteri(J,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(J,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Et=0;Et<Ve;Et++)J===n.TEXTURE_3D||J===n.TEXTURE_2D_ARRAY?n.texImage3D(Re,0,n.RGBA,1,1,$e,0,n.RGBA,n.UNSIGNED_BYTE,et):n.texImage2D(Re+Et,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,et);return at}const Ne={};Ne[n.TEXTURE_2D]=Ue(n.TEXTURE_2D,n.TEXTURE_2D,1),Ne[n.TEXTURE_CUBE_MAP]=Ue(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Ne[n.TEXTURE_2D_ARRAY]=Ue(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Ne[n.TEXTURE_3D]=Ue(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),a.setClear(1),o.setClear(0),Le(n.DEPTH_TEST),a.setFunc(Bu),ze(!1),ne(Y1),Le(n.CULL_FACE),Be(Vo);function Le(J){d[J]!==!0&&(n.enable(J),d[J]=!0)}function ue(J){d[J]!==!1&&(n.disable(J),d[J]=!1)}function Oe(J,Re){return p[J]!==Re?(n.bindFramebuffer(J,Re),p[J]=Re,J===n.DRAW_FRAMEBUFFER&&(p[n.FRAMEBUFFER]=Re),J===n.FRAMEBUFFER&&(p[n.DRAW_FRAMEBUFFER]=Re),!0):!1}function Ge(J,Re){let Ve=A,$e=!1;if(J){Ve=m.get(Re),Ve===void 0&&(Ve=[],m.set(Re,Ve));const et=J.textures;if(Ve.length!==et.length||Ve[0]!==n.COLOR_ATTACHMENT0){for(let at=0,Et=et.length;at<Et;at++)Ve[at]=n.COLOR_ATTACHMENT0+at;Ve.length=et.length,$e=!0}}else Ve[0]!==n.BACK&&(Ve[0]=n.BACK,$e=!0);$e&&n.drawBuffers(Ve)}function je(J){return v!==J?(n.useProgram(J),v=J,!0):!1}const Me={[Ql]:n.FUNC_ADD,[Hk]:n.FUNC_SUBTRACT,[Gk]:n.FUNC_REVERSE_SUBTRACT};Me[Vk]=n.MIN,Me[Wk]=n.MAX;const Ce={[qk]:n.ZERO,[jk]:n.ONE,[Xk]:n.SRC_COLOR,[Uv]:n.SRC_ALPHA,[eN]:n.SRC_ALPHA_SATURATE,[Zk]:n.DST_COLOR,[Kk]:n.DST_ALPHA,[Yk]:n.ONE_MINUS_SRC_COLOR,[kv]:n.ONE_MINUS_SRC_ALPHA,[$k]:n.ONE_MINUS_DST_COLOR,[Jk]:n.ONE_MINUS_DST_ALPHA,[tN]:n.CONSTANT_COLOR,[nN]:n.ONE_MINUS_CONSTANT_COLOR,[iN]:n.CONSTANT_ALPHA,[rN]:n.ONE_MINUS_CONSTANT_ALPHA};function Be(J,Re,Ve,$e,et,at,Et,tt,it,We){if(J===Vo){y===!0&&(ue(n.BLEND),y=!1);return}if(y===!1&&(Le(n.BLEND),y=!0),J!==zk){if(J!==E||We!==D){if((b!==Ql||w!==Ql)&&(n.blendEquation(n.FUNC_ADD),b=Ql,w=Ql),We)switch(J){case yu:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case K1:n.blendFunc(n.ONE,n.ONE);break;case J1:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Z1:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",J);break}else switch(J){case yu:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case K1:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case J1:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Z1:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",J);break}C=null,_=null,T=null,L=null,R.set(0,0,0),P=0,E=J,D=We}return}et=et||Re,at=at||Ve,Et=Et||$e,(Re!==b||et!==w)&&(n.blendEquationSeparate(Me[Re],Me[et]),b=Re,w=et),(Ve!==C||$e!==_||at!==T||Et!==L)&&(n.blendFuncSeparate(Ce[Ve],Ce[$e],Ce[at],Ce[Et]),C=Ve,_=$e,T=at,L=Et),(tt.equals(R)===!1||it!==P)&&(n.blendColor(tt.r,tt.g,tt.b,it),R.copy(tt),P=it),E=J,D=!1}function Y(J,Re){J.side===Qa?ue(n.CULL_FACE):Le(n.CULL_FACE);let Ve=J.side===Fr;Re&&(Ve=!Ve),ze(Ve),J.blending===yu&&J.transparent===!1?Be(Vo):Be(J.blending,J.blendEquation,J.blendSrc,J.blendDst,J.blendEquationAlpha,J.blendSrcAlpha,J.blendDstAlpha,J.blendColor,J.blendAlpha,J.premultipliedAlpha),a.setFunc(J.depthFunc),a.setTest(J.depthTest),a.setMask(J.depthWrite),s.setMask(J.colorWrite);const $e=J.stencilWrite;o.setTest($e),$e&&(o.setMask(J.stencilWriteMask),o.setFunc(J.stencilFunc,J.stencilRef,J.stencilFuncMask),o.setOp(J.stencilFail,J.stencilZFail,J.stencilZPass)),O(J.polygonOffset,J.polygonOffsetFactor,J.polygonOffsetUnits),J.alphaToCoverage===!0?Le(n.SAMPLE_ALPHA_TO_COVERAGE):ue(n.SAMPLE_ALPHA_TO_COVERAGE)}function ze(J){M!==J&&(J?n.frontFace(n.CW):n.frontFace(n.CCW),M=J)}function ne(J){J!==Nk?(Le(n.CULL_FACE),J!==k&&(J===Y1?n.cullFace(n.BACK):J===Fk?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):ue(n.CULL_FACE),k=J}function I(J){J!==V&&(z&&n.lineWidth(J),V=J)}function O(J,Re,Ve){J?(Le(n.POLYGON_OFFSET_FILL),(X!==Re||$!==Ve)&&(n.polygonOffset(Re,Ve),X=Re,$=Ve)):ue(n.POLYGON_OFFSET_FILL)}function Q(J){J?Le(n.SCISSOR_TEST):ue(n.SCISSOR_TEST)}function W(J){J===void 0&&(J=n.TEXTURE0+ae-1),ce!==J&&(n.activeTexture(J),ce=J)}function ee(J,Re,Ve){Ve===void 0&&(ce===null?Ve=n.TEXTURE0+ae-1:Ve=ce);let $e=U[Ve];$e===void 0&&($e={type:void 0,texture:void 0},U[Ve]=$e),($e.type!==J||$e.texture!==Re)&&(ce!==Ve&&(n.activeTexture(Ve),ce=Ve),n.bindTexture(J,Re||Ne[J]),$e.type=J,$e.texture=Re)}function he(){const J=U[ce];J!==void 0&&J.type!==void 0&&(n.bindTexture(J.type,null),J.type=void 0,J.texture=void 0)}function Te(){try{n.compressedTexImage2D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Ye(){try{n.compressedTexImage3D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function q(){try{n.texSubImage2D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function N(){try{n.texSubImage3D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function re(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function ge(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Ie(){try{n.texStorage2D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function we(){try{n.texStorage3D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Ke(){try{n.texImage2D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Fe(){try{n.texImage3D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Xe(J){be.equals(J)===!1&&(n.scissor(J.x,J.y,J.z,J.w),be.copy(J))}function ht(J){xe.equals(J)===!1&&(n.viewport(J.x,J.y,J.z,J.w),xe.copy(J))}function Ze(J,Re){let Ve=h.get(Re);Ve===void 0&&(Ve=new WeakMap,h.set(Re,Ve));let $e=Ve.get(J);$e===void 0&&($e=n.getUniformBlockIndex(Re,J.name),Ve.set(J,$e))}function ct(J,Re){const $e=h.get(Re).get(J);c.get(Re)!==$e&&(n.uniformBlockBinding(Re,$e,J.__bindingPointIndex),c.set(Re,$e))}function Dt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),a.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),d={},ce=null,U={},p={},m=new WeakMap,A=[],v=null,y=!1,E=null,b=null,C=null,_=null,w=null,T=null,L=null,R=new ut(0,0,0),P=0,D=!1,M=null,k=null,V=null,X=null,$=null,be.set(0,0,n.canvas.width,n.canvas.height),xe.set(0,0,n.canvas.width,n.canvas.height),s.reset(),a.reset(),o.reset()}return{buffers:{color:s,depth:a,stencil:o},enable:Le,disable:ue,bindFramebuffer:Oe,drawBuffers:Ge,useProgram:je,setBlending:Be,setMaterial:Y,setFlipSided:ze,setCullFace:ne,setLineWidth:I,setPolygonOffset:O,setScissorTest:Q,activeTexture:W,bindTexture:ee,unbindTexture:he,compressedTexImage2D:Te,compressedTexImage3D:Ye,texImage2D:Ke,texImage3D:Fe,updateUBOMapping:Ze,uniformBlockBinding:ct,texStorage2D:Ie,texStorage3D:we,texSubImage2D:q,texSubImage3D:N,compressedTexSubImage2D:re,compressedTexSubImage3D:ge,scissor:Xe,viewport:ht,reset:Dt}}function d$(n,e,t,i,r,s,a){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),h=e.has("OCULUS_multiview")?e.get("OCULUS_multiview"):null,d=new He,p=new WeakMap;let m;const A=new WeakMap;let v=[],y=!1,E=!1;try{E=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b(q,N){return E?new OffscreenCanvas(q,N):Sm("canvas")}function C(q,N,re){let ge=1;const Ie=Ye(q);if((Ie.width>re||Ie.height>re)&&(ge=re/Math.max(Ie.width,Ie.height)),ge<1)if(typeof HTMLImageElement<"u"&&q instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&q instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&q instanceof ImageBitmap||typeof VideoFrame<"u"&&q instanceof VideoFrame){const we=Math.floor(ge*Ie.width),Ke=Math.floor(ge*Ie.height);m===void 0&&(m=b(we,Ke));const Fe=N?b(we,Ke):m;return Fe.width=we,Fe.height=Ke,Fe.getContext("2d").drawImage(q,0,0,we,Ke),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ie.width+"x"+Ie.height+") to ("+we+"x"+Ke+")."),Fe}else return"data"in q&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ie.width+"x"+Ie.height+")."),q;return q}function _(q){return q.generateMipmaps}function w(q){n.generateMipmap(q)}function T(q){return q.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:q.isWebGL3DRenderTarget?n.TEXTURE_3D:q.isWebGLArrayRenderTarget||q.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function L(q,N,re,ge,Ie=!1){if(q!==null){if(n[q]!==void 0)return n[q];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+q+"'")}let we=N;if(N===n.RED&&(re===n.FLOAT&&(we=n.R32F),re===n.HALF_FLOAT&&(we=n.R16F),re===n.UNSIGNED_BYTE&&(we=n.R8)),N===n.RED_INTEGER&&(re===n.UNSIGNED_BYTE&&(we=n.R8UI),re===n.UNSIGNED_SHORT&&(we=n.R16UI),re===n.UNSIGNED_INT&&(we=n.R32UI),re===n.BYTE&&(we=n.R8I),re===n.SHORT&&(we=n.R16I),re===n.INT&&(we=n.R32I)),N===n.RG&&(re===n.FLOAT&&(we=n.RG32F),re===n.HALF_FLOAT&&(we=n.RG16F),re===n.UNSIGNED_BYTE&&(we=n.RG8)),N===n.RG_INTEGER&&(re===n.UNSIGNED_BYTE&&(we=n.RG8UI),re===n.UNSIGNED_SHORT&&(we=n.RG16UI),re===n.UNSIGNED_INT&&(we=n.RG32UI),re===n.BYTE&&(we=n.RG8I),re===n.SHORT&&(we=n.RG16I),re===n.INT&&(we=n.RG32I)),N===n.RGB_INTEGER&&(re===n.UNSIGNED_BYTE&&(we=n.RGB8UI),re===n.UNSIGNED_SHORT&&(we=n.RGB16UI),re===n.UNSIGNED_INT&&(we=n.RGB32UI),re===n.BYTE&&(we=n.RGB8I),re===n.SHORT&&(we=n.RGB16I),re===n.INT&&(we=n.RGB32I)),N===n.RGBA_INTEGER&&(re===n.UNSIGNED_BYTE&&(we=n.RGBA8UI),re===n.UNSIGNED_SHORT&&(we=n.RGBA16UI),re===n.UNSIGNED_INT&&(we=n.RGBA32UI),re===n.BYTE&&(we=n.RGBA8I),re===n.SHORT&&(we=n.RGBA16I),re===n.INT&&(we=n.RGBA32I)),N===n.RGB&&re===n.UNSIGNED_INT_5_9_9_9_REV&&(we=n.RGB9_E5),N===n.RGBA){const Ke=Ie?Cm:cn.getTransfer(ge);re===n.FLOAT&&(we=n.RGBA32F),re===n.HALF_FLOAT&&(we=n.RGBA16F),re===n.UNSIGNED_BYTE&&(we=Ke===Sn?n.SRGB8_ALPHA8:n.RGBA8),re===n.UNSIGNED_SHORT_4_4_4_4&&(we=n.RGBA4),re===n.UNSIGNED_SHORT_5_5_5_1&&(we=n.RGB5_A1)}return(we===n.R16F||we===n.R32F||we===n.RG16F||we===n.RG32F||we===n.RGBA16F||we===n.RGBA32F)&&e.get("EXT_color_buffer_float"),we}function R(q,N){let re;return q?N===null||N===tl||N===Yl?re=n.DEPTH24_STENCIL8:N===Or?re=n.DEPTH32F_STENCIL8:N===Id&&(re=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):N===null||N===tl||N===Yl?re=n.DEPTH_COMPONENT24:N===Or?re=n.DEPTH_COMPONENT32F:N===Id&&(re=n.DEPTH_COMPONENT16),re}function P(q,N){return _(q)===!0||q.isFramebufferTexture&&q.minFilter!==rr&&q.minFilter!==Ui?Math.log2(Math.max(N.width,N.height))+1:q.mipmaps!==void 0&&q.mipmaps.length>0?q.mipmaps.length:q.isCompressedTexture&&Array.isArray(q.image)?N.mipmaps.length:1}function D(q){const N=q.target;N.removeEventListener("dispose",D),k(N),N.isVideoTexture&&p.delete(N)}function M(q){const N=q.target;N.removeEventListener("dispose",M),X(N)}function k(q){const N=i.get(q);if(N.__webglInit===void 0)return;const re=q.source,ge=A.get(re);if(ge){const Ie=ge[N.__cacheKey];Ie.usedTimes--,Ie.usedTimes===0&&V(q),Object.keys(ge).length===0&&A.delete(re)}i.remove(q)}function V(q){const N=i.get(q);n.deleteTexture(N.__webglTexture);const re=q.source,ge=A.get(re);delete ge[N.__cacheKey],a.memory.textures--}function X(q){const N=i.get(q);if(q.depthTexture&&(q.depthTexture.dispose(),i.remove(q.depthTexture)),q.isWebGLCubeRenderTarget)for(let ge=0;ge<6;ge++){if(Array.isArray(N.__webglFramebuffer[ge]))for(let Ie=0;Ie<N.__webglFramebuffer[ge].length;Ie++)n.deleteFramebuffer(N.__webglFramebuffer[ge][Ie]);else n.deleteFramebuffer(N.__webglFramebuffer[ge]);N.__webglDepthbuffer&&n.deleteRenderbuffer(N.__webglDepthbuffer[ge])}else{if(Array.isArray(N.__webglFramebuffer))for(let ge=0;ge<N.__webglFramebuffer.length;ge++)n.deleteFramebuffer(N.__webglFramebuffer[ge]);else n.deleteFramebuffer(N.__webglFramebuffer);if(N.__webglDepthbuffer&&n.deleteRenderbuffer(N.__webglDepthbuffer),N.__webglMultisampledFramebuffer&&n.deleteFramebuffer(N.__webglMultisampledFramebuffer),N.__webglColorRenderbuffer)for(let ge=0;ge<N.__webglColorRenderbuffer.length;ge++)N.__webglColorRenderbuffer[ge]&&n.deleteRenderbuffer(N.__webglColorRenderbuffer[ge]);N.__webglDepthRenderbuffer&&n.deleteRenderbuffer(N.__webglDepthRenderbuffer)}const re=q.textures;for(let ge=0,Ie=re.length;ge<Ie;ge++){const we=i.get(re[ge]);we.__webglTexture&&(n.deleteTexture(we.__webglTexture),a.memory.textures--),i.remove(re[ge])}i.remove(q)}let $=0;function ae(){$=0}function z(){const q=$;return q>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+q+" texture units while this GPU supports only "+r.maxTextures),$+=1,q}function j(q){const N=[];return N.push(q.wrapS),N.push(q.wrapT),N.push(q.wrapR||0),N.push(q.magFilter),N.push(q.minFilter),N.push(q.anisotropy),N.push(q.internalFormat),N.push(q.format),N.push(q.type),N.push(q.generateMipmaps),N.push(q.premultiplyAlpha),N.push(q.flipY),N.push(q.unpackAlignment),N.push(q.colorSpace),N.join()}function Z(q,N){const re=i.get(q);if(q.isVideoTexture&&he(q),q.isRenderTargetTexture===!1&&q.version>0&&re.__version!==q.version){const ge=q.image;if(ge===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ge.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else if(Oe(re,q,N))return}t.bindTexture(n.TEXTURE_2D,re.__webglTexture,n.TEXTURE0+N)}function ce(q,N){const re=i.get(q);if(q.version>0&&re.__version!==q.version){Oe(re,q,N);return}t.bindTexture(n.TEXTURE_2D_ARRAY,re.__webglTexture,n.TEXTURE0+N)}function U(q,N){const re=i.get(q);if(q.version>0&&re.__version!==q.version){Oe(re,q,N);return}t.bindTexture(n.TEXTURE_3D,re.__webglTexture,n.TEXTURE0+N)}function se(q,N){const re=i.get(q);if(q.version>0&&re.__version!==q.version){Ge(re,q,N);return}t.bindTexture(n.TEXTURE_CUBE_MAP,re.__webglTexture,n.TEXTURE0+N)}const me={[ym]:n.REPEAT,[Js]:n.CLAMP_TO_EDGE,[bm]:n.MIRRORED_REPEAT},be={[rr]:n.NEAREST,[WS]:n.NEAREST_MIPMAP_NEAREST,[ad]:n.NEAREST_MIPMAP_LINEAR,[Ui]:n.LINEAR,[qp]:n.LINEAR_MIPMAP_NEAREST,[Ga]:n.LINEAR_MIPMAP_LINEAR},xe={[EN]:n.NEVER,[MN]:n.ALWAYS,[xN]:n.LESS,[n2]:n.LEQUAL,[CN]:n.EQUAL,[SN]:n.GEQUAL,[_N]:n.GREATER,[wN]:n.NOTEQUAL};function Ue(q,N){if(N.type===Or&&e.has("OES_texture_float_linear")===!1&&(N.magFilter===Ui||N.magFilter===qp||N.magFilter===ad||N.magFilter===Ga||N.minFilter===Ui||N.minFilter===qp||N.minFilter===ad||N.minFilter===Ga)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(q,n.TEXTURE_WRAP_S,me[N.wrapS]),n.texParameteri(q,n.TEXTURE_WRAP_T,me[N.wrapT]),(q===n.TEXTURE_3D||q===n.TEXTURE_2D_ARRAY)&&n.texParameteri(q,n.TEXTURE_WRAP_R,me[N.wrapR]),n.texParameteri(q,n.TEXTURE_MAG_FILTER,be[N.magFilter]),n.texParameteri(q,n.TEXTURE_MIN_FILTER,be[N.minFilter]),N.compareFunction&&(n.texParameteri(q,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(q,n.TEXTURE_COMPARE_FUNC,xe[N.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(N.magFilter===rr||N.minFilter!==ad&&N.minFilter!==Ga||N.type===Or&&e.has("OES_texture_float_linear")===!1)return;if(N.anisotropy>1||i.get(N).__currentAnisotropy){const re=e.get("EXT_texture_filter_anisotropic");n.texParameterf(q,re.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(N.anisotropy,r.getMaxAnisotropy())),i.get(N).__currentAnisotropy=N.anisotropy}}}function Ne(q,N){let re=!1;q.__webglInit===void 0&&(q.__webglInit=!0,N.addEventListener("dispose",D));const ge=N.source;let Ie=A.get(ge);Ie===void 0&&(Ie={},A.set(ge,Ie));const we=j(N);if(we!==q.__cacheKey){Ie[we]===void 0&&(Ie[we]={texture:n.createTexture(),usedTimes:0},a.memory.textures++,re=!0),Ie[we].usedTimes++;const Ke=Ie[q.__cacheKey];Ke!==void 0&&(Ie[q.__cacheKey].usedTimes--,Ke.usedTimes===0&&V(N)),q.__cacheKey=we,q.__webglTexture=Ie[we].texture}return re}function Le(q){y=q}function ue(){const q=y;y=!1;for(const N of v)Oe(N.textureProperties,N.texture,N.slot),N.texture.isPendingDeferredUpload=!1;v=[],y=q}function Oe(q,N,re){if(y)return N.isPendingDeferredUpload||(N.isPendingDeferredUpload=!0,v.push({textureProperties:q,texture:N,slot:re})),!1;let ge=n.TEXTURE_2D;(N.isDataArrayTexture||N.isCompressedArrayTexture)&&(ge=n.TEXTURE_2D_ARRAY),N.isData3DTexture&&(ge=n.TEXTURE_3D);const Ie=Ne(q,N),we=N.source;t.bindTexture(ge,q.__webglTexture,n.TEXTURE0+re);const Ke=i.get(we);if(we.version!==Ke.__version||Ie===!0){t.activeTexture(n.TEXTURE0+re);const Fe=cn.getPrimaries(cn.workingColorSpace),Xe=N.colorSpace===Po?null:cn.getPrimaries(N.colorSpace),ht=N.colorSpace===Po||Fe===Xe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,N.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,N.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,N.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ht);let Ze=C(N.image,!1,r.maxTextureSize);Ze=Te(N,Ze);const ct=s.convert(N.format,N.colorSpace),Dt=s.convert(N.type);let J=L(N.internalFormat,ct,Dt,N.colorSpace,N.isVideoTexture);Ue(ge,N);let Re;const Ve=N.mipmaps,$e=N.isVideoTexture!==!0,et=Ke.__version===void 0||Ie===!0,at=we.dataReady,Et=P(N,Ze);if(N.isDepthTexture)J=R(N.format===Jl,N.type),et&&($e?t.texStorage2D(n.TEXTURE_2D,1,J,Ze.width,Ze.height):t.texImage2D(n.TEXTURE_2D,0,J,Ze.width,Ze.height,0,ct,Dt,null));else if(N.isDataTexture)if(Ve.length>0){$e&&et&&t.texStorage2D(n.TEXTURE_2D,Et,J,Ve[0].width,Ve[0].height);for(let tt=0,it=Ve.length;tt<it;tt++)Re=Ve[tt],$e?at&&t.texSubImage2D(n.TEXTURE_2D,tt,0,0,Re.width,Re.height,ct,Dt,Re.data):t.texImage2D(n.TEXTURE_2D,tt,J,Re.width,Re.height,0,ct,Dt,Re.data);N.generateMipmaps=!1}else $e?(et&&t.texStorage2D(n.TEXTURE_2D,Et,J,Ze.width,Ze.height),at&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ze.width,Ze.height,ct,Dt,Ze.data)):t.texImage2D(n.TEXTURE_2D,0,J,Ze.width,Ze.height,0,ct,Dt,Ze.data);else if(N.isCompressedTexture)if(N.isCompressedArrayTexture){$e&&et&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Et,J,Ve[0].width,Ve[0].height,Ze.depth);for(let tt=0,it=Ve.length;tt<it;tt++)if(Re=Ve[tt],N.format!==kr)if(ct!==null)if($e){if(at)if(N.layerUpdates.size>0){const We=lw(Re.width,Re.height,N.format,N.type);for(const nt of N.layerUpdates){const At=Re.data.subarray(nt*We/Re.data.BYTES_PER_ELEMENT,(nt+1)*We/Re.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,tt,0,0,nt,Re.width,Re.height,1,ct,At)}N.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,tt,0,0,0,Re.width,Re.height,Ze.depth,ct,Re.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,tt,J,Re.width,Re.height,Ze.depth,0,Re.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else $e?at&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,tt,0,0,0,Re.width,Re.height,Ze.depth,ct,Dt,Re.data):t.texImage3D(n.TEXTURE_2D_ARRAY,tt,J,Re.width,Re.height,Ze.depth,0,ct,Dt,Re.data)}else{$e&&et&&t.texStorage2D(n.TEXTURE_2D,Et,J,Ve[0].width,Ve[0].height);for(let tt=0,it=Ve.length;tt<it;tt++)Re=Ve[tt],N.format!==kr?ct!==null?$e?at&&t.compressedTexSubImage2D(n.TEXTURE_2D,tt,0,0,Re.width,Re.height,ct,Re.data):t.compressedTexImage2D(n.TEXTURE_2D,tt,J,Re.width,Re.height,0,Re.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):$e?at&&t.texSubImage2D(n.TEXTURE_2D,tt,0,0,Re.width,Re.height,ct,Dt,Re.data):t.texImage2D(n.TEXTURE_2D,tt,J,Re.width,Re.height,0,ct,Dt,Re.data)}else if(N.isDataArrayTexture)if($e){if(et&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Et,J,Ze.width,Ze.height,Ze.depth),at)if(N.layerUpdates.size>0){const tt=lw(Ze.width,Ze.height,N.format,N.type);for(const it of N.layerUpdates){const We=Ze.data.subarray(it*tt/Ze.data.BYTES_PER_ELEMENT,(it+1)*tt/Ze.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,it,Ze.width,Ze.height,1,ct,Dt,We)}N.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ze.width,Ze.height,Ze.depth,ct,Dt,Ze.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,J,Ze.width,Ze.height,Ze.depth,0,ct,Dt,Ze.data);else if(N.isData3DTexture)$e?(et&&t.texStorage3D(n.TEXTURE_3D,Et,J,Ze.width,Ze.height,Ze.depth),at&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ze.width,Ze.height,Ze.depth,ct,Dt,Ze.data)):t.texImage3D(n.TEXTURE_3D,0,J,Ze.width,Ze.height,Ze.depth,0,ct,Dt,Ze.data);else if(N.isFramebufferTexture){if(et)if($e)t.texStorage2D(n.TEXTURE_2D,Et,J,Ze.width,Ze.height);else{let tt=Ze.width,it=Ze.height;for(let We=0;We<Et;We++)t.texImage2D(n.TEXTURE_2D,We,J,tt,it,0,ct,Dt,null),tt>>=1,it>>=1}}else if(Ve.length>0){if($e&&et){const tt=Ye(Ve[0]);t.texStorage2D(n.TEXTURE_2D,Et,J,tt.width,tt.height)}for(let tt=0,it=Ve.length;tt<it;tt++)Re=Ve[tt],$e?at&&t.texSubImage2D(n.TEXTURE_2D,tt,0,0,ct,Dt,Re):t.texImage2D(n.TEXTURE_2D,tt,J,ct,Dt,Re);N.generateMipmaps=!1}else if($e){if(et){const tt=Ye(Ze);t.texStorage2D(n.TEXTURE_2D,Et,J,tt.width,tt.height)}at&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,ct,Dt,Ze)}else t.texImage2D(n.TEXTURE_2D,0,J,ct,Dt,Ze);_(N)&&w(ge),Ke.__version=we.version,N.onUpdate&&N.onUpdate(N)}return q.__version=N.version,!0}function Ge(q,N,re){if(N.image.length!==6)return;const ge=Ne(q,N),Ie=N.source;t.bindTexture(n.TEXTURE_CUBE_MAP,q.__webglTexture,n.TEXTURE0+re);const we=i.get(Ie);if(Ie.version!==we.__version||ge===!0){t.activeTexture(n.TEXTURE0+re);const Ke=cn.getPrimaries(cn.workingColorSpace),Fe=N.colorSpace===Po?null:cn.getPrimaries(N.colorSpace),Xe=N.colorSpace===Po||Ke===Fe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,N.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,N.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,N.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Xe);const ht=N.isCompressedTexture||N.image[0].isCompressedTexture,Ze=N.image[0]&&N.image[0].isDataTexture,ct=[];for(let it=0;it<6;it++)!ht&&!Ze?ct[it]=C(N.image[it],!0,r.maxCubemapSize):ct[it]=Ze?N.image[it].image:N.image[it],ct[it]=Te(N,ct[it]);const Dt=ct[0],J=s.convert(N.format,N.colorSpace),Re=s.convert(N.type),Ve=L(N.internalFormat,J,Re,N.colorSpace),$e=N.isVideoTexture!==!0,et=we.__version===void 0||ge===!0,at=Ie.dataReady;let Et=P(N,Dt);Ue(n.TEXTURE_CUBE_MAP,N);let tt;if(ht){$e&&et&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Et,Ve,Dt.width,Dt.height);for(let it=0;it<6;it++){tt=ct[it].mipmaps;for(let We=0;We<tt.length;We++){const nt=tt[We];N.format!==kr?J!==null?$e?at&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+it,We,0,0,nt.width,nt.height,J,nt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+it,We,Ve,nt.width,nt.height,0,nt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):$e?at&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+it,We,0,0,nt.width,nt.height,J,Re,nt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+it,We,Ve,nt.width,nt.height,0,J,Re,nt.data)}}}else{if(tt=N.mipmaps,$e&&et){tt.length>0&&Et++;const it=Ye(ct[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Et,Ve,it.width,it.height)}for(let it=0;it<6;it++)if(Ze){$e?at&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+it,0,0,0,ct[it].width,ct[it].height,J,Re,ct[it].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+it,0,Ve,ct[it].width,ct[it].height,0,J,Re,ct[it].data);for(let We=0;We<tt.length;We++){const At=tt[We].image[it].image;$e?at&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+it,We+1,0,0,At.width,At.height,J,Re,At.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+it,We+1,Ve,At.width,At.height,0,J,Re,At.data)}}else{$e?at&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+it,0,0,0,J,Re,ct[it]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+it,0,Ve,J,Re,ct[it]);for(let We=0;We<tt.length;We++){const nt=tt[We];$e?at&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+it,We+1,0,0,J,Re,nt.image[it]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+it,We+1,Ve,J,Re,nt.image[it])}}}_(N)&&w(n.TEXTURE_CUBE_MAP),we.__version=Ie.version,N.onUpdate&&N.onUpdate(N)}q.__version=N.version}function je(q,N,re,ge,Ie,we){const Ke=s.convert(re.format,re.colorSpace),Fe=s.convert(re.type),Xe=L(re.internalFormat,Ke,Fe,re.colorSpace),ht=i.get(N),Ze=i.get(re);if(Ze.__renderTarget=N,!ht.__hasExternalTextures){const Dt=Math.max(1,N.width>>we),J=Math.max(1,N.height>>we);N.isWebGLMultiviewRenderTarget===!0?t.texStorage3D(n.TEXTURE_2D_ARRAY,0,Xe,N.width,N.height,N.numViews):Ie===n.TEXTURE_3D||Ie===n.TEXTURE_2D_ARRAY?t.texImage3D(Ie,we,Xe,Dt,J,N.depth,0,Ke,Fe,null):t.texImage2D(Ie,we,Xe,Dt,J,0,Ke,Fe,null)}t.bindFramebuffer(n.FRAMEBUFFER,q);const ct=ee(N);N.isWebGLMultiviewRenderTarget===!0?ct?h.framebufferTextureMultisampleMultiviewOVR(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,Ze.__webglTexture,0,W(N),0,N.numViews):h.framebufferTextureMultiviewOVR(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,Ze.__webglTexture,0,0,N.numViews):(Ie===n.TEXTURE_2D||Ie>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Ie<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&(ct?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ge,Ie,Ze.__webglTexture,0,W(N)):n.framebufferTexture2D(n.FRAMEBUFFER,ge,Ie,Ze.__webglTexture,we)),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Me(q,N,re){if(n.bindRenderbuffer(n.RENDERBUFFER,q),N.isWebGLMultiviewRenderTarget===!0){const ge=ee(N),Ie=N.numViews,we=N.depthTexture;let Ke=n.DEPTH_COMPONENT24,Fe=n.DEPTH_ATTACHMENT;we&&we.isDepthTexture&&(we.type===Or?Ke=n.DEPTH_COMPONENT32F:we.type===Yl&&(Ke=n.DEPTH24_STENCIL8,Fe=n.DEPTH_STENCIL_ATTACHMENT));let Xe=i.get(N.depthTexture).__webglTexture;Xe===void 0&&(Xe=n.createTexture(),n.bindTexture(n.TEXTURE_2D_ARRAY,Xe),n.texStorage3D(n.TEXTURE_2D_ARRAY,1,Ke,N.width,N.height,Ie)),ge?h.framebufferTextureMultisampleMultiviewOVR(n.FRAMEBUFFER,Fe,Xe,0,W(N),0,Ie):h.framebufferTextureMultiviewOVR(n.FRAMEBUFFER,Fe,Xe,0,0,Ie)}else if(N.depthBuffer){const ge=N.depthTexture,Ie=ge&&ge.isDepthTexture?ge.type:null,we=R(N.stencilBuffer,Ie),Ke=N.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Fe=W(N);ee(N)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Fe,we,N.width,N.height):re?n.renderbufferStorageMultisample(n.RENDERBUFFER,Fe,we,N.width,N.height):n.renderbufferStorage(n.RENDERBUFFER,we,N.width,N.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ke,n.RENDERBUFFER,q)}else{const ge=N.textures;for(let Ie=0;Ie<ge.length;Ie++){const we=ge[Ie],Ke=s.convert(we.format,we.colorSpace),Fe=s.convert(we.type),Xe=L(we.internalFormat,Ke,Fe,we.colorSpace),ht=W(N);re&&ee(N)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,ht,Xe,N.width,N.height):ee(N)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ht,Xe,N.width,N.height):n.renderbufferStorage(n.RENDERBUFFER,Xe,N.width,N.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Ce(q,N){if(N&&N.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,q),!(N.depthTexture&&N.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const ge=i.get(N.depthTexture);ge.__renderTarget=N,(!ge.__webglTexture||N.depthTexture.image.width!==N.width||N.depthTexture.image.height!==N.height)&&(N.depthTexture.image.width=N.width,N.depthTexture.image.height=N.height,N.depthTexture.needsUpdate=!0),N.depthTexture.image.depth!=1?ce(N.depthTexture,0):Z(N.depthTexture,0);const Ie=ge.__webglTexture,we=W(N);if(N.isWebGLMultiviewRenderTarget===!0){const Ke=ee(N),Fe=N.numViews;if(N.depthTexture.format===Kl)Ke?h.framebufferTextureMultisampleMultiviewOVR(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,Ie,0,we,0,Fe):h.framebufferTextureMultiviewOVR(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,Ie,0,0,Fe);else if(N.depthTexture.format===Jl)Ke?h.framebufferTextureMultisampleMultiviewOVR(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,Ie,0,we,0,Fe):h.framebufferTextureMultiviewOVR(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,Ie,0,0,Fe);else throw new Error("Unknown depthTexture format")}else if(N.depthTexture.format===Kl)ee(N)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ie,0,we):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ie,0);else if(N.depthTexture.format===Jl)ee(N)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ie,0,we):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ie,0);else throw new Error("Unknown depthTexture format")}function Be(q){const N=i.get(q),re=q.isWebGLCubeRenderTarget===!0;if(N.__boundDepthTexture!==q.depthTexture){const ge=q.depthTexture;if(N.__depthDisposeCallback&&N.__depthDisposeCallback(),ge){const Ie=()=>{delete N.__boundDepthTexture,delete N.__depthDisposeCallback,ge.removeEventListener("dispose",Ie)};ge.addEventListener("dispose",Ie),N.__depthDisposeCallback=Ie}N.__boundDepthTexture=ge}if(q.depthTexture&&!N.__autoAllocateDepthBuffer){if(re)throw new Error("target.depthTexture not supported in Cube render targets");Ce(N.__webglFramebuffer,q)}else if(re){N.__webglDepthbuffer=[];for(let ge=0;ge<6;ge++)if(t.bindFramebuffer(n.FRAMEBUFFER,N.__webglFramebuffer[ge]),N.__webglDepthbuffer[ge]===void 0)N.__webglDepthbuffer[ge]=n.createRenderbuffer(),Me(N.__webglDepthbuffer[ge],q,!1);else{const Ie=q.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,we=N.__webglDepthbuffer[ge];n.bindRenderbuffer(n.RENDERBUFFER,we),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ie,n.RENDERBUFFER,we)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,N.__webglFramebuffer),N.__webglDepthbuffer===void 0)N.__webglDepthbuffer=n.createRenderbuffer(),Me(N.__webglDepthbuffer,q,!1);else{const ge=q.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ie=N.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Ie),n.framebufferRenderbuffer(n.FRAMEBUFFER,ge,n.RENDERBUFFER,Ie)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Y(q,N,re){const ge=i.get(q);N!==void 0&&je(ge.__webglFramebuffer,q,q.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),re!==void 0&&Be(q)}function ze(q){const N=q.texture,re=i.get(q),ge=i.get(N);q.addEventListener("dispose",M);const Ie=q.textures,we=q.isWebGLCubeRenderTarget===!0,Ke=Ie.length>1;if(Ke||(ge.__webglTexture===void 0&&(ge.__webglTexture=n.createTexture()),ge.__version=N.version,a.memory.textures++),we){re.__webglFramebuffer=[];for(let Fe=0;Fe<6;Fe++)if(N.mipmaps&&N.mipmaps.length>0){re.__webglFramebuffer[Fe]=[];for(let Xe=0;Xe<N.mipmaps.length;Xe++)re.__webglFramebuffer[Fe][Xe]=n.createFramebuffer()}else re.__webglFramebuffer[Fe]=n.createFramebuffer()}else{if(N.mipmaps&&N.mipmaps.length>0){re.__webglFramebuffer=[];for(let Fe=0;Fe<N.mipmaps.length;Fe++)re.__webglFramebuffer[Fe]=n.createFramebuffer()}else re.__webglFramebuffer=n.createFramebuffer();if(Ke)for(let Fe=0,Xe=Ie.length;Fe<Xe;Fe++){const ht=i.get(Ie[Fe]);ht.__webglTexture===void 0&&(ht.__webglTexture=n.createTexture(),a.memory.textures++)}if(q.samples>0&&ee(q)===!1){re.__webglMultisampledFramebuffer=n.createFramebuffer(),re.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,re.__webglMultisampledFramebuffer);for(let Fe=0;Fe<Ie.length;Fe++){const Xe=Ie[Fe];re.__webglColorRenderbuffer[Fe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,re.__webglColorRenderbuffer[Fe]);const ht=s.convert(Xe.format,Xe.colorSpace),Ze=s.convert(Xe.type),ct=L(Xe.internalFormat,ht,Ze,Xe.colorSpace,q.isXRRenderTarget===!0),Dt=W(q);n.renderbufferStorageMultisample(n.RENDERBUFFER,Dt,ct,q.width,q.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Fe,n.RENDERBUFFER,re.__webglColorRenderbuffer[Fe])}n.bindRenderbuffer(n.RENDERBUFFER,null),q.depthBuffer&&(re.__webglDepthRenderbuffer=n.createRenderbuffer(),Me(re.__webglDepthRenderbuffer,q,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(we){t.bindTexture(n.TEXTURE_CUBE_MAP,ge.__webglTexture),Ue(n.TEXTURE_CUBE_MAP,N);for(let Fe=0;Fe<6;Fe++)if(N.mipmaps&&N.mipmaps.length>0)for(let Xe=0;Xe<N.mipmaps.length;Xe++)je(re.__webglFramebuffer[Fe][Xe],q,N,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,Xe);else je(re.__webglFramebuffer[Fe],q,N,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,0);_(N)&&w(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ke){for(let Fe=0,Xe=Ie.length;Fe<Xe;Fe++){const ht=Ie[Fe],Ze=i.get(ht);t.bindTexture(n.TEXTURE_2D,Ze.__webglTexture),Ue(n.TEXTURE_2D,ht),je(re.__webglFramebuffer,q,ht,n.COLOR_ATTACHMENT0+Fe,n.TEXTURE_2D,0),_(ht)&&w(n.TEXTURE_2D)}t.unbindTexture()}else{let Fe=n.TEXTURE_2D;if((q.isWebGL3DRenderTarget||q.isWebGLArrayRenderTarget)&&(Fe=q.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),q.isWebGLMultiviewRenderTarget===!0&&(Fe=n.TEXTURE_2D_ARRAY),t.bindTexture(Fe,ge.__webglTexture),Ue(Fe,N),N.mipmaps&&N.mipmaps.length>0)for(let Xe=0;Xe<N.mipmaps.length;Xe++)je(re.__webglFramebuffer[Xe],q,N,n.COLOR_ATTACHMENT0,Fe,Xe);else je(re.__webglFramebuffer,q,N,n.COLOR_ATTACHMENT0,Fe,0);_(N)&&w(Fe),t.unbindTexture()}(q.depthBuffer||q.isWebGLMultiviewRenderTarget===!0)&&this.setupDepthRenderbuffer(q)}function ne(q){const N=q.textures;for(let re=0,ge=N.length;re<ge;re++){const Ie=N[re];if(_(Ie)){const we=T(q),Ke=i.get(Ie).__webglTexture;t.bindTexture(we,Ke),w(we),t.unbindTexture()}}}const I=[],O=[];function Q(q){if(q.samples>0){if(ee(q)===!1){const N=q.textures,re=q.width,ge=q.height;let Ie=n.COLOR_BUFFER_BIT;const we=q.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ke=i.get(q),Fe=N.length>1;if(Fe)for(let Xe=0;Xe<N.length;Xe++)t.bindFramebuffer(n.FRAMEBUFFER,Ke.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Xe,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Ke.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Xe,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Ke.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ke.__webglFramebuffer);for(let Xe=0;Xe<N.length;Xe++){if(q.resolveDepthBuffer&&(q.depthBuffer&&(Ie|=n.DEPTH_BUFFER_BIT),q.stencilBuffer&&q.resolveStencilBuffer&&(Ie|=n.STENCIL_BUFFER_BIT)),Fe){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Ke.__webglColorRenderbuffer[Xe]);const ht=i.get(N[Xe]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,ht,0)}n.blitFramebuffer(0,0,re,ge,0,0,re,ge,Ie,n.NEAREST),c===!0&&(I.length=0,O.length=0,I.push(n.COLOR_ATTACHMENT0+Xe),q.depthBuffer&&q.resolveDepthBuffer===!1&&(I.push(we),O.push(we),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,O)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,I))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Fe)for(let Xe=0;Xe<N.length;Xe++){t.bindFramebuffer(n.FRAMEBUFFER,Ke.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Xe,n.RENDERBUFFER,Ke.__webglColorRenderbuffer[Xe]);const ht=i.get(N[Xe]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Ke.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Xe,n.TEXTURE_2D,ht,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ke.__webglMultisampledFramebuffer)}else if(q.depthBuffer&&q.resolveDepthBuffer===!1&&c){const N=q.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[N])}}}function W(q){return Math.min(r.maxSamples,q.samples)}function ee(q){const N=i.get(q);return q.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&N.__useRenderToTexture!==!1}function he(q){const N=a.render.frame;p.get(q)!==N&&(p.set(q,N),q.update())}function Te(q,N){const re=q.colorSpace,ge=q.format,Ie=q.type;return q.isCompressedTexture===!0||q.isVideoTexture===!0||re!==Iu&&re!==Po&&(cn.getTransfer(re)===Sn?(ge!==kr||Ie!==$a)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",re)),N}function Ye(q){return typeof HTMLImageElement<"u"&&q instanceof HTMLImageElement?(d.width=q.naturalWidth||q.width,d.height=q.naturalHeight||q.height):typeof VideoFrame<"u"&&q instanceof VideoFrame?(d.width=q.displayWidth,d.height=q.displayHeight):(d.width=q.width,d.height=q.height),d}this.allocateTextureUnit=z,this.resetTextureUnits=ae,this.setTexture2D=Z,this.setTexture2DArray=ce,this.setTexture3D=U,this.setTextureCube=se,this.rebindTextures=Y,this.uploadTexture=Oe,this.setupRenderTarget=ze,this.updateRenderTargetMipmap=ne,this.updateMultisampleRenderTarget=Q,this.setupDepthTexture=Ce,this.setupDepthRenderbuffer=Be,this.setupFrameBufferTexture=je,this.useMultisampledRTT=ee,this.runDeferredUploads=ue,this.setDeferTextureUploads=Le}function NF(n,e){function t(i,r=Po){let s;const a=cn.getTransfer(r);if(i===$a)return n.UNSIGNED_BYTE;if(i===lb)return n.UNSIGNED_SHORT_4_4_4_4;if(i===cb)return n.UNSIGNED_SHORT_5_5_5_1;if(i===XS)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===qS)return n.BYTE;if(i===jS)return n.SHORT;if(i===Id)return n.UNSIGNED_SHORT;if(i===ob)return n.INT;if(i===tl)return n.UNSIGNED_INT;if(i===Or)return n.FLOAT;if(i===zd)return n.HALF_FLOAT;if(i===YS)return n.ALPHA;if(i===KS)return n.RGB;if(i===kr)return n.RGBA;if(i===JS)return n.LUMINANCE;if(i===ZS)return n.LUMINANCE_ALPHA;if(i===Kl)return n.DEPTH_COMPONENT;if(i===Jl)return n.DEPTH_STENCIL;if(i===ub)return n.RED;if(i===Km)return n.RED_INTEGER;if(i===$S)return n.RG;if(i===hb)return n.RG_INTEGER;if(i===db)return n.RGBA_INTEGER;if(i===jp||i===Xp||i===Yp||i===Kp)if(a===Sn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===jp)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Xp)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Yp)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Kp)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===jp)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Xp)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Yp)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Kp)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===Wv||i===qv||i===jv||i===Xv)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===Wv)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===qv)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===jv)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Xv)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===Yv||i===Kv||i===Jv)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===Yv||i===Kv)return a===Sn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===Jv)return a===Sn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===Zv||i===$v||i===ey||i===ty||i===ny||i===iy||i===ry||i===sy||i===ay||i===oy||i===ly||i===cy||i===uy||i===hy)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===Zv)return a===Sn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===$v)return a===Sn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===ey)return a===Sn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===ty)return a===Sn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===ny)return a===Sn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===iy)return a===Sn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===ry)return a===Sn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===sy)return a===Sn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===ay)return a===Sn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===oy)return a===Sn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===ly)return a===Sn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===cy)return a===Sn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===uy)return a===Sn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===hy)return a===Sn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===Jp||i===dy||i===fy)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===Jp)return a===Sn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===dy)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===fy)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===e2||i===py||i===my||i===Ay)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===Jp)return s.COMPRESSED_RED_RGTC1_EXT;if(i===py)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===my)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===Ay)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Yl?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}class FF extends ba{constructor(e,t,i,r={}){super(e,t,r),this.depthBuffer=!1,this.stencilBuffer=!1,this.numViews=i}copy(e){return super.copy(e),this.numViews=e.numViews,this}}FF.prototype.isWebGLMultiviewRenderTarget=!0;const f$=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,p$=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class m${constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new ci,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!==i.depthNear||t.depthFar!==i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new Ea({vertexShader:f$,fragmentShader:p$,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Mi(new Vd(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class A$ extends to{constructor(e,t,i,r){super();const s=this;let a=null,o=1;var c=null;let h=null,d="local-floor",p=1,m=null,A=null;var v=[];let y=null,E=null,b=null,C=null;const _=new m$,w=t.getContextAttributes();let T=null,L=null;const R=[],P=[],D=new He;let M=null;const k=new $i;k.viewport=new dn;const V=new $i;V.viewport=new dn;const X=[k,V],$=new MF;let ae=null,z=null;this.cameraAutoUpdate=!0,this.layersEnabled=!1,this.enabled=!1,this.isPresenting=!1,this.isMultiview=!1,this.getCameraPose=function(){return A},this.getController=function(ue){let Oe=R[ue];return Oe===void 0&&(Oe=new hv,R[ue]=Oe),Oe.getTargetRaySpace()},this.getControllerGrip=function(ue){let Oe=R[ue];return Oe===void 0&&(Oe=new hv,R[ue]=Oe),Oe.getGripSpace()},this.getHand=function(ue){let Oe=R[ue];return Oe===void 0&&(Oe=new hv,R[ue]=Oe),Oe.getHandSpace()};function j(ue){const Oe=P.indexOf(ue.inputSource);if(Oe===-1)return;const Ge=R[Oe];Ge!==void 0&&(Ge.update(ue.inputSource,ue.frame,m||h),Ge.dispatchEvent({type:ue.type,data:ue.inputSource}))}function Z(){a.removeEventListener("select",j),a.removeEventListener("selectstart",j),a.removeEventListener("selectend",j),a.removeEventListener("squeeze",j),a.removeEventListener("squeezestart",j),a.removeEventListener("squeezeend",j),a.removeEventListener("end",Z),a.removeEventListener("inputsourceschange",ce);for(let ue=0;ue<R.length;ue++){const Oe=P[ue];Oe!==null&&(P[ue]=null,R[ue].disconnect(Oe))}ae=null,z=null,_.reset(),s.isPresenting=!1,e.setRenderTarget(T),b=null,E=null,y=null,a=null,L=null,Le.stop(),e.setPixelRatio(M),e.setSize(D.width,D.height,!1),s.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ue){o=ue,s.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ue){d=ue,s.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return m||h},this.setReferenceSpace=function(ue){m=ue},this.getBaseLayer=function(){return E!==null?E:b},this.getBinding=function(){return y},this.getRenderTarget=function(){return L},this.getFrame=function(){return C},this.getSession=function(){return a},this.setSession=async function(ue){if(a=ue,a!==null){if(T=e.getRenderTarget(),a.addEventListener("select",j),a.addEventListener("selectstart",j),a.addEventListener("selectend",j),a.addEventListener("squeeze",j),a.addEventListener("squeezestart",j),a.addEventListener("squeezeend",j),a.addEventListener("end",Z),a.addEventListener("inputsourceschange",ce),w.xrCompatible!==!0&&await t.makeXRCompatible(),M=e.getPixelRatio(),e.getSize(D),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Ge=null,je=null,Me=null;w.depth&&(Me=w.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Ge=w.stencil?Jl:Kl,je=w.stencil?Yl:tl),s.isMultiview=r&&i.has("OCULUS_multiview");const Ce={colorFormat:t.RGBA8,depthFormat:Me,scaleFactor:o};s.isMultiview&&(Ce.textureType="texture-array"),y=new XRWebGLBinding(a,t),E=y.createProjectionLayer(Ce),a.updateRenderState({layers:[E]}),e.setPixelRatio(1),e.setSize(E.textureWidth,E.textureHeight,!1);const Be={format:kr,type:$a,depthTexture:new c2(E.textureWidth,E.textureHeight,je,void 0,void 0,void 0,void 0,void 0,void 0,Ge),stencilBuffer:w.stencil,colorSpace:e.outputColorSpace,samples:w.antialias?4:0,resolveDepthBuffer:E.ignoreDepthValues===!1};if(s.isMultiview){const Y=i.get("OCULUS_multiview");this.maxNumViews=t.getParameter(Y.MAX_VIEWS_OVR),L=new FF(E.textureWidth,E.textureHeight,2,Be)}else L=new ba(E.textureWidth,E.textureHeight,Be)}else{const Ge={antialias:w.antialias,alpha:!0,depth:w.depth,stencil:w.stencil,framebufferScaleFactor:o};b=new XRWebGLLayer(a,t,Ge),a.updateRenderState({baseLayer:b}),e.setPixelRatio(1),e.setSize(b.framebufferWidth,b.framebufferHeight,!1),L=new ba(b.framebufferWidth,b.framebufferHeight,{format:kr,type:$a,colorSpace:e.outputColorSpace,stencilBuffer:w.stencil})}L.isXRRenderTarget=!0,this.setFoveation(p),m=null,h=await a.requestReferenceSpace(d),Le.setContext(a),Le.start(),s.isPresenting=!0,s.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(a!==null)return a.environmentBlendMode},this.addLayer=function(ue){!window.XRWebGLBinding||!this.layersEnabled||!a||(v.push(ue),this.updateLayers())},this.removeLayer=function(ue){v.splice(v.indexOf(ue),1),!(!window.XRWebGLBinding||!this.layersEnabled||!a)&&this.updateLayers()},this.updateLayers=function(){var ue=v.map(function(Oe){return Oe});ue.unshift(a.renderState.layers[0]),a.updateRenderState({layers:ue})},this.getDepthTexture=function(){return _.getDepthTexture()};function ce(ue){for(let Oe=0;Oe<ue.removed.length;Oe++){const Ge=ue.removed[Oe],je=P.indexOf(Ge);je>=0&&(P[je]=null,R[je].disconnect(Ge))}for(let Oe=0;Oe<ue.added.length;Oe++){const Ge=ue.added[Oe];let je=P.indexOf(Ge);if(je===-1){for(let Ce=0;Ce<R.length;Ce++)if(Ce>=P.length){P.push(Ge),je=Ce;break}else if(P[Ce]===null){P[Ce]=Ge,je=Ce;break}if(je===-1)break}const Me=R[je];Me&&Me.connect(Ge)}}const U=new K,se=new K;function me(ue,Oe,Ge){U.setFromMatrixPosition(Oe.matrixWorld),se.setFromMatrixPosition(Ge.matrixWorld);const je=U.distanceTo(se),Me=Oe.projectionMatrix.elements,Ce=Ge.projectionMatrix.elements,Be=Me[14]/(Me[10]-1),Y=Me[14]/(Me[10]+1),ze=(Me[9]+1)/Me[5],ne=(Me[9]-1)/Me[5],I=(Me[8]-1)/Me[0],O=(Ce[8]+1)/Ce[0],Q=Be*I,W=Be*O,ee=je/(-I+O),he=ee*-I;if(Oe.matrixWorld.decompose(ue.position,ue.quaternion,ue.scale),ue.translateX(he),ue.translateZ(ee),ue.matrixWorld.compose(ue.position,ue.quaternion,ue.scale),ue.matrixWorldInverse.copy(ue.matrixWorld).invert(),Me[10]===-1)ue.projectionMatrix.copy(Oe.projectionMatrix),ue.projectionMatrixInverse.copy(Oe.projectionMatrixInverse);else{const Te=Be+ee,Ye=Y+ee,q=Q-he,N=W+(je-he),re=ze*Y/Ye*Te,ge=ne*Y/Ye*Te;ue.projectionMatrix.makePerspective(q,N,re,ge,Te,Ye),ue.projectionMatrixInverse.copy(ue.projectionMatrix).invert()}}function be(ue,Oe){Oe===null?ue.matrixWorld.copy(ue.matrix):ue.matrixWorld.multiplyMatrices(Oe.matrixWorld,ue.matrix),ue.matrixWorldInverse.copy(ue.matrixWorld).invert()}this.setPoseTarget=function(ue){ue!==void 0&&(c=ue)},this.updateCamera=function(ue){if(a===null)return;let Oe=ue.near,Ge=ue.far;_.texture!==null&&(_.depthNear>0&&(Oe=_.depthNear),_.depthFar>0&&(Ge=_.depthFar)),$.near=V.near=k.near=Oe,$.far=V.far=k.far=Ge,(ae!==$.near||z!==$.far)&&(a.updateRenderState({depthNear:$.near,depthFar:$.far}),ae=$.near,z=$.far),k.layers.mask=ue.layers.mask|2,V.layers.mask=ue.layers.mask|4,$.layers.mask=k.layers.mask|V.layers.mask;const je=$.cameras;var Me=c||ue;const Ce=Me.parent;be($,Ce);for(let Be=0;Be<je.length;Be++)be(je[Be],Ce);je.length===2?me($,k,V):$.projectionMatrix.copy(k.projectionMatrix),xe(ue,$,Me)};function xe(ue,Oe,Ge){Oe.matrixWorld.decompose(Oe.position,Oe.quaternion,Oe.scale),Ge.parent===null?Ge.matrix.copy(Oe.matrixWorld):(Ge.matrix.copy(Ge.parent.matrixWorld),Ge.matrix.invert(),Ge.matrix.multiply(Oe.matrixWorld)),Ge.matrix.decompose(Ge.position,Ge.quaternion,Ge.scale),Ge.updateMatrixWorld(!0),ue.projectionMatrix.copy(Oe.projectionMatrix),ue.projectionMatrixInverse.copy(Oe.projectionMatrixInverse),ue.isPerspectiveCamera&&(ue.fov=Rd*2*Math.atan(1/ue.projectionMatrix.elements[5]),ue.zoom=1)}this.getCamera=function(){return $},this.getFoveation=function(){if(!(E===null&&b===null))return p},this.setFoveation=function(ue){p=ue,E!==null&&(E.fixedFoveation=ue),b!==null&&b.fixedFoveation!==void 0&&(b.fixedFoveation=ue)},this.hasDepthSensing=function(){return _.texture!==null},this.getDepthSensingMesh=function(){return _.getMesh($)};let Ue=null;function Ne(ue,Oe){if(A=Oe.getViewerPose(m||h),C=Oe,A!==null){const Ge=A.views;b!==null&&(e.setRenderTargetFramebuffer(L,b.framebuffer),e.setRenderTarget(L));let je=!1;Ge.length!==$.cameras.length&&($.cameras.length=0,je=!0);for(let Be=0;Be<Ge.length;Be++){const Y=Ge[Be];let ze=null;if(b!==null)ze=b.getViewport(Y);else{const I=y.getViewSubImage(E,Y);ze=I.viewport,Be===0&&(e.setRenderTargetTextures(L,I.colorTexture,E.ignoreDepthValues?void 0:I.depthStencilTexture),e.setRenderTarget(L))}let ne=X[Be];ne===void 0&&(ne=new $i,ne.layers.enable(Be),ne.viewport=new dn,X[Be]=ne),ne.matrix.fromArray(Y.transform.matrix),ne.matrix.decompose(ne.position,ne.quaternion,ne.scale),ne.projectionMatrix.fromArray(Y.projectionMatrix),ne.projectionMatrixInverse.copy(ne.projectionMatrix).invert(),ne.viewport.set(ze.x,ze.y,ze.width,ze.height),Be===0&&($.matrix.copy(ne.matrix),$.matrix.decompose($.position,$.quaternion,$.scale)),je===!0&&$.cameras.push(ne)}const Me=a.enabledFeatures;if(Me&&Me.includes("depth-sensing")&&a.depthUsage=="gpu-optimized"&&y){const Be=y.getDepthInformation(Ge[0]);Be&&Be.isValid&&Be.texture&&_.init(e,Be,a.renderState)}}for(let Ge=0;Ge<R.length;Ge++){const je=P[Ge],Me=R[Ge];je!==null&&Me!==void 0&&Me.update(je,Oe,m||h)}Ue&&Ue(ue,Oe),Oe.detectedPlanes&&s.dispatchEvent({type:"planesdetected",data:Oe}),C=null}const Le=new LF;Le.setAnimationLoop(Ne),this.setAnimationLoop=function(ue){Ue=ue},this.dispose=function(){}}}const Gc=new Os,g$=new It;function v$(n,e){function t(E,b){E.matrixAutoUpdate===!0&&E.updateMatrix(),b.value.copy(E.matrix)}function i(E,b){b.color.getRGB(E.fogColor.value,DN(n)),b.isFog?(E.fogNear.value=b.near,E.fogFar.value=b.far):b.isFogExp2&&(E.fogDensity.value=b.density)}function r(E,b,C,_,w){b.isMeshBasicMaterial||b.isMeshLambertMaterial?s(E,b):b.isMeshToonMaterial?(s(E,b),p(E,b)):b.isMeshPhongMaterial?(s(E,b),d(E,b)):b.isMeshStandardMaterial?(s(E,b),m(E,b),b.isMeshPhysicalMaterial&&A(E,b,w)):b.isMeshMatcapMaterial?(s(E,b),v(E,b)):b.isMeshDepthMaterial?s(E,b):b.isMeshDistanceMaterial?(s(E,b),y(E,b)):b.isMeshNormalMaterial?s(E,b):b.isLineBasicMaterial?(a(E,b),b.isLineDashedMaterial&&o(E,b)):b.isPointsMaterial?c(E,b,C,_):b.isSpriteMaterial?h(E,b):b.isShadowMaterial?(E.color.value.copy(b.color),E.opacity.value=b.opacity):b.isShaderMaterial&&(b.uniformsNeedUpdate=!1)}function s(E,b){E.opacity.value=b.opacity,b.color&&E.diffuse.value.copy(b.color),b.emissive&&E.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity),b.map&&(E.map.value=b.map,t(b.map,E.mapTransform)),b.alphaMap&&(E.alphaMap.value=b.alphaMap,t(b.alphaMap,E.alphaMapTransform)),b.bumpMap&&(E.bumpMap.value=b.bumpMap,t(b.bumpMap,E.bumpMapTransform),E.bumpScale.value=b.bumpScale,b.side===Fr&&(E.bumpScale.value*=-1)),b.normalMap&&(E.normalMap.value=b.normalMap,t(b.normalMap,E.normalMapTransform),E.normalScale.value.copy(b.normalScale),b.side===Fr&&E.normalScale.value.negate()),b.displacementMap&&(E.displacementMap.value=b.displacementMap,t(b.displacementMap,E.displacementMapTransform),E.displacementScale.value=b.displacementScale,E.displacementBias.value=b.displacementBias),b.emissiveMap&&(E.emissiveMap.value=b.emissiveMap,t(b.emissiveMap,E.emissiveMapTransform)),b.specularMap&&(E.specularMap.value=b.specularMap,t(b.specularMap,E.specularMapTransform)),b.alphaTest>0&&(E.alphaTest.value=b.alphaTest);const C=e.get(b),_=C.envMap,w=C.envMapRotation;_&&(E.envMap.value=_,Gc.copy(w),Gc.x*=-1,Gc.y*=-1,Gc.z*=-1,_.isCubeTexture&&_.isRenderTargetTexture===!1&&(Gc.y*=-1,Gc.z*=-1),E.envMapRotation.value.setFromMatrix4(g$.makeRotationFromEuler(Gc)),E.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,E.reflectivity.value=b.reflectivity,E.ior.value=b.ior,E.refractionRatio.value=b.refractionRatio),b.lightMap&&(E.lightMap.value=b.lightMap,E.lightMapIntensity.value=b.lightMapIntensity,t(b.lightMap,E.lightMapTransform)),b.aoMap&&(E.aoMap.value=b.aoMap,E.aoMapIntensity.value=b.aoMapIntensity,t(b.aoMap,E.aoMapTransform))}function a(E,b){E.diffuse.value.copy(b.color),E.opacity.value=b.opacity,b.map&&(E.map.value=b.map,t(b.map,E.mapTransform))}function o(E,b){E.dashSize.value=b.dashSize,E.totalSize.value=b.dashSize+b.gapSize,E.scale.value=b.scale}function c(E,b,C,_){E.diffuse.value.copy(b.color),E.opacity.value=b.opacity,E.size.value=b.size*C,E.scale.value=_*.5,b.map&&(E.map.value=b.map,t(b.map,E.uvTransform)),b.alphaMap&&(E.alphaMap.value=b.alphaMap,t(b.alphaMap,E.alphaMapTransform)),b.alphaTest>0&&(E.alphaTest.value=b.alphaTest)}function h(E,b){E.diffuse.value.copy(b.color),E.opacity.value=b.opacity,E.rotation.value=b.rotation,b.map&&(E.map.value=b.map,t(b.map,E.mapTransform)),b.alphaMap&&(E.alphaMap.value=b.alphaMap,t(b.alphaMap,E.alphaMapTransform)),b.alphaTest>0&&(E.alphaTest.value=b.alphaTest)}function d(E,b){E.specular.value.copy(b.specular),E.shininess.value=Math.max(b.shininess,1e-4)}function p(E,b){b.gradientMap&&(E.gradientMap.value=b.gradientMap)}function m(E,b){E.metalness.value=b.metalness,b.metalnessMap&&(E.metalnessMap.value=b.metalnessMap,t(b.metalnessMap,E.metalnessMapTransform)),E.roughness.value=b.roughness,b.roughnessMap&&(E.roughnessMap.value=b.roughnessMap,t(b.roughnessMap,E.roughnessMapTransform)),b.envMap&&(E.envMapIntensity.value=b.envMapIntensity)}function A(E,b,C){E.ior.value=b.ior,b.sheen>0&&(E.sheenColor.value.copy(b.sheenColor).multiplyScalar(b.sheen),E.sheenRoughness.value=b.sheenRoughness,b.sheenColorMap&&(E.sheenColorMap.value=b.sheenColorMap,t(b.sheenColorMap,E.sheenColorMapTransform)),b.sheenRoughnessMap&&(E.sheenRoughnessMap.value=b.sheenRoughnessMap,t(b.sheenRoughnessMap,E.sheenRoughnessMapTransform))),b.clearcoat>0&&(E.clearcoat.value=b.clearcoat,E.clearcoatRoughness.value=b.clearcoatRoughness,b.clearcoatMap&&(E.clearcoatMap.value=b.clearcoatMap,t(b.clearcoatMap,E.clearcoatMapTransform)),b.clearcoatRoughnessMap&&(E.clearcoatRoughnessMap.value=b.clearcoatRoughnessMap,t(b.clearcoatRoughnessMap,E.clearcoatRoughnessMapTransform)),b.clearcoatNormalMap&&(E.clearcoatNormalMap.value=b.clearcoatNormalMap,t(b.clearcoatNormalMap,E.clearcoatNormalMapTransform),E.clearcoatNormalScale.value.copy(b.clearcoatNormalScale),b.side===Fr&&E.clearcoatNormalScale.value.negate())),b.dispersion>0&&(E.dispersion.value=b.dispersion),b.iridescence>0&&(E.iridescence.value=b.iridescence,E.iridescenceIOR.value=b.iridescenceIOR,E.iridescenceThicknessMinimum.value=b.iridescenceThicknessRange[0],E.iridescenceThicknessMaximum.value=b.iridescenceThicknessRange[1],b.iridescenceMap&&(E.iridescenceMap.value=b.iridescenceMap,t(b.iridescenceMap,E.iridescenceMapTransform)),b.iridescenceThicknessMap&&(E.iridescenceThicknessMap.value=b.iridescenceThicknessMap,t(b.iridescenceThicknessMap,E.iridescenceThicknessMapTransform))),b.transmission>0&&(E.transmission.value=b.transmission,E.transmissionSamplerMap.value=C.texture,E.transmissionSamplerSize.value.set(C.width,C.height),b.transmissionMap&&(E.transmissionMap.value=b.transmissionMap,t(b.transmissionMap,E.transmissionMapTransform)),E.thickness.value=b.thickness,b.thicknessMap&&(E.thicknessMap.value=b.thicknessMap,t(b.thicknessMap,E.thicknessMapTransform)),E.attenuationDistance.value=b.attenuationDistance,E.attenuationColor.value.copy(b.attenuationColor)),b.anisotropy>0&&(E.anisotropyVector.value.set(b.anisotropy*Math.cos(b.anisotropyRotation),b.anisotropy*Math.sin(b.anisotropyRotation)),b.anisotropyMap&&(E.anisotropyMap.value=b.anisotropyMap,t(b.anisotropyMap,E.anisotropyMapTransform))),E.specularIntensity.value=b.specularIntensity,E.specularColor.value.copy(b.specularColor),b.specularColorMap&&(E.specularColorMap.value=b.specularColorMap,t(b.specularColorMap,E.specularColorMapTransform)),b.specularIntensityMap&&(E.specularIntensityMap.value=b.specularIntensityMap,t(b.specularIntensityMap,E.specularIntensityMapTransform))}function v(E,b){b.matcap&&(E.matcap.value=b.matcap)}function y(E,b){const C=e.get(b).light;E.referencePosition.value.setFromMatrixPosition(C.matrixWorld),E.nearDistance.value=C.shadow.camera.near,E.farDistance.value=C.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function y$(n,e,t,i){let r={},s={},a=[];const o=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function c(C,_){const w=_.program;i.uniformBlockBinding(C,w)}function h(C,_){let w=r[C.id];w===void 0&&(v(C),w=d(C),r[C.id]=w,C.addEventListener("dispose",E));const T=_.program;i.updateUBOMapping(C,T);const L=e.render.frame;s[C.id]!==L&&(m(C),s[C.id]=L)}function d(C){const _=p();C.__bindingPointIndex=_;const w=n.createBuffer(),T=C.__size,L=C.usage;return n.bindBuffer(n.UNIFORM_BUFFER,w),n.bufferData(n.UNIFORM_BUFFER,T,L),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,_,w),w}function p(){for(let C=0;C<o;C++)if(a.indexOf(C)===-1)return a.push(C),C;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function m(C){const _=r[C.id],w=C.uniforms,T=C.__cache;n.bindBuffer(n.UNIFORM_BUFFER,_);for(let L=0,R=w.length;L<R;L++){const P=Array.isArray(w[L])?w[L]:[w[L]];for(let D=0,M=P.length;D<M;D++){const k=P[D];if(A(k,L,D,T)===!0){const V=k.__offset,X=Array.isArray(k.value)?k.value:[k.value];let $=0;for(let ae=0;ae<X.length;ae++){const z=X[ae],j=y(z);typeof z=="number"||typeof z=="boolean"?(k.__data[0]=z,n.bufferSubData(n.UNIFORM_BUFFER,V+$,k.__data)):z.isMatrix3?(k.__data[0]=z.elements[0],k.__data[1]=z.elements[1],k.__data[2]=z.elements[2],k.__data[3]=0,k.__data[4]=z.elements[3],k.__data[5]=z.elements[4],k.__data[6]=z.elements[5],k.__data[7]=0,k.__data[8]=z.elements[6],k.__data[9]=z.elements[7],k.__data[10]=z.elements[8],k.__data[11]=0):(z.toArray(k.__data,$),$+=j.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,V,k.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function A(C,_,w,T){const L=C.value,R=_+"_"+w;if(T[R]===void 0)return typeof L=="number"||typeof L=="boolean"?T[R]=L:T[R]=L.clone(),!0;{const P=T[R];if(typeof L=="number"||typeof L=="boolean"){if(P!==L)return T[R]=L,!0}else if(P.equals(L)===!1)return P.copy(L),!0}return!1}function v(C){const _=C.uniforms;let w=0;const T=16;for(let R=0,P=_.length;R<P;R++){const D=Array.isArray(_[R])?_[R]:[_[R]];for(let M=0,k=D.length;M<k;M++){const V=D[M],X=Array.isArray(V.value)?V.value:[V.value];for(let $=0,ae=X.length;$<ae;$++){const z=X[$],j=y(z),Z=w%T,ce=Z%j.boundary,U=Z+ce;w+=ce,U!==0&&T-U<j.storage&&(w+=T-U),V.__data=new Float32Array(j.storage/Float32Array.BYTES_PER_ELEMENT),V.__offset=w,w+=j.storage}}}const L=w%T;return L>0&&(w+=T-L),C.__size=w,C.__cache={},this}function y(C){const _={boundary:0,storage:0};return typeof C=="number"||typeof C=="boolean"?(_.boundary=4,_.storage=4):C.isVector2?(_.boundary=8,_.storage=8):C.isVector3||C.isColor?(_.boundary=16,_.storage=12):C.isVector4?(_.boundary=16,_.storage=16):C.isMatrix3?(_.boundary=48,_.storage=48):C.isMatrix4?(_.boundary=64,_.storage=64):C.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",C),_}function E(C){const _=C.target;_.removeEventListener("dispose",E);const w=a.indexOf(_.__bindingPointIndex);a.splice(w,1),n.deleteBuffer(r[_.id]),delete r[_.id],delete s[_.id]}function b(){for(const C in r)n.deleteBuffer(r[C]);a=[],r={},s={}}return{bind:c,update:h,dispose:b}}class b${constructor(e={}){const{canvas:t=BN(),context:i=null,depth:r=!0,stencil:s=!1,alpha:a=!1,antialias:o=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:h=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:p=!1,reverseDepthBuffer:m=!1,multiviewStereo:A=!1}=e;this.isWebGLRenderer=!0;let v;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");v=i.getContextAttributes().alpha}else v=a;const y=new Uint32Array(4),E=new Int32Array(4);let b=null,C=null;const _=[],w=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Kr,this.toneMapping=Wo,this.toneMappingExposure=1;const T=this;let L=!1,R=0,P=0,D=null,M=-1,k=null;const V=new dn,X=new dn;let $=null;const ae=new ut(0);let z=0,j=t.width,Z=t.height,ce=1,U=null,se=null;const me=new dn(0,0,j,Z),be=new dn(0,0,j,Z);let xe=!1;const Ue=new $m;let Ne=!1,Le=!1;this.transmissionResolutionScale=1;const ue=new It,Oe=new It,Ge=new K,je=new dn,Me={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ce=!1;function Be(){return D===null?ce:1}let Y=i;function ze(G,oe){return t.getContext(G,oe)}try{const G={alpha:!0,depth:r,stencil:s,antialias:o,premultipliedAlpha:c,preserveDrawingBuffer:h,powerPreference:d,failIfMajorPerformanceCaveat:p};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${sb}`),t.addEventListener("webglcontextlost",at,!1),t.addEventListener("webglcontextrestored",Et,!1),t.addEventListener("webglcontextcreationerror",tt,!1),Y===null){const oe="webgl2";if(Y=ze(oe,G),Y===null)throw ze(oe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(G){throw console.error("THREE.WebGLRenderer: "+G.message),G}let ne,I,O,Q,W,ee,he,Te,Ye,q,N,re,ge,Ie,we,Ke,Fe,Xe,ht,Ze,ct,Dt,J,Re,Ve;function $e(){ne=new IJ(Y),ne.init(),J=new NF(Y,ne),I=new _J(Y,ne,e,J),O=new h$(Y,ne),I.reverseDepthBuffer&&m&&O.buffers.depth.setReversed(!0),Q=new LJ(Y),W=new ZZ,ee=new d$(Y,ne,O,W,I,J,Q),he=new SJ(T),Te=new BJ(T),Ye=new QX(Y),Re=new xJ(Y,Ye),q=new RJ(Y,Ye,Q,Re),N=new UJ(Y,q,Ye,Q),Ze=new OJ(Y,I,ee),Ke=new wJ(W),re=new JZ(T,he,Te,ne,I,Re,Ke),ge=new v$(T,W),Ie=new e$,we=new a$(ne),ht=new EJ(T,he,Te,O,N,v,c),Xe=new PJ(T,ne,Y),Fe=new c$(T,N,I),Ve=new y$(Y,Q,I,O),ct=new CJ(Y,ne,Q),Dt=new DJ(Y,ne,Q),Q.programs=re.programs,T.capabilities=I,T.extensions=ne,T.properties=W,T.renderLists=Ie,T.shadowMap=Fe,T.state=O,T.info=Q}$e();const et=new A$(T,Y);this.xr=et,this.getContext=function(){return Y},this.getContextAttributes=function(){return Y.getContextAttributes()},this.forceContextLoss=function(){const G=ne.get("WEBGL_lose_context");G&&G.loseContext()},this.forceContextRestore=function(){const G=ne.get("WEBGL_lose_context");G&&G.restoreContext()},this.getPixelRatio=function(){return ce},this.setPixelRatio=function(G){G!==void 0&&(ce=G,this.setSize(j,Z,!1))},this.getSize=function(G){return G.set(j,Z)},this.setSize=function(G,oe,Ae=!0){if(et.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}j=G,Z=oe,t.width=Math.floor(G*ce),t.height=Math.floor(oe*ce),Ae===!0&&(t.style.width=G+"px",t.style.height=oe+"px"),this.setViewport(0,0,G,oe)},this.getDrawingBufferSize=function(G){return G.set(j*ce,Z*ce).floor()},this.setDrawingBufferSize=function(G,oe,Ae){j=G,Z=oe,ce=Ae,t.width=Math.floor(G*Ae),t.height=Math.floor(oe*Ae),this.setViewport(0,0,G,oe)},this.getCurrentViewport=function(G){return G.copy(V)},this.getViewport=function(G){return G.copy(me)},this.setViewport=function(G,oe,Ae,Ee){G.isVector4?me.set(G.x,G.y,G.z,G.w):me.set(G,oe,Ae,Ee),O.viewport(V.copy(me).multiplyScalar(ce).round())},this.getScissor=function(G){return G.copy(be)},this.setScissor=function(G,oe,Ae,Ee){G.isVector4?be.set(G.x,G.y,G.z,G.w):be.set(G,oe,Ae,Ee),O.scissor(X.copy(be).multiplyScalar(ce).round())},this.getScissorTest=function(){return xe},this.setScissorTest=function(G){O.setScissorTest(xe=G)},this.setOpaqueSort=function(G){U=G},this.setTransparentSort=function(G){se=G},this.getClearColor=function(G){return G.copy(ht.getClearColor())},this.setClearColor=function(){ht.setClearColor.apply(ht,arguments)},this.getClearAlpha=function(){return ht.getClearAlpha()},this.setClearAlpha=function(){ht.setClearAlpha.apply(ht,arguments)},this.clear=function(G=!0,oe=!0,Ae=!0){let Ee=0;if(G){let fe=!1;if(D!==null){const qe=D.texture.format;fe=qe===db||qe===hb||qe===Km}if(fe){const qe=D.texture.type,rt=qe===$a||qe===tl||qe===Id||qe===Yl||qe===lb||qe===cb,st=ht.getClearColor(),ot=ht.getClearAlpha(),Ct=st.r,_t=st.g,wt=st.b;rt?(y[0]=Ct,y[1]=_t,y[2]=wt,y[3]=ot,Y.clearBufferuiv(Y.COLOR,0,y)):(E[0]=Ct,E[1]=_t,E[2]=wt,E[3]=ot,Y.clearBufferiv(Y.COLOR,0,E))}else Ee|=Y.COLOR_BUFFER_BIT}oe&&(Ee|=Y.DEPTH_BUFFER_BIT),Ae&&(Ee|=Y.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Y.clear(Ee)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",at,!1),t.removeEventListener("webglcontextrestored",Et,!1),t.removeEventListener("webglcontextcreationerror",tt,!1),ht.dispose(),Ie.dispose(),we.dispose(),W.dispose(),he.dispose(),Te.dispose(),N.dispose(),Re.dispose(),Ve.dispose(),re.dispose(),et.dispose(),et.removeEventListener("sessionstart",pt),et.removeEventListener("sessionend",Tt),Mn.stop()};function at(G){G.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),L=!0}function Et(){console.log("THREE.WebGLRenderer: Context Restored."),L=!1;const G=Q.autoReset,oe=Fe.enabled,Ae=Fe.autoUpdate,Ee=Fe.needsUpdate,fe=Fe.type;$e(),Q.autoReset=G,Fe.enabled=oe,Fe.autoUpdate=Ae,Fe.needsUpdate=Ee,Fe.type=fe}function tt(G){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",G.statusMessage)}function it(G){const oe=G.target;oe.removeEventListener("dispose",it),We(oe)}function We(G){nt(G),W.remove(G)}function nt(G){const oe=W.get(G).programs;oe!==void 0&&(oe.forEach(function(Ae){re.releaseProgram(Ae)}),G.isShaderMaterial&&re.releaseShaderCache(G))}this.renderBufferDirect=function(G,oe,Ae,Ee,fe,qe){oe===null&&(oe=Me);const rt=fe.isMesh&&fe.matrixWorld.determinant()<0,st=an(G,oe,Ae,Ee,fe);O.setMaterial(Ee,rt);let ot=Ae.index,Ct=1;if(Ee.wireframe===!0){if(ot=q.getWireframeAttribute(Ae),ot===void 0)return;Ct=2}const _t=Ae.drawRange,wt=Ae.attributes.position;let nn=_t.start*Ct,kt=(_t.start+_t.count)*Ct;qe!==null&&(nn=Math.max(nn,qe.start*Ct),kt=Math.min(kt,(qe.start+qe.count)*Ct)),ot!==null?(nn=Math.max(nn,0),kt=Math.min(kt,ot.count)):wt!=null&&(nn=Math.max(nn,0),kt=Math.min(kt,wt.count));const jn=kt-nn;if(jn<0||jn===1/0)return;Re.setup(fe,Ee,st,Ae,ot);let Xn,Xt=ct;if(ot!==null&&(Xn=Ye.get(ot),Xt=Dt,Xt.setIndex(Xn)),fe.isMesh)Ee.wireframe===!0?(O.setLineWidth(Ee.wireframeLinewidth*Be()),Xt.setMode(Y.LINES)):Xt.setMode(Y.TRIANGLES);else if(fe.isLine){let Ti=Ee.linewidth;Ti===void 0&&(Ti=1),O.setLineWidth(Ti*Be()),fe.isLineSegments?Xt.setMode(Y.LINES):fe.isLineLoop?Xt.setMode(Y.LINE_LOOP):Xt.setMode(Y.LINE_STRIP)}else fe.isPoints?Xt.setMode(Y.POINTS):fe.isSprite&&Xt.setMode(Y.TRIANGLES);if(fe.isBatchedMesh)if(fe._multiDrawInstances!==null)Xt.renderMultiDrawInstances(fe._multiDrawStarts,fe._multiDrawCounts,fe._multiDrawCount,fe._multiDrawInstances);else if(ne.get("WEBGL_multi_draw"))Xt.renderMultiDraw(fe._multiDrawStarts,fe._multiDrawCounts,fe._multiDrawCount);else{const Ti=fe._multiDrawStarts,yt=fe._multiDrawCounts,dc=fe._multiDrawCount,Ot=ot?Ye.get(ot).bytesPerElement:1,qi=W.get(Ee).currentProgram.getUniforms();for(let os=0;os<dc;os++)qi.setValue(Y,"_gl_DrawID",os),Xt.render(Ti[os]/Ot,yt[os])}else if(fe.isInstancedMesh)Xt.renderInstances(nn,jn,fe.count);else if(Ae.isInstancedBufferGeometry){const Ti=Ae._maxInstanceCount!==void 0?Ae._maxInstanceCount:1/0,yt=Math.min(Ae.instanceCount,Ti);Xt.renderInstances(nn,jn,yt)}else Xt.render(nn,jn)};function At(G,oe,Ae){G.transparent===!0&&G.side===Qa&&G.forceSinglePass===!1?(G.side=Fr,G.needsUpdate=!0,Wt(G,oe,Ae),G.side=$o,G.needsUpdate=!0,Wt(G,oe,Ae),G.side=Qa):Wt(G,oe,Ae)}this.compile=function(G,oe,Ae=null){Ae===null&&(Ae=G),C=we.get(Ae),C.init(oe),w.push(C),Ae.traverseVisible(function(fe){fe.isLight&&fe.layers.test(oe.layers)&&(C.pushLight(fe),fe.castShadow&&C.pushShadow(fe))}),G!==Ae&&G.traverseVisible(function(fe){fe.isLight&&fe.layers.test(oe.layers)&&(C.pushLight(fe),fe.castShadow&&C.pushShadow(fe))}),C.setupLights();const Ee=new Set;return G.traverse(function(fe){if(!(fe.isMesh||fe.isPoints||fe.isLine||fe.isSprite))return;const qe=fe.material;if(qe)if(Array.isArray(qe))for(let rt=0;rt<qe.length;rt++){const st=qe[rt];At(st,Ae,fe),Ee.add(st)}else At(qe,Ae,fe),Ee.add(qe)}),w.pop(),C=null,Ee},this.compileAsync=function(G,oe,Ae=null){const Ee=this.compile(G,oe,Ae);return new Promise(fe=>{function qe(){if(Ee.forEach(function(rt){W.get(rt).currentProgram.isReady()&&Ee.delete(rt)}),Ee.size===0){fe(G);return}setTimeout(qe,10)}ne.get("KHR_parallel_shader_compile")!==null?qe():setTimeout(qe,10)})};let Je=null;function gt(G){Je&&Je(G)}function pt(){Mn.stop()}function Tt(){Mn.start()}const Mn=new LF;Mn.setAnimationLoop(gt),typeof self<"u"&&Mn.setContext(self),this.setAnimationLoop=function(G){Je=G,et.setAnimationLoop(G),G===null?Mn.stop():Mn.start()},et.addEventListener("sessionstart",pt),et.addEventListener("sessionend",Tt),this.render=function(G,oe){if(oe!==void 0&&oe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(L===!0)return;if(G.matrixWorldAutoUpdate===!0&&G.updateMatrixWorld(),oe.parent===null&&oe.matrixWorldAutoUpdate===!0&&oe.updateMatrixWorld(),et.enabled===!0&&et.isPresenting===!0&&(et.cameraAutoUpdate===!0&&et.updateCamera(oe),oe=et.getCamera()),G.isScene===!0&&G.onBeforeRender(T,G,oe,D),C=we.get(G,w.length),C.init(oe),w.push(C),Oe.multiplyMatrices(oe.projectionMatrix,oe.matrixWorldInverse),Ue.setFromProjectionMatrix(Oe),Le=this.localClippingEnabled,Ne=Ke.init(this.clippingPlanes,Le),b=Ie.get(G,_.length),b.init(),_.push(b),et.enabled===!0&&et.isPresenting===!0){const qe=T.xr.getDepthSensingMesh();qe!==null&&zt(qe,oe,-1/0,T.sortObjects)}zt(G,oe,0,T.sortObjects),b.finish(),T.sortObjects===!0&&b.sort(U,se),Ce=et.enabled===!1||et.isPresenting===!1||et.hasDepthSensing()===!1,Ce&&ht.addToRenderList(b,G),this.info.render.frame++,Ne===!0&&Ke.beginShadows();const Ae=C.state.shadowsArray;Fe.render(Ae,G,oe),Ne===!0&&Ke.endShadows(),this.info.autoReset===!0&&this.info.reset();const Ee=b.opaque,fe=b.transmissive;if(C.setupLights(),oe.isArrayCamera){const qe=oe.cameras;if(fe.length>0)for(let rt=0,st=qe.length;rt<st;rt++){const ot=qe[rt];zn(Ee,fe,G,ot)}if(Ce&&ht.render(G),et.enabled&&et.isMultiview)ee.setDeferTextureUploads(!0),Tn(b,G,oe,oe.cameras[0].viewport);else for(let rt=0,st=qe.length;rt<st;rt++){const ot=qe[rt];Tn(b,G,ot,ot.viewport)}}else fe.length>0&&zn(Ee,fe,G,oe),Ce&&ht.render(G),Tn(b,G,oe);D!==null&&P===0&&(ee.updateMultisampleRenderTarget(D),ee.updateRenderTargetMipmap(D)),G.isScene===!0&&G.onAfterRender(T,G,oe),Re.resetDefaultState(),M=-1,k=null,w.pop(),w.length>0?(C=w[w.length-1],Ne===!0&&Ke.setGlobalState(T.clippingPlanes,C.state.camera)):C=null,_.pop(),_.length>0?b=_[_.length-1]:b=null};function zt(G,oe,Ae,Ee){if(G.visible===!1)return;if(G.layers.test(oe.layers)){if(G.isGroup)Ae=G.renderOrder;else if(G.isLOD)G.autoUpdate===!0&&G.update(oe);else if(G.isLight)C.pushLight(G),G.castShadow&&C.pushShadow(G);else if(G.isSprite){if(!G.frustumCulled||Ue.intersectsSprite(G)){Ee&&je.setFromMatrixPosition(G.matrixWorld).applyMatrix4(Oe);const rt=N.update(G),st=G.material;st.visible&&b.push(G,rt,st,Ae,je.z,null)}}else if((G.isMesh||G.isLine||G.isPoints)&&(!G.frustumCulled||Ue.intersectsObject(G))){const rt=N.update(G),st=G.material;if(Ee&&(G.boundingSphere!==void 0?(G.boundingSphere===null&&G.computeBoundingSphere(),je.copy(G.boundingSphere.center)):(rt.boundingSphere===null&&rt.computeBoundingSphere(),je.copy(rt.boundingSphere.center)),je.applyMatrix4(G.matrixWorld).applyMatrix4(Oe)),Array.isArray(st)){const ot=rt.groups;for(let Ct=0,_t=ot.length;Ct<_t;Ct++){const wt=ot[Ct],nn=st[wt.materialIndex];nn&&nn.visible&&b.push(G,rt,nn,Ae,je.z,wt)}}else st.visible&&b.push(G,rt,st,Ae,je.z,null)}}const qe=G.children;for(let rt=0,st=qe.length;rt<st;rt++)zt(qe[rt],oe,Ae,Ee)}function Tn(G,oe,Ae,Ee){const fe=G.opaque,qe=G.transmissive,rt=G.transparent;C.setupLightsView(Ae),Ne===!0&&Ke.setGlobalState(T.clippingPlanes,Ae),Ee&&O.viewport(V.copy(Ee)),fe.length>0&&An(fe,oe,Ae),qe.length>0&&An(qe,oe,Ae),rt.length>0&&An(rt,oe,Ae),O.buffers.depth.setTest(!0),O.buffers.depth.setMask(!0),O.buffers.color.setMask(!0),O.setPolygonOffset(!1)}function zn(G,oe,Ae,Ee){if((Ae.isScene===!0?Ae.overrideMaterial:null)!==null)return;C.state.transmissionRenderTarget[Ee.id]===void 0&&(C.state.transmissionRenderTarget[Ee.id]=new ba(1,1,{generateMipmaps:!0,type:ne.has("EXT_color_buffer_half_float")||ne.has("EXT_color_buffer_float")?zd:$a,minFilter:Ga,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:cn.workingColorSpace}));const qe=C.state.transmissionRenderTarget[Ee.id],rt=Ee.viewport||V;qe.setSize(rt.z*T.transmissionResolutionScale,rt.w*T.transmissionResolutionScale);const st=T.getRenderTarget();T.setRenderTarget(qe),T.getClearColor(ae),z=T.getClearAlpha(),z<1&&T.setClearColor(16777215,.5),T.clear(),Ce&&ht.render(Ae);const ot=T.toneMapping;T.toneMapping=Wo;const Ct=Ee.viewport;if(Ee.viewport!==void 0&&(Ee.viewport=void 0),C.setupLightsView(Ee),Ne===!0&&Ke.setGlobalState(T.clippingPlanes,Ee),An(G,Ae,Ee),ee.updateMultisampleRenderTarget(qe),ee.updateRenderTargetMipmap(qe),ne.has("WEBGL_multisampled_render_to_texture")===!1){let _t=!1;for(let wt=0,nn=oe.length;wt<nn;wt++){const kt=oe[wt],jn=kt.object,Xn=kt.geometry,Xt=kt.material,Ti=kt.group;if(Xt.side===Qa&&jn.layers.test(Ee.layers)){const yt=Xt.side;Xt.side=Fr,Xt.needsUpdate=!0,sn(jn,Ae,Ee,Xn,Xt,Ti),Xt.side=yt,Xt.needsUpdate=!0,_t=!0}}_t===!0&&(ee.updateMultisampleRenderTarget(qe),ee.updateRenderTargetMipmap(qe))}T.setRenderTarget(st),T.setClearColor(ae,z),Ct!==void 0&&(Ee.viewport=Ct),T.toneMapping=ot}function An(G,oe,Ae){const Ee=oe.isScene===!0?oe.overrideMaterial:null;for(let fe=0,qe=G.length;fe<qe;fe++){const rt=G[fe],st=rt.object,ot=rt.geometry,Ct=Ee===null?rt.material:Ee,_t=rt.group;st.layers.test(Ae.layers)&&sn(st,oe,Ae,ot,Ct,_t)}}function sn(G,oe,Ae,Ee,fe,qe){G.onBeforeRender(T,oe,Ae,Ee,fe,qe),G.modelViewMatrix.multiplyMatrices(Ae.matrixWorldInverse,G.matrixWorld),G.normalMatrix.getNormalMatrix(G.modelViewMatrix),fe.onBeforeRender(T,oe,Ae,Ee,G,qe),fe.transparent===!0&&fe.side===Qa&&fe.forceSinglePass===!1?(fe.side=Fr,fe.needsUpdate=!0,T.renderBufferDirect(Ae,oe,Ee,fe,G,qe),fe.side=$o,fe.needsUpdate=!0,T.renderBufferDirect(Ae,oe,Ee,fe,G,qe),fe.side=Qa):T.renderBufferDirect(Ae,oe,Ee,fe,G,qe),G.onAfterRender(T,oe,Ae,Ee,fe,qe)}function Wt(G,oe,Ae){oe.isScene!==!0&&(oe=Me);const Ee=W.get(G),fe=C.state.lights,qe=C.state.shadowsArray,rt=fe.state.version,st=re.getParameters(G,fe.state,qe,oe,Ae),ot=re.getProgramCacheKey(st);let Ct=Ee.programs;Ee.environment=G.isMeshStandardMaterial?oe.environment:null,Ee.fog=oe.fog,Ee.envMap=(G.isMeshStandardMaterial?Te:he).get(G.envMap||Ee.environment),Ee.envMapRotation=Ee.environment!==null&&G.envMap===null?oe.environmentRotation:G.envMapRotation,Ct===void 0&&(G.addEventListener("dispose",it),Ct=new Map,Ee.programs=Ct);let _t=Ct.get(ot);if(_t!==void 0){if(Ee.currentProgram===_t&&Ee.lightsStateVersion===rt)return un(G,st),_t}else st.uniforms=re.getUniforms(G),G.onBeforeCompile(st,T),_t=re.acquireProgram(st,ot),Ct.set(ot,_t),Ee.uniforms=st.uniforms;const wt=Ee.uniforms;return(!G.isShaderMaterial&&!G.isRawShaderMaterial||G.clipping===!0)&&(wt.clippingPlanes=Ke.uniform),un(G,st),Ee.needsLights=ti(G),Ee.lightsStateVersion=rt,Ee.needsLights&&(wt.ambientLightColor.value=fe.state.ambient,wt.lightProbe.value=fe.state.probe,wt.directionalLights.value=fe.state.directional,wt.directionalLightShadows.value=fe.state.directionalShadow,wt.spotLights.value=fe.state.spot,wt.spotLightShadows.value=fe.state.spotShadow,wt.rectAreaLights.value=fe.state.rectArea,wt.ltc_1.value=fe.state.rectAreaLTC1,wt.ltc_2.value=fe.state.rectAreaLTC2,wt.pointLights.value=fe.state.point,wt.pointLightShadows.value=fe.state.pointShadow,wt.hemisphereLights.value=fe.state.hemi,wt.directionalShadowMap.value=fe.state.directionalShadowMap,wt.directionalShadowMatrix.value=fe.state.directionalShadowMatrix,wt.spotShadowMap.value=fe.state.spotShadowMap,wt.spotLightMatrix.value=fe.state.spotLightMatrix,wt.spotLightMap.value=fe.state.spotLightMap,wt.pointShadowMap.value=fe.state.pointShadowMap,wt.pointShadowMatrix.value=fe.state.pointShadowMatrix),Ee.currentProgram=_t,Ee.uniformsList=null,_t}function vi(G){if(G.uniformsList===null){const oe=G.currentProgram.getUniforms();G.uniformsList=dv.seqWithValue(oe.seq,G.uniforms)}return G.uniformsList}function un(G,oe){const Ae=W.get(G);Ae.outputColorSpace=oe.outputColorSpace,Ae.batching=oe.batching,Ae.batchingColor=oe.batchingColor,Ae.instancing=oe.instancing,Ae.instancingColor=oe.instancingColor,Ae.instancingMorph=oe.instancingMorph,Ae.skinning=oe.skinning,Ae.morphTargets=oe.morphTargets,Ae.morphNormals=oe.morphNormals,Ae.morphColors=oe.morphColors,Ae.morphTargetsCount=oe.morphTargetsCount,Ae.numClippingPlanes=oe.numClippingPlanes,Ae.numIntersection=oe.numClipIntersection,Ae.vertexAlphas=oe.vertexAlphas,Ae.vertexTangents=oe.vertexTangents,Ae.toneMapping=oe.toneMapping,Ae.numMultiviewViews=oe.numMultiviewViews}function an(G,oe,Ae,Ee,fe){oe.isScene!==!0&&(oe=Me),ee.resetTextureUnits();const qe=oe.fog,rt=Ee.isMeshStandardMaterial?oe.environment:null,st=D===null?T.outputColorSpace:D.isXRRenderTarget===!0?D.texture.colorSpace:Iu,ot=(Ee.isMeshStandardMaterial?Te:he).get(Ee.envMap||rt),Ct=Ee.vertexColors===!0&&!!Ae.attributes.color&&Ae.attributes.color.itemSize===4,_t=!!Ae.attributes.tangent&&(!!Ee.normalMap||Ee.anisotropy>0),wt=!!Ae.morphAttributes.position,nn=!!Ae.morphAttributes.normal,kt=!!Ae.morphAttributes.color;let jn=Wo;Ee.toneMapped&&(D===null||D.isXRRenderTarget===!0)&&(jn=T.toneMapping);const Xn=D&&D.isWebGLMultiviewRenderTarget?D.numViews:0,Xt=Ae.morphAttributes.position||Ae.morphAttributes.normal||Ae.morphAttributes.color,Ti=Xt!==void 0?Xt.length:0,yt=W.get(Ee),dc=C.state.lights;if(Ne===!0&&(Le===!0||G!==k)){const ni=G===k&&Ee.id===M;Ke.setState(Ee,G,ni)}let Ot=!1;Ee.version===yt.__version?(yt.needsLights&&yt.lightsStateVersion!==dc.state.version||yt.outputColorSpace!==st||fe.isBatchedMesh&&yt.batching===!1||!fe.isBatchedMesh&&yt.batching===!0||fe.isBatchedMesh&&yt.batchingColor===!0&&fe.colorTexture===null||fe.isBatchedMesh&&yt.batchingColor===!1&&fe.colorTexture!==null||fe.isInstancedMesh&&yt.instancing===!1||!fe.isInstancedMesh&&yt.instancing===!0||fe.isSkinnedMesh&&yt.skinning===!1||!fe.isSkinnedMesh&&yt.skinning===!0||fe.isInstancedMesh&&yt.instancingColor===!0&&fe.instanceColor===null||fe.isInstancedMesh&&yt.instancingColor===!1&&fe.instanceColor!==null||fe.isInstancedMesh&&yt.instancingMorph===!0&&fe.morphTexture===null||fe.isInstancedMesh&&yt.instancingMorph===!1&&fe.morphTexture!==null||yt.envMap!==ot||Ee.fog===!0&&yt.fog!==qe||yt.numClippingPlanes!==void 0&&(yt.numClippingPlanes!==Ke.numPlanes||yt.numIntersection!==Ke.numIntersection)||yt.vertexAlphas!==Ct||yt.vertexTangents!==_t||yt.morphTargets!==wt||yt.morphNormals!==nn||yt.morphColors!==kt||yt.toneMapping!==jn||yt.morphTargetsCount!==Ti||yt.numMultiviewViews!==Xn)&&(Ot=!0):(Ot=!0,yt.__version=Ee.version);let qi=yt.currentProgram;Ot===!0&&(qi=Wt(Ee,oe,fe));let os=!1,ia=!1,ls=!1;const gn=qi.getUniforms(),yi=yt.uniforms;if(O.useProgram(qi.program)&&(os=!0,ia=!0,ls=!0),Ee.id!==M&&(M=Ee.id,ia=!0),os||k!==G){qi.numMultiviewViews>0?(Xe.updateCameraProjectionMatricesUniform(G,gn),Xe.updateCameraViewMatricesUniform(G,gn)):(O.buffers.depth.getReversed()?(ue.copy(G.projectionMatrix),oq(ue),lq(ue),gn.setValue(Y,"projectionMatrix",ue)):gn.setValue(Y,"projectionMatrix",G.projectionMatrix),gn.setValue(Y,"viewMatrix",G.matrixWorldInverse));const ni=gn.map.cameraPosition;ni!==void 0&&ni.setValue(Y,Ge.setFromMatrixPosition(G.matrixWorld)),I.logarithmicDepthBuffer&&gn.setValue(Y,"logDepthBufFC",2/(Math.log(G.far+1)/Math.LN2)),(Ee.isMeshPhongMaterial||Ee.isMeshToonMaterial||Ee.isMeshLambertMaterial||Ee.isMeshBasicMaterial||Ee.isMeshStandardMaterial||Ee.isShaderMaterial)&&gn.setValue(Y,"isOrthographic",G.isOrthographicCamera===!0),k!==G&&(k=G,ia=!0,ls=!0)}if(fe.isSkinnedMesh){gn.setOptional(Y,fe,"bindMatrix"),gn.setOptional(Y,fe,"bindMatrixInverse");const ni=fe.skeleton;ni&&(ni.boneTexture===null&&ni.computeBoneTexture(),gn.setValue(Y,"boneTexture",ni.boneTexture,ee))}fe.isBatchedMesh&&(gn.setOptional(Y,fe,"batchingTexture"),gn.setValue(Y,"batchingTexture",fe._matricesTexture,ee),gn.setOptional(Y,fe,"batchingIdTexture"),gn.setValue(Y,"batchingIdTexture",fe._indirectTexture,ee),gn.setOptional(Y,fe,"batchingColorTexture"),fe._colorsTexture!==null&&gn.setValue(Y,"batchingColorTexture",fe._colorsTexture,ee));const Er=Ae.morphAttributes;if((Er.position!==void 0||Er.normal!==void 0||Er.color!==void 0)&&Ze.update(fe,Ae,qi),(ia||yt.receiveShadow!==fe.receiveShadow)&&(yt.receiveShadow=fe.receiveShadow,gn.setValue(Y,"receiveShadow",fe.receiveShadow)),Ee.isMeshGouraudMaterial&&Ee.envMap!==null&&(yi.envMap.value=ot,yi.flipEnvMap.value=ot.isCubeTexture&&ot.isRenderTargetTexture===!1?-1:1),Ee.isMeshStandardMaterial&&Ee.envMap===null&&oe.environment!==null&&(yi.envMapIntensity.value=oe.environmentIntensity),ia&&(gn.setValue(Y,"toneMappingExposure",T.toneMappingExposure),yt.needsLights&&br(yi,ls),qe&&Ee.fog===!0&&ge.refreshFogUniforms(yi,qe),ge.refreshMaterialUniforms(yi,Ee,ce,Z,C.state.transmissionRenderTarget[G.id]),dv.upload(Y,vi(yt),yi,ee)),Ee.isShaderMaterial&&Ee.uniformsNeedUpdate===!0&&(dv.upload(Y,vi(yt),yi,ee),Ee.uniformsNeedUpdate=!1),Ee.isSpriteMaterial&&gn.setValue(Y,"center",fe.center),qi.numMultiviewViews>0?Xe.updateObjectMatricesUniforms(fe,G,gn):(gn.setValue(Y,"modelViewMatrix",fe.modelViewMatrix),gn.setValue(Y,"normalMatrix",fe.normalMatrix)),gn.setValue(Y,"modelMatrix",fe.matrixWorld),Ee.isShaderMaterial||Ee.isRawShaderMaterial){const ni=Ee.uniformsGroups;for(let io=0,ro=ni.length;io<ro;io++){const Hu=ni[io];Ve.update(Hu,qi),Ve.bind(Hu,qi)}}return qi}function br(G,oe){G.ambientLightColor.needsUpdate=oe,G.lightProbe.needsUpdate=oe,G.directionalLights.needsUpdate=oe,G.directionalLightShadows.needsUpdate=oe,G.pointLights.needsUpdate=oe,G.pointLightShadows.needsUpdate=oe,G.spotLights.needsUpdate=oe,G.spotLightShadows.needsUpdate=oe,G.rectAreaLights.needsUpdate=oe,G.hemisphereLights.needsUpdate=oe}function ti(G){return G.isMeshLambertMaterial||G.isMeshToonMaterial||G.isMeshPhongMaterial||G.isMeshStandardMaterial||G.isShadowMaterial||G.isShaderMaterial&&G.lights===!0}this.setTexture2D=function(){var G=!1;return function(Ae,Ee){Ae&&Ae.isWebGLRenderTarget&&(G||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),G=!0),Ae=Ae.texture),ee.setTexture2D(Ae,Ee)}}(),this.getActiveCubeFace=function(){return R},this.getActiveMipmapLevel=function(){return P},this.getRenderTarget=function(){return D},this.setRenderTargetTextures=function(G,oe,Ae){W.get(G.texture).__webglTexture=oe,W.get(G.depthTexture).__webglTexture=Ae;const Ee=W.get(G);Ee.__hasExternalTextures=!0,Ee.__autoAllocateDepthBuffer=Ae===void 0,!Ee.__autoAllocateDepthBuffer&&(!D||!D.isWebGLMultiviewRenderTarget)&&ne.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Ee.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(G,oe){const Ae=W.get(G);Ae.__webglFramebuffer=oe,Ae.__useDefaultFramebuffer=oe===void 0};const On=Y.createFramebuffer();this.setRenderTarget=function(G,oe=0,Ae=0){G===null&&this.xr.isPresenting&&(G=this.xr.getRenderTarget()),D=G,R=oe,P=Ae;let Ee=!0,fe=null,qe=!1,rt=!1;if(G){const ot=W.get(G);if(ot.__useDefaultFramebuffer!==void 0)O.bindFramebuffer(Y.FRAMEBUFFER,null),Ee=!1;else if(ot.__webglFramebuffer===void 0)ee.setupRenderTarget(G);else if(ot.__hasExternalTextures)ee.rebindTextures(G,W.get(G.texture).__webglTexture,W.get(G.depthTexture).__webglTexture);else if(G.depthBuffer){const wt=G.depthTexture;if(ot.__boundDepthTexture!==wt){if(wt!==null&&W.has(wt)&&(G.width!==wt.image.width||G.height!==wt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ee.setupDepthRenderbuffer(G)}}const Ct=G.texture;(Ct.isData3DTexture||Ct.isDataArrayTexture||Ct.isCompressedArrayTexture)&&(rt=!0);const _t=W.get(G).__webglFramebuffer;G.isWebGLCubeRenderTarget?(Array.isArray(_t[oe])?fe=_t[oe][Ae]:fe=_t[oe],qe=!0):G.samples>0&&ee.useMultisampledRTT(G)===!1?fe=W.get(G).__webglMultisampledFramebuffer:Array.isArray(_t)?fe=_t[Ae]:fe=_t,V.copy(G.viewport),X.copy(G.scissor),$=G.scissorTest}else V.copy(me).multiplyScalar(ce).floor(),X.copy(be).multiplyScalar(ce).floor(),$=xe;if(Ae!==0&&(fe=On),O.bindFramebuffer(Y.FRAMEBUFFER,fe)&&Ee&&O.drawBuffers(G,fe),O.viewport(V),O.scissor(X),O.setScissorTest($),qe){const ot=W.get(G.texture);Y.framebufferTexture2D(Y.FRAMEBUFFER,Y.COLOR_ATTACHMENT0,Y.TEXTURE_CUBE_MAP_POSITIVE_X+oe,ot.__webglTexture,Ae)}else if(rt){const ot=W.get(G.texture),Ct=oe;Y.framebufferTextureLayer(Y.FRAMEBUFFER,Y.COLOR_ATTACHMENT0,ot.__webglTexture,Ae,Ct)}else if(G!==null&&Ae!==0){const ot=W.get(G.texture);Y.framebufferTexture2D(Y.FRAMEBUFFER,Y.COLOR_ATTACHMENT0,Y.TEXTURE_2D,ot.__webglTexture,Ae)}M=-1},this.readRenderTargetPixels=function(G,oe,Ae,Ee,fe,qe,rt){if(!(G&&G.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let st=W.get(G).__webglFramebuffer;if(G.isWebGLCubeRenderTarget&&rt!==void 0&&(st=st[rt]),st){O.bindFramebuffer(Y.FRAMEBUFFER,st);try{const ot=G.texture,Ct=ot.format,_t=ot.type;if(!I.textureFormatReadable(Ct)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!I.textureTypeReadable(_t)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}oe>=0&&oe<=G.width-Ee&&Ae>=0&&Ae<=G.height-fe&&Y.readPixels(oe,Ae,Ee,fe,J.convert(Ct),J.convert(_t),qe)}finally{const ot=D!==null?W.get(D).__webglFramebuffer:null;O.bindFramebuffer(Y.FRAMEBUFFER,ot)}}},this.readRenderTargetPixelsAsync=async function(G,oe,Ae,Ee,fe,qe,rt){if(!(G&&G.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let st=W.get(G).__webglFramebuffer;if(G.isWebGLCubeRenderTarget&&rt!==void 0&&(st=st[rt]),st){const ot=G.texture,Ct=ot.format,_t=ot.type;if(!I.textureFormatReadable(Ct))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!I.textureTypeReadable(_t))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(oe>=0&&oe<=G.width-Ee&&Ae>=0&&Ae<=G.height-fe){O.bindFramebuffer(Y.FRAMEBUFFER,st);const wt=Y.createBuffer();Y.bindBuffer(Y.PIXEL_PACK_BUFFER,wt),Y.bufferData(Y.PIXEL_PACK_BUFFER,qe.byteLength,Y.STREAM_READ),Y.readPixels(oe,Ae,Ee,fe,J.convert(Ct),J.convert(_t),0);const nn=D!==null?W.get(D).__webglFramebuffer:null;O.bindFramebuffer(Y.FRAMEBUFFER,nn);const kt=Y.fenceSync(Y.SYNC_GPU_COMMANDS_COMPLETE,0);return Y.flush(),await aq(Y,kt,4),Y.bindBuffer(Y.PIXEL_PACK_BUFFER,wt),Y.getBufferSubData(Y.PIXEL_PACK_BUFFER,0,qe),Y.deleteBuffer(wt),Y.deleteSync(kt),qe}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(G,oe=null,Ae=0){G.isTexture!==!0&&(nd("WebGLRenderer: copyFramebufferToTexture function signature has changed."),oe=arguments[0]||null,G=arguments[1]);const Ee=Math.pow(2,-Ae),fe=Math.floor(G.image.width*Ee),qe=Math.floor(G.image.height*Ee),rt=oe!==null?oe.x:0,st=oe!==null?oe.y:0;ee.setTexture2D(G,0),Y.copyTexSubImage2D(Y.TEXTURE_2D,Ae,0,0,rt,st,fe,qe),O.unbindTexture()};const Hn=Y.createFramebuffer(),na=Y.createFramebuffer();this.copyTextureToTexture=function(G,oe,Ae=null,Ee=null,fe=0,qe=null){G.isTexture!==!0&&(nd("WebGLRenderer: copyTextureToTexture function signature has changed."),Ee=arguments[0]||null,G=arguments[1],oe=arguments[2],qe=arguments[3]||0,Ae=null),qe===null&&(fe!==0?(nd("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),qe=fe,fe=0):qe=0);let rt,st,ot,Ct,_t,wt,nn,kt,jn;const Xn=G.isCompressedTexture?G.mipmaps[qe]:G.image;if(Ae!==null)rt=Ae.max.x-Ae.min.x,st=Ae.max.y-Ae.min.y,ot=Ae.isBox3?Ae.max.z-Ae.min.z:1,Ct=Ae.min.x,_t=Ae.min.y,wt=Ae.isBox3?Ae.min.z:0;else{const yi=Math.pow(2,-fe);rt=Math.floor(Xn.width*yi),st=Math.floor(Xn.height*yi),G.isDataArrayTexture?ot=Xn.depth:G.isData3DTexture?ot=Math.floor(Xn.depth*yi):ot=1,Ct=0,_t=0,wt=0}Ee!==null?(nn=Ee.x,kt=Ee.y,jn=Ee.z):(nn=0,kt=0,jn=0);const Xt=J.convert(oe.format),Ti=J.convert(oe.type);let yt;oe.isData3DTexture?(ee.setTexture3D(oe,0),yt=Y.TEXTURE_3D):oe.isDataArrayTexture||oe.isCompressedArrayTexture?(ee.setTexture2DArray(oe,0),yt=Y.TEXTURE_2D_ARRAY):(ee.setTexture2D(oe,0),yt=Y.TEXTURE_2D),Y.pixelStorei(Y.UNPACK_FLIP_Y_WEBGL,oe.flipY),Y.pixelStorei(Y.UNPACK_PREMULTIPLY_ALPHA_WEBGL,oe.premultiplyAlpha),Y.pixelStorei(Y.UNPACK_ALIGNMENT,oe.unpackAlignment);const dc=Y.getParameter(Y.UNPACK_ROW_LENGTH),Ot=Y.getParameter(Y.UNPACK_IMAGE_HEIGHT),qi=Y.getParameter(Y.UNPACK_SKIP_PIXELS),os=Y.getParameter(Y.UNPACK_SKIP_ROWS),ia=Y.getParameter(Y.UNPACK_SKIP_IMAGES);Y.pixelStorei(Y.UNPACK_ROW_LENGTH,Xn.width),Y.pixelStorei(Y.UNPACK_IMAGE_HEIGHT,Xn.height),Y.pixelStorei(Y.UNPACK_SKIP_PIXELS,Ct),Y.pixelStorei(Y.UNPACK_SKIP_ROWS,_t),Y.pixelStorei(Y.UNPACK_SKIP_IMAGES,wt);const ls=G.isDataArrayTexture||G.isData3DTexture,gn=oe.isDataArrayTexture||oe.isData3DTexture;if(G.isDepthTexture){const yi=W.get(G),Er=W.get(oe),ni=W.get(yi.__renderTarget),io=W.get(Er.__renderTarget);O.bindFramebuffer(Y.READ_FRAMEBUFFER,ni.__webglFramebuffer),O.bindFramebuffer(Y.DRAW_FRAMEBUFFER,io.__webglFramebuffer);for(let ro=0;ro<ot;ro++)ls&&(Y.framebufferTextureLayer(Y.READ_FRAMEBUFFER,Y.COLOR_ATTACHMENT0,W.get(G).__webglTexture,fe,wt+ro),Y.framebufferTextureLayer(Y.DRAW_FRAMEBUFFER,Y.COLOR_ATTACHMENT0,W.get(oe).__webglTexture,qe,jn+ro)),Y.blitFramebuffer(Ct,_t,rt,st,nn,kt,rt,st,Y.DEPTH_BUFFER_BIT,Y.NEAREST);O.bindFramebuffer(Y.READ_FRAMEBUFFER,null),O.bindFramebuffer(Y.DRAW_FRAMEBUFFER,null)}else if(fe!==0||G.isRenderTargetTexture||W.has(G)){const yi=W.get(G),Er=W.get(oe);O.bindFramebuffer(Y.READ_FRAMEBUFFER,Hn),O.bindFramebuffer(Y.DRAW_FRAMEBUFFER,na);for(let ni=0;ni<ot;ni++)ls?Y.framebufferTextureLayer(Y.READ_FRAMEBUFFER,Y.COLOR_ATTACHMENT0,yi.__webglTexture,fe,wt+ni):Y.framebufferTexture2D(Y.READ_FRAMEBUFFER,Y.COLOR_ATTACHMENT0,Y.TEXTURE_2D,yi.__webglTexture,fe),gn?Y.framebufferTextureLayer(Y.DRAW_FRAMEBUFFER,Y.COLOR_ATTACHMENT0,Er.__webglTexture,qe,jn+ni):Y.framebufferTexture2D(Y.DRAW_FRAMEBUFFER,Y.COLOR_ATTACHMENT0,Y.TEXTURE_2D,Er.__webglTexture,qe),fe!==0?Y.blitFramebuffer(Ct,_t,rt,st,nn,kt,rt,st,Y.COLOR_BUFFER_BIT,Y.NEAREST):gn?Y.copyTexSubImage3D(yt,qe,nn,kt,jn+ni,Ct,_t,rt,st):Y.copyTexSubImage2D(yt,qe,nn,kt,Ct,_t,rt,st);O.bindFramebuffer(Y.READ_FRAMEBUFFER,null),O.bindFramebuffer(Y.DRAW_FRAMEBUFFER,null)}else gn?G.isDataTexture||G.isData3DTexture?Y.texSubImage3D(yt,qe,nn,kt,jn,rt,st,ot,Xt,Ti,Xn.data):oe.isCompressedArrayTexture?Y.compressedTexSubImage3D(yt,qe,nn,kt,jn,rt,st,ot,Xt,Xn.data):Y.texSubImage3D(yt,qe,nn,kt,jn,rt,st,ot,Xt,Ti,Xn):G.isDataTexture?Y.texSubImage2D(Y.TEXTURE_2D,qe,nn,kt,rt,st,Xt,Ti,Xn.data):G.isCompressedTexture?Y.compressedTexSubImage2D(Y.TEXTURE_2D,qe,nn,kt,Xn.width,Xn.height,Xt,Xn.data):Y.texSubImage2D(Y.TEXTURE_2D,qe,nn,kt,rt,st,Xt,Ti,Xn);Y.pixelStorei(Y.UNPACK_ROW_LENGTH,dc),Y.pixelStorei(Y.UNPACK_IMAGE_HEIGHT,Ot),Y.pixelStorei(Y.UNPACK_SKIP_PIXELS,qi),Y.pixelStorei(Y.UNPACK_SKIP_ROWS,os),Y.pixelStorei(Y.UNPACK_SKIP_IMAGES,ia),qe===0&&oe.generateMipmaps&&Y.generateMipmap(yt),O.unbindTexture()},this.copyTextureToTexture3D=function(G,oe,Ae=null,Ee=null,fe=0){return G.isTexture!==!0&&(nd("WebGLRenderer: copyTextureToTexture3D function signature has changed."),Ae=arguments[0]||null,Ee=arguments[1]||null,G=arguments[2],oe=arguments[3],fe=arguments[4]||0),nd('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(G,oe,Ae,Ee,fe)},this.initRenderTarget=function(G){W.get(G).__webglFramebuffer===void 0&&ee.setupRenderTarget(G)},this.initTexture=function(G){G.isCubeTexture?ee.setTextureCube(G,0):G.isData3DTexture?ee.setTexture3D(G,0):G.isDataArrayTexture||G.isCompressedArrayTexture?ee.setTexture2DArray(G,0):ee.setTexture2D(G,0),O.unbindTexture()},this.resetState=function(){R=0,P=0,D=null,O.reset(),Re.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ga}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=cn._getDrawingBufferColorSpace(e),t.unpackColorSpace=cn._getUnpackColorSpace()}}const E$=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:uN,AddEquation:Ql,AddOperation:aN,AdditiveAnimationBlendMode:t2,AdditiveBlending:K1,AgXToneMapping:dN,AlphaFormat:YS,AlwaysCompare:MN,AlwaysDepth:Fv,AlwaysStencilFunc:ew,AmbientLight:EF,AnimationAction:RF,AnimationClip:Lm,AnimationLoader:Dj,AnimationMixer:oX,AnimationObjectGroup:sX,AnimationUtils:Tj,ArcCurve:qN,ArrayCamera:MF,ArrowHelper:RX,AttachedBindMode:$1,Audio:BF,AudioAnalyser:Yj,AudioContext:_2,AudioListener:qj,AudioLoader:Gj,AxesHelper:DX,BackSide:Fr,BasicDepthPacking:vN,BasicShadowMap:oW,BatchedMesh:HN,Bone:o2,BooleanKeyframeTrack:Qu,Box2:gX,Box3:Qr,Box3Helper:BX,BoxGeometry:Fu,BoxHelper:TX,BufferAttribute:Ln,BufferGeometry:Vt,BufferGeometryLoader:SF,ByteType:qS,Cache:No,Camera:gb,CameraHelper:MX,CanvasTexture:Zq,CapsuleGeometry:_b,CatmullRomCurve3:jN,CineonToneMapping:cN,CircleGeometry:wb,ClampToEdgeWrapping:Js,Clock:TF,Color:ut,ColorKeyframeTrack:E2,ColorManagement:cn,CompressedArrayTexture:Kq,CompressedCubeTexture:Jq,CompressedTexture:xb,CompressedTextureLoader:Lj,ConeGeometry:Sb,ConstantAlphaFactor:iN,ConstantColorFactor:tN,Controls:OX,CubeCamera:ON,CubeReflectionMapping:el,CubeRefractionMapping:ic,CubeTexture:Zm,CubeTextureLoader:Oj,CubeUVReflectionMapping:Qd,CubicBezierCurve:h2,CubicBezierCurve3:XN,CubicInterpolant:fF,CullFaceBack:Y1,CullFaceFront:Fk,CullFaceFrontBack:aW,CullFaceNone:Nk,Curve:xa,CurvePath:KN,CustomBlending:zk,CustomToneMapping:hN,CylinderGeometry:Gd,Cylindrical:AX,Data3DTexture:mb,DataArrayTexture:Jm,DataTexture:Ka,DataTextureLoader:Pj,DataUtils:Cq,DecrementStencilOp:EW,DecrementWrapStencilOp:CW,DefaultLoadingManager:AF,DepthFormat:Kl,DepthStencilFormat:Jl,DepthTexture:c2,DetachedBindMode:pN,DirectionalLight:bF,DirectionalLightHelper:SX,DiscreteInterpolant:pF,DodecahedronGeometry:Mb,DoubleSide:Qa,DstAlphaFactor:Kk,DstColorFactor:Zk,DynamicCopyUsage:NW,DynamicDrawUsage:DW,DynamicReadUsage:PW,EdgesGeometry:JN,EllipseCurve:Cb,EqualCompare:CN,EqualDepth:zv,EqualStencilFunc:MW,EquirectangularReflectionMapping:gm,EquirectangularRefractionMapping:vm,Euler:Os,EventDispatcher:to,ExtrudeGeometry:Bb,FileLoader:nl,Float16BufferAttribute:Iq,Float32BufferAttribute:mt,FloatType:Or,Fog:yb,FogExp2:vb,FramebufferTexture:Yq,FrontSide:$o,Frustum:$m,GLBufferAttribute:fX,GLSL1:QW,GLSL3:tw,GreaterCompare:_N,GreaterDepth:Gv,GreaterEqualCompare:SN,GreaterEqualDepth:Hv,GreaterEqualStencilFunc:RW,GreaterStencilFunc:BW,GridHelper:_X,Group:ld,HalfFloatType:zd,HemisphereLight:gF,HemisphereLightHelper:CX,IcosahedronGeometry:Ib,ImageBitmapLoader:Hj,ImageLoader:Om,ImageUtils:IN,IncrementStencilOp:bW,IncrementWrapStencilOp:xW,InstancedBufferAttribute:Ld,InstancedBufferGeometry:wF,InstancedInterleavedBuffer:dX,InstancedMesh:zN,Int16BufferAttribute:Tq,Int32BufferAttribute:Bq,Int8BufferAttribute:wq,IntType:ob,InterleavedBuffer:bb,InterleavedBufferAttribute:Ru,Interpolant:iA,InterpolateDiscrete:Em,InterpolateLinear:gy,InterpolateSmooth:uv,InvertStencilOp:_W,KeepStencilOp:nu,KeyframeTrack:Ca,LOD:FN,LatheGeometry:eA,Layers:Ab,LessCompare:xN,LessDepth:Qv,LessEqualCompare:n2,LessEqualDepth:Bu,LessEqualStencilFunc:TW,LessStencilFunc:SW,Light:hc,LightProbe:_F,Line:rc,Line3:vX,LineBasicMaterial:zr,LineCurve:d2,LineCurve3:YN,LineDashedMaterial:uF,LineLoop:GN,LineSegments:no,LinearFilter:Ui,LinearInterpolant:b2,LinearMipMapLinearFilter:hW,LinearMipMapNearestFilter:uW,LinearMipmapLinearFilter:Ga,LinearMipmapNearestFilter:qp,LinearSRGBColorSpace:Iu,LinearToneMapping:oN,LinearTransfer:Cm,Loader:as,LoaderUtils:aw,LoadingManager:x2,LoopOnce:mN,LoopPingPong:gN,LoopRepeat:AN,LuminanceAlphaFormat:ZS,LuminanceFormat:JS,MOUSE:rW,Material:yr,MaterialLoader:Nb,MathUtils:rq,Matrix2:T2,Matrix3:Pt,Matrix4:It,MaxEquation:Wk,Mesh:Mi,MeshBasicMaterial:cc,MeshDepthMaterial:g2,MeshDistanceMaterial:v2,MeshLambertMaterial:lF,MeshMatcapMaterial:cF,MeshNormalMaterial:oF,MeshPhongMaterial:sF,MeshPhysicalMaterial:rF,MeshStandardMaterial:A2,MeshToonMaterial:aF,MinEquation:Vk,MirroredRepeatWrapping:bm,MixOperation:sN,MultiplyBlending:Z1,MultiplyOperation:Ym,NearestFilter:rr,NearestMipMapLinearFilter:cW,NearestMipMapNearestFilter:lW,NearestMipmapLinearFilter:ad,NearestMipmapNearestFilter:WS,NeutralToneMapping:fN,NeverCompare:EN,NeverDepth:Nv,NeverStencilFunc:wW,NoBlending:Vo,NoColorSpace:Po,NoToneMapping:Wo,NormalAnimationBlendMode:fb,NormalBlending:yu,NotEqualCompare:wN,NotEqualDepth:Vv,NotEqualStencilFunc:IW,NumberKeyframeTrack:Rm,Object3D:fn,ObjectLoader:Qj,ObjectSpaceNormalMap:bN,OctahedronGeometry:tA,OneFactor:jk,OneMinusConstantAlphaFactor:rN,OneMinusConstantColorFactor:nN,OneMinusDstAlphaFactor:Jk,OneMinusDstColorFactor:$k,OneMinusSrcAlphaFactor:kv,OneMinusSrcColorFactor:Yk,OrthographicCamera:kb,PCFShadowMap:VS,PCFSoftShadowMap:Qk,PMREMGenerator:cw,Path:Mm,PerspectiveCamera:$i,Plane:Nl,PlaneGeometry:Vd,PlaneHelper:IX,PointLight:yF,PointLightHelper:EX,Points:VN,PointsMaterial:l2,PolarGridHelper:wX,PolyhedronGeometry:uc,PositionalAudio:Xj,PropertyBinding:hn,PropertyMixer:IF,QuadraticBezierCurve:f2,QuadraticBezierCurve3:p2,Quaternion:is,QuaternionKeyframeTrack:rA,QuaternionLinearInterpolant:mF,RED_GREEN_RGTC2_Format:my,RED_RGTC1_Format:e2,REVISION:sb,RGBADepthPacking:yN,RGBAFormat:kr,RGBAIntegerFormat:db,RGBA_ASTC_10x10_Format:cy,RGBA_ASTC_10x5_Format:ay,RGBA_ASTC_10x6_Format:oy,RGBA_ASTC_10x8_Format:ly,RGBA_ASTC_12x10_Format:uy,RGBA_ASTC_12x12_Format:hy,RGBA_ASTC_4x4_Format:Zv,RGBA_ASTC_5x4_Format:$v,RGBA_ASTC_5x5_Format:ey,RGBA_ASTC_6x5_Format:ty,RGBA_ASTC_6x6_Format:ny,RGBA_ASTC_8x5_Format:iy,RGBA_ASTC_8x6_Format:ry,RGBA_ASTC_8x8_Format:sy,RGBA_BPTC_Format:Jp,RGBA_ETC2_EAC_Format:Jv,RGBA_PVRTC_2BPPV1_Format:Xv,RGBA_PVRTC_4BPPV1_Format:jv,RGBA_S3TC_DXT1_Format:Xp,RGBA_S3TC_DXT3_Format:Yp,RGBA_S3TC_DXT5_Format:Kp,RGBDepthPacking:AW,RGBFormat:KS,RGBIntegerFormat:dW,RGB_BPTC_SIGNED_Format:dy,RGB_BPTC_UNSIGNED_Format:fy,RGB_ETC1_Format:Yv,RGB_ETC2_Format:Kv,RGB_PVRTC_2BPPV1_Format:qv,RGB_PVRTC_4BPPV1_Format:Wv,RGB_S3TC_DXT1_Format:jp,RGDepthPacking:gW,RGFormat:$S,RGIntegerFormat:hb,RawShaderMaterial:iF,Ray:Hd,Raycaster:pX,RectAreaLight:xF,RedFormat:ub,RedIntegerFormat:Km,ReinhardToneMapping:lN,RenderTarget:pb,RenderTarget3D:lX,RenderTargetArray:cX,RepeatWrapping:ym,ReplaceStencilOp:yW,ReverseSubtractEquation:Gk,RingGeometry:Rb,SIGNED_RED_GREEN_RGTC2_Format:Ay,SIGNED_RED_RGTC1_Format:py,SRGBColorSpace:Kr,SRGBTransfer:Sn,Scene:UN,ShaderChunk:Gt,ShaderLib:pa,ShaderMaterial:Ea,ShadowMaterial:nF,Shape:Eu,ShapeGeometry:Db,ShapePath:LX,ShapeUtils:Ja,ShortType:jS,Skeleton:Eb,SkeletonHelper:bX,SkinnedMesh:QN,Source:uu,Sphere:vr,SphereGeometry:nA,Spherical:mX,SphericalHarmonics3:CF,SplineCurve:m2,SpotLight:vF,SpotLightHelper:yX,Sprite:NN,SpriteMaterial:a2,SrcAlphaFactor:Uv,SrcAlphaSaturateFactor:eN,SrcColorFactor:Xk,StaticCopyUsage:kW,StaticDrawUsage:_m,StaticReadUsage:OW,StereoCamera:Vj,StreamCopyUsage:FW,StreamDrawUsage:LW,StreamReadUsage:UW,StringKeyframeTrack:zu,SubtractEquation:Hk,SubtractiveBlending:J1,TOUCH:sW,TangentSpaceNormalMap:lc,TetrahedronGeometry:Lb,Texture:ci,TextureLoader:Uj,TextureUtils:FX,TimestampQuery:zW,TorusGeometry:Ob,TorusKnotGeometry:Pb,Triangle:Jr,TriangleFanDrawMode:mW,TriangleStripDrawMode:pW,TrianglesDrawMode:fW,TubeGeometry:Ub,UVMapping:ab,Uint16BufferAttribute:r2,Uint32BufferAttribute:s2,Uint8BufferAttribute:Sq,Uint8ClampedBufferAttribute:Mq,Uniform:M2,UniformsGroup:hX,UniformsLib:lt,UniformsUtils:LN,UnsignedByteType:$a,UnsignedInt248Type:Yl,UnsignedInt5999Type:XS,UnsignedIntType:tl,UnsignedShort4444Type:lb,UnsignedShort5551Type:cb,UnsignedShortType:Id,VSMShadowMap:Da,Vector2:He,Vector3:K,Vector4:dn,VectorKeyframeTrack:Dm,VideoFrameTexture:Xq,VideoTexture:WN,WebGL3DRenderTarget:fq,WebGLArrayRenderTarget:dq,WebGLCoordinateSystem:ga,WebGLCubeRenderTarget:PN,WebGLRenderTarget:ba,WebGLRenderer:b$,WebGLUtils:NF,WebGPUCoordinateSystem:wm,WebXRController:hv,WireframeGeometry:tF,WrapAroundEnding:xm,ZeroCurvatureEnding:lu,ZeroFactor:qk,ZeroSlopeEnding:cu,ZeroStencilOp:vW,createCanvasElement:BN},Symbol.toStringTag,{value:"Module"}));var x$={},QF={8167:n=>{var e=Object.prototype.toString;n.exports=function(t){return t.BYTES_PER_ELEMENT&&e.call(t.buffer)==="[object ArrayBuffer]"||Array.isArray(t)}},5734:n=>{n.exports=function(e,t){return typeof e=="number"?e:typeof t=="number"?t:0}},7961:(n,e)=>{e.byteLength=function(h){var d=o(h),p=d[0],m=d[1];return 3*(p+m)/4-m},e.toByteArray=function(h){var d,p,m=o(h),A=m[0],v=m[1],y=new r(function(C,_,w){return 3*(_+w)/4-w}(0,A,v)),E=0,b=v>0?A-4:A;for(p=0;p<b;p+=4)d=i[h.charCodeAt(p)]<<18|i[h.charCodeAt(p+1)]<<12|i[h.charCodeAt(p+2)]<<6|i[h.charCodeAt(p+3)],y[E++]=d>>16&255,y[E++]=d>>8&255,y[E++]=255&d;return v===2&&(d=i[h.charCodeAt(p)]<<2|i[h.charCodeAt(p+1)]>>4,y[E++]=255&d),v===1&&(d=i[h.charCodeAt(p)]<<10|i[h.charCodeAt(p+1)]<<4|i[h.charCodeAt(p+2)]>>2,y[E++]=d>>8&255,y[E++]=255&d),y},e.fromByteArray=function(h){for(var d,p=h.length,m=p%3,A=[],v=16383,y=0,E=p-m;y<E;y+=v)A.push(c(h,y,y+v>E?E:y+v));return m===1?(d=h[p-1],A.push(t[d>>2]+t[d<<4&63]+"==")):m===2&&(d=(h[p-2]<<8)+h[p-1],A.push(t[d>>10]+t[d>>4&63]+t[d<<2&63]+"=")),A.join("")};for(var t=[],i=[],r=typeof Uint8Array<"u"?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)t[a]=s[a],i[s.charCodeAt(a)]=a;function o(h){var d=h.length;if(d%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var p=h.indexOf("=");return p===-1&&(p=d),[p,p===d?0:4-p%4]}function c(h,d,p){for(var m,A,v=[],y=d;y<p;y+=3)m=(h[y]<<16&16711680)+(h[y+1]<<8&65280)+(255&h[y+2]),v.push(t[(A=m)>>18&63]+t[A>>12&63]+t[A>>6&63]+t[63&A]);return v.join("")}i[45]=62,i[95]=63},911:(n,e,t)=>{var i=t(9922).hp;n.exports=function(r,s){if(i.isBuffer(r)&&i.isBuffer(s)){if(typeof r.equals=="function")return r.equals(s);if(r.length!==s.length)return!1;for(var a=0;a<r.length;a++)if(r[a]!==s[a])return!1;return!0}}},9922:(n,e,t)=>{const i=t(7961),r=t(1024),s=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.hp=c,e.IS=50;const a=2147483647;function o(I){if(I>a)throw new RangeError('The value "'+I+'" is invalid for option "size"');const O=new Uint8Array(I);return Object.setPrototypeOf(O,c.prototype),O}function c(I,O,Q){if(typeof I=="number"){if(typeof O=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(I)}return h(I,O,Q)}function h(I,O,Q){if(typeof I=="string")return function(he,Te){if(typeof Te=="string"&&Te!==""||(Te="utf8"),!c.isEncoding(Te))throw new TypeError("Unknown encoding: "+Te);const Ye=0|y(he,Te);let q=o(Ye);const N=q.write(he,Te);return N!==Ye&&(q=q.slice(0,N)),q}(I,O);if(ArrayBuffer.isView(I))return function(he){if(Ce(he,Uint8Array)){const Te=new Uint8Array(he);return A(Te.buffer,Te.byteOffset,Te.byteLength)}return m(he)}(I);if(I==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof I);if(Ce(I,ArrayBuffer)||I&&Ce(I.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ce(I,SharedArrayBuffer)||I&&Ce(I.buffer,SharedArrayBuffer)))return A(I,O,Q);if(typeof I=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const W=I.valueOf&&I.valueOf();if(W!=null&&W!==I)return c.from(W,O,Q);const ee=function(he){if(c.isBuffer(he)){const Te=0|v(he.length),Ye=o(Te);return Ye.length===0||he.copy(Ye,0,0,Te),Ye}return he.length!==void 0?typeof he.length!="number"||Be(he.length)?o(0):m(he):he.type==="Buffer"&&Array.isArray(he.data)?m(he.data):void 0}(I);if(ee)return ee;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof I[Symbol.toPrimitive]=="function")return c.from(I[Symbol.toPrimitive]("string"),O,Q);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof I)}function d(I){if(typeof I!="number")throw new TypeError('"size" argument must be of type number');if(I<0)throw new RangeError('The value "'+I+'" is invalid for option "size"')}function p(I){return d(I),o(I<0?0:0|v(I))}function m(I){const O=I.length<0?0:0|v(I.length),Q=o(O);for(let W=0;W<O;W+=1)Q[W]=255&I[W];return Q}function A(I,O,Q){if(O<0||I.byteLength<O)throw new RangeError('"offset" is outside of buffer bounds');if(I.byteLength<O+(Q||0))throw new RangeError('"length" is outside of buffer bounds');let W;return W=O===void 0&&Q===void 0?new Uint8Array(I):Q===void 0?new Uint8Array(I,O):new Uint8Array(I,O,Q),Object.setPrototypeOf(W,c.prototype),W}function v(I){if(I>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|I}function y(I,O){if(c.isBuffer(I))return I.length;if(ArrayBuffer.isView(I)||Ce(I,ArrayBuffer))return I.byteLength;if(typeof I!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof I);const Q=I.length,W=arguments.length>2&&arguments[2]===!0;if(!W&&Q===0)return 0;let ee=!1;for(;;)switch(O){case"ascii":case"latin1":case"binary":return Q;case"utf8":case"utf-8":return Ge(I).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*Q;case"hex":return Q>>>1;case"base64":return je(I).length;default:if(ee)return W?-1:Ge(I).length;O=(""+O).toLowerCase(),ee=!0}}function E(I,O,Q){let W=!1;if((O===void 0||O<0)&&(O=0),O>this.length||((Q===void 0||Q>this.length)&&(Q=this.length),Q<=0)||(Q>>>=0)<=(O>>>=0))return"";for(I||(I="utf8");;)switch(I){case"hex":return $(this,O,Q);case"utf8":case"utf-8":return M(this,O,Q);case"ascii":return V(this,O,Q);case"latin1":case"binary":return X(this,O,Q);case"base64":return D(this,O,Q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ae(this,O,Q);default:if(W)throw new TypeError("Unknown encoding: "+I);I=(I+"").toLowerCase(),W=!0}}function b(I,O,Q){const W=I[O];I[O]=I[Q],I[Q]=W}function C(I,O,Q,W,ee){if(I.length===0)return-1;if(typeof Q=="string"?(W=Q,Q=0):Q>2147483647?Q=2147483647:Q<-2147483648&&(Q=-2147483648),Be(Q=+Q)&&(Q=ee?0:I.length-1),Q<0&&(Q=I.length+Q),Q>=I.length){if(ee)return-1;Q=I.length-1}else if(Q<0){if(!ee)return-1;Q=0}if(typeof O=="string"&&(O=c.from(O,W)),c.isBuffer(O))return O.length===0?-1:_(I,O,Q,W,ee);if(typeof O=="number")return O&=255,typeof Uint8Array.prototype.indexOf=="function"?ee?Uint8Array.prototype.indexOf.call(I,O,Q):Uint8Array.prototype.lastIndexOf.call(I,O,Q):_(I,[O],Q,W,ee);throw new TypeError("val must be string, number or Buffer")}function _(I,O,Q,W,ee){let he,Te=1,Ye=I.length,q=O.length;if(W!==void 0&&((W=String(W).toLowerCase())==="ucs2"||W==="ucs-2"||W==="utf16le"||W==="utf-16le")){if(I.length<2||O.length<2)return-1;Te=2,Ye/=2,q/=2,Q/=2}function N(re,ge){return Te===1?re[ge]:re.readUInt16BE(ge*Te)}if(ee){let re=-1;for(he=Q;he<Ye;he++)if(N(I,he)===N(O,re===-1?0:he-re)){if(re===-1&&(re=he),he-re+1===q)return re*Te}else re!==-1&&(he-=he-re),re=-1}else for(Q+q>Ye&&(Q=Ye-q),he=Q;he>=0;he--){let re=!0;for(let ge=0;ge<q;ge++)if(N(I,he+ge)!==N(O,ge)){re=!1;break}if(re)return he}return-1}function w(I,O,Q,W){Q=Number(Q)||0;const ee=I.length-Q;W?(W=Number(W))>ee&&(W=ee):W=ee;const he=O.length;let Te;for(W>he/2&&(W=he/2),Te=0;Te<W;++Te){const Ye=parseInt(O.substr(2*Te,2),16);if(Be(Ye))return Te;I[Q+Te]=Ye}return Te}function T(I,O,Q,W){return Me(Ge(O,I.length-Q),I,Q,W)}function L(I,O,Q,W){return Me(function(ee){const he=[];for(let Te=0;Te<ee.length;++Te)he.push(255&ee.charCodeAt(Te));return he}(O),I,Q,W)}function R(I,O,Q,W){return Me(je(O),I,Q,W)}function P(I,O,Q,W){return Me(function(ee,he){let Te,Ye,q;const N=[];for(let re=0;re<ee.length&&!((he-=2)<0);++re)Te=ee.charCodeAt(re),Ye=Te>>8,q=Te%256,N.push(q),N.push(Ye);return N}(O,I.length-Q),I,Q,W)}function D(I,O,Q){return O===0&&Q===I.length?i.fromByteArray(I):i.fromByteArray(I.slice(O,Q))}function M(I,O,Q){Q=Math.min(I.length,Q);const W=[];let ee=O;for(;ee<Q;){const he=I[ee];let Te=null,Ye=he>239?4:he>223?3:he>191?2:1;if(ee+Ye<=Q){let q,N,re,ge;switch(Ye){case 1:he<128&&(Te=he);break;case 2:q=I[ee+1],(192&q)==128&&(ge=(31&he)<<6|63&q,ge>127&&(Te=ge));break;case 3:q=I[ee+1],N=I[ee+2],(192&q)==128&&(192&N)==128&&(ge=(15&he)<<12|(63&q)<<6|63&N,ge>2047&&(ge<55296||ge>57343)&&(Te=ge));break;case 4:q=I[ee+1],N=I[ee+2],re=I[ee+3],(192&q)==128&&(192&N)==128&&(192&re)==128&&(ge=(15&he)<<18|(63&q)<<12|(63&N)<<6|63&re,ge>65535&&ge<1114112&&(Te=ge))}}Te===null?(Te=65533,Ye=1):Te>65535&&(Te-=65536,W.push(Te>>>10&1023|55296),Te=56320|1023&Te),W.push(Te),ee+=Ye}return function(he){const Te=he.length;if(Te<=k)return String.fromCharCode.apply(String,he);let Ye="",q=0;for(;q<Te;)Ye+=String.fromCharCode.apply(String,he.slice(q,q+=k));return Ye}(W)}c.TYPED_ARRAY_SUPPORT=function(){try{const I=new Uint8Array(1),O={foo:function(){return 42}};return Object.setPrototypeOf(O,Uint8Array.prototype),Object.setPrototypeOf(I,O),I.foo()===42}catch{return!1}}(),c.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(I,O,Q){return h(I,O,Q)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(I,O,Q){return function(W,ee,he){return d(W),W<=0?o(W):ee!==void 0?typeof he=="string"?o(W).fill(ee,he):o(W).fill(ee):o(W)}(I,O,Q)},c.allocUnsafe=function(I){return p(I)},c.allocUnsafeSlow=function(I){return p(I)},c.isBuffer=function(I){return I!=null&&I._isBuffer===!0&&I!==c.prototype},c.compare=function(I,O){if(Ce(I,Uint8Array)&&(I=c.from(I,I.offset,I.byteLength)),Ce(O,Uint8Array)&&(O=c.from(O,O.offset,O.byteLength)),!c.isBuffer(I)||!c.isBuffer(O))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(I===O)return 0;let Q=I.length,W=O.length;for(let ee=0,he=Math.min(Q,W);ee<he;++ee)if(I[ee]!==O[ee]){Q=I[ee],W=O[ee];break}return Q<W?-1:W<Q?1:0},c.isEncoding=function(I){switch(String(I).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(I,O){if(!Array.isArray(I))throw new TypeError('"list" argument must be an Array of Buffers');if(I.length===0)return c.alloc(0);let Q;if(O===void 0)for(O=0,Q=0;Q<I.length;++Q)O+=I[Q].length;const W=c.allocUnsafe(O);let ee=0;for(Q=0;Q<I.length;++Q){let he=I[Q];if(Ce(he,Uint8Array))ee+he.length>W.length?(c.isBuffer(he)||(he=c.from(he)),he.copy(W,ee)):Uint8Array.prototype.set.call(W,he,ee);else{if(!c.isBuffer(he))throw new TypeError('"list" argument must be an Array of Buffers');he.copy(W,ee)}ee+=he.length}return W},c.byteLength=y,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const I=this.length;if(I%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let O=0;O<I;O+=2)b(this,O,O+1);return this},c.prototype.swap32=function(){const I=this.length;if(I%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let O=0;O<I;O+=4)b(this,O,O+3),b(this,O+1,O+2);return this},c.prototype.swap64=function(){const I=this.length;if(I%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let O=0;O<I;O+=8)b(this,O,O+7),b(this,O+1,O+6),b(this,O+2,O+5),b(this,O+3,O+4);return this},c.prototype.toString=function(){const I=this.length;return I===0?"":arguments.length===0?M(this,0,I):E.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(I){if(!c.isBuffer(I))throw new TypeError("Argument must be a Buffer");return this===I||c.compare(this,I)===0},c.prototype.inspect=function(){let I="";const O=e.IS;return I=this.toString("hex",0,O).replace(/(.{2})/g,"$1 ").trim(),this.length>O&&(I+=" ... "),"<Buffer "+I+">"},s&&(c.prototype[s]=c.prototype.inspect),c.prototype.compare=function(I,O,Q,W,ee){if(Ce(I,Uint8Array)&&(I=c.from(I,I.offset,I.byteLength)),!c.isBuffer(I))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof I);if(O===void 0&&(O=0),Q===void 0&&(Q=I?I.length:0),W===void 0&&(W=0),ee===void 0&&(ee=this.length),O<0||Q>I.length||W<0||ee>this.length)throw new RangeError("out of range index");if(W>=ee&&O>=Q)return 0;if(W>=ee)return-1;if(O>=Q)return 1;if(this===I)return 0;let he=(ee>>>=0)-(W>>>=0),Te=(Q>>>=0)-(O>>>=0);const Ye=Math.min(he,Te),q=this.slice(W,ee),N=I.slice(O,Q);for(let re=0;re<Ye;++re)if(q[re]!==N[re]){he=q[re],Te=N[re];break}return he<Te?-1:Te<he?1:0},c.prototype.includes=function(I,O,Q){return this.indexOf(I,O,Q)!==-1},c.prototype.indexOf=function(I,O,Q){return C(this,I,O,Q,!0)},c.prototype.lastIndexOf=function(I,O,Q){return C(this,I,O,Q,!1)},c.prototype.write=function(I,O,Q,W){if(O===void 0)W="utf8",Q=this.length,O=0;else if(Q===void 0&&typeof O=="string")W=O,Q=this.length,O=0;else{if(!isFinite(O))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");O>>>=0,isFinite(Q)?(Q>>>=0,W===void 0&&(W="utf8")):(W=Q,Q=void 0)}const ee=this.length-O;if((Q===void 0||Q>ee)&&(Q=ee),I.length>0&&(Q<0||O<0)||O>this.length)throw new RangeError("Attempt to write outside buffer bounds");W||(W="utf8");let he=!1;for(;;)switch(W){case"hex":return w(this,I,O,Q);case"utf8":case"utf-8":return T(this,I,O,Q);case"ascii":case"latin1":case"binary":return L(this,I,O,Q);case"base64":return R(this,I,O,Q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,I,O,Q);default:if(he)throw new TypeError("Unknown encoding: "+W);W=(""+W).toLowerCase(),he=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const k=4096;function V(I,O,Q){let W="";Q=Math.min(I.length,Q);for(let ee=O;ee<Q;++ee)W+=String.fromCharCode(127&I[ee]);return W}function X(I,O,Q){let W="";Q=Math.min(I.length,Q);for(let ee=O;ee<Q;++ee)W+=String.fromCharCode(I[ee]);return W}function $(I,O,Q){const W=I.length;(!O||O<0)&&(O=0),(!Q||Q<0||Q>W)&&(Q=W);let ee="";for(let he=O;he<Q;++he)ee+=Y[I[he]];return ee}function ae(I,O,Q){const W=I.slice(O,Q);let ee="";for(let he=0;he<W.length-1;he+=2)ee+=String.fromCharCode(W[he]+256*W[he+1]);return ee}function z(I,O,Q){if(I%1!=0||I<0)throw new RangeError("offset is not uint");if(I+O>Q)throw new RangeError("Trying to access beyond buffer length")}function j(I,O,Q,W,ee,he){if(!c.isBuffer(I))throw new TypeError('"buffer" argument must be a Buffer instance');if(O>ee||O<he)throw new RangeError('"value" argument is out of bounds');if(Q+W>I.length)throw new RangeError("Index out of range")}function Z(I,O,Q,W,ee){Ne(O,W,ee,I,Q,7);let he=Number(O&BigInt(4294967295));I[Q++]=he,he>>=8,I[Q++]=he,he>>=8,I[Q++]=he,he>>=8,I[Q++]=he;let Te=Number(O>>BigInt(32)&BigInt(4294967295));return I[Q++]=Te,Te>>=8,I[Q++]=Te,Te>>=8,I[Q++]=Te,Te>>=8,I[Q++]=Te,Q}function ce(I,O,Q,W,ee){Ne(O,W,ee,I,Q,7);let he=Number(O&BigInt(4294967295));I[Q+7]=he,he>>=8,I[Q+6]=he,he>>=8,I[Q+5]=he,he>>=8,I[Q+4]=he;let Te=Number(O>>BigInt(32)&BigInt(4294967295));return I[Q+3]=Te,Te>>=8,I[Q+2]=Te,Te>>=8,I[Q+1]=Te,Te>>=8,I[Q]=Te,Q+8}function U(I,O,Q,W,ee,he){if(Q+W>I.length)throw new RangeError("Index out of range");if(Q<0)throw new RangeError("Index out of range")}function se(I,O,Q,W,ee){return O=+O,Q>>>=0,ee||U(I,0,Q,4),r.write(I,O,Q,W,23,4),Q+4}function me(I,O,Q,W,ee){return O=+O,Q>>>=0,ee||U(I,0,Q,8),r.write(I,O,Q,W,52,8),Q+8}c.prototype.slice=function(I,O){const Q=this.length;(I=~~I)<0?(I+=Q)<0&&(I=0):I>Q&&(I=Q),(O=O===void 0?Q:~~O)<0?(O+=Q)<0&&(O=0):O>Q&&(O=Q),O<I&&(O=I);const W=this.subarray(I,O);return Object.setPrototypeOf(W,c.prototype),W},c.prototype.readUintLE=c.prototype.readUIntLE=function(I,O,Q){I>>>=0,O>>>=0,Q||z(I,O,this.length);let W=this[I],ee=1,he=0;for(;++he<O&&(ee*=256);)W+=this[I+he]*ee;return W},c.prototype.readUintBE=c.prototype.readUIntBE=function(I,O,Q){I>>>=0,O>>>=0,Q||z(I,O,this.length);let W=this[I+--O],ee=1;for(;O>0&&(ee*=256);)W+=this[I+--O]*ee;return W},c.prototype.readUint8=c.prototype.readUInt8=function(I,O){return I>>>=0,O||z(I,1,this.length),this[I]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(I,O){return I>>>=0,O||z(I,2,this.length),this[I]|this[I+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(I,O){return I>>>=0,O||z(I,2,this.length),this[I]<<8|this[I+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(I,O){return I>>>=0,O||z(I,4,this.length),(this[I]|this[I+1]<<8|this[I+2]<<16)+16777216*this[I+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(I,O){return I>>>=0,O||z(I,4,this.length),16777216*this[I]+(this[I+1]<<16|this[I+2]<<8|this[I+3])},c.prototype.readBigUInt64LE=ze(function(I){Le(I>>>=0,"offset");const O=this[I],Q=this[I+7];O!==void 0&&Q!==void 0||ue(I,this.length-8);const W=O+256*this[++I]+65536*this[++I]+this[++I]*2**24,ee=this[++I]+256*this[++I]+65536*this[++I]+Q*2**24;return BigInt(W)+(BigInt(ee)<<BigInt(32))}),c.prototype.readBigUInt64BE=ze(function(I){Le(I>>>=0,"offset");const O=this[I],Q=this[I+7];O!==void 0&&Q!==void 0||ue(I,this.length-8);const W=O*2**24+65536*this[++I]+256*this[++I]+this[++I],ee=this[++I]*2**24+65536*this[++I]+256*this[++I]+Q;return(BigInt(W)<<BigInt(32))+BigInt(ee)}),c.prototype.readIntLE=function(I,O,Q){I>>>=0,O>>>=0,Q||z(I,O,this.length);let W=this[I],ee=1,he=0;for(;++he<O&&(ee*=256);)W+=this[I+he]*ee;return ee*=128,W>=ee&&(W-=Math.pow(2,8*O)),W},c.prototype.readIntBE=function(I,O,Q){I>>>=0,O>>>=0,Q||z(I,O,this.length);let W=O,ee=1,he=this[I+--W];for(;W>0&&(ee*=256);)he+=this[I+--W]*ee;return ee*=128,he>=ee&&(he-=Math.pow(2,8*O)),he},c.prototype.readInt8=function(I,O){return I>>>=0,O||z(I,1,this.length),128&this[I]?-1*(255-this[I]+1):this[I]},c.prototype.readInt16LE=function(I,O){I>>>=0,O||z(I,2,this.length);const Q=this[I]|this[I+1]<<8;return 32768&Q?4294901760|Q:Q},c.prototype.readInt16BE=function(I,O){I>>>=0,O||z(I,2,this.length);const Q=this[I+1]|this[I]<<8;return 32768&Q?4294901760|Q:Q},c.prototype.readInt32LE=function(I,O){return I>>>=0,O||z(I,4,this.length),this[I]|this[I+1]<<8|this[I+2]<<16|this[I+3]<<24},c.prototype.readInt32BE=function(I,O){return I>>>=0,O||z(I,4,this.length),this[I]<<24|this[I+1]<<16|this[I+2]<<8|this[I+3]},c.prototype.readBigInt64LE=ze(function(I){Le(I>>>=0,"offset");const O=this[I],Q=this[I+7];O!==void 0&&Q!==void 0||ue(I,this.length-8);const W=this[I+4]+256*this[I+5]+65536*this[I+6]+(Q<<24);return(BigInt(W)<<BigInt(32))+BigInt(O+256*this[++I]+65536*this[++I]+this[++I]*2**24)}),c.prototype.readBigInt64BE=ze(function(I){Le(I>>>=0,"offset");const O=this[I],Q=this[I+7];O!==void 0&&Q!==void 0||ue(I,this.length-8);const W=(O<<24)+65536*this[++I]+256*this[++I]+this[++I];return(BigInt(W)<<BigInt(32))+BigInt(this[++I]*2**24+65536*this[++I]+256*this[++I]+Q)}),c.prototype.readFloatLE=function(I,O){return I>>>=0,O||z(I,4,this.length),r.read(this,I,!0,23,4)},c.prototype.readFloatBE=function(I,O){return I>>>=0,O||z(I,4,this.length),r.read(this,I,!1,23,4)},c.prototype.readDoubleLE=function(I,O){return I>>>=0,O||z(I,8,this.length),r.read(this,I,!0,52,8)},c.prototype.readDoubleBE=function(I,O){return I>>>=0,O||z(I,8,this.length),r.read(this,I,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(I,O,Q,W){I=+I,O>>>=0,Q>>>=0,W||j(this,I,O,Q,Math.pow(2,8*Q)-1,0);let ee=1,he=0;for(this[O]=255&I;++he<Q&&(ee*=256);)this[O+he]=I/ee&255;return O+Q},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(I,O,Q,W){I=+I,O>>>=0,Q>>>=0,W||j(this,I,O,Q,Math.pow(2,8*Q)-1,0);let ee=Q-1,he=1;for(this[O+ee]=255&I;--ee>=0&&(he*=256);)this[O+ee]=I/he&255;return O+Q},c.prototype.writeUint8=c.prototype.writeUInt8=function(I,O,Q){return I=+I,O>>>=0,Q||j(this,I,O,1,255,0),this[O]=255&I,O+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(I,O,Q){return I=+I,O>>>=0,Q||j(this,I,O,2,65535,0),this[O]=255&I,this[O+1]=I>>>8,O+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(I,O,Q){return I=+I,O>>>=0,Q||j(this,I,O,2,65535,0),this[O]=I>>>8,this[O+1]=255&I,O+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(I,O,Q){return I=+I,O>>>=0,Q||j(this,I,O,4,4294967295,0),this[O+3]=I>>>24,this[O+2]=I>>>16,this[O+1]=I>>>8,this[O]=255&I,O+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(I,O,Q){return I=+I,O>>>=0,Q||j(this,I,O,4,4294967295,0),this[O]=I>>>24,this[O+1]=I>>>16,this[O+2]=I>>>8,this[O+3]=255&I,O+4},c.prototype.writeBigUInt64LE=ze(function(I,O=0){return Z(this,I,O,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=ze(function(I,O=0){return ce(this,I,O,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(I,O,Q,W){if(I=+I,O>>>=0,!W){const Ye=Math.pow(2,8*Q-1);j(this,I,O,Q,Ye-1,-Ye)}let ee=0,he=1,Te=0;for(this[O]=255&I;++ee<Q&&(he*=256);)I<0&&Te===0&&this[O+ee-1]!==0&&(Te=1),this[O+ee]=(I/he|0)-Te&255;return O+Q},c.prototype.writeIntBE=function(I,O,Q,W){if(I=+I,O>>>=0,!W){const Ye=Math.pow(2,8*Q-1);j(this,I,O,Q,Ye-1,-Ye)}let ee=Q-1,he=1,Te=0;for(this[O+ee]=255&I;--ee>=0&&(he*=256);)I<0&&Te===0&&this[O+ee+1]!==0&&(Te=1),this[O+ee]=(I/he|0)-Te&255;return O+Q},c.prototype.writeInt8=function(I,O,Q){return I=+I,O>>>=0,Q||j(this,I,O,1,127,-128),I<0&&(I=255+I+1),this[O]=255&I,O+1},c.prototype.writeInt16LE=function(I,O,Q){return I=+I,O>>>=0,Q||j(this,I,O,2,32767,-32768),this[O]=255&I,this[O+1]=I>>>8,O+2},c.prototype.writeInt16BE=function(I,O,Q){return I=+I,O>>>=0,Q||j(this,I,O,2,32767,-32768),this[O]=I>>>8,this[O+1]=255&I,O+2},c.prototype.writeInt32LE=function(I,O,Q){return I=+I,O>>>=0,Q||j(this,I,O,4,2147483647,-2147483648),this[O]=255&I,this[O+1]=I>>>8,this[O+2]=I>>>16,this[O+3]=I>>>24,O+4},c.prototype.writeInt32BE=function(I,O,Q){return I=+I,O>>>=0,Q||j(this,I,O,4,2147483647,-2147483648),I<0&&(I=4294967295+I+1),this[O]=I>>>24,this[O+1]=I>>>16,this[O+2]=I>>>8,this[O+3]=255&I,O+4},c.prototype.writeBigInt64LE=ze(function(I,O=0){return Z(this,I,O,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=ze(function(I,O=0){return ce(this,I,O,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeFloatLE=function(I,O,Q){return se(this,I,O,!0,Q)},c.prototype.writeFloatBE=function(I,O,Q){return se(this,I,O,!1,Q)},c.prototype.writeDoubleLE=function(I,O,Q){return me(this,I,O,!0,Q)},c.prototype.writeDoubleBE=function(I,O,Q){return me(this,I,O,!1,Q)},c.prototype.copy=function(I,O,Q,W){if(!c.isBuffer(I))throw new TypeError("argument should be a Buffer");if(Q||(Q=0),W||W===0||(W=this.length),O>=I.length&&(O=I.length),O||(O=0),W>0&&W<Q&&(W=Q),W===Q||I.length===0||this.length===0)return 0;if(O<0)throw new RangeError("targetStart out of bounds");if(Q<0||Q>=this.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("sourceEnd out of bounds");W>this.length&&(W=this.length),I.length-O<W-Q&&(W=I.length-O+Q);const ee=W-Q;return this===I&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(O,Q,W):Uint8Array.prototype.set.call(I,this.subarray(Q,W),O),ee},c.prototype.fill=function(I,O,Q,W){if(typeof I=="string"){if(typeof O=="string"?(W=O,O=0,Q=this.length):typeof Q=="string"&&(W=Q,Q=this.length),W!==void 0&&typeof W!="string")throw new TypeError("encoding must be a string");if(typeof W=="string"&&!c.isEncoding(W))throw new TypeError("Unknown encoding: "+W);if(I.length===1){const he=I.charCodeAt(0);(W==="utf8"&&he<128||W==="latin1")&&(I=he)}}else typeof I=="number"?I&=255:typeof I=="boolean"&&(I=Number(I));if(O<0||this.length<O||this.length<Q)throw new RangeError("Out of range index");if(Q<=O)return this;let ee;if(O>>>=0,Q=Q===void 0?this.length:Q>>>0,I||(I=0),typeof I=="number")for(ee=O;ee<Q;++ee)this[ee]=I;else{const he=c.isBuffer(I)?I:c.from(I,W),Te=he.length;if(Te===0)throw new TypeError('The value "'+I+'" is invalid for argument "value"');for(ee=0;ee<Q-O;++ee)this[ee+O]=he[ee%Te]}return this};const be={};function xe(I,O,Q){be[I]=class extends Q{constructor(){super(),Object.defineProperty(this,"message",{value:O.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${I}]`,this.stack,delete this.name}get code(){return I}set code(W){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:W,writable:!0})}toString(){return`${this.name} [${I}]: ${this.message}`}}}function Ue(I){let O="",Q=I.length;const W=I[0]==="-"?1:0;for(;Q>=W+4;Q-=3)O=`_${I.slice(Q-3,Q)}${O}`;return`${I.slice(0,Q)}${O}`}function Ne(I,O,Q,W,ee,he){if(I>Q||I<O){const Te=typeof O=="bigint"?"n":"";let Ye;throw Ye=O===0||O===BigInt(0)?`>= 0${Te} and < 2${Te} ** ${8*(he+1)}${Te}`:`>= -(2${Te} ** ${8*(he+1)-1}${Te}) and < 2 ** ${8*(he+1)-1}${Te}`,new be.ERR_OUT_OF_RANGE("value",Ye,I)}(function(Te,Ye,q){Le(Ye,"offset"),Te[Ye]!==void 0&&Te[Ye+q]!==void 0||ue(Ye,Te.length-(q+1))})(W,ee,he)}function Le(I,O){if(typeof I!="number")throw new be.ERR_INVALID_ARG_TYPE(O,"number",I)}function ue(I,O,Q){throw Math.floor(I)!==I?(Le(I,Q),new be.ERR_OUT_OF_RANGE("offset","an integer",I)):O<0?new be.ERR_BUFFER_OUT_OF_BOUNDS:new be.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${O}`,I)}xe("ERR_BUFFER_OUT_OF_BOUNDS",function(I){return I?`${I} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),xe("ERR_INVALID_ARG_TYPE",function(I,O){return`The "${I}" argument must be of type number. Received type ${typeof O}`},TypeError),xe("ERR_OUT_OF_RANGE",function(I,O,Q){let W=`The value of "${I}" is out of range.`,ee=Q;return Number.isInteger(Q)&&Math.abs(Q)>2**32?ee=Ue(String(Q)):typeof Q=="bigint"&&(ee=String(Q),(Q>BigInt(2)**BigInt(32)||Q<-(BigInt(2)**BigInt(32)))&&(ee=Ue(ee)),ee+="n"),W+=` It must be ${O}. Received ${ee}`,W},RangeError);const Oe=/[^+/0-9A-Za-z-_]/g;function Ge(I,O){let Q;O=O||1/0;const W=I.length;let ee=null;const he=[];for(let Te=0;Te<W;++Te){if(Q=I.charCodeAt(Te),Q>55295&&Q<57344){if(!ee){if(Q>56319){(O-=3)>-1&&he.push(239,191,189);continue}if(Te+1===W){(O-=3)>-1&&he.push(239,191,189);continue}ee=Q;continue}if(Q<56320){(O-=3)>-1&&he.push(239,191,189),ee=Q;continue}Q=65536+(ee-55296<<10|Q-56320)}else ee&&(O-=3)>-1&&he.push(239,191,189);if(ee=null,Q<128){if((O-=1)<0)break;he.push(Q)}else if(Q<2048){if((O-=2)<0)break;he.push(Q>>6|192,63&Q|128)}else if(Q<65536){if((O-=3)<0)break;he.push(Q>>12|224,Q>>6&63|128,63&Q|128)}else{if(!(Q<1114112))throw new Error("Invalid code point");if((O-=4)<0)break;he.push(Q>>18|240,Q>>12&63|128,Q>>6&63|128,63&Q|128)}}return he}function je(I){return i.toByteArray(function(O){if((O=(O=O.split("=")[0]).trim().replace(Oe,"")).length<2)return"";for(;O.length%4!=0;)O+="=";return O}(I))}function Me(I,O,Q,W){let ee;for(ee=0;ee<W&&!(ee+Q>=O.length||ee>=I.length);++ee)O[ee+Q]=I[ee];return ee}function Ce(I,O){return I instanceof O||I!=null&&I.constructor!=null&&I.constructor.name!=null&&I.constructor.name===O.name}function Be(I){return I!=I}const Y=function(){const I="0123456789abcdef",O=new Array(256);for(let Q=0;Q<16;++Q){const W=16*Q;for(let ee=0;ee<16;++ee)O[W+ee]=I[Q]+I[ee]}return O}();function ze(I){return typeof BigInt>"u"?ne:I}function ne(){throw new Error("BigInt not supported")}},9089:n=>{n.exports=function(e){var t=[];return t.toString=function(){return this.map(function(i){var r="",s=i[5]!==void 0;return i[4]&&(r+="@supports (".concat(i[4],") {")),i[2]&&(r+="@media ".concat(i[2]," {")),s&&(r+="@layer".concat(i[5].length>0?" ".concat(i[5]):""," {")),r+=e(i),s&&(r+="}"),i[2]&&(r+="}"),i[4]&&(r+="}"),r}).join("")},t.i=function(i,r,s,a,o){typeof i=="string"&&(i=[[null,i,void 0]]);var c={};if(s)for(var h=0;h<this.length;h++){var d=this[h][0];d!=null&&(c[d]=!0)}for(var p=0;p<i.length;p++){var m=[].concat(i[p]);s&&c[m[0]]||(o!==void 0&&(m[5]===void 0||(m[1]="@layer".concat(m[5].length>0?" ".concat(m[5]):""," {").concat(m[1],"}")),m[5]=o),r&&(m[2]&&(m[1]="@media ".concat(m[2]," {").concat(m[1],"}")),m[2]=r),a&&(m[4]?(m[1]="@supports (".concat(m[4],") {").concat(m[1],"}"),m[4]=a):m[4]="".concat(a)),t.push(m))}},t}},6492:n=>{n.exports=function(e,t){return t||(t={}),e&&(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},963:n=>{n.exports=function(e){var t=e[1],i=e[3];if(!i)return t;if(typeof btoa=="function"){var r=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),a="/*# ".concat(s," */");return[t].concat([a]).join(`
`)}return[t].join(`
`)}},8878:(n,e,t)=>{e.formatArgs=function(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+n.exports.humanize(this.diff),!this.useColors)return;const s="color: "+this.color;r.splice(1,0,s,"color: inherit");let a=0,o=0;r[0].replace(/%[a-zA-Z%]/g,c=>{c!=="%%"&&(a++,c==="%c"&&(o=a))}),r.splice(o,0,s)},e.save=function(r){try{r?e.storage.setItem("debug",r):e.storage.removeItem("debug")}catch{}},e.load=function(){let r;try{r=e.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=x$.DEBUG),r},e.useColors=function(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let r;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(r=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(r[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch{}}(),e.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),n.exports=t(8945)(e);const{formatters:i}=n.exports;i.j=function(r){try{return JSON.stringify(r)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}}},8945:(n,e,t)=>{n.exports=function(i){function r(o){let c,h,d,p=null;function m(...A){if(!m.enabled)return;const v=m,y=Number(new Date),E=y-(c||y);v.diff=E,v.prev=c,v.curr=y,c=y,A[0]=r.coerce(A[0]),typeof A[0]!="string"&&A.unshift("%O");let b=0;A[0]=A[0].replace(/%([a-zA-Z%])/g,(C,_)=>{if(C==="%%")return"%";b++;const w=r.formatters[_];if(typeof w=="function"){const T=A[b];C=w.call(v,T),A.splice(b,1),b--}return C}),r.formatArgs.call(v,A),(v.log||r.log).apply(v,A)}return m.namespace=o,m.useColors=r.useColors(),m.color=r.selectColor(o),m.extend=s,m.destroy=r.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(h!==r.namespaces&&(h=r.namespaces,d=r.enabled(o)),d),set:A=>{p=A}}),typeof r.init=="function"&&r.init(m),m}function s(o,c){const h=r(this.namespace+(c===void 0?":":c)+o);return h.log=this.log,h}function a(o,c){let h=0,d=0,p=-1,m=0;for(;h<o.length;)if(d<c.length&&(c[d]===o[h]||c[d]==="*"))c[d]==="*"?(p=d,m=h,d++):(h++,d++);else{if(p===-1)return!1;d=p+1,m++,h=m}for(;d<c.length&&c[d]==="*";)d++;return d===c.length}return r.debug=r,r.default=r,r.coerce=function(o){return o instanceof Error?o.stack||o.message:o},r.disable=function(){const o=[...r.names,...r.skips.map(c=>"-"+c)].join(",");return r.enable(""),o},r.enable=function(o){r.save(o),r.namespaces=o,r.names=[],r.skips=[];const c=(typeof o=="string"?o:"").trim().replace(" ",",").split(",").filter(Boolean);for(const h of c)h[0]==="-"?r.skips.push(h.slice(1)):r.names.push(h)},r.enabled=function(o){for(const c of r.skips)if(a(o,c))return!1;for(const c of r.names)if(a(o,c))return!0;return!1},r.humanize=t(9192),r.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(i).forEach(o=>{r[o]=i[o]}),r.names=[],r.skips=[],r.formatters={},r.selectColor=function(o){let c=0;for(let h=0;h<o.length;h++)c=(c<<5)-c+o.charCodeAt(h),c|=0;return r.colors[Math.abs(c)%r.colors.length]},r.enable(r.load()),r}},1124:(n,e,t)=>{var i=t(6240),r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;function a(c,h,d){var p=h[d];if(p!=null){if(r.call(c,d)&&(c[d]===void 0||c[d]===null))throw new TypeError("Cannot convert undefined or null to object ("+d+")");r.call(c,d)&&i(p)?c[d]=o(Object(c[d]),h[d]):c[d]=p}}function o(c,h){if(c===h)return c;for(var d in h=Object(h))r.call(h,d)&&a(c,h,d);if(Object.getOwnPropertySymbols)for(var p=Object.getOwnPropertySymbols(h),m=0;m<p.length;m++)s.call(h,p[m])&&a(c,h,p[m]);return c}n.exports=function(c){c=function(d){if(d==null)throw new TypeError("Sources cannot be null or undefined");return Object(d)}(c);for(var h=1;h<arguments.length;h++)o(c,arguments[h]);return c}},8480:n=>{n.exports=function(e){switch(e){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},919:(n,e,t)=>{var i;i=typeof window<"u"?window:t.g!==void 0?t.g:typeof self<"u"?self:{},n.exports=i},1024:(n,e)=>{e.read=function(t,i,r,s,a){var o,c,h=8*a-s-1,d=(1<<h)-1,p=d>>1,m=-7,A=r?a-1:0,v=r?-1:1,y=t[i+A];for(A+=v,o=y&(1<<-m)-1,y>>=-m,m+=h;m>0;o=256*o+t[i+A],A+=v,m-=8);for(c=o&(1<<-m)-1,o>>=-m,m+=s;m>0;c=256*c+t[i+A],A+=v,m-=8);if(o===0)o=1-p;else{if(o===d)return c?NaN:1/0*(y?-1:1);c+=Math.pow(2,s),o-=p}return(y?-1:1)*c*Math.pow(2,o-s)},e.write=function(t,i,r,s,a,o){var c,h,d,p=8*o-a-1,m=(1<<p)-1,A=m>>1,v=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=s?0:o-1,E=s?1:-1,b=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(h=isNaN(i)?1:0,c=m):(c=Math.floor(Math.log(i)/Math.LN2),i*(d=Math.pow(2,-c))<1&&(c--,d*=2),(i+=c+A>=1?v/d:v*Math.pow(2,1-A))*d>=2&&(c++,d/=2),c+A>=m?(h=0,c=m):c+A>=1?(h=(i*d-1)*Math.pow(2,a),c+=A):(h=i*Math.pow(2,A-1)*Math.pow(2,a),c=0));a>=8;t[r+y]=255&h,y+=E,h/=256,a-=8);for(c=c<<a|h,p+=a;p>0;t[r+y]=255&c,y+=E,c/=256,p-=8);t[r+y-E]|=128*b}},2225:n=>{function e(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}n.exports=function(t){return t!=null&&(e(t)||function(i){return typeof i.readFloatLE=="function"&&typeof i.slice=="function"&&e(i.slice(0,0))}(t)||!!t._isBuffer)}},8847:n=>{n.exports=function(t){if(!t)return!1;var i=e.call(t);return i==="[object Function]"||typeof t=="function"&&i!=="[object RegExp]"||typeof window<"u"&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)};var e=Object.prototype.toString},6240:n=>{n.exports=function(e){var t=typeof e;return e!==null&&(t==="object"||t==="function")}},5651:(n,e,t)=>{var i=t(5406),r=t(4597),s=t(5734),a=["x","e","a","o","n","s","r","c","u","m","v","w","z"],o=["m","w"],c=["H","I","N","E","F","K","L","T","U","V","W","X","Y","Z"],h=9,d=32;function p(E){this.glyphs=[],this._measure=this.computeMetrics.bind(this),this.update(E)}function m(E){return new Function(["return function "+E+"() {","  return this._"+E,"}"].join(`
`))()}function A(E,b){if(!E.chars||E.chars.length===0)return null;var C=y(E.chars,b);return C>=0?E.chars[C]:null}function v(E,b,C){if(!E.kernings||E.kernings.length===0)return 0;for(var _=E.kernings,w=0;w<_.length;w++){var T=_[w];if(T.first===b&&T.second===C)return T.amount}return 0}function y(E,b,C){for(var _=C=C||0;_<E.length;_++)if(E[_].id===b)return _;return-1}n.exports=function(E){return new p(E)},p.prototype.update=function(E){if(E=r({measure:this._measure},E),this._opt=E,this._opt.tabSize=s(this._opt.tabSize,4),!E.font)throw new Error("must provide a valid bitmap font");var b=this.glyphs,C=E.text||"",_=E.font;this._setupSpaceGlyphs(_);var w=i.lines(C,E),T=E.width||0;b.length=0;var L=w.reduce(function(z,j){return Math.max(z,j.width,T)},0),R=0,P=0,D=s(E.lineHeight,_.common.lineHeight),M=_.common.base,k=D-M,V=E.letterSpacing||0,X=D*w.length-k,$=function(z){return z==="center"?1:z==="right"?2:0}(this._opt.align);P-=X,this._width=L,this._height=X,this._descender=D-M,this._baseline=M,this._xHeight=function(z){for(var j=0;j<a.length;j++){var Z=a[j].charCodeAt(0),ce=y(z.chars,Z);if(ce>=0)return z.chars[ce].height}return 0}(_),this._capHeight=function(z){for(var j=0;j<c.length;j++){var Z=c[j].charCodeAt(0),ce=y(z.chars,Z);if(ce>=0)return z.chars[ce].height}return 0}(_),this._lineHeight=D,this._ascender=D-k-this._xHeight;var ae=this;w.forEach(function(z,j){for(var Z,ce=z.start,U=z.end,se=z.width,me=ce;me<U;me++){var be=C.charCodeAt(me),xe=ae.getGlyph(_,be);if(xe){Z&&(R+=v(_,Z.id,xe.id));var Ue=R;$===1?Ue+=(L-se)/2:$===2&&(Ue+=L-se),b.push({position:[Ue,P],data:xe,index:me,line:j}),R+=xe.xadvance+V,Z=xe}}P+=D,R=0}),this._linesTotal=w.length},p.prototype._setupSpaceGlyphs=function(E){if(this._fallbackSpaceGlyph=null,this._fallbackTabGlyph=null,E.chars&&E.chars.length!==0){var b=A(E,d)||function(_){for(var w=0;w<o.length;w++){var T=o[w].charCodeAt(0),L=y(_.chars,T);if(L>=0)return _.chars[L]}return 0}(E)||E.chars[0],C=this._opt.tabSize*b.xadvance;this._fallbackSpaceGlyph=b,this._fallbackTabGlyph=r(b,{x:0,y:0,xadvance:C,id:h,xoffset:0,yoffset:0,width:0,height:0})}},p.prototype.getGlyph=function(E,b){return A(E,b)||(b===h?this._fallbackTabGlyph:b===d?this._fallbackSpaceGlyph:null)},p.prototype.computeMetrics=function(E,b,C,_){var w,T=this._opt.letterSpacing||0,L=this._opt.font,R=0,P=0,D=0;if(!L.chars||L.chars.length===0)return{start:b,end:b,width:0};C=Math.min(E.length,C);for(var M=b;M<C;M++){var k,V=E.charCodeAt(M);if(k=this.getGlyph(L,V)){k.xoffset;var X=(R+=w?v(L,w.id,k.id):0)+k.xadvance+T,$=R+k.width;if($>=_||X>=_)break;R=X,P=$,w=k}D++}return w&&(P+=w.xoffset),{start:b,end:b+D,width:P}},["width","height","descender","ascender","xHeight","baseline","capHeight","lineHeight"].forEach(function(E){Object.defineProperty(p.prototype,E,{get:m(E),configurable:!0})})},5751:(n,e,t)=>{var i=t(9922).hp,r=t(3558),s=function(){},a=t(1476),o=t(7034),c=t(7480),h=t(573),d=t(4597),p=self.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest;n.exports=function(m,A){A=typeof A=="function"?A:s,typeof m=="string"?m={uri:m}:m||(m={}),m.binary&&(m=function(v){if(p)return d(v,{responseType:"arraybuffer"});if(self.XMLHttpRequest===void 0)throw new Error("your browser does not support XHR loading");var y=new self.XMLHttpRequest;return y.overrideMimeType("text/plain; charset=x-user-defined"),d({xhr:y},v)}(m)),r(m,function(v,y,E){if(v)return A(v);if(!/^2/.test(y.statusCode))return A(new Error("http status code: "+y.statusCode));if(!E)return A(new Error("no body result"));var b,C,_=!1;if(b=E,Object.prototype.toString.call(b)==="[object ArrayBuffer]"){var w=new Uint8Array(E);E=i.from(w,"binary")}h(E)&&(_=!0,typeof E=="string"&&(E=i.from(E,"binary"))),_||(i.isBuffer(E)&&(E=E.toString(m.encoding)),E=E.trim());try{var T=y.headers["content-type"];C=_?c(E):/json/.test(T)||E.charAt(0)==="{"?JSON.parse(E):/xml/.test(T)||E.charAt(0)==="<"?o(E):a(E)}catch(L){A(new Error("error parsing font "+L.message)),A=s}A(null,C)})}},573:(n,e,t)=>{var i=t(9922).hp,r=t(911),s=i.from([66,77,70,3]);n.exports=function(a){return typeof a=="string"?a.substring(0,3)==="BMF":a.length>4&&r(a.slice(0,4),s)}},9192:n=>{var e=1e3,t=60*e,i=60*t,r=24*i,s=7*r;function a(o,c,h,d){var p=c>=1.5*h;return Math.round(o/h)+" "+d+(p?"s":"")}n.exports=function(o,c){c=c||{};var h,d,p=typeof o;if(p==="string"&&o.length>0)return function(m){if(!((m=String(m)).length>100)){var A=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(m);if(A){var v=parseFloat(A[1]);switch((A[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*v;case"weeks":case"week":case"w":return v*s;case"days":case"day":case"d":return v*r;case"hours":case"hour":case"hrs":case"hr":case"h":return v*i;case"minutes":case"minute":case"mins":case"min":case"m":return v*t;case"seconds":case"second":case"secs":case"sec":case"s":return v*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return v;default:return}}}}(o);if(p==="number"&&isFinite(o))return c.long?(h=o,(d=Math.abs(h))>=r?a(h,d,r,"day"):d>=i?a(h,d,i,"hour"):d>=t?a(h,d,t,"minute"):d>=e?a(h,d,e,"second"):h+" ms"):function(m){var A=Math.abs(m);return A>=r?Math.round(m/r)+"d":A>=i?Math.round(m/i)+"h":A>=t?Math.round(m/t)+"m":A>=e?Math.round(m/e)+"s":m+"ms"}(o);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(o))}},1476:n=>{function e(i,r){if(!(i=i.replace(/\t+/g," ").trim()))return null;var s=i.indexOf(" ");if(s===-1)throw new Error("no named row at line "+r);var a=i.substring(0,s);i=(i=(i=(i=i.substring(s+1)).replace(/letter=[\'\"]\S+[\'\"]/gi,"")).split("=")).map(function(p){return p.trim().match(/(".*?"|[^"\s]+)+(?=\s*|\s*$)/g)});for(var o=[],c=0;c<i.length;c++){var h=i[c];c===0?o.push({key:h[0],data:""}):c===i.length-1?o[o.length-1].data=t(h[0]):(o[o.length-1].data=t(h[0]),o.push({key:h[1],data:""}))}var d={key:a,data:{}};return o.forEach(function(p){d.data[p.key]=p.data}),d}function t(i){return i&&i.length!==0?i.indexOf('"')===0||i.indexOf("'")===0?i.substring(1,i.length-1):i.indexOf(",")!==-1?function(r){return r.split(",").map(function(s){return parseInt(s,10)})}(i):parseInt(i,10):""}n.exports=function(i){if(!i)throw new Error("no data provided");var r={pages:[],chars:[],kernings:[]},s=(i=i.toString().trim()).split(/\r\n?|\n/g);if(s.length===0)throw new Error("no data in BMFont file");for(var a=0;a<s.length;a++){var o=e(s[a],a);if(o)if(o.key==="page"){if(typeof o.data.id!="number")throw new Error("malformed file at line "+a+" -- needs page id=N");if(typeof o.data.file!="string")throw new Error("malformed file at line "+a+' -- needs page file="path"');r.pages[o.data.id]=o.data.file}else o.key==="chars"||o.key==="kernings"||(o.key==="char"?r.chars.push(o.data):o.key==="kerning"?r.kernings.push(o.data):r[o.key]=o.data)}return r}},7480:n=>{var e=[66,77,70];function t(r,s,a){if(a>s.length-1)return 0;var o=s.readUInt8(a++),c=s.readInt32LE(a);switch(a+=4,o){case 1:r.info=function(h,d){var p={};p.size=h.readInt16LE(d);var m=h.readUInt8(d+2);return p.smooth=m>>7&1,p.unicode=m>>6&1,p.italic=m>>5&1,p.bold=m>>4&1,m>>3&1&&(p.fixedHeight=1),p.charset=h.readUInt8(d+3)||"",p.stretchH=h.readUInt16LE(d+4),p.aa=h.readUInt8(d+6),p.padding=[h.readInt8(d+7),h.readInt8(d+8),h.readInt8(d+9),h.readInt8(d+10)],p.spacing=[h.readInt8(d+11),h.readInt8(d+12)],p.outline=h.readUInt8(d+13),p.face=function(A,v){return i(A,v).toString("utf8")}(h,d+14),p}(s,a);break;case 2:r.common=function(h,d){var p={};return p.lineHeight=h.readUInt16LE(d),p.base=h.readUInt16LE(d+2),p.scaleW=h.readUInt16LE(d+4),p.scaleH=h.readUInt16LE(d+6),p.pages=h.readUInt16LE(d+8),h.readUInt8(d+10),p.packed=0,p.alphaChnl=h.readUInt8(d+11),p.redChnl=h.readUInt8(d+12),p.greenChnl=h.readUInt8(d+13),p.blueChnl=h.readUInt8(d+14),p}(s,a);break;case 3:r.pages=function(h,d,p){for(var m=[],A=i(h,d),v=A.length+1,y=p/v,E=0;E<y;E++)m[E]=h.slice(d,d+A.length).toString("utf8"),d+=v;return m}(s,a,c);break;case 4:r.chars=function(h,d,p){for(var m=[],A=p/20,v=0;v<A;v++){var y={},E=20*v;y.id=h.readUInt32LE(d+0+E),y.x=h.readUInt16LE(d+4+E),y.y=h.readUInt16LE(d+6+E),y.width=h.readUInt16LE(d+8+E),y.height=h.readUInt16LE(d+10+E),y.xoffset=h.readInt16LE(d+12+E),y.yoffset=h.readInt16LE(d+14+E),y.xadvance=h.readInt16LE(d+16+E),y.page=h.readUInt8(d+18+E),y.chnl=h.readUInt8(d+19+E),m[v]=y}return m}(s,a,c);break;case 5:r.kernings=function(h,d,p){for(var m=[],A=p/10,v=0;v<A;v++){var y={},E=10*v;y.first=h.readUInt32LE(d+0+E),y.second=h.readUInt32LE(d+4+E),y.amount=h.readInt16LE(d+8+E),m[v]=y}return m}(s,a,c)}return 5+c}function i(r,s){for(var a=s;a<r.length&&r[a]!==0;a++);return r.slice(s,a)}n.exports=function(r){if(r.length<6)throw new Error("invalid buffer length for BMFont");var s=e.every(function(h,d){return r.readUInt8(d)===h});if(!s)throw new Error("BMFont missing BMF byte header");var a=3;if(r.readUInt8(a++)>3)throw new Error("Only supports BMFont Binary v3 (BMFont App v1.10)");for(var o={kernings:[],chars:[]},c=0;c<5;c++)a+=t(o,r,a);return o}},7034:(n,e,t)=>{var i=t(7829),r=t(1896),s={scaleh:"scaleH",scalew:"scaleW",stretchh:"stretchH",lineheight:"lineHeight",alphachnl:"alphaChnl",redchnl:"redChnl",greenchnl:"greenChnl",bluechnl:"blueChnl"};function a(o){var c=function(h){for(var d=[],p=0;p<h.attributes.length;p++)d.push(h.attributes[p]);return d}(o);return c.reduce(function(h,d){var p;return h[p=d.nodeName,s[p.toLowerCase()]||p]=d.nodeValue,h},{})}n.exports=function(o){o=o.toString();var c=r(o),h={pages:[],chars:[],kernings:[]};["info","common"].forEach(function(E){var b=c.getElementsByTagName(E)[0];b&&(h[E]=i(a(b)))});var d=c.getElementsByTagName("pages")[0];if(!d)throw new Error("malformed file -- no <pages> element");for(var p=d.getElementsByTagName("page"),m=0;m<p.length;m++){var A=p[m],v=parseInt(A.getAttribute("id"),10),y=A.getAttribute("file");if(isNaN(v))throw new Error('malformed file -- page "id" attribute is NaN');if(!y)throw new Error('malformed file -- needs page "file" attribute');h.pages[parseInt(v,10)]=y}return["chars","kernings"].forEach(function(E){var b=c.getElementsByTagName(E)[0];if(b)for(var C=E.substring(0,E.length-1),_=b.getElementsByTagName(C),w=0;w<_.length;w++){var T=_[w];h[E].push(i(a(T)))}}),h}},7829:n=>{var e="chasrset";n.exports=function(t){for(var i in t=Object.assign({},t),e in t&&(t.charset=t[e],delete t[e]),t)i!=="face"&&i!=="charset"&&(t[i]=i==="padding"||i==="spacing"?t[i].split(",").map(function(r){return parseInt(r,10)}):parseInt(t[i],10));return t}},3216:n=>{var e=function(t){return t.replace(/^\s+|\s+$/g,"")};n.exports=function(t){if(!t)return{};for(var i,r={},s=e(t).split(`
`),a=0;a<s.length;a++){var o=s[a],c=o.indexOf(":"),h=e(o.slice(0,c)).toLowerCase(),d=e(o.slice(c+1));r[h]===void 0?r[h]=d:(i=r[h],Object.prototype.toString.call(i)==="[object Array]"?r[h].push(d):r[h]=[r[h],d])}return r}},9035:(n,e,t)=>{var i=t(8480),r=t(8167),s=t(2225),a=[0,2,3],o=[2,1,3];n.exports=function(c,h){c&&(r(c)||s(c))||(h=c||{},c=null);for(var d=typeof(h=typeof h=="number"?{count:h}:h||{}).type=="string"?h.type:"uint16",p=typeof h.count=="number"?h.count:1,m=h.start||0,A=h.clockwise!==!1?a:o,v=A[0],y=A[1],E=A[2],b=6*p,C=c||new(i(d))(b),_=0,w=0;_<b;_+=6,w+=4){var T=_+m;C[T+0]=w+0,C[T+1]=w+1,C[T+2]=w+2,C[T+3]=w+v,C[T+4]=w+y,C[T+5]=w+E}return C}},4433:(n,e,t)=>{var i=t(5651),r=t(9035),s=t(7106),a=t(1684);n.exports=function(c){return new o(c)};class o extends THREE.BufferGeometry{constructor(h){super(),typeof h=="string"&&(h={text:h}),this._opt=Object.assign({},h),h&&this.update(h)}update(h){if(typeof h=="string"&&(h={text:h}),!(h=Object.assign({},this._opt,h)).font)throw new TypeError("must specify a { font } in options");this.layout=i(h);var d=h.flipY!==!1,p=h.font,m=p.common.scaleW,A=p.common.scaleH,v=this.layout.glyphs.filter(function(_){var w=_.data;return w.width*w.height>0});this.visibleGlyphs=v;var y=s.positions(v),E=s.uvs(v,m,A,d),b=r([],{clockwise:!0,type:"uint16",count:v.length});if(this.setIndex(b),this.setAttribute("position",new THREE.BufferAttribute(y,2)),this.setAttribute("uv",new THREE.BufferAttribute(E,2)),!h.multipage&&"page"in this.attributes)this.removeAttribute("page");else if(h.multipage){var C=s.pages(v);this.setAttribute("page",new THREE.BufferAttribute(C,1))}this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere()}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new THREE.Sphere);var h=this.attributes.position.array,d=this.attributes.position.itemSize;if(!h||!d||h.length<2)return this.boundingSphere.radius=0,void this.boundingSphere.center.set(0,0,0);a.computeSphere(h,this.boundingSphere),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new THREE.Box3);var h=this.boundingBox,d=this.attributes.position.array,p=this.attributes.position.itemSize;!d||!p||d.length<2?h.makeEmpty():a.computeBox(d,h)}}},1684:n=>{var e={min:[0,0],max:[0,0]};function t(i){var r=i.length/2;e.min[0]=i[0],e.min[1]=i[1],e.max[0]=i[0],e.max[1]=i[1];for(var s=0;s<r;s++){var a=i[2*s+0],o=i[2*s+1];e.min[0]=Math.min(a,e.min[0]),e.min[1]=Math.min(o,e.min[1]),e.max[0]=Math.max(a,e.max[0]),e.max[1]=Math.max(o,e.max[1])}}n.exports.computeBox=function(i,r){t(i),r.min.set(e.min[0],e.min[1],0),r.max.set(e.max[0],e.max[1],0)},n.exports.computeSphere=function(i,r){t(i);var s=e.min[0],a=e.min[1],o=e.max[0]-s,c=e.max[1]-a,h=Math.sqrt(o*o+c*c);r.center.set(s+o/2,a+c/2,0),r.radius=h/2}},7106:n=>{n.exports.pages=function(e){var t=new Float32Array(4*e.length*1),i=0;return e.forEach(function(r){var s=r.data.page||0;t[i++]=s,t[i++]=s,t[i++]=s,t[i++]=s}),t},n.exports.uvs=function(e,t,i,r){var s=new Float32Array(4*e.length*2),a=0;return e.forEach(function(o){var c=o.data,h=c.x+c.width,d=c.y+c.height,p=c.x/t,m=c.y/i,A=h/t,v=d/i;r&&(m=(i-c.y)/i,v=(i-d)/i),s[a++]=p,s[a++]=m,s[a++]=p,s[a++]=v,s[a++]=A,s[a++]=v,s[a++]=A,s[a++]=m}),s},n.exports.positions=function(e){var t=new Float32Array(4*e.length*2),i=0;return e.forEach(function(r){var s=r.data,a=r.position[0]+s.xoffset,o=r.position[1]+s.yoffset,c=s.width,h=s.height;t[i++]=a,t[i++]=o,t[i++]=a,t[i++]=o+h,t[i++]=a+c,t[i++]=o+h,t[i++]=a+c,t[i++]=o}),t}},5406:n=>{var e=/\n/,t=/\s/;function i(a,o,c,h){var d=a.indexOf(o,c);return d===-1||d>h?h:d}function r(a){return t.test(a)}function s(a,o,c,h){return{start:o,end:o+Math.min(h,c-o)}}n.exports=function(a,o){return n.exports.lines(a,o).map(function(c){return a.substring(c.start,c.end)}).join(`
`)},n.exports.lines=function(a,o){if((o=o||{}).width===0&&o.mode!=="nowrap")return[];a=a||"";var c=typeof o.width=="number"?o.width:Number.MAX_VALUE,h=Math.max(0,o.start||0),d=typeof o.end=="number"?o.end:a.length,p=o.mode,m=o.measure||s;return p==="pre"?function(A,v,y,E,b){for(var C=[],_=y,w=y;w<E&&w<v.length;w++){var T=v.charAt(w),L=e.test(T);if(L||w===E-1){var R=A(v,_,L?w:w+1,b);C.push(R),_=w+1}}return C}(m,a,h,d,c):function(A,v,y,E,b,C){var _=[],w=b;for(C==="nowrap"&&(w=Number.MAX_VALUE);y<E&&y<v.length;){for(var T=i(v,`
`,y,E);y<T&&r(v.charAt(y));)y++;var L=A(v,y,T,w),R=y+(L.end-L.start),P=R+1;if(R<T){for(;R>y&&!r(v.charAt(R));)R--;if(R===y)P>y+1&&P--,R=P;else for(P=R;R>y&&r(v.charAt(R-1));)R--}if(R>=y){var D=A(v,y,R,w);_.push(D)}y=P}return _}(m,a,h,d,c,p)}},3558:(n,e,t)=>{var i=t(919),r=t(8847),s=t(3216),a=t(4597);function o(d,p,m){var A=d;return r(p)?(m=p,typeof d=="string"&&(A={uri:d})):A=a(p,{uri:d}),A.callback=m,A}function c(d,p,m){return h(p=o(d,p,m))}function h(d){if(d.callback===void 0)throw new Error("callback argument missing");var p=!1,m=function(k,V,X){p||(p=!0,d.callback(k,V,X))};function A(){var k=void 0;if(k=C.response?C.response:C.responseText||function(V){try{if(V.responseType==="document")return V.responseXML;var X=V.responseXML&&V.responseXML.documentElement.nodeName==="parsererror";if(V.responseType===""&&!X)return V.responseXML}catch{}return null}(C),D)try{k=JSON.parse(k)}catch{}return k}function v(k){return clearTimeout(_),k instanceof Error||(k=new Error(""+(k||"Unknown XMLHttpRequest Error"))),k.statusCode=0,m(k,M)}function y(){if(!b){var k;clearTimeout(_),k=d.useXDR&&C.status===void 0?200:C.status===1223?204:C.status;var V=M,X=null;return k!==0?(V={body:A(),statusCode:k,method:T,headers:{},url:w,rawRequest:C},C.getAllResponseHeaders&&(V.headers=s(C.getAllResponseHeaders()))):X=new Error("Internal XMLHttpRequest Error"),m(X,V,V.body)}}var E,b,C=d.xhr||null;C||(C=d.cors||d.useXDR?new c.XDomainRequest:new c.XMLHttpRequest);var _,w=C.url=d.uri||d.url,T=C.method=d.method||"GET",L=d.body||d.data,R=C.headers=d.headers||{},P=!!d.sync,D=!1,M={body:void 0,headers:{},statusCode:0,method:T,url:w,rawRequest:C};if("json"in d&&d.json!==!1&&(D=!0,R.accept||R.Accept||(R.Accept="application/json"),T!=="GET"&&T!=="HEAD"&&(R["content-type"]||R["Content-Type"]||(R["Content-Type"]="application/json"),L=JSON.stringify(d.json===!0?L:d.json))),C.onreadystatechange=function(){C.readyState===4&&setTimeout(y,0)},C.onload=y,C.onerror=v,C.onprogress=function(){},C.onabort=function(){b=!0},C.ontimeout=v,C.open(T,w,!P,d.username,d.password),P||(C.withCredentials=!!d.withCredentials),!P&&d.timeout>0&&(_=setTimeout(function(){if(!b){b=!0,C.abort("timeout");var k=new Error("XMLHttpRequest timeout");k.code="ETIMEDOUT",v(k)}},d.timeout)),C.setRequestHeader)for(E in R)R.hasOwnProperty(E)&&C.setRequestHeader(E,R[E]);else if(d.headers&&!function(k){for(var V in k)if(k.hasOwnProperty(V))return!1;return!0}(d.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in d&&(C.responseType=d.responseType),"beforeSend"in d&&typeof d.beforeSend=="function"&&d.beforeSend(C),C.send(L||null),C}n.exports=c,n.exports.default=c,c.XMLHttpRequest=i.XMLHttpRequest||function(){},c.XDomainRequest="withCredentials"in new c.XMLHttpRequest?c.XMLHttpRequest:i.XDomainRequest,function(d,p){for(var m=0;m<d.length;m++)p(d[m])}(["get","put","post","patch","head","delete"],function(d){c[d==="delete"?"del":d]=function(p,m,A){return(m=o(p,m,A)).method=d.toUpperCase(),h(m)}})},1896:n=>{n.exports=self.DOMParser!==void 0?function(e){return new self.DOMParser().parseFromString(e,"application/xml")}:self.ActiveXObject!==void 0&&new self.ActiveXObject("Microsoft.XMLDOM")?function(e){var t=new self.ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t}:function(e){var t=document.createElement("div");return t.innerHTML=e,t}},4597:n=>{n.exports=function(){for(var t={},i=0;i<arguments.length;i++){var r=arguments[i];for(var s in r)e.call(r,s)&&(t[s]=r[s])}return t};var e=Object.prototype.hasOwnProperty},8132:()=>{window.aframeStats=function(n){var e=null,t=n;return{update:function(){var i;e("te").set((i=t.querySelectorAll("*"),Array.prototype.slice.call(i).filter(function(r){return r.isEntity}),i.length)),window.performance.getEntriesByName&&e("lt").set(window.performance.getEntriesByName("render-started")[0].startTime.toFixed(0))},start:function(){},end:function(){},attach:function(i){e=i},values:{te:{caption:"Entities"},lt:{caption:"Load Time"}},groups:[{caption:"A-Frame",values:["te","lt"]}],fractions:[]}}},3729:n=>{window.glStats=function(){var e=null,t=0,i=0,r=0,s=0,a=0,o=0,c=0;function h(d,p){return function(){p.apply(this,arguments),d.apply(this,arguments)}}return WebGLRenderingContext.prototype.drawArrays=h(WebGLRenderingContext.prototype.drawArrays,function(){t++,arguments[0]==this.POINTS?o+=arguments[2]:a+=arguments[2]}),WebGLRenderingContext.prototype.drawElements=h(WebGLRenderingContext.prototype.drawElements,function(){i++,s+=arguments[1]/3,a+=arguments[1]}),WebGLRenderingContext.prototype.useProgram=h(WebGLRenderingContext.prototype.useProgram,function(){r++}),WebGLRenderingContext.prototype.bindTexture=h(WebGLRenderingContext.prototype.bindTexture,function(){c++}),{update:function(){e("allcalls").set(t+i),e("drawElements").set(i),e("drawArrays").set(t),e("bindTexture").set(c),e("useProgram").set(r),e("glfaces").set(s),e("glvertices").set(a),e("glpoints").set(o)},start:function(){t=0,i=0,r=0,s=0,a=0,o=0,c=0},end:function(){},attach:function(d){e=d},values:{allcalls:{over:3e3,caption:"Calls (hook)"},drawelements:{caption:"drawElements (hook)"},drawarrays:{caption:"drawArrays (hook)"}},groups:[{caption:"WebGL",values:["allcalls","drawelements","drawarrays","useprogram","bindtexture","glfaces","glvertices","glpoints"]}],fractions:[{base:"allcalls",steps:["drawelements","drawarrays"]}]}},window.threeStats=function(e){var t=null;return{update:function(){var i;t("renderer.info.memory.geometries").set(e.info.memory.geometries),t("renderer.info.programs").set(((i=e.info.programs)==null?void 0:i.length)??NaN),t("renderer.info.memory.textures").set(e.info.memory.textures),t("renderer.info.render.calls").set(e.info.render.calls),t("renderer.info.render.triangles").set(e.info.render.triangles),t("renderer.info.render.points").set(e.info.render.points)},start:function(){},end:function(){},attach:function(i){t=i},values:{"renderer.info.memory.geometries":{caption:"Geometries"},"renderer.info.memory.textures":{caption:"Textures"},"renderer.info.programs":{caption:"Programs"},"renderer.info.render.calls":{caption:"Calls"},"renderer.info.render.triangles":{caption:"Triangles",over:1e3},"renderer.info.render.points":{caption:"Points"}},groups:[{caption:"Three.js - Memory",values:["renderer.info.memory.geometries","renderer.info.programs","renderer.info.memory.textures"]},{caption:"Three.js - Render",values:["renderer.info.render.calls","renderer.info.render.triangles","renderer.info.render.points"]}],fractions:[]}},window.BrowserStats=function(){var e=null,t=0,i=0;window.performance&&!performance.memory&&(performance.memory={usedJSHeapSize:0,totalJSHeapSize:0}),performance.memory.totalJSHeapSize===0&&console.warn("totalJSHeapSize === 0... performance.memory is only available in Chrome .");var r=Math.log(1024);function s(a){var o=Math.floor(Math.log(a)/r);return Math.round(100*a/Math.pow(1024,o))/100}return{update:function(){t=s(performance.memory.usedJSHeapSize),i=s(performance.memory.totalJSHeapSize),e("memory").set(t),e("total").set(i)},start:function(){t=0},end:function(){},attach:function(a){e=a},values:{memory:{caption:"Used Memory",average:!0,avgMs:1e3,over:22},total:{caption:"Total Memory"}},groups:[{caption:"Browser",values:["memory","total"]}],fractions:[{base:"total",steps:["memory"]}]}},n.exports={glStats:window.glStats,threeStats:window.threeStats,BrowserStats:window.BrowserStats}},282:n=>{(function(){"performance"in window==0&&(window.performance={});var e=window.performance;if("now"in e==0){var t=Date.now();e.timing&&e.timing.navigationStart&&(t=e.timing.navigationStart),e.now=function(){return Date.now()-t}}e.mark||(e.mark=function(){}),e.measure||(e.measure=function(){})})(),window.rStats=function(e){function t(y,E){for(var b=Object.keys(y),C=0,_=b.length;C<_;C++)E(b[C])}var i=e||{},r=i.colours||["#850700","#c74900","#fcb300","#284280","#4c7c0c"],s=(i.CSSPath?i.CSSPath:"")+"rStats.css";(i.css||["https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300",s]).forEach(function(y){var E,b;E=y,(b=document.createElement("link")).href=E,b.rel="stylesheet",b.type="text/css",document.getElementsByTagName("head")[0].appendChild(b)}),i.values||(i.values={});var a,o,c=10,h={};function d(y,E,b){var C=b||{},_=document.createElement("canvas"),w=_.getContext("2d"),T=0,L=0,R=C.color?C.color:"#666666",P=document.createElement("canvas"),D=P.getContext("2d");P.width=1,P.height=20,D.fillStyle="#444444",D.fillRect(0,0,1,20),D.fillStyle=R,D.fillRect(0,c,1,c),D.fillStyle="#ffffff",D.globalAlpha=.5,D.fillRect(0,c,1,1),D.globalAlpha=1;var M=document.createElement("canvas"),k=M.getContext("2d");return M.width=1,M.height=20,k.fillStyle="#444444",k.fillRect(0,0,1,20),k.fillStyle="#b70000",k.fillRect(0,c,1,c),k.globalAlpha=.5,k.fillStyle="#ffffff",k.fillRect(0,c,1,1),k.globalAlpha=1,_.width=200,_.height=c,_.style.width=_.width+"px",_.style.height=_.height+"px",_.className="rs-canvas",y.appendChild(_),w.fillStyle="#444444",w.fillRect(0,0,_.width,_.height),{draw:function(V,X){(L+=.1*(V-L))>(T*=.99)&&(T=L),w.drawImage(_,1,0,_.width-1,_.height,0,0,_.width-1,_.height),X?w.drawImage(M,_.width-1,_.height-L*_.height/T-c):w.drawImage(P,_.width-1,_.height-L*_.height/T-c)}}}function p(y,E){var b=document.createElement("canvas"),C=b.getContext("2d");return b.width=200,b.height=c*E,b.style.width=b.width+"px",b.style.height=b.height+"px",b.className="rs-canvas",y.appendChild(b),C.fillStyle="#444444",C.fillRect(0,0,b.width,b.height),{draw:function(_){C.drawImage(b,1,0,b.width-1,b.height,0,0,b.width-1,b.height);var w=0;t(_,function(T){var L=_[T]*b.height;C.fillStyle=r[T],C.fillRect(b.width-1,w,1,L),w+=L})}}}function m(y,E){var b,C=y,_=0,w=0,T=0,L=0,R=performance.now(),P=0,D=document.createElement("div"),M=document.createElement("span"),k=document.createElement("div"),V=document.createTextNode(""),X=i?i.values[C.toLowerCase()]:null,$=new d(D,C,X),ae=!1;function z(ce){if(X&&X.average){L+=ce,P++;var U=performance.now();U-R>=(X.avgMs||1e3)&&(T=L/P,L=0,R=U,P=0)}}function j(){b=performance.now(),i.userTimingAPI&&performance.mark(C+"-start"),ae=!0}function Z(){_=performance.now()-b,i.userTimingAPI&&(performance.mark(C+"-end"),ae&&performance.measure(C,C+"-start",C+"-end")),z(_)}return M.className="rs-counter-id",M.textContent=X&&X.caption?X.caption:C,k.className="rs-counter-value",k.appendChild(V),D.appendChild(M),D.appendChild(k),E?E.div.appendChild(D):o.appendChild(D),b=performance.now(),{set:function(ce){z(_=ce)},start:j,tick:function(){Z(),j()},end:Z,frame:function(){var ce=performance.now(),U=ce-b;w++,U>1e3&&(_=X&&X.interpolate===!1?w:1e3*w/U,w=0,b=ce,z(_))},value:function(){return _},draw:function(){var ce=X&&X.average?T:_;V.nodeValue=Math.round(100*ce)/100;var U=X&&(X.below&&_<X.below||X.over&&_>X.over);$.draw(_,U),D.className=U?"rs-counter-base alarm":"rs-counter-base"}}}function A(y){var E=y.toLowerCase();if(E===void 0&&(E="default"),h[E])return h[E];var b=null;i&&i.groups&&t(i.groups,function(_){var w=i.groups[parseInt(_,10)];b||w.values.indexOf(E.toLowerCase())===-1||(b=w)});var C=new m(E,b);return h[E]=C,C}function v(){t(i.plugins,function(y){i.plugins[y].update()}),t(h,function(y){h[y].draw()}),i&&i.fractions&&t(i.fractions,function(y){var E=i.fractions[parseInt(y,10)],b=[],C=h[E.base.toLowerCase()];C&&(C=C.value(),t(i.fractions[y].steps,function(_){var w=i.fractions[y].steps[parseInt(_,10)].toLowerCase(),T=h[w];T&&b.push(T.value()/C)})),E.graph.draw(b)})}return function(){if(i.plugins){i.values||(i.values={}),i.groups||(i.groups=[]),i.fractions||(i.fractions=[]);for(var y=0;y<i.plugins.length;y++)i.plugins[y].attach(A),t(i.plugins[y].values,function(E){i.values[E]=i.plugins[y].values[E]}),i.groups=i.groups.concat(i.plugins[y].groups),i.fractions=i.fractions.concat(i.plugins[y].fractions)}else i.plugins={};(a=document.createElement("div")).className="rs-base",(o=document.createElement("div")).className="rs-container",o.style.height="auto",a.appendChild(o),document.body.appendChild(a),i&&(i.groups&&t(i.groups,function(E){var b=i.groups[parseInt(E,10)],C=document.createElement("div");C.className="rs-group",b.div=C;var _=document.createElement("h1");_.textContent=b.caption,_.addEventListener("click",(function(w){this.classList.toggle("hidden"),w.preventDefault()}).bind(C)),o.appendChild(_),o.appendChild(C)}),i.fractions&&t(i.fractions,function(E){var b=i.fractions[parseInt(E,10)],C=document.createElement("div");C.className="rs-fraction";var _=document.createElement("div");_.className="rs-legend";var w=0;t(i.fractions[E].steps,function(L){var R=document.createElement("p");R.textContent=i.fractions[E].steps[L],R.style.color=r[w],_.appendChild(R),w++}),C.appendChild(_),C.style.height=w*c+"px",b.div=C;var T=new p(C,w);b.graph=T,o.appendChild(C)}))}(),function(y){return y?A(y):{element:a,update:v}}},n.exports=window.rStats},2535:n=>{var e={base64:function(t,i){return"data:"+t+";base64,"+i},isMobile:function(){var t,i=!1;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(i=!0),i},isIOS:function(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)},isIFrame:function(){try{return window.self!==window.top}catch{return!0}},appendQueryParameter:function(t,i,r){var s=t.indexOf("?")<0?"?":"&";return t+(s+i+"=")+r},getQueryParameter:function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(location.search);return i===null?"":decodeURIComponent(i[1].replace(/\+/g," "))},isLandscapeMode:function(){return window.orientation==90||window.orientation==-90}};n.exports=e},5928:(n,e,t)=>{var i,r=t(2535);n.exports=(i=navigator.userAgent||navigator.vendor||window.opera).match(/iPhone/i)||i.match(/iPod/i)?function(){var s=null;this.request=function(){s||(s=setInterval(function(){window.location.href="/",setTimeout(window.stop,0)},15e3))},this.release=function(){s&&(clearInterval(s),s=null)}}:function(){var s=document.createElement("video");s.addEventListener("ended",function(){s.play()}),this.request=function(){s.paused&&(s.src=r.base64("video/webm","GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4ECQoWBAhhTgGcBAAAAAAAH4xFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsggfG7AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU2LjQwLjEwMVdBjUxhdmY1Ni40MC4xMDFzpJAGSJTMbsLpDt/ySkipgX1fRImIQO1MAAAAAAAWVK5rAQAAAAAAADuuAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDmDgQEj44OEO5rKAOABAAAAAAAABrCBsLqBkB9DtnUBAAAAAAAAo+eBAKOmgQAAgKJJg0IAAV4BHsAHBIODCoAACmH2MAAAZxgz4dPSTFi5JACjloED6ACmAECSnABMQAADYAAAWi0quoCjloEH0ACmAECSnABNwAADYAAAWi0quoCjloELuACmAECSnABNgAADYAAAWi0quoCjloEPoACmAECSnABNYAADYAAAWi0quoCjloETiACmAECSnABNIAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTnghdwo5aBAAAApgBAkpwATOAAA2AAAFotKrqAo5aBA+gApgBAkpwATMAAA2AAAFotKrqAo5aBB9AApgBAkpwATIAAA2AAAFotKrqAo5aBC7gApgBAkpwATEAAA2AAAFotKrqAo5aBD6AApgDAkpwAQ2AAA2AAAFotKrqAo5aBE4gApgBAkpwATCAAA2AAAFotKrqAH0O2dQEAAAAAAACU54Iu4KOWgQAAAKYAQJKcAEvAAANgAABaLSq6gKOWgQPoAKYAQJKcAEtgAANgAABaLSq6gKOWgQfQAKYAQJKcAEsAAANgAABaLSq6gKOWgQu4AKYAQJKcAEqAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEogAANgAABaLSq6gKOWgROIAKYAQJKcAEnAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCRlCjloEAAACmAECSnABJgAADYAAAWi0quoCjloED6ACmAECSnABJIAADYAAAWi0quoCjloEH0ACmAMCSnABDYAADYAAAWi0quoCjloELuACmAECSnABI4AADYAAAWi0quoCjloEPoACmAECSnABIoAADYAAAWi0quoCjloETiACmAECSnABIYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngl3Ao5aBAAAApgBAkpwASCAAA2AAAFotKrqAo5aBA+gApgBAkpwASAAAA2AAAFotKrqAo5aBB9AApgBAkpwAR8AAA2AAAFotKrqAo5aBC7gApgBAkpwAR4AAA2AAAFotKrqAo5aBD6AApgBAkpwAR2AAA2AAAFotKrqAo5aBE4gApgBAkpwARyAAA2AAAFotKrqAH0O2dQEAAAAAAACU54J1MKOWgQAAAKYAwJKcAENgAANgAABaLSq6gKOWgQPoAKYAQJKcAEbgAANgAABaLSq6gKOWgQfQAKYAQJKcAEagAANgAABaLSq6gKOWgQu4AKYAQJKcAEaAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEZAAANgAABaLSq6gKOWgROIAKYAQJKcAEYAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCjKCjloEAAACmAECSnABF4AADYAAAWi0quoCjloED6ACmAECSnABFwAADYAAAWi0quoCjloEH0ACmAECSnABFoAADYAAAWi0quoCjloELuACmAECSnABFgAADYAAAWi0quoCjloEPoACmAMCSnABDYAADYAAAWi0quoCjloETiACmAECSnABFYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngqQQo5aBAAAApgBAkpwARUAAA2AAAFotKrqAo5aBA+gApgBAkpwARSAAA2AAAFotKrqAo5aBB9AApgBAkpwARQAAA2AAAFotKrqAo5aBC7gApgBAkpwARQAAA2AAAFotKrqAo5aBD6AApgBAkpwAROAAA2AAAFotKrqAo5aBE4gApgBAkpwARMAAA2AAAFotKrqAH0O2dQEAAAAAAACU54K7gKOWgQAAAKYAQJKcAESgAANgAABaLSq6gKOWgQPoAKYAQJKcAESAAANgAABaLSq6gKOWgQfQAKYAwJKcAENgAANgAABaLSq6gKOWgQu4AKYAQJKcAERgAANgAABaLSq6gKOWgQ+gAKYAQJKcAERAAANgAABaLSq6gKOWgROIAKYAQJKcAEQgAANgAABaLSq6gB9DtnUBAAAAAAAAlOeC0vCjloEAAACmAECSnABEIAADYAAAWi0quoCjloED6ACmAECSnABEAAADYAAAWi0quoCjloEH0ACmAECSnABD4AADYAAAWi0quoCjloELuACmAECSnABDwAADYAAAWi0quoCjloEPoACmAECSnABDoAADYAAAWi0quoCjloETiACmAECSnABDgAADYAAAWi0quoAcU7trAQAAAAAAABG7j7OBALeK94EB8YIBd/CBAw=="),s.play())},this.release=function(){s.pause(),s.src=""}}},8217:(n,e,t)=>{t.d(e,{A:()=>w});var i=t(963),r=t.n(i),s=t(9089),a=t.n(s),o=t(6492),c=t.n(o),h=new URL(t(9169),t.b),d=new URL(t(6085),t.b),p=new URL(t(3931),t.b),m=new URL(t(7889),t.b),A=new URL(t(6517),t.b),v=a()(r()),y=c()(h),E=c()(d),b=c()(p),C=c()(m),_=c()(A);v.push([n.id,`/* .a-fullscreen means not embedded. */
html.a-fullscreen {
  bottom: 0;
  left: 0;
  position: fixed;
  right: 0;
  top: 0;
}

html.a-fullscreen body {
  height: 100%;
  margin: 0;
  overflow: hidden;
  padding: 0;
  width: 100%;
}

/* Class is removed when doing <a-scene embedded>. */
html.a-fullscreen .a-canvas {
  width: 100% !important;
  height: 100% !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  position: fixed !important;
}

html:not(.a-fullscreen) .a-enter-vr,
html:not(.a-fullscreen) .a-enter-ar {
  right: 5px;
  bottom: 5px;
}

html:not(.a-fullscreen) .a-enter-ar {
  right: 60px;
}

/* In chrome mobile the user agent stylesheet set it to white  */
:-webkit-full-screen {
  background-color: transparent;
}

.a-hidden {
  display: none !important;
}

.a-canvas {
  height: 100%;
  left: 0;
  position: absolute;
  top: 0;
  width: 100%;
}

.a-canvas.a-grab-cursor:hover {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

canvas.a-canvas.a-mouse-cursor-hover:hover {
  cursor: pointer;
}

.a-inspector-loader {
  background-color: #ed3160;
  position: fixed;
  left: 3px;
  top: 3px;
  padding: 6px 10px;
  color: #fff;
  text-decoration: none;
  font-size: 12px;
  font-family: Roboto,sans-serif;
  text-align: center;
  z-index: 99999;
  width: 204px;
}

/* Inspector loader animation */
@keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }
@-webkit-keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@-webkit-keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@-webkit-keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }

.a-inspector-loader .dots span {
  animation: dots-1 2s infinite steps(1);
  -webkit-animation: dots-1 2s infinite steps(1);
}

.a-inspector-loader .dots span:first-child + span {
  animation-name: dots-2;
  -webkit-animation-name: dots-2;
}

.a-inspector-loader .dots span:first-child + span + span {
  animation-name: dots-3;
  -webkit-animation-name: dots-3;
}

a-scene {
  display: block;
  position: relative;
  height: 100%;
  width: 100%;
}

a-assets,
a-scene video,
a-scene img,
a-scene audio {
  display: none;
}

.a-enter-vr-modal,
.a-orientation-modal {
  font-family: Consolas, Andale Mono, Courier New, monospace;
}

.a-enter-vr-modal a {
  border-bottom: 1px solid #fff;
  padding: 2px 0;
  text-decoration: none;
  transition: .1s color ease-in;
}

.a-enter-vr-modal a:hover {
  background-color: #fff;
  color: #111;
  padding: 2px 4px;
  position: relative;
  left: -4px;
}

.a-enter-vr,
.a-enter-ar {
  font-family: sans-serif, monospace;
  font-size: 13px;
  width: 100%;
  font-weight: 200;
  line-height: 16px;
  position: absolute;
  right: 20px;
  bottom: 20px;
}

.a-enter-ar.xr {
  right: 90px;
}

.a-enter-vr-button,
.a-enter-vr-modal,
.a-enter-vr-modal a {
  color: #fff;
  user-select: none;
  outline: none;
}

.a-enter-vr-button {
  background: rgba(0, 0, 0, 0.35) url(${y}) 50% 50% no-repeat;
}

.a-enter-ar-button {
  background: rgba(0, 0, 0, 0.20) url(${E}) 50% 50% no-repeat;
}

.a-enter-vr.fullscreen .a-enter-vr-button {
  background-image: url(${b});
}

.a-enter-vr-button,
.a-enter-ar-button {
  background-size: 90% 90%;
  border: 0;
  bottom: 0;
  cursor: pointer;
  min-width: 58px;
  min-height: 34px;
  /* 1.74418604651 */
  /*
    In order to keep the aspect ratio when resizing
    padding-top percentages are relative to the containing block's width.
    http://stackoverflow.com/questions/12121090/responsively-change-div-size-keeping-aspect-ratio
  */
  padding-right: 0;
  padding-top: 0;
  position: absolute;
  right: 0;
  transition: background-color .05s ease;
  -webkit-transition: background-color .05s ease;
  z-index: 9999;
  border-radius: 8px;
  touch-action: manipulation; /* Prevent iOS double tap zoom on the button */
}

.a-enter-ar-button {
  background-size: 100% 90%;
  border-radius: 7px;
}

.a-enter-ar-button:active,
.a-enter-ar-button:hover,
.a-enter-vr-button:active,
.a-enter-vr-button:hover {
  background-color: #ef2d5e;
}

.a-enter-vr-button.resethover {
  background-color: rgba(0, 0, 0, 0.35);
}

.a-enter-vr-modal {
  background-color: #666;
  border-radius: 0;
  display: none;
  min-height: 32px;
  margin-right: 70px;
  padding: 9px;
  width: 280px;
  right: 2%;
  position: absolute;
}

.a-enter-vr-modal:after {
  border-bottom: 10px solid transparent;
  border-left: 10px solid #666;
  border-top: 10px solid transparent;
  display: inline-block;
  content: '';
  position: absolute;
  right: -5px;
  top: 5px;
  width: 0;
  height: 0;
}

.a-enter-vr-modal p,
.a-enter-vr-modal a {
  display: inline;
}

.a-enter-vr-modal p {
  margin: 0;
}

.a-enter-vr-modal p:after {
  content: ' ';
}

.a-orientation-modal {
  background: rgba(244, 244, 244, 1) url(${C}) center no-repeat;
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-orientation-modal:after {
  color: #666;
  content: "Insert phone into Cardboard holder.";
  display: block;
  position: absolute;
  text-align: center;
  top: 70%;
  transform: translateY(-70%);
  width: 100%;
}

.a-orientation-modal button {
  background: url(${_}) no-repeat;
  border: none;
  height: 50px;
  text-indent: -9999px;
  width: 50px;
}

.a-loader-title {
  background-color: rgba(0, 0, 0, 0.6);
  font-family: sans-serif, monospace;
  text-align: center;
  font-size: 20px;
  height: 50px;
  font-weight: 300;
  line-height: 50px;
  position: absolute;
  right: 0px;
  left: 0px;
  top: 0px;
  color: white;
}

.a-modal {
  position: absolute;
  background: rgba(0, 0, 0, 0.60);
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-dialog {
  position: relative;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  z-index: 199995;
  width: 300px;
  height: 200px;
  background-size: contain;
  background-color: white;
  font-family: sans-serif, monospace;
  font-size: 20px;
  border-radius: 3px;
  padding: 6px;
}

.a-dialog-text-container {
  width: 100%;
  height: 70%;
  align-self: flex-start;
  display: flex;
  justify-content: center;
  align-content: center;
  flex-direction: column;
}

.a-dialog-text {
  display: inline-block;
  font-weight: normal;
  font-size: 14pt;
  margin: 8px;
}

.a-dialog-buttons-container {
  display: inline-flex;
  align-self: flex-end;
  width: 100%;
  height: 30%;
}

.a-dialog-button {
  cursor: pointer;
  align-self: center;
  opacity: 0.9;
  height: 80%;
  width: 50%;
  font-size: 12pt;
  margin: 4px;
  border-radius: 2px;
  text-align:center;
  border: none;
  display: inline-block;
  -webkit-transition: all 0.25s ease-in-out;
  transition: all 0.25s ease-in-out;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.10), 0 1px 2px rgba(0, 0, 0, 0.20);
  user-select: none;
}

.a-dialog-permission-button:hover {
  box-shadow: 0 7px 14px rgba(0,0,0,0.20), 0 2px 2px rgba(0,0,0,0.20);
}

.a-dialog-allow-button {
  background-color: #00ceff;
}

.a-dialog-deny-button {
  background-color: #ff005b;
}

.a-dialog-ok-button {
  background-color: #00ceff;
  width: 100%;
}

.a-dom-overlay:not(.a-no-style) {
  overflow: hidden;
  position: absolute;
  pointer-events: none;
  box-sizing: border-box;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
  padding: 1em;
}

.a-dom-overlay:not(.a-no-style)>* {
  pointer-events: auto;
}
`,"",{version:3,sources:["webpack://./src/style/aframe.css"],names:[],mappings:"AAAA,sCAAsC;AACtC;EACE,SAAS;EACT,OAAO;EACP,eAAe;EACf,QAAQ;EACR,MAAM;AACR;;AAEA;EACE,YAAY;EACZ,SAAS;EACT,gBAAgB;EAChB,UAAU;EACV,WAAW;AACb;;AAEA,oDAAoD;AACpD;EACE,sBAAsB;EACtB,uBAAuB;EACvB,iBAAiB;EACjB,kBAAkB;EAClB,mBAAmB;EACnB,oBAAoB;EACpB,0BAA0B;AAC5B;;AAEA;;EAEE,UAAU;EACV,WAAW;AACb;;AAEA;EACE,WAAW;AACb;;AAEA,gEAAgE;AAChE;EACE,6BAA6B;AAC/B;;AAEA;EACE,wBAAwB;AAC1B;;AAEA;EACE,YAAY;EACZ,OAAO;EACP,kBAAkB;EAClB,MAAM;EACN,WAAW;AACb;;AAEA;EACE,YAAY;EACZ,iBAAiB;EACjB,oBAAoB;AACtB;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,yBAAyB;EACzB,eAAe;EACf,SAAS;EACT,QAAQ;EACR,iBAAiB;EACjB,WAAW;EACX,qBAAqB;EACrB,eAAe;EACf,8BAA8B;EAC9B,kBAAkB;EAClB,cAAc;EACd,YAAY;AACd;;AAEA,+BAA+B;AAC/B,oBAAoB,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AAC7D,oBAAoB,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AAC7D,oBAAoB,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AAC7D,4BAA4B,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AACrE,4BAA4B,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AACrE,4BAA4B,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;;AAErE;EACE,sCAAsC;EACtC,8CAA8C;AAChD;;AAEA;EACE,sBAAsB;EACtB,8BAA8B;AAChC;;AAEA;EACE,sBAAsB;EACtB,8BAA8B;AAChC;;AAEA;EACE,cAAc;EACd,kBAAkB;EAClB,YAAY;EACZ,WAAW;AACb;;AAEA;;;;EAIE,aAAa;AACf;;AAEA;;EAEE,0DAA0D;AAC5D;;AAEA;EACE,6BAA6B;EAC7B,cAAc;EACd,qBAAqB;EACrB,6BAA6B;AAC/B;;AAEA;EACE,sBAAsB;EACtB,WAAW;EACX,gBAAgB;EAChB,kBAAkB;EAClB,UAAU;AACZ;;AAEA;;EAEE,kCAAkC;EAClC,eAAe;EACf,WAAW;EACX,gBAAgB;EAChB,iBAAiB;EACjB,kBAAkB;EAClB,WAAW;EACX,YAAY;AACd;;AAEA;EACE,WAAW;AACb;;AAEA;;;EAGE,WAAW;EACX,iBAAiB;EACjB,aAAa;AACf;;AAEA;EACE,yFAA4qB;AAC9qB;;AAEA;EACE,yFAAkzB;AACpzB;;AAEA;EACE,yDAA2qK;AAC7qK;;AAEA;;EAEE,wBAAwB;EACxB,SAAS;EACT,SAAS;EACT,eAAe;EACf,eAAe;EACf,gBAAgB;EAChB,kBAAkB;EAClB;;;;GAIC;EACD,gBAAgB;EAChB,cAAc;EACd,kBAAkB;EAClB,QAAQ;EACR,sCAAsC;EACtC,8CAA8C;EAC9C,aAAa;EACb,kBAAkB;EAClB,0BAA0B,EAAE,8CAA8C;AAC5E;;AAEA;EACE,yBAAyB;EACzB,kBAAkB;AACpB;;AAEA;;;;EAIE,yBAAyB;AAC3B;;AAEA;EACE,qCAAqC;AACvC;;AAEA;EACE,sBAAsB;EACtB,gBAAgB;EAChB,aAAa;EACb,gBAAgB;EAChB,kBAAkB;EAClB,YAAY;EACZ,YAAY;EACZ,SAAS;EACT,kBAAkB;AACpB;;AAEA;EACE,qCAAqC;EACrC,4BAA4B;EAC5B,kCAAkC;EAClC,qBAAqB;EACrB,WAAW;EACX,kBAAkB;EAClB,WAAW;EACX,QAAQ;EACR,QAAQ;EACR,SAAS;AACX;;AAEA;;EAEE,eAAe;AACjB;;AAEA;EACE,SAAS;AACX;;AAEA;EACE,YAAY;AACd;;AAEA;EACE,2FAAivF;EACjvF,wBAAwB;EACxB,SAAS;EACT,eAAe;EACf,gBAAgB;EAChB,OAAO;EACP,iBAAiB;EACjB,QAAQ;EACR,eAAe;EACf,MAAM;EACN,gBAAgB;AAClB;;AAEA;EACE,WAAW;EACX,8CAA8C;EAC9C,cAAc;EACd,kBAAkB;EAClB,kBAAkB;EAClB,QAAQ;EACR,2BAA2B;EAC3B,WAAW;AACb;;AAEA;EACE,6DAA25B;EAC35B,YAAY;EACZ,YAAY;EACZ,oBAAoB;EACpB,WAAW;AACb;;AAEA;EACE,oCAAoC;EACpC,kCAAkC;EAClC,kBAAkB;EAClB,eAAe;EACf,YAAY;EACZ,gBAAgB;EAChB,iBAAiB;EACjB,kBAAkB;EAClB,UAAU;EACV,SAAS;EACT,QAAQ;EACR,YAAY;AACd;;AAEA;EACE,kBAAkB;EAClB,+BAA+B;EAC/B,wBAAwB;EACxB,SAAS;EACT,eAAe;EACf,gBAAgB;EAChB,OAAO;EACP,iBAAiB;EACjB,QAAQ;EACR,eAAe;EACf,MAAM;EACN,gBAAgB;AAClB;;AAEA;EACE,kBAAkB;EAClB,SAAS;EACT,QAAQ;EACR,gCAAgC;EAChC,eAAe;EACf,YAAY;EACZ,aAAa;EACb,wBAAwB;EACxB,uBAAuB;EACvB,kCAAkC;EAClC,eAAe;EACf,kBAAkB;EAClB,YAAY;AACd;;AAEA;EACE,WAAW;EACX,WAAW;EACX,sBAAsB;EACtB,aAAa;EACb,uBAAuB;EACvB,qBAAqB;EACrB,sBAAsB;AACxB;;AAEA;EACE,qBAAqB;EACrB,mBAAmB;EACnB,eAAe;EACf,WAAW;AACb;;AAEA;EACE,oBAAoB;EACpB,oBAAoB;EACpB,WAAW;EACX,WAAW;AACb;;AAEA;EACE,eAAe;EACf,kBAAkB;EAClB,YAAY;EACZ,WAAW;EACX,UAAU;EACV,eAAe;EACf,WAAW;EACX,kBAAkB;EAClB,iBAAiB;EACjB,YAAY;EACZ,qBAAqB;EACrB,yCAAyC;EACzC,iCAAiC;EACjC,wEAAwE;EACxE,iBAAiB;AACnB;;AAEA;EACE,mEAAmE;AACrE;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,yBAAyB;EACzB,WAAW;AACb;;AAEA;EACE,gBAAgB;EAChB,kBAAkB;EAClB,oBAAoB;EACpB,sBAAsB;EACtB,SAAS;EACT,OAAO;EACP,QAAQ;EACR,MAAM;EACN,YAAY;AACd;;AAEA;EACE,oBAAoB;AACtB",sourcesContent:[`/* .a-fullscreen means not embedded. */
html.a-fullscreen {
  bottom: 0;
  left: 0;
  position: fixed;
  right: 0;
  top: 0;
}

html.a-fullscreen body {
  height: 100%;
  margin: 0;
  overflow: hidden;
  padding: 0;
  width: 100%;
}

/* Class is removed when doing <a-scene embedded>. */
html.a-fullscreen .a-canvas {
  width: 100% !important;
  height: 100% !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  position: fixed !important;
}

html:not(.a-fullscreen) .a-enter-vr,
html:not(.a-fullscreen) .a-enter-ar {
  right: 5px;
  bottom: 5px;
}

html:not(.a-fullscreen) .a-enter-ar {
  right: 60px;
}

/* In chrome mobile the user agent stylesheet set it to white  */
:-webkit-full-screen {
  background-color: transparent;
}

.a-hidden {
  display: none !important;
}

.a-canvas {
  height: 100%;
  left: 0;
  position: absolute;
  top: 0;
  width: 100%;
}

.a-canvas.a-grab-cursor:hover {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

canvas.a-canvas.a-mouse-cursor-hover:hover {
  cursor: pointer;
}

.a-inspector-loader {
  background-color: #ed3160;
  position: fixed;
  left: 3px;
  top: 3px;
  padding: 6px 10px;
  color: #fff;
  text-decoration: none;
  font-size: 12px;
  font-family: Roboto,sans-serif;
  text-align: center;
  z-index: 99999;
  width: 204px;
}

/* Inspector loader animation */
@keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }
@-webkit-keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@-webkit-keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@-webkit-keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }

.a-inspector-loader .dots span {
  animation: dots-1 2s infinite steps(1);
  -webkit-animation: dots-1 2s infinite steps(1);
}

.a-inspector-loader .dots span:first-child + span {
  animation-name: dots-2;
  -webkit-animation-name: dots-2;
}

.a-inspector-loader .dots span:first-child + span + span {
  animation-name: dots-3;
  -webkit-animation-name: dots-3;
}

a-scene {
  display: block;
  position: relative;
  height: 100%;
  width: 100%;
}

a-assets,
a-scene video,
a-scene img,
a-scene audio {
  display: none;
}

.a-enter-vr-modal,
.a-orientation-modal {
  font-family: Consolas, Andale Mono, Courier New, monospace;
}

.a-enter-vr-modal a {
  border-bottom: 1px solid #fff;
  padding: 2px 0;
  text-decoration: none;
  transition: .1s color ease-in;
}

.a-enter-vr-modal a:hover {
  background-color: #fff;
  color: #111;
  padding: 2px 4px;
  position: relative;
  left: -4px;
}

.a-enter-vr,
.a-enter-ar {
  font-family: sans-serif, monospace;
  font-size: 13px;
  width: 100%;
  font-weight: 200;
  line-height: 16px;
  position: absolute;
  right: 20px;
  bottom: 20px;
}

.a-enter-ar.xr {
  right: 90px;
}

.a-enter-vr-button,
.a-enter-vr-modal,
.a-enter-vr-modal a {
  color: #fff;
  user-select: none;
  outline: none;
}

.a-enter-vr-button {
  background: rgba(0, 0, 0, 0.35) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='108' height='62' viewBox='0 0 108 62'%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z' fill='%23fff'/%3E%3Cpath d='M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z' fill='%23fff'/%3E%3C/svg%3E") 50% 50% no-repeat;
}

.a-enter-ar-button {
  background: rgba(0, 0, 0, 0.20) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='108' height='62' viewBox='0 0 108 62'%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z' fill='%23fff'/%3E%3Cpath d='M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z' fill='%23fff'/%3E%3Cpath d='M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z' fill='%23fff'/%3E%3C/svg%3E") 50% 50% no-repeat;
}

.a-enter-vr.fullscreen .a-enter-vr-button {
  background-image: url("data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8' standalone='no'%3F%3E%3Csvg width='108' height='62' viewBox='0 0 108 62' version='1.1' id='svg320' sodipodi:docname='fullscreen-aframe.svg' xml:space='preserve' inkscape:version='1.2.1 (9c6d41e  2022-07-14)' xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape' xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd' xmlns='http://www.w3.org/2000/svg' xmlns:svg='http://www.w3.org/2000/svg' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23' xmlns:cc='http://creativecommons.org/ns%23' xmlns:dc='http://purl.org/dc/elements/1.1/'%3E%3Cdefs id='defs324' /%3E%3Csodipodi:namedview id='namedview322' pagecolor='%23ffffff' bordercolor='%23000000' borderopacity='0.25' inkscape:showpageshadow='2' inkscape:pageopacity='0.0' inkscape:pagecheckerboard='0' inkscape:deskcolor='%23d1d1d1' showgrid='false' inkscape:zoom='3.8064516' inkscape:cx='91.423729' inkscape:cy='-1.4449153' inkscape:window-width='1440' inkscape:window-height='847' inkscape:window-x='32' inkscape:window-y='25' inkscape:window-maximized='0' inkscape:current-layer='svg320' /%3E%3Ctitle id='title312'%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z' fill='%23fff' id='path314' style='fill:%23ffffff' /%3E%3Cg id='g356' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g358' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g360' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g362' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g364' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g366' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g368' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g370' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g372' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g374' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g376' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g378' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g380' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g382' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g384' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cmetadata id='metadata561'%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=''%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d='m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4' id='path596' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4' id='path598' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4' id='path600' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616' id='path602' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3C/svg%3E");
}

.a-enter-vr-button,
.a-enter-ar-button {
  background-size: 90% 90%;
  border: 0;
  bottom: 0;
  cursor: pointer;
  min-width: 58px;
  min-height: 34px;
  /* 1.74418604651 */
  /*
    In order to keep the aspect ratio when resizing
    padding-top percentages are relative to the containing block's width.
    http://stackoverflow.com/questions/12121090/responsively-change-div-size-keeping-aspect-ratio
  */
  padding-right: 0;
  padding-top: 0;
  position: absolute;
  right: 0;
  transition: background-color .05s ease;
  -webkit-transition: background-color .05s ease;
  z-index: 9999;
  border-radius: 8px;
  touch-action: manipulation; /* Prevent iOS double tap zoom on the button */
}

.a-enter-ar-button {
  background-size: 100% 90%;
  border-radius: 7px;
}

.a-enter-ar-button:active,
.a-enter-ar-button:hover,
.a-enter-vr-button:active,
.a-enter-vr-button:hover {
  background-color: #ef2d5e;
}

.a-enter-vr-button.resethover {
  background-color: rgba(0, 0, 0, 0.35);
}

.a-enter-vr-modal {
  background-color: #666;
  border-radius: 0;
  display: none;
  min-height: 32px;
  margin-right: 70px;
  padding: 9px;
  width: 280px;
  right: 2%;
  position: absolute;
}

.a-enter-vr-modal:after {
  border-bottom: 10px solid transparent;
  border-left: 10px solid #666;
  border-top: 10px solid transparent;
  display: inline-block;
  content: '';
  position: absolute;
  right: -5px;
  top: 5px;
  width: 0;
  height: 0;
}

.a-enter-vr-modal p,
.a-enter-vr-modal a {
  display: inline;
}

.a-enter-vr-modal p {
  margin: 0;
}

.a-enter-vr-modal p:after {
  content: ' ';
}

.a-orientation-modal {
  background: rgba(244, 244, 244, 1) url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E) center no-repeat;
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-orientation-modal:after {
  color: #666;
  content: "Insert phone into Cardboard holder.";
  display: block;
  position: absolute;
  text-align: center;
  top: 70%;
  transform: translateY(-70%);
  width: 100%;
}

.a-orientation-modal button {
  background: url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E) no-repeat;
  border: none;
  height: 50px;
  text-indent: -9999px;
  width: 50px;
}

.a-loader-title {
  background-color: rgba(0, 0, 0, 0.6);
  font-family: sans-serif, monospace;
  text-align: center;
  font-size: 20px;
  height: 50px;
  font-weight: 300;
  line-height: 50px;
  position: absolute;
  right: 0px;
  left: 0px;
  top: 0px;
  color: white;
}

.a-modal {
  position: absolute;
  background: rgba(0, 0, 0, 0.60);
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-dialog {
  position: relative;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  z-index: 199995;
  width: 300px;
  height: 200px;
  background-size: contain;
  background-color: white;
  font-family: sans-serif, monospace;
  font-size: 20px;
  border-radius: 3px;
  padding: 6px;
}

.a-dialog-text-container {
  width: 100%;
  height: 70%;
  align-self: flex-start;
  display: flex;
  justify-content: center;
  align-content: center;
  flex-direction: column;
}

.a-dialog-text {
  display: inline-block;
  font-weight: normal;
  font-size: 14pt;
  margin: 8px;
}

.a-dialog-buttons-container {
  display: inline-flex;
  align-self: flex-end;
  width: 100%;
  height: 30%;
}

.a-dialog-button {
  cursor: pointer;
  align-self: center;
  opacity: 0.9;
  height: 80%;
  width: 50%;
  font-size: 12pt;
  margin: 4px;
  border-radius: 2px;
  text-align:center;
  border: none;
  display: inline-block;
  -webkit-transition: all 0.25s ease-in-out;
  transition: all 0.25s ease-in-out;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.10), 0 1px 2px rgba(0, 0, 0, 0.20);
  user-select: none;
}

.a-dialog-permission-button:hover {
  box-shadow: 0 7px 14px rgba(0,0,0,0.20), 0 2px 2px rgba(0,0,0,0.20);
}

.a-dialog-allow-button {
  background-color: #00ceff;
}

.a-dialog-deny-button {
  background-color: #ff005b;
}

.a-dialog-ok-button {
  background-color: #00ceff;
  width: 100%;
}

.a-dom-overlay:not(.a-no-style) {
  overflow: hidden;
  position: absolute;
  pointer-events: none;
  box-sizing: border-box;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
  padding: 1em;
}

.a-dom-overlay:not(.a-no-style)>* {
  pointer-events: auto;
}
`],sourceRoot:""}]);const w=v},2470:(n,e,t)=>{t.d(e,{A:()=>o});var i=t(963),r=t.n(i),s=t(9089),a=t.n(s)()(r());a.push([n.id,`.rs-base {
  background-color: #333;
  color: #fafafa;
  border-radius: 0;
  font: 10px monospace;
  left: 5px;
  line-height: 1em;
  opacity: 0.85;
  overflow: hidden;
  padding: 10px;
  position: fixed;
  top: 5px;
  width: 300px;
  z-index: 10000;
}

.rs-base div.hidden {
  display: none;
}

.rs-base h1 {
  color: #fff;
  cursor: pointer;
  font-size: 1.4em;
  font-weight: 300;
  margin: 0 0 5px;
  padding: 0;
}

.rs-group {
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  -webkit-flex-direction: column-reverse;
  flex-direction: column-reverse;
  margin-bottom: 5px;
}

.rs-group:last-child {
  margin-bottom: 0;
}

.rs-counter-base {
  align-items: center;
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  height: 10px;
  -webkit-justify-content: space-between;
  justify-content: space-between;
  margin: 2px 0;
}

.rs-counter-base.alarm {
  color: #b70000;
  text-shadow: 0 0 0 #b70000,
               0 0 1px #fff,
               0 0 1px #fff,
               0 0 2px #fff,
               0 0 2px #fff,
               0 0 3px #fff,
               0 0 3px #fff,
               0 0 4px #fff,
               0 0 4px #fff;
}

.rs-counter-id {
  font-weight: 300;
  -webkit-box-ordinal-group: 0;
  -webkit-order: 0;
  order: 0;
  width: 54px;
}

.rs-counter-value {
  font-weight: 300;
  -webkit-box-ordinal-group: 1;
  -webkit-order: 1;
  order: 1;
  text-align: right;
  width: 35px;
}

.rs-canvas {
  -webkit-box-ordinal-group: 2;
  -webkit-order: 2;
  order: 2;
}

@media (min-width: 480px) {
  .rs-base {
    left: 20px;
    top: 20px;
  }
}
`,"",{version:3,sources:["webpack://./src/style/rStats.css"],names:[],mappings:"AAAA;EACE,sBAAsB;EACtB,cAAc;EACd,gBAAgB;EAChB,oBAAoB;EACpB,SAAS;EACT,gBAAgB;EAChB,aAAa;EACb,gBAAgB;EAChB,aAAa;EACb,eAAe;EACf,QAAQ;EACR,YAAY;EACZ,cAAc;AAChB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,WAAW;EACX,eAAe;EACf,gBAAgB;EAChB,gBAAgB;EAChB,eAAe;EACf,UAAU;AACZ;;AAEA;EACE,oBAAoB;EACpB,qBAAqB;EACrB,aAAa;EACb,sCAAsC;EACtC,8BAA8B;EAC9B,kBAAkB;AACpB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,mBAAmB;EACnB,oBAAoB;EACpB,qBAAqB;EACrB,aAAa;EACb,YAAY;EACZ,sCAAsC;EACtC,8BAA8B;EAC9B,aAAa;AACf;;AAEA;EACE,cAAc;EACd;;;;;;;;2BAQyB;AAC3B;;AAEA;EACE,gBAAgB;EAChB,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;EACR,WAAW;AACb;;AAEA;EACE,gBAAgB;EAChB,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;EACR,iBAAiB;EACjB,WAAW;AACb;;AAEA;EACE,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;AACV;;AAEA;EACE;IACE,UAAU;IACV,SAAS;EACX;AACF",sourcesContent:[`.rs-base {
  background-color: #333;
  color: #fafafa;
  border-radius: 0;
  font: 10px monospace;
  left: 5px;
  line-height: 1em;
  opacity: 0.85;
  overflow: hidden;
  padding: 10px;
  position: fixed;
  top: 5px;
  width: 300px;
  z-index: 10000;
}

.rs-base div.hidden {
  display: none;
}

.rs-base h1 {
  color: #fff;
  cursor: pointer;
  font-size: 1.4em;
  font-weight: 300;
  margin: 0 0 5px;
  padding: 0;
}

.rs-group {
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  -webkit-flex-direction: column-reverse;
  flex-direction: column-reverse;
  margin-bottom: 5px;
}

.rs-group:last-child {
  margin-bottom: 0;
}

.rs-counter-base {
  align-items: center;
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  height: 10px;
  -webkit-justify-content: space-between;
  justify-content: space-between;
  margin: 2px 0;
}

.rs-counter-base.alarm {
  color: #b70000;
  text-shadow: 0 0 0 #b70000,
               0 0 1px #fff,
               0 0 1px #fff,
               0 0 2px #fff,
               0 0 2px #fff,
               0 0 3px #fff,
               0 0 3px #fff,
               0 0 4px #fff,
               0 0 4px #fff;
}

.rs-counter-id {
  font-weight: 300;
  -webkit-box-ordinal-group: 0;
  -webkit-order: 0;
  order: 0;
  width: 54px;
}

.rs-counter-value {
  font-weight: 300;
  -webkit-box-ordinal-group: 1;
  -webkit-order: 1;
  order: 1;
  text-align: right;
  width: 35px;
}

.rs-canvas {
  -webkit-box-ordinal-group: 2;
  -webkit-order: 2;
  order: 2;
}

@media (min-width: 480px) {
  .rs-base {
    left: 20px;
    top: 20px;
  }
}
`],sourceRoot:""}]);const o=a},7180:(n,e,t)=>{t.r(e),t.d(e,{default:()=>b});var i=t(5072),r=t.n(i),s=t(7825),a=t.n(s),o=t(7659),c=t.n(o),h=t(5056),d=t.n(h),p=t(540),m=t.n(p),A=t(1113),v=t.n(A),y=t(8217),E={};E.styleTagTransform=v(),E.setAttributes=d(),E.insert=c().bind(null,"head"),E.domAPI=a(),E.insertStyleElement=m(),r()(y.A,E);const b=y.A&&y.A.locals?y.A.locals:void 0},9379:(n,e,t)=>{t.r(e),t.d(e,{default:()=>b});var i=t(5072),r=t.n(i),s=t(7825),a=t.n(s),o=t(7659),c=t.n(o),h=t(5056),d=t.n(h),p=t(540),m=t.n(p),A=t(1113),v=t.n(A),y=t(2470),E={};E.styleTagTransform=v(),E.setAttributes=d(),E.insert=c().bind(null,"head"),E.domAPI=a(),E.insertStyleElement=m(),r()(y.A,E);const b=y.A&&y.A.locals?y.A.locals:void 0},5072:n=>{var e=[];function t(s){for(var a=-1,o=0;o<e.length;o++)if(e[o].identifier===s){a=o;break}return a}function i(s,a){for(var o={},c=[],h=0;h<s.length;h++){var d=s[h],p=a.base?d[0]+a.base:d[0],m=o[p]||0,A="".concat(p," ").concat(m);o[p]=m+1;var v=t(A),y={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(v!==-1)e[v].references++,e[v].updater(y);else{var E=r(y,a);a.byIndex=h,e.splice(h,0,{identifier:A,updater:E,references:1})}c.push(A)}return c}function r(s,a){var o=a.domAPI(a);return o.update(s),function(c){if(c){if(c.css===s.css&&c.media===s.media&&c.sourceMap===s.sourceMap&&c.supports===s.supports&&c.layer===s.layer)return;o.update(s=c)}else o.remove()}}n.exports=function(s,a){var o=i(s=s||[],a=a||{});return function(c){c=c||[];for(var h=0;h<o.length;h++){var d=t(o[h]);e[d].references--}for(var p=i(c,a),m=0;m<o.length;m++){var A=t(o[m]);e[A].references===0&&(e[A].updater(),e.splice(A,1))}o=p}}},7659:n=>{var e={};n.exports=function(t,i){var r=function(s){if(e[s]===void 0){var a=document.querySelector(s);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch{a=null}e[s]=a}return e[s]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(i)}},540:n=>{n.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},5056:(n,e,t)=>{n.exports=function(i){var r=t.nc;r&&i.setAttribute("nonce",r)}},7825:n=>{n.exports=function(e){if(typeof document>"u")return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(i){(function(r,s,a){var o="";a.supports&&(o+="@supports (".concat(a.supports,") {")),a.media&&(o+="@media ".concat(a.media," {"));var c=a.layer!==void 0;c&&(o+="@layer".concat(a.layer.length>0?" ".concat(a.layer):""," {")),o+=a.css,c&&(o+="}"),a.media&&(o+="}"),a.supports&&(o+="}");var h=a.sourceMap;h&&typeof btoa<"u"&&(o+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(h))))," */")),s.styleTagTransform(o,r,s.options)})(t,e,i)},remove:function(){(function(i){if(i.parentNode===null)return!1;i.parentNode.removeChild(i)})(t)}}}},1113:n=>{n.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},3931:n=>{n.exports="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27 standalone=%27no%27%3F%3E%3Csvg width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27 version=%271.1%27 id=%27svg320%27 sodipodi:docname=%27fullscreen-aframe.svg%27 xml:space=%27preserve%27 inkscape:version=%271.2.1 %289c6d41e  2022-07-14%29%27 xmlns:inkscape=%27http://www.inkscape.org/namespaces/inkscape%27 xmlns:sodipodi=%27http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:svg=%27http://www.w3.org/2000/svg%27 xmlns:rdf=%27http://www.w3.org/1999/02/22-rdf-syntax-ns%23%27 xmlns:cc=%27http://creativecommons.org/ns%23%27 xmlns:dc=%27http://purl.org/dc/elements/1.1/%27%3E%3Cdefs id=%27defs324%27 /%3E%3Csodipodi:namedview id=%27namedview322%27 pagecolor=%27%23ffffff%27 bordercolor=%27%23000000%27 borderopacity=%270.25%27 inkscape:showpageshadow=%272%27 inkscape:pageopacity=%270.0%27 inkscape:pagecheckerboard=%270%27 inkscape:deskcolor=%27%23d1d1d1%27 showgrid=%27false%27 inkscape:zoom=%273.8064516%27 inkscape:cx=%2791.423729%27 inkscape:cy=%27-1.4449153%27 inkscape:window-width=%271440%27 inkscape:window-height=%27847%27 inkscape:window-x=%2732%27 inkscape:window-y=%2725%27 inkscape:window-maximized=%270%27 inkscape:current-layer=%27svg320%27 /%3E%3Ctitle id=%27title312%27%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z%27 fill=%27%23fff%27 id=%27path314%27 style=%27fill:%23ffffff%27 /%3E%3Cg id=%27g356%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g358%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g360%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g362%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g364%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g366%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g368%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g370%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g372%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g374%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g376%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g378%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g380%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g382%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g384%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cmetadata id=%27metadata561%27%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=%27%27%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d=%27m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4%27 id=%27path596%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4%27 id=%27path598%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4%27 id=%27path600%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616%27 id=%27path602%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3C/svg%3E"},6085:n=>{n.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"},9169:n=>{n.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"},6517:n=>{n.exports="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E"},7889:n=>{n.exports="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E"}},zL={};function xt(n){var e=zL[n];if(e!==void 0)return e.exports;var t=zL[n]={id:n,exports:{}};return QF[n](t,t.exports,xt),t.exports}xt.m=QF,xt.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return xt.d(e,{a:e}),e},xt.d=(n,e)=>{for(var t in e)xt.o(e,t)&&!xt.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},xt.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),xt.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),xt.r=n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},xt.b=document.baseURI||self.location.href,xt.nc=void 0;var zF={};xt.d(zF,{A:()=>jne});var hw={};xt.r(hw),xt.d(hw,{computeMikkTSpaceTangents:()=>V$,computeMorphedAttributes:()=>J$,deepCloneAttribute:()=>q$,deinterleaveAttribute:()=>_y,deinterleaveGeometry:()=>X$,estimateBytesUsed:()=>Y$,interleaveAttributes:()=>j$,mergeAttributes:()=>Mw,mergeGeometries:()=>W$,mergeGroups:()=>Z$,mergeVertices:()=>K$,toCreasedNormals:()=>$$,toTrianglesDrawMode:()=>Tw});var dw={};xt.r(dw),xt.d(dw,{checkARSupport:()=>Q2,checkHeadsetConnected:()=>F2,checkVRSupport:()=>Dw,isAppleVisionPro:()=>S5,isBrowserEnvironment:()=>W2,isFirefoxReality:()=>M5,isIOS:()=>sA,isIpad:()=>w5,isLandscape:()=>T5,isMobile:()=>sc,isMobileDeviceRequestingDesktopSite:()=>z2,isMobileVR:()=>G2,isNodeEnvironment:()=>qee,isOculusBrowser:()=>H2,isR7:()=>V2,isTablet:()=>_5,isWebXRAvailable:()=>zb});var fw={};xt.r(fw),xt.d(fw,{clearObject:()=>j2,createPool:()=>q2,removeUnusedKeys:()=>Um});var pw={};xt.r(pw),xt.d(pw,{equals:()=>Av,isCoordinate:()=>Jee,isCoordinates:()=>I5,parse:()=>Ty,regex:()=>B5,stringify:()=>mv,toVector3:()=>Zee});var mw={};xt.r(mw),xt.d(mw,{getComponentProperty:()=>R5,getComponentPropertyPath:()=>Hb,setComponentProperty:()=>X2});var Aw={};xt.r(Aw),xt.d(Aw,{parseUrl:()=>Lw,validateCubemapSrc:()=>L5,validateEnvMapSrc:()=>Y2,validateSrc:()=>By});var gw={};xt.r(gw),xt.d(gw,{createCompatibleTexture:()=>J2,handleTextureEvents:()=>K2,isCompatibleTexture:()=>O5,setTextureProperties:()=>Iy,updateDistortionMap:()=>Ra,updateEnvMap:()=>Ow,updateMap:()=>vv,updateMapMaterialFromData:()=>Gb});var Od={};xt.r(Od),xt.d(Od,{parse:()=>km,stringify:()=>nte,toCamelCase:()=>P5});var vw={};xt.r(vw),xt.d(vw,{checkControllerPresentAndSetup:()=>Ps,emitIfAxesChanged:()=>ta,findMatchingControllerWebXR:()=>Z2,isControllerPresentWebXR:()=>U5,onButtonEvent:()=>Lt});var yw={};xt.r(yw),xt.d(yw,{bind:()=>ate,checkHeadsetConnected:()=>ote,clone:()=>eM,coordinates:()=>pw,debounce:()=>N5,debug:()=>mn,deepEqual:()=>tM,device:()=>dw,diff:()=>F5,entity:()=>mw,extend:()=>Zr,extendDeep:()=>Cs,findAllScenes:()=>z5,forceCanvasResizeSafariMobile:()=>D5,getElData:()=>fte,getUrlParameter:()=>Nm,isIOS:()=>lte,isIframed:()=>Q5,isMobile:()=>cte,material:()=>gw,objectPool:()=>fw,shouldCaptureKeyEvent:()=>nM,split:()=>Xo,splitString:()=>dte,srcLoader:()=>Aw,styleParser:()=>Od,throttle:()=>ute,throttleLeadingAndTrailing:()=>k5,throttleTick:()=>hte,trackedControls:()=>vw});var bw={};xt.r(bw),xt.d(bw,{isSingleProperty:()=>Vb,parseProperties:()=>W5,parseProperty:()=>Wb,process:()=>aA,processPropertyDefinition:()=>Uw,stringifyProperties:()=>q5,stringifyProperty:()=>iM});var Ew={};xt.r(Ew),xt.d(Ew,{Component:()=>Fm,components:()=>mi,registerComponent:()=>vt,registrationOrderWarnings:()=>Y5});var xw={};xt.r(xw),xt.d(xw,{System:()=>Oy,registerSystem:()=>$s,systems:()=>Qo});var HF={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},I2={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},C$=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective"],Ey={CSS:{},springs:{}};function Fo(n,e,t){return Math.min(Math.max(n,e),t)}function Rp(n,e){return n.indexOf(e)>-1}function x0(n,e){return n.apply(null,e)}var _$=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,w$=/^rgb/,S$=/^hsl/,St={arr:function(n){return Array.isArray(n)},obj:function(n){return Rp(Object.prototype.toString.call(n),"Object")},pth:function(n){return St.obj(n)&&n.hasOwnProperty("totalLength")},svg:function(n){return n instanceof SVGElement},inp:function(n){return n instanceof HTMLInputElement},dom:function(n){return n.nodeType||St.svg(n)},str:function(n){return typeof n=="string"},fnc:function(n){return typeof n=="function"},und:function(n){return n===void 0},hex:function(n){return _$.test(n)},rgb:function(n){return w$.test(n)},hsl:function(n){return S$.test(n)},col:function(n){return St.hex(n)||St.rgb(n)||St.hsl(n)},key:function(n){return!HF.hasOwnProperty(n)&&!I2.hasOwnProperty(n)&&n!=="targets"&&n!=="keyframes"}},M$=/\(([^)]+)\)/;function GF(n){var e=M$.exec(n);return e?e[1].split(",").map(function(t){return parseFloat(t)}):[]}function VF(n,e){var t=GF(n),i=Fo(St.und(t[0])?1:t[0],.1,100),r=Fo(St.und(t[1])?100:t[1],.1,100),s=Fo(St.und(t[2])?10:t[2],.1,100),a=Fo(St.und(t[3])?0:t[3],.1,100),o=Math.sqrt(r/i),c=s/(2*Math.sqrt(r*i)),h=c<1?o*Math.sqrt(1-c*c):0,d=c<1?(c*o-a)/h:-a+o;function p(m){var A=e?e*m/1e3:m;return A=c<1?Math.exp(-A*c*o)*(1*Math.cos(h*A)+d*Math.sin(h*A)):(1+d*A)*Math.exp(-A*o),m===0||m===1?m:1-A}return e?p:function(){var m=Ey.springs[n];if(m)return m;for(var A=1/6,v=0,y=0;;)if(p(v+=A)===1){if(++y>=16)break}else y=0;var E=v*A*1e3;return Ey.springs[n]=E,E}}function C0(n,e){n===void 0&&(n=1),e===void 0&&(e=.5);var t=Fo(n,1,10),i=Fo(e,.1,2);return function(r){return r===0||r===1?r:-t*Math.pow(2,10*(r-1))*Math.sin((r-1-i/(2*Math.PI)*Math.asin(1/t))*(2*Math.PI)/i)}}function T$(n){return n===void 0&&(n=10),function(e){return Math.round(e*n)*(1/n)}}var HL=function(){var n=.1;function e(a,o){return 1-3*o+3*a}function t(a,o){return 3*o-6*a}function i(a){return 3*a}function r(a,o,c){return((e(o,c)*a+t(o,c))*a+i(o))*a}function s(a,o,c){return 3*e(o,c)*a*a+2*t(o,c)*a+i(o)}return function(a,o,c,h){if(0<=a&&a<=1&&0<=c&&c<=1){var d=new Float32Array(11);if(a!==o||c!==h)for(var p=0;p<11;++p)d[p]=r(p*n,a,c);return function(m){return a===o&&c===h||m===0||m===1?m:r(function(A){for(var v=0,y=1;y!==10&&d[y]<=A;++y)v+=n;--y;var E=v+(A-d[y])/(d[y+1]-d[y])*n,b=s(E,a,c);return b>=.001?function(C,_,w,T){for(var L=0;L<4;++L){var R=s(_,w,T);if(R===0)return _;_-=(r(_,w,T)-C)/R}return _}(A,E,a,c):b===0?E:function(C,_,w,T,L){var R,P,D=0;do(R=r(P=_+(w-_)/2,T,L)-C)>0?w=P:_=P;while(Math.abs(R)>1e-7&&++D<10);return P}(A,v,v+n,a,c)}(m),o,h)}}}}(),WF=function(){var n=["Quad","Cubic","Quart","Quint","Sine","Expo","Circ","Back","Elastic"],e={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],C0],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(a,o){return function(c){return 1-C0(a,o)(1-c)}}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(a,o){return function(c){return c<.5?C0(a,o)(2*c)/2:1-C0(a,o)(-2*c+2)/2}}]},t={linear:[.25,.25,.75,.75]};for(var i in e)for(var r=0,s=e[i].length;r<s;r++)t["ease"+i+n[r]]=e[i][r];return t}();function Cw(n,e){if(St.fnc(n))return n;var t=n.split("(")[0],i=WF[t],r=GF(n);switch(t){case"spring":return VF(n,e);case"cubicBezier":return x0(HL,r);case"steps":return x0(T$,r);default:return St.fnc(i)?x0(i,r):x0(HL,i)}}function qF(n){try{return document.querySelectorAll(n)}catch{return}}var GL=[];function xy(n,e){for(var t=GL,i=n.length,r=arguments.length>=2?arguments[1]:void 0,s=0;s<i;s++)if(s in n){var a=n[s];e.call(r,a,s,n)&&t.push(a)}return(GL=n).length=0,t}function Qb(n,e){e||(e=[]);for(var t=0,i=n.length;t<i;t++){var r=n[t];Array.isArray(r)?Qb(r,e):e.push(r)}return e}function VL(n){return St.arr(n)?n:(St.str(n)&&(n=qF(n)||n),n instanceof NodeList||n instanceof HTMLCollection?[].slice.call(n):[n])}function R2(n,e){return n.some(function(t){return t===e})}function D2(n){var e={};for(var t in n)e[t]=n[t];return e}function _w(n,e){var t=D2(n);for(var i in n)t[i]=e.hasOwnProperty(i)?e[i]:n[i];return t}function Cy(n,e){var t=D2(n);for(var i in e)t[i]=St.und(n[i])?e[i]:n[i];return t}var B$=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g,I$=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,R$=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,D$=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g,L$=/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g,O$=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/;function jo(n){var e=O$.exec(n);if(e)return e[2]}function ww(n,e){return St.fnc(n)?n(e.target,e.id,e.total):n}function Pa(n,e){return n.getAttribute(e)}function L2(n,e,t){if(R2([t,"deg","rad","turn"],jo(e)))return e;var i=Ey.CSS[e+t];if(!St.und(i))return i;var r=document.createElement(n.tagName),s=n.parentNode&&n.parentNode!==document?n.parentNode:document.body;s.appendChild(r),r.style.position="absolute",r.style.width=100+t;var a=100/r.offsetWidth;s.removeChild(r);var o=a*parseFloat(e);return Ey.CSS[e+t]=o,o}function jF(n,e,t){if(e in n.style){var i=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=n.style[e]||getComputedStyle(n).getPropertyValue(i)||"0";return t?L2(n,r,t):r}}function O2(n,e){return St.dom(n)&&!St.inp(n)&&(Pa(n,e)||St.svg(n)&&n[e])?"attribute":St.dom(n)&&R2(C$,e)?"transform":St.dom(n)&&e!=="transform"&&jF(n,e)?"css":n[e]!=null?"object":void 0}var P$=/(\w+)\(([^)]*)\)/g;function XF(n){if(St.dom(n)){for(var e,t=n.style.transform||"",i=new Map;e=P$.exec(t);)i.set(e[1],e[2]);return i}}function P2(n,e,t,i){switch(O2(n,e)){case"transform":return function(r,s,a,o){var c=Rp(s,"scale")?1:0+function(d){return Rp(d,"translate")||d==="perspective"?"px":Rp(d,"rotate")||Rp(d,"skew")?"deg":void 0}(s),h=XF(r).get(s)||c;return a&&(a.transforms.list.set(s,h),a.transforms.last=s),o?L2(r,h,o):h}(n,e,i,t);case"css":return jF(n,e,t);case"attribute":return Pa(n,e);default:return n[e]||0}}var U$=/^(\*=|\+=|-=)/;function U2(n,e){var t=U$.exec(n);if(!t)return n;var i=jo(n)||0,r=parseFloat(e),s=parseFloat(n.replace(t[0],""));switch(t[0][0]){case"+":return r+s+i;case"-":return r-s+i;case"*":return r*s+i}}var k$=/\s/g;function YF(n,e){if(St.col(n))return function(r){return St.rgb(r)?(s=r,(a=B$.exec(s))?"rgba("+a[1]+",1)":s):St.hex(r)?function(o){var c=o.replace(I$,function(d,p,m,A){return p+p+m+m+A+A}),h=R$.exec(c);return"rgba("+parseInt(h[1],16)+","+parseInt(h[2],16)+","+parseInt(h[3],16)+",1)"}(r):St.hsl(r)?function(o){var c,h,d,p=D$.exec(o)||L$.exec(o),m=parseInt(p[1],10)/360,A=parseInt(p[2],10)/100,v=parseInt(p[3],10)/100,y=p[4]||1;function E(_,w,T){return T<0&&(T+=1),T>1&&(T-=1),T<1/6?_+6*(w-_)*T:T<.5?w:T<2/3?_+(w-_)*(2/3-T)*6:_}if(A==0)c=h=d=v;else{var b=v<.5?v*(1+A):v+A-v*A,C=2*v-b;c=E(C,b,m+1/3),h=E(C,b,m),d=E(C,b,m-1/3)}return"rgba("+255*c+","+255*h+","+255*d+","+y+")"}(r):void 0;var s,a}(n);var t=jo(n),i=t?n.substr(0,n.length-t.length):n;return e&&!k$.test(n)?i+e:i}function Sw(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function WL(n){for(var e,t=n.points,i=0,r=0;r<t.numberOfItems;r++){var s=t.getItem(r);r>0&&(i+=Sw(e,s)),e=s}return i}function qL(n){if(n.getTotalLength)return n.getTotalLength();switch(n.tagName.toLowerCase()){case"circle":return function(e){return 2*Math.PI*Pa(e,"r")}(n);case"rect":return function(e){return 2*Pa(e,"width")+2*Pa(e,"height")}(n);case"line":return function(e){return Sw({x:Pa(e,"x1"),y:Pa(e,"y1")},{x:Pa(e,"x2"),y:Pa(e,"y2")})}(n);case"polyline":return WL(n);case"polygon":return function(e){var t=e.points;return WL(e)+Sw(t.getItem(t.numberOfItems-1),t.getItem(0))}(n)}}function KF(n,e){var t=e||{},i=t.el||function(h){for(var d=h.parentNode;St.svg(d)&&(d=d.parentNode,St.svg(d.parentNode)););return d}(n),r=i.getBoundingClientRect(),s=Pa(i,"viewBox"),a=r.width,o=r.height,c=t.viewBox||(s?s.split(" "):[0,0,a,o]);return{el:i,viewBox:c,x:c[0]/1,y:c[1]/1,w:a/c[2],h:o/c[3]}}function N$(n,e){function t(o){o===void 0&&(o=0);var c=e+o>=1?e+o:0;return n.el.getPointAtLength(c)}var i=KF(n.el,n.svg),r=t(),s=t(-1),a=t(1);switch(n.property){case"x":return(r.x-i.x)*i.w;case"y":return(r.y-i.y)*i.h;case"angle":return 180*Math.atan2(a.y-s.y,a.x-s.x)/Math.PI}}var m_=/-?\d*\.?\d+/g;function jL(n,e){var t=YF(St.pth(n)?n.totalLength:n,e)+"";return{original:t,numbers:t.match(m_)?t.match(m_).map(Number):[0],strings:St.str(n)||e?t.split(m_):[]}}function JF(n){return xy(n?Qb(St.arr(n)?n.map(VL):VL(n)):[],function(e,t,i){return i.indexOf(e)===t})}function ZF(n){var e=JF(n);return e.map(function(t,i){return{target:t,id:i,total:e.length,transforms:{list:XF(t)}}})}var F$=/^spring/;function Q$(n,e){var t=D2(e);if(F$.test(t.easing)&&(t.duration=VF(t.easing)),St.arr(n)){var i=n.length;i!==2||St.obj(n[0])?St.fnc(e.duration)||(t.duration=e.duration/i):n={value:n}}var r=St.arr(n)?n:[n];return r.map(function(s,a){var o=St.obj(s)&&!St.pth(s)?s:{value:s};return St.und(o.delay)&&(o.delay=a?0:e.delay),St.und(o.endDelay)&&(o.endDelay=a===r.length-1?e.endDelay:0),o}).map(function(s){return Cy(s,t)})}var $F={css:function(n,e,t){return n.style[e]=t},attribute:function(n,e,t){return n.setAttribute(e,t)},object:function(n,e,t){return n[e]=t},transform:function(n,e,t,i,r){if(i.list.set(e,t),e===i.last||r){var s="";i.list.forEach(function(a,o){s+=o+"("+a+") "}),n.style.transform=s}}};function e5(n,e){for(var t=ZF(n),i=0,r=t.length;i<r;i++){var s=t[i];for(var a in e){var o=ww(e[a],s),c=s.target,h=jo(o),d=P2(c,a,h,s),p=U2(YF(o,h||jo(d)),d),m=O2(c,a);$F[m](c,a,p,s.transforms,!0)}}}function z$(n,e){return xy(Qb(n.map(function(t){return e.map(function(i){return function(r,s){var a=O2(r.target,s.name);if(a){var o=function(h,d){var p;return h.tweens.map(function(m){var A=function(L,R){var P={};for(var D in L){var M=ww(L[D],R);St.arr(M)&&(M=M.map(function(k){return ww(k,R)})).length===1&&(M=M[0]),P[D]=M}return P.duration=parseFloat(P.duration),P.delay=parseFloat(P.delay),P}(m,d),v=A.value,y=St.arr(v)?v[1]:v,E=jo(y),b=P2(d.target,h.name,E,d),C=p?p.to.original:b,_=St.arr(v)?v[0]:C,w=jo(_)||jo(b),T=E||w;return St.und(y)&&(y=C),A.from=jL(_,T),A.to=jL(U2(y,_),T),A.start=p?p.end:0,A.end=A.start+A.delay+A.duration+A.endDelay,A.easing=Cw(A.easing,A.duration),A.isPath=St.pth(v),A.isColor=St.col(A.from.original),A.isColor&&(A.round=1),p=A,A})}(s,r),c=o[o.length-1];return{type:a,property:s.name,animatable:r,tweens:o,duration:c.end,delay:o[0].delay,endDelay:c.endDelay}}}(t,i)})})),function(t){return!St.und(t)})}function t5(n,e){var t=n.length,i=function(s){return s.timelineOffset?s.timelineOffset:0},r={};return r.duration=t?Math.max.apply(Math,n.map(function(s){return i(s)+s.duration})):e.duration,r.delay=t?Math.min.apply(Math,n.map(function(s){return i(s)+s.delay})):e.delay,r.endDelay=t?r.duration-Math.max.apply(Math,n.map(function(s){return i(s)+s.duration-s.endDelay})):e.endDelay,r}var fv,XL=0,Yr=[],A_=[],H$=function(){function n(){fv=requestAnimationFrame(e)}function e(t){var i=Yr.length;if(i){for(var r=0;r<i;){var s=Yr[r];if(s.paused){var a=Yr.indexOf(s);a>-1&&(Yr.splice(a,1),i=Yr.length)}else s.tick(t);r++}n()}else fv=cancelAnimationFrame(fv)}return n}();function Li(n){n===void 0&&(n={});var e,t=0,i=0,r=0,s=0,a=null;function o(){return window.Promise&&new Promise(function(b){return a=b})}var c=o(),h=function(b){var C=_w(HF,b),_=_w(I2,b),w=function(D,M){var k=[],V=M.keyframes;for(var X in V&&(M=Cy(function($){for(var ae=xy(Qb($.map(function(ce){return Object.keys(ce)})),function(ce){return St.key(ce)}).reduce(function(ce,U){return ce.indexOf(U)<0&&ce.push(U),ce},[]),z={},j=function(ce){var U=ae[ce];z[U]=$.map(function(se){var me={};for(var be in se)St.key(be)?be==U&&(me.value=se[be]):me[be]=se[be];return me})},Z=0;Z<ae.length;Z++)j(Z);return z}(V),M)),M)St.key(X)&&k.push({name:X,tweens:Q$(M[X],D)});return k}(_,b),T=ZF(b.targets),L=z$(T,w),R=t5(L,_),P=XL;return XL++,Cy(C,{id:P,children:[],animatables:T,animations:L,duration:R.duration,delay:R.delay,endDelay:R.endDelay})}(n);function d(){h.reversed=!h.reversed;for(var b=0,C=e.length;b<C;b++)e[b].reversed=h.reversed}function p(b){return h.reversed?h.duration-b:b}function m(){t=0,i=p(h.currentTime)*(1/Li.speed)}function A(b,C){C&&C.seek(b-C.timelineOffset)}function v(b){for(var C=0,_=h.animations,w=_.length;C<w;){var T=_[C],L=T.animatable,R=T.tweens,P=R.length-1,D=R[P];P&&(D=xy(R,function(Ue){return b<Ue.end})[0]||D);for(var M=Fo(b-D.start-D.delay,0,D.duration)/D.duration,k=isNaN(M)?1:D.easing(M),V=D.to.strings,X=D.round,$=[],ae=D.to.numbers.length,z=void 0,j=0;j<ae;j++){var Z=void 0,ce=D.to.numbers[j],U=D.from.numbers[j]||0;Z=D.isPath?N$(D.value,k*ce):U+k*(ce-U),X&&(D.isColor&&j>2||(Z=Math.round(Z*X)/X)),$.push(Z)}var se=V.length;if(se){z=V[0];for(var me=0;me<se;me++){V[me];var be=V[me+1],xe=$[me];isNaN(xe)||(z+=be?xe+be:xe+" ")}}else z=$[0];$F[T.type](L.target,T.property,z,L.transforms),T.currentValue=z,C++}}function y(b){h[b]&&!h.passThrough&&h[b](h)}function E(b){var C=h.duration,_=h.delay,w=C-h.endDelay,T=p(b);h.progress=Fo(T/C*100,0,100),h.reversePlayback=T<h.currentTime,e&&function(L){if(h.reversePlayback)for(var R=s;R--;)A(L,e[R]);else for(var P=0;P<s;P++)A(L,e[P])}(T),!h.began&&h.currentTime>0&&(h.began=!0,y("begin"),y("loopBegin")),T<=_&&h.currentTime!==0&&v(0),(T>=w&&h.currentTime!==C||!C)&&v(C),T>_&&T<w?(h.changeBegan||(h.changeBegan=!0,h.changeCompleted=!1,y("changeBegin")),y("change"),v(T)):h.changeBegan&&(h.changeCompleted=!0,h.changeBegan=!1,y("changeComplete")),h.currentTime=Fo(T,0,C),h.began&&y("update"),b>=C&&(i=0,h.remaining&&h.remaining!==!0&&h.remaining--,h.remaining?(t=r,y("loopComplete"),y("loopBegin"),h.direction==="alternate"&&d()):(h.paused=!0,h.completed||(h.completed=!0,y("loopComplete"),y("complete"),"Promise"in window&&(a(),c=o()))))}return h.reset=function(){var b=h.direction;h.passThrough=!1,h.currentTime=0,h.progress=0,h.paused=!0,h.began=!1,h.changeBegan=!1,h.completed=!1,h.changeCompleted=!1,h.reversePlayback=!1,h.reversed=b==="reverse",h.remaining=h.loop,e=h.children;for(var C=s=e.length;C--;)h.children[C].reset();(h.reversed&&h.loop!==!0||b==="alternate"&&h.loop===1)&&h.remaining++,v(0)},h.set=function(b,C){return e5(b,C),h},h.tick=function(b){r=b,t||(t=r),E((r+(i-t))*Li.speed)},h.seek=function(b){E(p(b))},h.pause=function(){h.paused=!0,m()},h.play=function(){h.paused&&(h.paused=!1,Yr.push(h),m(),fv||H$())},h.reverse=function(){d(),m()},h.restart=function(){h.reset(),h.play()},h.finished=c,h.reset(),h.autoplay&&h.play(),h}function YL(n,e){for(var t=e.length;t--;)R2(n,e[t].animatable.target)&&e.splice(t,1)}document.addEventListener("visibilitychange",function(){if(document.hidden){for(var n=0,e=Yr.length;n<e;n++)activeInstance[n].pause();A_=Yr.slice(0),Yr=[]}else for(var t=0,i=A_.length;t<i;t++)A_[t].play()}),Li.version="3.0.0",Li.speed=1,Li.running=Yr,Li.remove=function(n){for(var e=JF(n),t=Yr.length;t--;){var i=Yr[t],r=i.animations,s=i.children;YL(e,r);for(var a=s.length;a--;){var o=s[a],c=o.animations;YL(e,c),c.length||o.children.length||s.splice(a,1)}r.length||s.length||i.pause()}},Li.get=P2,Li.set=e5,Li.convertPx=L2,Li.path=function(n,e){var t=St.str(n)?qF(n)[0]:n,i=e||100;return function(r){return{property:r,el:t,svg:KF(t),totalLength:qL(t)*(i/100)}}},Li.setDashoffset=function(n){var e=qL(n);return n.setAttribute("stroke-dasharray",e),e},Li.stagger=function(n,e){e===void 0&&(e={});var t=e.direction||"normal",i=e.easing?Cw(e.easing):null,r=e.grid,s=e.axis,a=e.from||0,o=a==="first",c=a==="center",h=a==="last",d=St.arr(n),p=parseFloat(d?n[0]:n),m=d?parseFloat(n[1]):0,A=jo(d?n[1]:n)||0,v=e.start||0+(d?p:0),y=[],E=0;return function(b,C,_){if(o&&(a=0),c&&(a=(_-1)/2),h&&(a=_-1),!y.length){for(var w=0;w<_;w++){if(r){var T=c?(r[0]-1)/2:a%r[0],L=c?(r[1]-1)/2:Math.floor(a/r[0]),R=T-w%r[0],P=L-Math.floor(w/r[0]),D=Math.sqrt(R*R+P*P);s==="x"&&(D=-R),s==="y"&&(D=-P),y.push(D)}else y.push(Math.abs(a-w));E=Math.max.apply(Math,y)}i&&(y=y.map(function(M){return i(M/E)*E})),t==="reverse"&&(y=y.map(function(M){return s?M<0?-1*M:-M:Math.abs(E-M)}))}return v+(d?(m-p)/E:p)*(Math.round(100*y[C])/100)+A}},Li.timeline=function(n){n===void 0&&(n={});var e=Li(n);return e.duration=0,e.add=function(t,i){var r=Yr.indexOf(e),s=e.children;function a(m){m.passThrough=!0}r>-1&&Yr.splice(r,1);for(var o=0;o<s.length;o++)a(s[o]);var c=Cy(t,_w(I2,n));c.targets=c.targets||n.targets;var h=e.duration;c.autoplay=!1,c.direction=e.direction,c.timelineOffset=St.und(i)?h:U2(i,h),a(e),e.seek(c.timelineOffset);var d=Li(c);a(d),s.push(d);var p=t5(s,n);return e.delay=p.delay,e.endDelay=p.endDelay,e.duration=p.duration,e.seek(0),e.reset(),e.autoplay&&e.play(),e},e},Li.easing=Cw,Li.penner=WF,Li.random=function(n,e){return Math.floor(Math.random()*(e-n+1))+n};const pv=Li,B=E$,g_=new WeakMap;class n5 extends B.Loader{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){const s=new B.FileLoader(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,a=>{this.parse(a,t,r)},i,r)}parse(e,t,i=()=>{}){this.decodeDracoFile(e,t,null,null,B.SRGBColorSpace,i).catch(i)}decodeDracoFile(e,t,i,r,s=B.LinearSRGBColorSpace,a=()=>{}){const o={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i,vertexColorSpace:s};return this.decodeGeometry(e,o).then(t).catch(a)}decodeGeometry(e,t){const i=JSON.stringify(t);if(g_.has(e)){const c=g_.get(e);if(c.key===i)return c.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,a=e.byteLength,o=this._getWorker(s,a).then(c=>(r=c,new Promise((h,d)=>{r._callbacks[s]={resolve:h,reject:d},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(c=>this._createGeometry(c.geometry));return o.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),g_.set(e,{key:i,promise:o}),o}_createGeometry(e){const t=new B.BufferGeometry;e.index&&t.setIndex(new B.BufferAttribute(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],s=r.name,a=r.array,o=r.itemSize,c=new B.BufferAttribute(a,o);s==="color"&&(this._assignVertexColorSpace(c,r.vertexColorSpace),c.normalized=a instanceof Float32Array==0),t.setAttribute(s,c)}return t}_assignVertexColorSpace(e,t){if(t!==B.SRGBColorSpace)return;const i=new B.Color;for(let r=0,s=e.count;r<s;r++)i.fromBufferAttribute(e,r),B.ColorManagement.toWorkingColorSpace(i,B.SRGBColorSpace),e.setXYZ(r,i.r,i.g,i.b)}_loadLibrary(e,t){const i=new B.FileLoader(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=G$.toString(),a=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const a=s.data;switch(a.type){case"decode":r._callbacks[a.id].resolve(a);break;case"error":r._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function G$(){let n,e;function t(i,r,s,a,o,c){const h=c.num_components(),d=s.num_points()*h,p=d*o.BYTES_PER_ELEMENT,m=function(y,E){switch(E){case Float32Array:return y.DT_FLOAT32;case Int8Array:return y.DT_INT8;case Int16Array:return y.DT_INT16;case Int32Array:return y.DT_INT32;case Uint8Array:return y.DT_UINT8;case Uint16Array:return y.DT_UINT16;case Uint32Array:return y.DT_UINT32}}(i,o),A=i._malloc(p);r.GetAttributeDataArrayForAllPoints(s,c,m,p,A);const v=new o(i.HEAPF32.buffer,A,d).slice();return i._free(A),{name:a,array:v,itemSize:h}}onmessage=function(i){const r=i.data;switch(r.type){case"init":n=r.decoderConfig,e=new Promise(function(o){n.onModuleLoaded=function(c){o({draco:c})},DracoDecoderModule(n)});break;case"decode":const s=r.buffer,a=r.taskConfig;e.then(o=>{const c=o.draco,h=new c.Decoder;try{const d=function(m,A,v,y){const E=y.attributeIDs,b=y.attributeTypes;let C,_;const w=A.GetEncodedGeometryType(v);if(w===m.TRIANGULAR_MESH)C=new m.Mesh,_=A.DecodeArrayToMesh(v,v.byteLength,C);else{if(w!==m.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");C=new m.PointCloud,_=A.DecodeArrayToPointCloud(v,v.byteLength,C)}if(!_.ok()||C.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+_.error_msg());const T={index:null,attributes:[]};for(const L in E){const R=self[b[L]];let P,D;if(y.useUniqueIDs)D=E[L],P=A.GetAttributeByUniqueId(C,D);else{if(D=A.GetAttributeId(C,m[E[L]]),D===-1)continue;P=A.GetAttribute(C,D)}const M=t(m,A,C,L,R,P);L==="color"&&(M.vertexColorSpace=y.vertexColorSpace),T.attributes.push(M)}return w===m.TRIANGULAR_MESH&&(T.index=function(L,R,P){const D=3*P.num_faces(),M=4*D,k=L._malloc(M);R.GetTrianglesUInt32Array(P,M,k);const V=new Uint32Array(L.HEAPF32.buffer,k,D).slice();return L._free(k),{array:V,itemSize:1}}(m,A,C)),m.destroy(C),T}(c,h,new Int8Array(s),a),p=d.attributes.map(m=>m.array.buffer);d.index&&p.push(d.index.array.buffer),self.postMessage({type:"decode",id:r.id,geometry:d},p)}catch(d){console.error(d),self.postMessage({type:"error",id:r.id,error:d.message})}finally{c.destroy(h)}})}}}function V$(n,e,t=!0){if(!e||!e.isReady)throw new Error("BufferGeometryUtils: Initialized MikkTSpace library required.");if(!n.hasAttribute("position")||!n.hasAttribute("normal")||!n.hasAttribute("uv"))throw new Error('BufferGeometryUtils: Tangents require "position", "normal", and "uv" attributes.');function i(a){if(a.normalized||a.isInterleavedBufferAttribute){const o=new Float32Array(a.count*a.itemSize);for(let c=0,h=0;c<a.count;c++)o[h++]=a.getX(c),o[h++]=a.getY(c),a.itemSize>2&&(o[h++]=a.getZ(c));return o}return a.array instanceof Float32Array?a.array:new Float32Array(a.array)}const r=n.index?n.toNonIndexed():n,s=e.generateTangents(i(r.attributes.position),i(r.attributes.normal),i(r.attributes.uv));if(t)for(let a=3;a<s.length;a+=4)s[a]*=-1;return r.setAttribute("tangent",new B.BufferAttribute(s,4)),n!==r&&n.copy(r),n}function W$(n,e=!1){const t=n[0].index!==null,i=new Set(Object.keys(n[0].attributes)),r=new Set(Object.keys(n[0].morphAttributes)),s={},a={},o=n[0].morphTargetsRelative,c=new B.BufferGeometry;let h=0;for(let d=0;d<n.length;++d){const p=n[d];let m=0;if(t!==(p.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+d+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const A in p.attributes){if(!i.has(A))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+d+'. All geometries must have compatible attributes; make sure "'+A+'" attribute exists among all geometries, or in none of them.'),null;s[A]===void 0&&(s[A]=[]),s[A].push(p.attributes[A]),m++}if(m!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+d+". Make sure all geometries have the same number of attributes."),null;if(o!==p.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+d+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const A in p.morphAttributes){if(!r.has(A))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+d+".  .morphAttributes must be consistent throughout all geometries."),null;a[A]===void 0&&(a[A]=[]),a[A].push(p.morphAttributes[A])}if(e){let A;if(t)A=p.index.count;else{if(p.attributes.position===void 0)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+d+". The geometry must have either an index or a position attribute"),null;A=p.attributes.position.count}c.addGroup(h,A,d),h+=A}}if(t){let d=0;const p=[];for(let m=0;m<n.length;++m){const A=n[m].index;for(let v=0;v<A.count;++v)p.push(A.getX(v)+d);d+=n[m].attributes.position.count}c.setIndex(p)}for(const d in s){const p=Mw(s[d]);if(!p)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+d+" attribute."),null;c.setAttribute(d,p)}for(const d in a){const p=a[d][0].length;if(p===0)break;c.morphAttributes=c.morphAttributes||{},c.morphAttributes[d]=[];for(let m=0;m<p;++m){const A=[];for(let y=0;y<a[d].length;++y)A.push(a[d][y][m]);const v=Mw(A);if(!v)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+d+" morphAttribute."),null;c.morphAttributes[d].push(v)}}return c}function Mw(n){let e,t,i,r=-1,s=0;for(let h=0;h<n.length;++h){const d=n[h];if(e===void 0&&(e=d.array.constructor),e!==d.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(t===void 0&&(t=d.itemSize),t!==d.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(i===void 0&&(i=d.normalized),i!==d.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;if(r===-1&&(r=d.gpuType),r!==d.gpuType)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes."),null;s+=d.count*t}const a=new e(s),o=new B.BufferAttribute(a,t,i);let c=0;for(let h=0;h<n.length;++h){const d=n[h];if(d.isInterleavedBufferAttribute){const p=c/t;for(let m=0,A=d.count;m<A;m++)for(let v=0;v<t;v++){const y=d.getComponent(m,v);o.setComponent(m+p,v,y)}}else a.set(d.array,c);c+=d.count*t}return r!==void 0&&(o.gpuType=r),o}function q$(n){return n.isInstancedInterleavedBufferAttribute||n.isInterleavedBufferAttribute?_y(n):n.isInstancedBufferAttribute?new B.InstancedBufferAttribute().copy(n):new B.BufferAttribute().copy(n)}function j$(n){let e,t=0,i=0;for(let h=0,d=n.length;h<d;++h){const p=n[h];if(e===void 0&&(e=p.array.constructor),e!==p.array.constructor)return console.error("AttributeBuffers of different types cannot be interleaved"),null;t+=p.array.length,i+=p.itemSize}const r=new B.InterleavedBuffer(new e(t),i);let s=0;const a=[],o=["getX","getY","getZ","getW"],c=["setX","setY","setZ","setW"];for(let h=0,d=n.length;h<d;h++){const p=n[h],m=p.itemSize,A=p.count,v=new B.InterleavedBufferAttribute(r,m,s,p.normalized);a.push(v),s+=m;for(let y=0;y<A;y++)for(let E=0;E<m;E++)v[c[E]](y,p[o[E]](y))}return a}function _y(n){const e=n.data.array.constructor,t=n.count,i=n.itemSize,r=n.normalized,s=new e(t*i);let a;a=n.isInstancedInterleavedBufferAttribute?new B.InstancedBufferAttribute(s,i,r,n.meshPerAttribute):new B.BufferAttribute(s,i,r);for(let o=0;o<t;o++)a.setX(o,n.getX(o)),i>=2&&a.setY(o,n.getY(o)),i>=3&&a.setZ(o,n.getZ(o)),i>=4&&a.setW(o,n.getW(o));return a}function X$(n){const e=n.attributes,t=n.morphTargets,i=new Map;for(const r in e){const s=e[r];s.isInterleavedBufferAttribute&&(i.has(s)||i.set(s,_y(s)),e[r]=i.get(s))}for(const r in t){const s=t[r];s.isInterleavedBufferAttribute&&(i.has(s)||i.set(s,_y(s)),t[r]=i.get(s))}}function Y$(n){let e=0;for(const i in n.attributes){const r=n.getAttribute(i);e+=r.count*r.itemSize*r.array.BYTES_PER_ELEMENT}const t=n.getIndex();return e+=t?t.count*t.itemSize*t.array.BYTES_PER_ELEMENT:0,e}function K$(n,e=1e-4){e=Math.max(e,Number.EPSILON);const t={},i=n.getIndex(),r=n.getAttribute("position"),s=i?i.count:r.count;let a=0;const o=Object.keys(n.attributes),c={},h={},d=[],p=["getX","getY","getZ","getW"],m=["setX","setY","setZ","setW"];for(let C=0,_=o.length;C<_;C++){const w=o[C],T=n.attributes[w];c[w]=new T.constructor(new T.array.constructor(T.count*T.itemSize),T.itemSize,T.normalized);const L=n.morphAttributes[w];L&&(h[w]||(h[w]=[]),L.forEach((R,P)=>{const D=new R.array.constructor(R.count*R.itemSize);h[w][P]=new R.constructor(D,R.itemSize,R.normalized)}))}const A=.5*e,v=Math.log10(1/e),y=Math.pow(10,v),E=A*y;for(let C=0;C<s;C++){const _=i?i.getX(C):C;let w="";for(let T=0,L=o.length;T<L;T++){const R=o[T],P=n.getAttribute(R),D=P.itemSize;for(let M=0;M<D;M++)w+=~~(P[p[M]](_)*y+E)+","}if(w in t)d.push(t[w]);else{for(let T=0,L=o.length;T<L;T++){const R=o[T],P=n.getAttribute(R),D=n.morphAttributes[R],M=P.itemSize,k=c[R],V=h[R];for(let X=0;X<M;X++){const $=p[X],ae=m[X];if(k[ae](a,P[$](_)),D)for(let z=0,j=D.length;z<j;z++)V[z][ae](a,D[z][$](_))}}t[w]=a,d.push(a),a++}}const b=n.clone();for(const C in n.attributes){const _=c[C];if(b.setAttribute(C,new _.constructor(_.array.slice(0,a*_.itemSize),_.itemSize,_.normalized)),C in h)for(let w=0;w<h[C].length;w++){const T=h[C][w];b.morphAttributes[C][w]=new T.constructor(T.array.slice(0,a*T.itemSize),T.itemSize,T.normalized)}}return b.setIndex(d),b}function Tw(n,e){if(e===B.TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===B.TriangleFanDrawMode||e===B.TriangleStripDrawMode){let t=n.getIndex();if(t===null){const a=[],o=n.getAttribute("position");if(o===void 0)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n;for(let c=0;c<o.count;c++)a.push(c);n.setIndex(a),t=n.getIndex()}const i=t.count-2,r=[];if(e===B.TriangleFanDrawMode)for(let a=1;a<=i;a++)r.push(t.getX(0)),r.push(t.getX(a)),r.push(t.getX(a+1));else for(let a=0;a<i;a++)a%2==0?(r.push(t.getX(a)),r.push(t.getX(a+1)),r.push(t.getX(a+2))):(r.push(t.getX(a+2)),r.push(t.getX(a+1)),r.push(t.getX(a)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s.clearGroups(),s}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}function J$(n){const e=new B.Vector3,t=new B.Vector3,i=new B.Vector3,r=new B.Vector3,s=new B.Vector3,a=new B.Vector3,o=new B.Vector3,c=new B.Vector3,h=new B.Vector3;function d(j,Z,ce,U,se,me,be,xe){e.fromBufferAttribute(Z,se),t.fromBufferAttribute(Z,me),i.fromBufferAttribute(Z,be);const Ue=j.morphTargetInfluences;if(ce&&Ue){o.set(0,0,0),c.set(0,0,0),h.set(0,0,0);for(let Ne=0,Le=ce.length;Ne<Le;Ne++){const ue=Ue[Ne],Oe=ce[Ne];ue!==0&&(r.fromBufferAttribute(Oe,se),s.fromBufferAttribute(Oe,me),a.fromBufferAttribute(Oe,be),U?(o.addScaledVector(r,ue),c.addScaledVector(s,ue),h.addScaledVector(a,ue)):(o.addScaledVector(r.sub(e),ue),c.addScaledVector(s.sub(t),ue),h.addScaledVector(a.sub(i),ue)))}e.add(o),t.add(c),i.add(h)}j.isSkinnedMesh&&(j.applyBoneTransform(se,e),j.applyBoneTransform(me,t),j.applyBoneTransform(be,i)),xe[3*se+0]=e.x,xe[3*se+1]=e.y,xe[3*se+2]=e.z,xe[3*me+0]=t.x,xe[3*me+1]=t.y,xe[3*me+2]=t.z,xe[3*be+0]=i.x,xe[3*be+1]=i.y,xe[3*be+2]=i.z}const p=n.geometry,m=n.material;let A,v,y;const E=p.index,b=p.attributes.position,C=p.morphAttributes.position,_=p.morphTargetsRelative,w=p.attributes.normal,T=p.morphAttributes.position,L=p.groups,R=p.drawRange;let P,D,M,k,V,X,$;const ae=new Float32Array(b.count*b.itemSize),z=new Float32Array(w.count*w.itemSize);if(E!==null)if(Array.isArray(m))for(P=0,M=L.length;P<M;P++)for(V=L[P],X=Math.max(V.start,R.start),$=Math.min(V.start+V.count,R.start+R.count),D=X,k=$;D<k;D+=3)A=E.getX(D),v=E.getX(D+1),y=E.getX(D+2),d(n,b,C,_,A,v,y,ae),d(n,w,T,_,A,v,y,z);else for(X=Math.max(0,R.start),$=Math.min(E.count,R.start+R.count),P=X,M=$;P<M;P+=3)A=E.getX(P),v=E.getX(P+1),y=E.getX(P+2),d(n,b,C,_,A,v,y,ae),d(n,w,T,_,A,v,y,z);else if(Array.isArray(m))for(P=0,M=L.length;P<M;P++)for(V=L[P],X=Math.max(V.start,R.start),$=Math.min(V.start+V.count,R.start+R.count),D=X,k=$;D<k;D+=3)A=D,v=D+1,y=D+2,d(n,b,C,_,A,v,y,ae),d(n,w,T,_,A,v,y,z);else for(X=Math.max(0,R.start),$=Math.min(b.count,R.start+R.count),P=X,M=$;P<M;P+=3)A=P,v=P+1,y=P+2,d(n,b,C,_,A,v,y,ae),d(n,w,T,_,A,v,y,z);return{positionAttribute:b,normalAttribute:w,morphedPositionAttribute:new B.Float32BufferAttribute(ae,3),morphedNormalAttribute:new B.Float32BufferAttribute(z,3)}}function Z$(n){if(n.groups.length===0)return console.warn("THREE.BufferGeometryUtils.mergeGroups(): No groups are defined. Nothing to merge."),n;let e=n.groups;if(e=e.sort((a,o)=>a.materialIndex!==o.materialIndex?a.materialIndex-o.materialIndex:a.start-o.start),n.getIndex()===null){const a=n.getAttribute("position"),o=[];for(let c=0;c<a.count;c+=3)o.push(c,c+1,c+2);n.setIndex(o)}const t=n.getIndex(),i=[];for(let a=0;a<e.length;a++){const o=e[a],c=o.start,h=c+o.count;for(let d=c;d<h;d++)i.push(t.getX(d))}n.dispose(),n.setIndex(i);let r=0;for(let a=0;a<e.length;a++){const o=e[a];o.start=r,r+=o.count}let s=e[0];n.groups=[s];for(let a=1;a<e.length;a++){const o=e[a];s.materialIndex===o.materialIndex?s.count+=o.count:(s=o,n.groups.push(s))}return n}function $$(n,e=Math.PI/3){const t=Math.cos(e),i=100*(1+1e-10),r=[new B.Vector3,new B.Vector3,new B.Vector3],s=new B.Vector3,a=new B.Vector3,o=new B.Vector3,c=new B.Vector3;function h(y){return`${~~(y.x*i)},${~~(y.y*i)},${~~(y.z*i)}`}const d=n.index?n.toNonIndexed():n,p=d.attributes.position,m={};for(let y=0,E=p.count/3;y<E;y++){const b=3*y,C=r[0].fromBufferAttribute(p,b+0),_=r[1].fromBufferAttribute(p,b+1),w=r[2].fromBufferAttribute(p,b+2);s.subVectors(w,_),a.subVectors(C,_);const T=new B.Vector3().crossVectors(s,a).normalize();for(let L=0;L<3;L++){const R=h(r[L]);R in m||(m[R]=[]),m[R].push(T)}}const A=new Float32Array(3*p.count),v=new B.BufferAttribute(A,3,!1);for(let y=0,E=p.count/3;y<E;y++){const b=3*y,C=r[0].fromBufferAttribute(p,b+0),_=r[1].fromBufferAttribute(p,b+1),w=r[2].fromBufferAttribute(p,b+2);s.subVectors(w,_),a.subVectors(C,_),o.crossVectors(s,a).normalize();for(let T=0;T<3;T++){const L=m[h(r[T])];c.set(0,0,0);for(let R=0,P=L.length;R<P;R++){const D=L[R];o.dot(D)>t&&c.add(D)}c.normalize(),v.setXYZ(b+T,c.x,c.y,c.z)}}return d.setAttribute("normal",v),d}class k2 extends B.Loader{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new ree(t)}),this.register(function(t){return new see(t)}),this.register(function(t){return new pee(t)}),this.register(function(t){return new mee(t)}),this.register(function(t){return new Aee(t)}),this.register(function(t){return new oee(t)}),this.register(function(t){return new lee(t)}),this.register(function(t){return new cee(t)}),this.register(function(t){return new uee(t)}),this.register(function(t){return new iee(t)}),this.register(function(t){return new hee(t)}),this.register(function(t){return new aee(t)}),this.register(function(t){return new fee(t)}),this.register(function(t){return new dee(t)}),this.register(function(t){return new tee(t)}),this.register(function(t){return new gee(t)}),this.register(function(t){return new vee(t)})}load(e,t,i,r){const s=this;let a;if(this.resourcePath!=="")a=this.resourcePath;else if(this.path!==""){const h=B.LoaderUtils.extractUrlBase(e);a=B.LoaderUtils.resolveURL(h,this.path)}else a=B.LoaderUtils.extractUrlBase(e);this.manager.itemStart(e);const o=function(h){r?r(h):console.error(h),s.manager.itemError(e),s.manager.itemEnd(e)},c=new B.FileLoader(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(h){try{s.parse(h,a,function(d){t(d),s.manager.itemEnd(e)},o)}catch(d){o(d)}},i,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const a={},o={},c=new TextDecoder;if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(c.decode(new Uint8Array(e,0,4))===i5){try{a[tn.KHR_BINARY_GLTF]=new yee(e)}catch(d){return void(r&&r(d))}s=JSON.parse(a[tn.KHR_BINARY_GLTF].content)}else s=JSON.parse(c.decode(e));else s=e;if(s.asset===void 0||s.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const h=new Iee(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});h.fileLoader.setRequestHeader(this.requestHeader);for(let d=0;d<this.pluginCallbacks.length;d++){const p=this.pluginCallbacks[d](h);p.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),o[p.name]=p,a[p.name]=!0}if(s.extensionsUsed)for(let d=0;d<s.extensionsUsed.length;++d){const p=s.extensionsUsed[d],m=s.extensionsRequired||[];switch(p){case tn.KHR_MATERIALS_UNLIT:a[p]=new nee;break;case tn.KHR_DRACO_MESH_COMPRESSION:a[p]=new bee(s,this.dracoLoader);break;case tn.KHR_TEXTURE_TRANSFORM:a[p]=new Eee;break;case tn.KHR_MESH_QUANTIZATION:a[p]=new xee;break;default:m.indexOf(p)>=0&&o[p]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+p+'".')}}h.setExtensions(a),h.setPlugins(o),h.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function eee(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const tn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class tee{constructor(e){this.parser=e,this.name=tn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,a=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let o;const c=new B.Color(16777215);a.color!==void 0&&c.setRGB(a.color[0],a.color[1],a.color[2],B.LinearSRGBColorSpace);const h=a.range!==void 0?a.range:0;switch(a.type){case"directional":o=new B.DirectionalLight(c),o.target.position.set(0,0,-1),o.add(o.target);break;case"point":o=new B.PointLight(c),o.distance=h;break;case"spot":o=new B.SpotLight(c),o.distance=h,a.spot=a.spot||{},a.spot.innerConeAngle=a.spot.innerConeAngle!==void 0?a.spot.innerConeAngle:0,a.spot.outerConeAngle=a.spot.outerConeAngle!==void 0?a.spot.outerConeAngle:Math.PI/4,o.angle=a.spot.outerConeAngle,o.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,o.target.position.set(0,0,-1),o.add(o.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return o.position.set(0,0,0),Do(o,a),a.intensity!==void 0&&(o.intensity=a.intensity),o.name=t.createUniqueName(a.name||"light_"+e),r=Promise.resolve(o),t.cache.add(i,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,r=i.json.nodes[e],s=(r.extensions&&r.extensions[this.name]||{}).light;return s===void 0?null:this._loadLight(s).then(function(a){return i._getNodeRef(t.cache,s,a)})}}class nee{constructor(){this.name=tn.KHR_MATERIALS_UNLIT}getMaterialType(){return B.MeshBasicMaterial}extendParams(e,t,i){const r=[];e.color=new B.Color(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const a=s.baseColorFactor;e.color.setRGB(a[0],a[1],a[2],B.LinearSRGBColorSpace),e.opacity=a[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,B.SRGBColorSpace))}return Promise.all(r)}}class iee{constructor(e){this.parser=e,this.name=tn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=i.extensions[this.name].emissiveStrength;return r!==void 0&&(t.emissiveIntensity=r),Promise.resolve()}}class ree{constructor(e){this.parser=e,this.name=tn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?B.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];if(a.clearcoatFactor!==void 0&&(t.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const o=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new B.Vector2(o,o)}return Promise.all(s)}}class see{constructor(e){this.parser=e,this.name=tn.KHR_MATERIALS_DISPERSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?B.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=i.extensions[this.name];return t.dispersion=r.dispersion!==void 0?r.dispersion:0,Promise.resolve()}}class aee{constructor(e){this.parser=e,this.name=tn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?B.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.iridescenceFactor!==void 0&&(t.iridescence=a.iridescenceFactor),a.iridescenceTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),a.iridescenceIor!==void 0&&(t.iridescenceIOR=a.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),a.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),a.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(s)}}class oee{constructor(e){this.parser=e,this.name=tn.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?B.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new B.Color(0,0,0),t.sheenRoughness=0,t.sheen=1;const a=r.extensions[this.name];if(a.sheenColorFactor!==void 0){const o=a.sheenColorFactor;t.sheenColor.setRGB(o[0],o[1],o[2],B.LinearSRGBColorSpace)}return a.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",a.sheenColorTexture,B.SRGBColorSpace)),a.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(s)}}class lee{constructor(e){this.parser=e,this.name=tn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?B.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.transmissionFactor!==void 0&&(t.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(s)}}class cee{constructor(e){this.parser=e,this.name=tn.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?B.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];t.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;const o=a.attenuationColor||[1,1,1];return t.attenuationColor=new B.Color().setRGB(o[0],o[1],o[2],B.LinearSRGBColorSpace),Promise.all(s)}}class uee{constructor(e){this.parser=e,this.name=tn.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?B.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=i.extensions[this.name];return t.ior=r.ior!==void 0?r.ior:1.5,Promise.resolve()}}class hee{constructor(e){this.parser=e,this.name=tn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?B.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];t.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",a.specularTexture));const o=a.specularColorFactor||[1,1,1];return t.specularColor=new B.Color().setRGB(o[0],o[1],o[2],B.LinearSRGBColorSpace),a.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",a.specularColorTexture,B.SRGBColorSpace)),Promise.all(s)}}class dee{constructor(e){this.parser=e,this.name=tn.EXT_MATERIALS_BUMP}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?B.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return t.bumpScale=a.bumpFactor!==void 0?a.bumpFactor:1,a.bumpTexture!==void 0&&s.push(i.assignTexture(t,"bumpMap",a.bumpTexture)),Promise.all(s)}}class fee{constructor(e){this.parser=e,this.name=tn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?B.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.anisotropyStrength!==void 0&&(t.anisotropy=a.anisotropyStrength),a.anisotropyRotation!==void 0&&(t.anisotropyRotation=a.anisotropyRotation),a.anisotropyTexture!==void 0&&s.push(i.assignTexture(t,"anisotropyMap",a.anisotropyTexture)),Promise.all(s)}}class pee{constructor(e){this.parser=e,this.name=tn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,a)}}class mee{constructor(e){this.parser=e,this.name=tn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],o=r.images[a.source];let c=i.textureLoader;if(o.uri){const h=i.options.manager.getHandler(o.uri);h!==null&&(c=h)}return this.detectSupport().then(function(h){if(h)return i.loadTextureImage(e,a.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Aee{constructor(e){this.parser=e,this.name=tn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],o=r.images[a.source];let c=i.textureLoader;if(o.uri){const h=i.options.manager.getHandler(o.uri);h!==null&&(c=h)}return this.detectSupport().then(function(h){if(h)return i.loadTextureImage(e,a.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class gee{constructor(e){this.name=tn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(o){const c=r.byteOffset||0,h=r.byteLength||0,d=r.count,p=r.byteStride,m=new Uint8Array(o,c,h);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(d,p,m,r.mode,r.filter).then(function(A){return A.buffer}):a.ready.then(function(){const A=new ArrayBuffer(d*p);return a.decodeGltfBuffer(new Uint8Array(A),d,p,m,r.mode,r.filter),A})})}return null}}class vee{constructor(e){this.name=tn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=t.meshes[i.mesh];for(const c of r.primitives)if(c.mode!==qs.TRIANGLES&&c.mode!==qs.TRIANGLE_STRIP&&c.mode!==qs.TRIANGLE_FAN&&c.mode!==void 0)return null;const s=i.extensions[this.name].attributes,a=[],o={};for(const c in s)a.push(this.parser.getDependency("accessor",s[c]).then(h=>(o[c]=h,o[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const h=c.pop(),d=h.isGroup?h.children:[h],p=c[0].count,m=[];for(const A of d){const v=new B.Matrix4,y=new B.Vector3,E=new B.Quaternion,b=new B.Vector3(1,1,1),C=new B.InstancedMesh(A.geometry,A.material,p);for(let _=0;_<p;_++)o.TRANSLATION&&y.fromBufferAttribute(o.TRANSLATION,_),o.ROTATION&&E.fromBufferAttribute(o.ROTATION,_),o.SCALE&&b.fromBufferAttribute(o.SCALE,_),C.setMatrixAt(_,v.compose(y,E,b));for(const _ in o)if(_==="_COLOR_0"){const w=o[_];C.instanceColor=new B.InstancedBufferAttribute(w.array,w.itemSize,w.normalized)}else _!=="TRANSLATION"&&_!=="ROTATION"&&_!=="SCALE"&&A.geometry.setAttribute(_,o[_]);B.Object3D.prototype.copy.call(C,A),this.parser.assignFinalMaterial(C),m.push(C)}return h.isGroup?(h.clear(),h.add(...m),h):m[0]}))}}const i5="glTF";class yee{constructor(e){this.name=tn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==i5)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-12,s=new DataView(e,12);let a=0;for(;a<r;){const o=s.getUint32(a,!0);a+=4;const c=s.getUint32(a,!0);if(a+=4,c===1313821514){const h=new Uint8Array(e,12+a,o);this.content=i.decode(h)}else if(c===5130562){const h=12+a;this.body=e.slice(h,h+o)}a+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class bee{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=tn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},c={},h={};for(const d in a){const p=Bw[d]||d.toLowerCase();o[p]=a[d]}for(const d in e.attributes){const p=Bw[d]||d.toLowerCase();if(a[d]!==void 0){const m=i.accessors[e.attributes[d]],A=Ed[m.componentType];h[p]=A.name,c[p]=m.normalized===!0}}return t.getDependency("bufferView",s).then(function(d){return new Promise(function(p,m){r.decodeDracoFile(d,function(A){for(const v in A.attributes){const y=A.attributes[v],E=c[v];E!==void 0&&(y.normalized=E)}p(A)},o,h,B.LinearSRGBColorSpace,m)})})}}class Eee{constructor(){this.name=tn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord!==void 0&&t.texCoord!==e.channel||t.offset!==void 0||t.rotation!==void 0||t.scale!==void 0)&&(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class xee{constructor(){this.name=tn.KHR_MESH_QUANTIZATION}}class r5 extends B.Interpolant{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let a=0;a!==r;a++)t[a]=i[s+a];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,c=2*o,h=3*o,d=r-t,p=(i-t)/d,m=p*p,A=m*p,v=e*h,y=v-h,E=-2*A+3*m,b=A-m,C=1-E,_=b-m+p;for(let w=0;w!==o;w++){const T=a[y+w+o],L=a[y+w+c]*d,R=a[v+w+o],P=a[v+w]*d;s[w]=C*T+_*L+E*R+b*P}return s}}const Cee=new B.Quaternion;class _ee extends r5{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return Cee.fromArray(s).normalize().toArray(s),s}}const qs={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Ed={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},KL={9728:B.NearestFilter,9729:B.LinearFilter,9984:B.NearestMipmapNearestFilter,9985:B.LinearMipmapNearestFilter,9986:B.NearestMipmapLinearFilter,9987:B.LinearMipmapLinearFilter},JL={33071:B.ClampToEdgeWrapping,33648:B.MirroredRepeatWrapping,10497:B.RepeatWrapping},v_={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Bw={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Ll={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},wee={CUBICSPLINE:void 0,LINEAR:B.InterpolateLinear,STEP:B.InterpolateDiscrete};function See(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new B.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:B.FrontSide})),n.DefaultMaterial}function Vc(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Do(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Mee(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Tee(n){let e;const t=n.extensions&&n.extensions[tn.KHR_DRACO_MESH_COMPRESSION];if(e=t?"draco:"+t.bufferView+":"+t.indices+":"+y_(t.attributes):n.indices+":"+y_(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+y_(n.targets[i]);return e}function y_(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function Iw(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const Bee=new B.Matrix4;class Iee{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new eee,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=-1,s=!1,a=-1;if(typeof navigator<"u"){const o=navigator.userAgent;i=/^((?!chrome|android).)*safari/i.test(o)===!0;const c=o.match(/Version\/(\d+)/);r=i&&c?parseInt(c[1],10):-1,s=o.indexOf("Firefox")>-1,a=s?o.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||i&&r<17||s&&a<98?this.textureLoader=new B.TextureLoader(this.options.manager):this.textureLoader=new B.ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new B.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(a){const o={scene:a[0][r.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:r.asset,parser:i,userData:{}};return Vc(s,o,r),Do(o,r),Promise.all(i._invokeAll(function(c){return c.afterRoot&&c.afterRoot(o)})).then(function(){for(const c of o.scenes)c.updateMatrixWorld();e(o)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const a=t[r].joints;for(let o=0,c=a.length;o<c;o++)e[a[o]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const a=e[r];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(i[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(a,o)=>{const c=this.associations.get(a);c!=null&&this.associations.set(o,c);for(const[h,d]of a.children.entries())s(d,o.children[h])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e)}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,a){return i.getDependency(e,a)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[tn.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,a){i.load(B.LoaderUtils.resolveURL(t.uri,r.path),s,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const a=v_[r.type],o=Ed[r.componentType],c=r.normalized===!0,h=new o(r.count*a);return Promise.resolve(new B.BufferAttribute(h,a,c))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(a){const o=a[0],c=v_[r.type],h=Ed[r.componentType],d=h.BYTES_PER_ELEMENT,p=d*c,m=r.byteOffset||0,A=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,v=r.normalized===!0;let y,E;if(A&&A!==p){const b=Math.floor(m/A),C="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+b+":"+r.count;let _=t.cache.get(C);_||(y=new h(o,b*A,r.count*A/d),_=new B.InterleavedBuffer(y,A/d),t.cache.add(C,_)),E=new B.InterleavedBufferAttribute(_,c,m%A/d,v)}else y=o===null?new h(r.count*c):new h(o,m,r.count*c),E=new B.BufferAttribute(y,c,v);if(r.sparse!==void 0){const b=v_.SCALAR,C=Ed[r.sparse.indices.componentType],_=r.sparse.indices.byteOffset||0,w=r.sparse.values.byteOffset||0,T=new C(a[1],_,r.sparse.count*b),L=new h(a[2],w,r.sparse.count*c);o!==null&&(E=new B.BufferAttribute(E.array.slice(),E.itemSize,E.normalized)),E.normalized=!1;for(let R=0,P=T.length;R<P;R++){const D=T[R];if(E.setX(D,L[R*c]),c>=2&&E.setY(D,L[R*c+1]),c>=3&&E.setZ(D,L[R*c+2]),c>=4&&E.setW(D,L[R*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}E.normalized=v}return E})}loadTexture(e){const t=this.json,i=this.options,r=t.textures[e].source,s=t.images[r];let a=this.textureLoader;if(s.uri){const o=i.manager.getHandler(s.uri);o!==null&&(a=o)}return this.loadTextureImage(e,r,a)}loadTextureImage(e,t,i){const r=this,s=this.json,a=s.textures[e],o=s.images[t],c=(o.uri||o.bufferView)+":"+a.sampler;if(this.textureCache[c])return this.textureCache[c];const h=this.loadImageSource(t,i).then(function(d){d.flipY=!1,d.name=a.name||o.name||"",d.name===""&&typeof o.uri=="string"&&o.uri.startsWith("data:image/")===!1&&(d.name=o.uri);const p=(s.samplers||{})[a.sampler]||{};return d.magFilter=KL[p.magFilter]||B.LinearFilter,d.minFilter=KL[p.minFilter]||B.LinearMipmapLinearFilter,d.wrapS=JL[p.wrapS]||B.RepeatWrapping,d.wrapT=JL[p.wrapT]||B.RepeatWrapping,d.generateMipmaps=!d.isCompressedTexture&&d.minFilter!==B.NearestFilter&&d.minFilter!==B.LinearFilter,r.associations.set(d,{textures:e}),d}).catch(function(){return null});return this.textureCache[c]=h,h}loadImageSource(e,t){const i=this.json,r=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());const s=i.images[e],a=self.URL||self.webkitURL;let o=s.uri||"",c=!1;if(s.bufferView!==void 0)o=this.getDependency("bufferView",s.bufferView).then(function(d){c=!0;const p=new Blob([d],{type:s.mimeType});return o=a.createObjectURL(p),o});else if(s.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const h=Promise.resolve(o).then(function(d){return new Promise(function(p,m){let A=p;t.isImageBitmapLoader===!0&&(A=function(v){const y=new B.Texture(v);y.needsUpdate=!0,p(y)}),t.load(B.LoaderUtils.resolveURL(d,r.path),A,void 0,m)})}).then(function(d){var p;return c===!0&&a.revokeObjectURL(o),Do(d,s),d.userData.mimeType=s.mimeType||((p=s.uri).search(/\.jpe?g($|\?)/i)>0||p.search(/^data\:image\/jpeg/)===0?"image/jpeg":p.search(/\.webp($|\?)/i)>0||p.search(/^data\:image\/webp/)===0?"image/webp":p.search(/\.ktx2($|\?)/i)>0||p.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",o),d});return this.sourceCache[e]=h,h}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(a){if(!a)return null;if(i.texCoord!==void 0&&i.texCoord>0&&((a=a.clone()).channel=i.texCoord),s.extensions[tn.KHR_TEXTURE_TRANSFORM]){const o=i.extensions!==void 0?i.extensions[tn.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const c=s.associations.get(a);a=s.extensions[tn.KHR_TEXTURE_TRANSFORM].extendTexture(a,o),s.associations.set(a,c)}}return r!==void 0&&(a.colorSpace=r),e[t]=a,a})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,a=t.attributes.normal===void 0;if(e.isPoints){const o="PointsMaterial:"+i.uuid;let c=this.cache.get(o);c||(c=new B.PointsMaterial,B.Material.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,c.sizeAttenuation=!1,this.cache.add(o,c)),i=c}else if(e.isLine){const o="LineBasicMaterial:"+i.uuid;let c=this.cache.get(o);c||(c=new B.LineBasicMaterial,B.Material.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,this.cache.add(o,c)),i=c}if(r||s||a){let o="ClonedMaterial:"+i.uuid+":";r&&(o+="derivative-tangents:"),s&&(o+="vertex-colors:"),a&&(o+="flat-shading:");let c=this.cache.get(o);c||(c=i.clone(),s&&(c.vertexColors=!0),a&&(c.flatShading=!0),r&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(o,c),this.associations.set(c,this.associations.get(i))),i=c}e.material=i}getMaterialType(){return B.MeshStandardMaterial}loadMaterial(e){const t=this,i=this.json,r=this.extensions,s=i.materials[e];let a;const o={},c=[];if((s.extensions||{})[tn.KHR_MATERIALS_UNLIT]){const d=r[tn.KHR_MATERIALS_UNLIT];a=d.getMaterialType(),c.push(d.extendParams(o,s,t))}else{const d=s.pbrMetallicRoughness||{};if(o.color=new B.Color(1,1,1),o.opacity=1,Array.isArray(d.baseColorFactor)){const p=d.baseColorFactor;o.color.setRGB(p[0],p[1],p[2],B.LinearSRGBColorSpace),o.opacity=p[3]}d.baseColorTexture!==void 0&&c.push(t.assignTexture(o,"map",d.baseColorTexture,B.SRGBColorSpace)),o.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,o.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(o,"metalnessMap",d.metallicRoughnessTexture)),c.push(t.assignTexture(o,"roughnessMap",d.metallicRoughnessTexture))),a=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,o)})))}s.doubleSided===!0&&(o.side=B.DoubleSide);const h=s.alphaMode||"OPAQUE";if(h==="BLEND"?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,h==="MASK"&&(o.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&a!==B.MeshBasicMaterial&&(c.push(t.assignTexture(o,"normalMap",s.normalTexture)),o.normalScale=new B.Vector2(1,1),s.normalTexture.scale!==void 0)){const d=s.normalTexture.scale;o.normalScale.set(d,d)}if(s.occlusionTexture!==void 0&&a!==B.MeshBasicMaterial&&(c.push(t.assignTexture(o,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(o.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&a!==B.MeshBasicMaterial){const d=s.emissiveFactor;o.emissive=new B.Color().setRGB(d[0],d[1],d[2],B.LinearSRGBColorSpace)}return s.emissiveTexture!==void 0&&a!==B.MeshBasicMaterial&&c.push(t.assignTexture(o,"emissiveMap",s.emissiveTexture,B.SRGBColorSpace)),Promise.all(c).then(function(){const d=new a(o);return s.name&&(d.name=s.name),Do(d,s),t.associations.set(d,{materials:e}),s.extensions&&Vc(r,d,s),d})}createUniqueName(e){const t=B.PropertyBinding.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(o){return i[tn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o,t).then(function(c){return ZL(c,o,t)})}const a=[];for(let o=0,c=e.length;o<c;o++){const h=e[o],d=Tee(h),p=r[d];if(p)a.push(p.promise);else{let m;m=h.extensions&&h.extensions[tn.KHR_DRACO_MESH_COMPRESSION]?s(h):ZL(new B.BufferGeometry,h,t),r[d]={primitive:h,promise:m},a.push(m)}}return Promise.all(a)}loadMesh(e){const t=this,i=this.json,r=this.extensions,s=i.meshes[e],a=s.primitives,o=[];for(let c=0,h=a.length;c<h;c++){const d=a[c].material===void 0?See(this.cache):this.getDependency("material",a[c].material);o.push(d)}return o.push(t.loadGeometries(a)),Promise.all(o).then(function(c){const h=c.slice(0,c.length-1),d=c[c.length-1],p=[];for(let A=0,v=d.length;A<v;A++){const y=d[A],E=a[A];let b;const C=h[A];if(E.mode===qs.TRIANGLES||E.mode===qs.TRIANGLE_STRIP||E.mode===qs.TRIANGLE_FAN||E.mode===void 0)b=s.isSkinnedMesh===!0?new B.SkinnedMesh(y,C):new B.Mesh(y,C),b.isSkinnedMesh===!0&&b.normalizeSkinWeights(),E.mode===qs.TRIANGLE_STRIP?b.geometry=Tw(b.geometry,B.TriangleStripDrawMode):E.mode===qs.TRIANGLE_FAN&&(b.geometry=Tw(b.geometry,B.TriangleFanDrawMode));else if(E.mode===qs.LINES)b=new B.LineSegments(y,C);else if(E.mode===qs.LINE_STRIP)b=new B.Line(y,C);else if(E.mode===qs.LINE_LOOP)b=new B.LineLoop(y,C);else{if(E.mode!==qs.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+E.mode);b=new B.Points(y,C)}Object.keys(b.geometry.morphAttributes).length>0&&Mee(b,s),b.name=t.createUniqueName(s.name||"mesh_"+e),Do(b,s),E.extensions&&Vc(r,b,E),t.assignFinalMaterial(b),p.push(b)}for(let A=0,v=p.length;A<v;A++)t.associations.set(p[A],{meshes:e,primitives:A});if(p.length===1)return s.extensions&&Vc(r,p[0],s),p[0];const m=new B.Group;s.extensions&&Vc(r,m,s),t.associations.set(m,{meshes:e});for(let A=0,v=p.length;A<v;A++)m.add(p[A]);return m})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(r)return i.type==="perspective"?t=new B.PerspectiveCamera(B.MathUtils.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new B.OrthographicCamera(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Do(t,i),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const s=r.pop(),a=r,o=[],c=[];for(let h=0,d=a.length;h<d;h++){const p=a[h];if(p){o.push(p);const m=new B.Matrix4;s!==null&&m.fromArray(s.array,16*h),c.push(m)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[h])}return new B.Skeleton(o,c)})}loadAnimation(e){const t=this.json,i=this,r=t.animations[e],s=r.name?r.name:"animation_"+e,a=[],o=[],c=[],h=[],d=[];for(let p=0,m=r.channels.length;p<m;p++){const A=r.channels[p],v=r.samplers[A.sampler],y=A.target,E=y.node,b=r.parameters!==void 0?r.parameters[v.input]:v.input,C=r.parameters!==void 0?r.parameters[v.output]:v.output;y.node!==void 0&&(a.push(this.getDependency("node",E)),o.push(this.getDependency("accessor",b)),c.push(this.getDependency("accessor",C)),h.push(v),d.push(y))}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(c),Promise.all(h),Promise.all(d)]).then(function(p){const m=p[0],A=p[1],v=p[2],y=p[3],E=p[4],b=[];for(let C=0,_=m.length;C<_;C++){const w=m[C],T=A[C],L=v[C],R=y[C],P=E[C];if(w===void 0)continue;w.updateMatrix&&w.updateMatrix();const D=i._createAnimationTracks(w,T,L,R,P);if(D)for(let M=0;M<D.length;M++)b.push(D[M])}return new B.AnimationClip(s,void 0,b)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const a=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&a.traverse(function(o){if(o.isMesh)for(let c=0,h=r.weights.length;c<h;c++)o.morphTargetInfluences[c]=r.weights[c]}),a})}loadNode(e){const t=this,i=this.json.nodes[e],r=t._loadNodeShallow(e),s=[],a=i.children||[];for(let c=0,h=a.length;c<h;c++)s.push(t.getDependency("node",a[c]));const o=i.skin===void 0?Promise.resolve(null):t.getDependency("skin",i.skin);return Promise.all([r,Promise.all(s),o]).then(function(c){const h=c[0],d=c[1],p=c[2];p!==null&&h.traverse(function(m){m.isSkinnedMesh&&m.bind(p,Bee)});for(let m=0,A=d.length;m<A;m++)h.add(d[m]);return h})}_loadNodeShallow(e){const t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],a=s.name?r.createUniqueName(s.name):"",o=[],c=r._invokeOne(function(h){return h.createNodeMesh&&h.createNodeMesh(e)});return c&&o.push(c),s.camera!==void 0&&o.push(r.getDependency("camera",s.camera).then(function(h){return r._getNodeRef(r.cameraCache,s.camera,h)})),r._invokeAll(function(h){return h.createNodeAttachment&&h.createNodeAttachment(e)}).forEach(function(h){o.push(h)}),this.nodeCache[e]=Promise.all(o).then(function(h){let d;if(d=s.isBone===!0?new B.Bone:h.length>1?new B.Group:h.length===1?h[0]:new B.Object3D,d!==h[0])for(let p=0,m=h.length;p<m;p++)d.add(h[p]);if(s.name&&(d.userData.name=s.name,d.name=a),Do(d,s),s.extensions&&Vc(i,d,s),s.matrix!==void 0){const p=new B.Matrix4;p.fromArray(s.matrix),d.applyMatrix4(p)}else s.translation!==void 0&&d.position.fromArray(s.translation),s.rotation!==void 0&&d.quaternion.fromArray(s.rotation),s.scale!==void 0&&d.scale.fromArray(s.scale);return r.associations.has(d)||r.associations.set(d,{}),r.associations.get(d).nodes=e,d}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new B.Group;i.name&&(s.name=r.createUniqueName(i.name)),Do(s,i),i.extensions&&Vc(t,s,i);const a=i.nodes||[],o=[];for(let c=0,h=a.length;c<h;c++)o.push(r.getDependency("node",a[c]));return Promise.all(o).then(function(c){for(let h=0,d=c.length;h<d;h++)s.add(c[h]);return r.associations=(h=>{const d=new Map;for(const[p,m]of r.associations)(p instanceof B.Material||p instanceof B.Texture)&&d.set(p,m);return h.traverse(p=>{const m=r.associations.get(p);m!=null&&d.set(p,m)}),d})(s),s})}_createAnimationTracks(e,t,i,r,s){const a=[],o=e.name?e.name:e.uuid,c=[];let h;switch(Ll[s.path]===Ll.weights?e.traverse(function(m){m.morphTargetInfluences&&c.push(m.name?m.name:m.uuid)}):c.push(o),Ll[s.path]){case Ll.weights:h=B.NumberKeyframeTrack;break;case Ll.rotation:h=B.QuaternionKeyframeTrack;break;case Ll.position:case Ll.scale:h=B.VectorKeyframeTrack;break;default:h=i.itemSize===1?B.NumberKeyframeTrack:B.VectorKeyframeTrack}const d=r.interpolation!==void 0?wee[r.interpolation]:B.InterpolateLinear,p=this._getArrayFromAccessor(i);for(let m=0,A=c.length;m<A;m++){const v=new h(c[m]+"."+Ll[s.path],t.array,p,d);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(v),a.push(v)}return a}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=Iw(t.constructor),r=new Float32Array(t.length);for(let s=0,a=t.length;s<a;s++)r[s]=t[s]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(t){return new(this instanceof B.QuaternionKeyframeTrack?_ee:r5)(this.times,this.values,this.getValueSize()/3,t)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function ZL(n,e,t){const i=e.attributes,r=[];function s(a,o){return t.getDependency("accessor",a).then(function(c){n.setAttribute(o,c)})}for(const a in i){const o=Bw[a]||a.toLowerCase();o in n.attributes||r.push(s(i[a],o))}if(e.indices!==void 0&&!n.index){const a=t.getDependency("accessor",e.indices).then(function(o){n.setIndex(o)});r.push(a)}return B.ColorManagement.workingColorSpace!==B.LinearSRGBColorSpace&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${B.ColorManagement.workingColorSpace}" not supported.`),Do(n,e),function(a,o,c){const h=o.attributes,d=new B.Box3;if(h.POSITION===void 0)return;{const A=c.json.accessors[h.POSITION],v=A.min,y=A.max;if(v===void 0||y===void 0)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(d.set(new B.Vector3(v[0],v[1],v[2]),new B.Vector3(y[0],y[1],y[2])),A.normalized){const E=Iw(Ed[A.componentType]);d.min.multiplyScalar(E),d.max.multiplyScalar(E)}}const p=o.targets;if(p!==void 0){const A=new B.Vector3,v=new B.Vector3;for(let y=0,E=p.length;y<E;y++){const b=p[y];if(b.POSITION!==void 0){const C=c.json.accessors[b.POSITION],_=C.min,w=C.max;if(_!==void 0&&w!==void 0){if(v.setX(Math.max(Math.abs(_[0]),Math.abs(w[0]))),v.setY(Math.max(Math.abs(_[1]),Math.abs(w[1]))),v.setZ(Math.max(Math.abs(_[2]),Math.abs(w[2]))),C.normalized){const T=Iw(Ed[C.componentType]);v.multiplyScalar(T)}A.max(v)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}d.expandByVector(A)}a.boundingBox=d;const m=new B.Sphere;d.getCenter(m.center),m.radius=d.min.distanceTo(d.max)/2,a.boundingSphere=m}(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?function(a,o,c){let h=!1,d=!1,p=!1;for(let y=0,E=o.length;y<E;y++){const b=o[y];if(b.POSITION!==void 0&&(h=!0),b.NORMAL!==void 0&&(d=!0),b.COLOR_0!==void 0&&(p=!0),h&&d&&p)break}if(!h&&!d&&!p)return Promise.resolve(a);const m=[],A=[],v=[];for(let y=0,E=o.length;y<E;y++){const b=o[y];if(h){const C=b.POSITION!==void 0?c.getDependency("accessor",b.POSITION):a.attributes.position;m.push(C)}if(d){const C=b.NORMAL!==void 0?c.getDependency("accessor",b.NORMAL):a.attributes.normal;A.push(C)}if(p){const C=b.COLOR_0!==void 0?c.getDependency("accessor",b.COLOR_0):a.attributes.color;v.push(C)}}return Promise.all([Promise.all(m),Promise.all(A),Promise.all(v)]).then(function(y){const E=y[0],b=y[1],C=y[2];return h&&(a.morphAttributes.position=E),d&&(a.morphAttributes.normal=b),p&&(a.morphAttributes.color=C),a.morphTargetsRelative=!0,a})}(n,e.targets,t):n})}class Ree{constructor(e=4){this.pool=e,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(e){if(!this.workers[e]){const t=this.workerCreator();t.addEventListener("message",this._onMessage.bind(this,e)),this.workers[e]=t}}_getIdleWorker(){for(let e=0;e<this.pool;e++)if(!(this.workerStatus&1<<e))return e;return-1}_onMessage(e,t){const i=this.workersResolve[e];if(i&&i(t),this.queue.length){const{resolve:r,msg:s,transfer:a}=this.queue.shift();this.workersResolve[e]=r,this.workers[e].postMessage(s,a)}else this.workerStatus^=1<<e}setWorkerCreator(e){this.workerCreator=e}setWorkerLimit(e){this.pool=e}postMessage(e,t){return new Promise(i=>{const r=this._getIdleWorker();r!==-1?(this._initWorker(r),this.workerStatus|=1<<r,this.workersResolve[r]=i,this.workers[r].postMessage(e,t)):this.queue.push({resolve:i,msg:e,transfer:t})})}dispose(){this.workers.forEach(e=>e.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const s5=9,a5=15,o5=16,l5=22,c5=37,u5=43,h5=76,d5=83,f5=97,p5=100,m5=103,A5=109,g5=165,v5=166,N2=1000066e3;class Dee{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class ap{constructor(e,t,i,r){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(e.buffer,e.byteOffset+t,i),this._littleEndian=r,this._offset=0}_nextUint8(){const e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){const e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){const e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){const e=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,e}_nextInt32(){const e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint8Array(e){const t=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,e);return this._offset+=e,t}_skip(e){return this._offset+=e,this}_scan(e,t){t===void 0&&(t=0);const i=this._offset;let r=0;for(;this._dataView.getUint8(this._offset)!==t&&r<e;)r++,this._offset++;return r<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+i,r)}}const wr=[171,75,84,88,32,50,48,187,13,10,26,10];function $L(n){return new TextDecoder().decode(n)}var Lee=xt(9922).hp;let b_,Io,Rw;const E_={env:{emscripten_notify_memory_growth:function(n){Rw=new Uint8Array(Io.exports.memory.buffer)}}};class Oee{init(){return b_||(b_=typeof fetch<"u"?fetch("data:application/wasm;base64,"+e3).then(e=>e.arrayBuffer()).then(e=>WebAssembly.instantiate(e,E_)).then(this._init):WebAssembly.instantiate(Lee.from(e3,"base64"),E_).then(this._init),b_)}_init(e){Io=e.instance,E_.env.emscripten_notify_memory_growth(0)}decode(e,t=0){if(!Io)throw new Error("ZSTDDecoder: Await .init() before decoding.");const i=e.byteLength,r=Io.exports.malloc(i);Rw.set(e,r),t=t||Number(Io.exports.ZSTD_findDecompressedSize(r,i));const s=Io.exports.malloc(t),a=Io.exports.ZSTD_decompress(s,t,r,i),o=Rw.slice(s,s+a);return Io.exports.free(r),Io.exports.free(s),o}}const e3="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ",x_=new WeakMap;let C_,__=0;class Ms extends B.Loader{constructor(e){super(e),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new Ree,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(e){return this.transcoderPath=e,this}setWorkerLimit(e){return this.workerPool.setWorkerLimit(e),this}async detectSupportAsync(e){return this.workerConfig={astcSupported:await e.hasFeatureAsync("texture-compression-astc"),astcHDRSupported:!1,etc1Supported:await e.hasFeatureAsync("texture-compression-etc1"),etc2Supported:await e.hasFeatureAsync("texture-compression-etc2"),dxtSupported:await e.hasFeatureAsync("texture-compression-bc"),bptcSupported:await e.hasFeatureAsync("texture-compression-bptc"),pvrtcSupported:await e.hasFeatureAsync("texture-compression-pvrtc")},this}detectSupport(e){return e.isWebGPURenderer===!0?this.workerConfig={astcSupported:e.hasFeature("texture-compression-astc"),astcHDRSupported:!1,etc1Supported:e.hasFeature("texture-compression-etc1"),etc2Supported:e.hasFeature("texture-compression-etc2"),dxtSupported:e.hasFeature("texture-compression-bc"),bptcSupported:e.hasFeature("texture-compression-bptc"),pvrtcSupported:e.hasFeature("texture-compression-pvrtc")}:this.workerConfig={astcSupported:e.extensions.has("WEBGL_compressed_texture_astc"),astcHDRSupported:e.extensions.has("WEBGL_compressed_texture_astc")&&e.extensions.get("WEBGL_compressed_texture_astc").getSupportedProfiles().includes("hdr"),etc1Supported:e.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:e.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:e.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:e.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:e.extensions.has("WEBGL_compressed_texture_pvrtc")||e.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},this}init(){if(!this.transcoderPending){const e=new B.FileLoader(this.manager);e.setPath(this.transcoderPath),e.setWithCredentials(this.withCredentials);const t=e.loadAsync("basis_transcoder.js"),i=new B.FileLoader(this.manager);i.setPath(this.transcoderPath),i.setResponseType("arraybuffer"),i.setWithCredentials(this.withCredentials);const r=i.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([t,r]).then(([s,a])=>{const o=Ms.BasisWorker.toString(),c=["/* constants */","let _EngineFormat = "+JSON.stringify(Ms.EngineFormat),"let _EngineType = "+JSON.stringify(Ms.EngineType),"let _TranscoderFormat = "+JSON.stringify(Ms.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(Ms.BasisFormat),"/* basis_transcoder.js */",s,"/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([c])),this.transcoderBinary=a,this.workerPool.setWorkerCreator(()=>{const h=new Worker(this.workerSourceURL),d=this.transcoderBinary.slice(0);return h.postMessage({type:"init",config:this.workerConfig,transcoderBinary:d},[d]),h})}),__>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),__++}return this.transcoderPending}load(e,t,i,r){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const s=new B.FileLoader(this.manager);s.setResponseType("arraybuffer"),s.setWithCredentials(this.withCredentials),s.load(e,a=>{this.parse(a,t,r)},i,r)}parse(e,t,i){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");if(x_.has(e))return x_.get(e).promise.then(t).catch(i);this._createTexture(e).then(r=>t?t(r):null).catch(i)}_createTextureFrom(e,t){const{type:i,error:r,data:{faces:s,width:a,height:o,format:c,type:h,dfdFlags:d}}=e;if(i==="error")return Promise.reject(r);let p;if(t.faceCount===6)p=new B.CompressedCubeTexture(s,c,h);else{const m=s[0].mipmaps;p=t.layerCount>1?new B.CompressedArrayTexture(m,a,o,t.layerCount,c,h):new B.CompressedTexture(m,a,o,c,h)}return p.minFilter=s[0].mipmaps.length===1?B.LinearFilter:B.LinearMipmapLinearFilter,p.magFilter=B.LinearFilter,p.generateMipmaps=!1,p.needsUpdate=!0,p.colorSpace=t3(t),p.premultiplyAlpha=!!(1&d),p}async _createTexture(e,t={}){const i=function(o){const c=new Uint8Array(o.buffer,o.byteOffset,wr.length);if(c[0]!==wr[0]||c[1]!==wr[1]||c[2]!==wr[2]||c[3]!==wr[3]||c[4]!==wr[4]||c[5]!==wr[5]||c[6]!==wr[6]||c[7]!==wr[7]||c[8]!==wr[8]||c[9]!==wr[9]||c[10]!==wr[10]||c[11]!==wr[11])throw new Error("Missing KTX 2.0 identifier.");const h=new Dee,d=17*Uint32Array.BYTES_PER_ELEMENT,p=new ap(o,wr.length,d,!0);h.vkFormat=p._nextUint32(),h.typeSize=p._nextUint32(),h.pixelWidth=p._nextUint32(),h.pixelHeight=p._nextUint32(),h.pixelDepth=p._nextUint32(),h.layerCount=p._nextUint32(),h.faceCount=p._nextUint32();const m=p._nextUint32();h.supercompressionScheme=p._nextUint32();const A=p._nextUint32(),v=p._nextUint32(),y=p._nextUint32(),E=p._nextUint32(),b=p._nextUint64(),C=p._nextUint64(),_=new ap(o,wr.length+d,3*m*8,!0);for(let xe=0;xe<m;xe++)h.levels.push({levelData:new Uint8Array(o.buffer,o.byteOffset+_._nextUint64(),_._nextUint64()),uncompressedByteLength:_._nextUint64()});const w=new ap(o,A,v,!0),T={vendorId:w._skip(4)._nextUint16(),descriptorType:w._nextUint16(),versionNumber:w._nextUint16(),descriptorBlockSize:w._nextUint16(),colorModel:w._nextUint8(),colorPrimaries:w._nextUint8(),transferFunction:w._nextUint8(),flags:w._nextUint8(),texelBlockDimension:[w._nextUint8(),w._nextUint8(),w._nextUint8(),w._nextUint8()],bytesPlane:[w._nextUint8(),w._nextUint8(),w._nextUint8(),w._nextUint8(),w._nextUint8(),w._nextUint8(),w._nextUint8(),w._nextUint8()],samples:[]},L=(T.descriptorBlockSize/4-6)/4;for(let xe=0;xe<L;xe++){const Ue={bitOffset:w._nextUint16(),bitLength:w._nextUint8(),channelType:w._nextUint8(),samplePosition:[w._nextUint8(),w._nextUint8(),w._nextUint8(),w._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&Ue.channelType?(Ue.sampleLower=w._nextInt32(),Ue.sampleUpper=w._nextInt32()):(Ue.sampleLower=w._nextUint32(),Ue.sampleUpper=w._nextUint32()),T.samples[xe]=Ue}h.dataFormatDescriptor.length=0,h.dataFormatDescriptor.push(T);const R=new ap(o,y,E,!0);for(;R._offset<E;){const xe=R._nextUint32(),Ue=R._scan(xe),Ne=$L(Ue);if(h.keyValue[Ne]=R._nextUint8Array(xe-Ue.byteLength-1),Ne.match(/^ktx/i)){const Le=$L(h.keyValue[Ne]);h.keyValue[Ne]=Le.substring(0,Le.lastIndexOf("\0"))}R._skip(xe%4?4-xe%4:0)}if(C<=0)return h;const P=new ap(o,b,C,!0),D=P._nextUint16(),M=P._nextUint16(),k=P._nextUint32(),V=P._nextUint32(),X=P._nextUint32(),$=P._nextUint32(),ae=[];for(let xe=0;xe<m;xe++)ae.push({imageFlags:P._nextUint32(),rgbSliceByteOffset:P._nextUint32(),rgbSliceByteLength:P._nextUint32(),alphaSliceByteOffset:P._nextUint32(),alphaSliceByteLength:P._nextUint32()});const z=b+P._offset,j=z+k,Z=j+V,ce=Z+X,U=new Uint8Array(o.buffer,o.byteOffset+z,k),se=new Uint8Array(o.buffer,o.byteOffset+j,V),me=new Uint8Array(o.buffer,o.byteOffset+Z,X),be=new Uint8Array(o.buffer,o.byteOffset+ce,$);return h.globalData={endpointCount:D,selectorCount:M,imageDescs:ae,endpointsData:U,selectorsData:se,tablesData:me,extendedData:be},h}(new Uint8Array(e)),r=i.vkFormat===N2&&i.dataFormatDescriptor[0].colorModel===167;if(i.vkFormat!==0&&(!r||this.workerConfig.astcHDRSupported))return async function(o){const{vkFormat:c}=o;if(w_[c]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");let h;o.supercompressionScheme===2&&(C_||(C_=new Promise(async m=>{const A=new Oee;await A.init(),m(A)})),h=await C_);const d=[];for(let m=0;m<o.levels.length;m++){const A=Math.max(1,o.pixelWidth>>m),v=Math.max(1,o.pixelHeight>>m),y=o.pixelDepth?Math.max(1,o.pixelDepth>>m):0,E=o.levels[m];let b,C;if(o.supercompressionScheme===0)b=E.levelData;else{if(o.supercompressionScheme!==2)throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");b=h.decode(E.levelData,E.uncompressedByteLength)}C=S_[c]===B.FloatType?new Float32Array(b.buffer,b.byteOffset,b.byteLength/Float32Array.BYTES_PER_ELEMENT):S_[c]===B.HalfFloatType?new Uint16Array(b.buffer,b.byteOffset,b.byteLength/Uint16Array.BYTES_PER_ELEMENT):b,d.push({data:C,width:A,height:v,depth:y})}let p;if(Pee.has(w_[c]))p=o.pixelDepth===0?new B.DataTexture(d[0].data,o.pixelWidth,o.pixelHeight):new B.Data3DTexture(d[0].data,o.pixelWidth,o.pixelHeight,o.pixelDepth);else{if(o.pixelDepth>0)throw new Error("THREE.KTX2Loader: Unsupported pixelDepth.");p=new B.CompressedTexture(d,o.pixelWidth,o.pixelHeight),p.minFilter=d.length===1?B.LinearFilter:B.LinearMipmapLinearFilter,p.magFilter=B.LinearFilter}return p.mipmaps=d,p.type=S_[c],p.format=w_[c],p.colorSpace=t3(o),p.needsUpdate=!0,Promise.resolve(p)}(i);const s=t,a=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:e,taskConfig:s},[e])).then(o=>this._createTextureFrom(o.data,i));return x_.set(e,{promise:a}),a}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),__--,this}}Ms.BasisFormat={ETC1S:0,UASTC:1,UASTC_HDR:2},Ms.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16,BC6H:22,RGB_HALF:24,RGBA_HALF:25},Ms.EngineFormat={RGBAFormat:B.RGBAFormat,RGBA_ASTC_4x4_Format:B.RGBA_ASTC_4x4_Format,RGB_BPTC_UNSIGNED_Format:B.RGB_BPTC_UNSIGNED_Format,RGBA_BPTC_Format:B.RGBA_BPTC_Format,RGBA_ETC2_EAC_Format:B.RGBA_ETC2_EAC_Format,RGBA_PVRTC_4BPPV1_Format:B.RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT5_Format:B.RGBA_S3TC_DXT5_Format,RGB_ETC1_Format:B.RGB_ETC1_Format,RGB_ETC2_Format:B.RGB_ETC2_Format,RGB_PVRTC_4BPPV1_Format:B.RGB_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format:B.RGBA_S3TC_DXT1_Format},Ms.EngineType={UnsignedByteType:B.UnsignedByteType,HalfFloatType:B.HalfFloatType,FloatType:B.FloatType},Ms.BasisWorker=function(){let n,e,t;const i=_EngineFormat,r=_EngineType,s=_TranscoderFormat,a=_BasisFormat;self.addEventListener("message",function(p){const m=p.data;switch(m.type){case"init":n=m.config,A=m.transcoderBinary,e=new Promise(v=>{t={wasmBinary:A,onRuntimeInitialized:v},BASIS(t)}).then(()=>{t.initializeBasis(),t.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")});break;case"transcode":e.then(()=>{try{const{faces:v,buffers:y,width:E,height:b,hasAlpha:C,format:_,type:w,dfdFlags:T}=function(L){const R=new t.KTX2File(new Uint8Array(L));function P(){R.close(),R.delete()}if(!R.isValid())throw P(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");let D;if(R.isUASTC())D=a.UASTC;else if(R.isETC1S())D=a.ETC1S;else{if(!R.isHDR())throw new Error("THREE.KTX2Loader: Unknown Basis encoding");D=a.UASTC_HDR}const M=R.getWidth(),k=R.getHeight(),V=R.getLayers()||1,X=R.getLevels(),$=R.getFaces(),ae=R.getHasAlpha(),z=R.getDFDFlags(),{transcoderFormat:j,engineFormat:Z,engineType:ce}=function(me,be,xe,Ue){const Ne=c[me];for(let Le=0;Le<Ne.length;Le++){const ue=Ne[Le];if((!ue.if||n[ue.if])&&ue.basisFormat.includes(me)&&!(Ue&&ue.transcoderFormat.length<2)&&(!ue.needsPowerOfTwo||h(be)&&h(xe)))return{transcoderFormat:ue.transcoderFormat[Ue?1:0],engineFormat:ue.engineFormat[Ue?1:0],engineType:ue.engineType[0]}}throw new Error("THREE.KTX2Loader: Failed to identify transcoding target.")}(D,M,k,ae);if(!M||!k||!X)throw P(),new Error("THREE.KTX2Loader:	Invalid texture");if(!R.startTranscoding())throw P(),new Error("THREE.KTX2Loader: .startTranscoding failed");const U=[],se=[];for(let me=0;me<$;me++){const be=[];for(let xe=0;xe<X;xe++){const Ue=[];let Ne,Le;for(let Oe=0;Oe<V;Oe++){const Ge=R.getImageLevelInfo(xe,Oe,me);me!==0||xe!==0||Oe!==0||Ge.origWidth%4==0&&Ge.origHeight%4==0||console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."),X>1?(Ne=Ge.origWidth,Le=Ge.origHeight):(Ne=Ge.width,Le=Ge.height);let je=new Uint8Array(R.getImageTranscodedSizeInBytes(xe,Oe,0,j));const Me=R.transcodeImage(je,xe,Oe,me,j,0,-1,-1);if(ce===r.HalfFloatType&&(je=new Uint16Array(je.buffer,je.byteOffset,je.byteLength/Uint16Array.BYTES_PER_ELEMENT)),!Me)throw P(),new Error("THREE.KTX2Loader: .transcodeImage failed.");Ue.push(je)}const ue=d(Ue);be.push({data:ue,width:Ne,height:Le}),se.push(ue.buffer)}U.push({mipmaps:be,width:M,height:k,format:Z,type:ce})}return P(),{faces:U,buffers:se,width:M,height:k,hasAlpha:ae,dfdFlags:z,format:Z,type:ce}}(m.buffer);self.postMessage({type:"transcode",id:m.id,data:{faces:v,width:E,height:b,hasAlpha:C,format:_,type:w,dfdFlags:T}},y)}catch(v){console.error(v),self.postMessage({type:"error",id:m.id,error:v.message})}})}var A});const o=[{if:"astcSupported",basisFormat:[a.UASTC],transcoderFormat:[s.ASTC_4x4,s.ASTC_4x4],engineFormat:[i.RGBA_ASTC_4x4_Format,i.RGBA_ASTC_4x4_Format],engineType:[r.UnsignedByteType],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[a.ETC1S,a.UASTC],transcoderFormat:[s.BC7_M5,s.BC7_M5],engineFormat:[i.RGBA_BPTC_Format,i.RGBA_BPTC_Format],engineType:[r.UnsignedByteType],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[a.ETC1S,a.UASTC],transcoderFormat:[s.BC1,s.BC3],engineFormat:[i.RGBA_S3TC_DXT1_Format,i.RGBA_S3TC_DXT5_Format],engineType:[r.UnsignedByteType],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[a.ETC1S,a.UASTC],transcoderFormat:[s.ETC1,s.ETC2],engineFormat:[i.RGB_ETC2_Format,i.RGBA_ETC2_EAC_Format],engineType:[r.UnsignedByteType],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[a.ETC1S,a.UASTC],transcoderFormat:[s.ETC1],engineFormat:[i.RGB_ETC1_Format],engineType:[r.UnsignedByteType],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[a.ETC1S,a.UASTC],transcoderFormat:[s.PVRTC1_4_RGB,s.PVRTC1_4_RGBA],engineFormat:[i.RGB_PVRTC_4BPPV1_Format,i.RGBA_PVRTC_4BPPV1_Format],engineType:[r.UnsignedByteType],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0},{if:"bptcSupported",basisFormat:[a.UASTC_HDR],transcoderFormat:[s.BC6H],engineFormat:[i.RGB_BPTC_UNSIGNED_Format],engineType:[r.HalfFloatType],priorityHDR:1,needsPowerOfTwo:!1},{basisFormat:[a.ETC1S,a.UASTC],transcoderFormat:[s.RGBA32,s.RGBA32],engineFormat:[i.RGBAFormat,i.RGBAFormat],engineType:[r.UnsignedByteType,r.UnsignedByteType],priorityETC1S:100,priorityUASTC:100,needsPowerOfTwo:!1},{basisFormat:[a.UASTC_HDR],transcoderFormat:[s.RGBA_HALF],engineFormat:[i.RGBAFormat],engineType:[r.HalfFloatType],priorityHDR:100,needsPowerOfTwo:!1}],c={[a.ETC1S]:o.filter(p=>p.basisFormat.includes(a.ETC1S)).sort((p,m)=>p.priorityUASTC-m.priorityUASTC),[a.UASTC]:o.filter(p=>p.basisFormat.includes(a.UASTC)).sort((p,m)=>p.priorityUASTC-m.priorityUASTC),[a.UASTC_HDR]:o.filter(p=>p.basisFormat.includes(a.UASTC_HDR)).sort((p,m)=>p.priorityHDR-m.priorityHDR)};function h(p){return p<=2||!(p&p-1)&&p!==0}function d(p){if(p.length===1)return p[0];let m=0;for(let y=0;y<p.length;y++)m+=p[y].byteLength;const A=new Uint8Array(m);let v=0;for(let y=0;y<p.length;y++){const E=p[y];A.set(E,v),v+=E.byteLength}return A}};const Pee=new Set([B.RGBAFormat,B.RGFormat,B.RedFormat]),w_={[A5]:B.RGBAFormat,[f5]:B.RGBAFormat,[c5]:B.RGBAFormat,[u5]:B.RGBAFormat,[m5]:B.RGFormat,[d5]:B.RGFormat,[o5]:B.RGFormat,[l5]:B.RGFormat,[p5]:B.RedFormat,[h5]:B.RedFormat,[a5]:B.RedFormat,[s5]:B.RedFormat,[N2]:B.RGBA_ASTC_4x4_Format,[v5]:B.RGBA_ASTC_6x6_Format,[g5]:B.RGBA_ASTC_6x6_Format},S_={[A5]:B.FloatType,[f5]:B.HalfFloatType,[c5]:B.UnsignedByteType,[u5]:B.UnsignedByteType,[m5]:B.FloatType,[d5]:B.HalfFloatType,[o5]:B.UnsignedByteType,[l5]:B.UnsignedByteType,[p5]:B.FloatType,[h5]:B.HalfFloatType,[a5]:B.UnsignedByteType,[s5]:B.UnsignedByteType,[N2]:B.HalfFloatType,[v5]:B.UnsignedByteType,[g5]:B.UnsignedByteType};function t3(n){const e=n.dataFormatDescriptor[0];return e.colorPrimaries===1?e.transferFunction===2?B.SRGBColorSpace:B.LinearSRGBColorSpace:e.colorPrimaries===10?e.transferFunction===2?"display-p3":"display-p3-linear":(e.colorPrimaries===0||console.warn(`THREE.KTX2Loader: Unsupported color primaries, "${e.colorPrimaries}"`),B.NoColorSpace)}const ln={c:null,u:[new B.Vector3,new B.Vector3,new B.Vector3],e:[]},yn={c:null,u:[new B.Vector3,new B.Vector3,new B.Vector3],e:[]},Kn=[[],[],[]],Nt=[[],[],[]],Gn=[],Wc=new B.Vector3,qc=new B.Vector3,jc=new B.Vector3,Ri=new B.Vector3,n3=new B.Vector3,i3=new B.Vector3,ua=new B.Matrix3,r3=new B.Box3,_0=new B.Matrix4,s3=new B.Matrix4,a3=new B.Ray;class wy{constructor(e=new B.Vector3,t=new B.Vector3,i=new B.Matrix3){this.center=e,this.halfSize=t,this.rotation=i}set(e,t,i){return this.center=e,this.halfSize=t,this.rotation=i,this}copy(e){return this.center.copy(e.center),this.halfSize.copy(e.halfSize),this.rotation.copy(e.rotation),this}clone(){return new this.constructor().copy(this)}getSize(e){return e.copy(this.halfSize).multiplyScalar(2)}clampPoint(e,t){const i=this.halfSize;Ri.subVectors(e,this.center),this.rotation.extractBasis(Wc,qc,jc),t.copy(this.center);const r=B.MathUtils.clamp(Ri.dot(Wc),-i.x,i.x);t.add(Wc.multiplyScalar(r));const s=B.MathUtils.clamp(Ri.dot(qc),-i.y,i.y);t.add(qc.multiplyScalar(s));const a=B.MathUtils.clamp(Ri.dot(jc),-i.z,i.z);return t.add(jc.multiplyScalar(a)),t}containsPoint(e){return Ri.subVectors(e,this.center),this.rotation.extractBasis(Wc,qc,jc),Math.abs(Ri.dot(Wc))<=this.halfSize.x&&Math.abs(Ri.dot(qc))<=this.halfSize.y&&Math.abs(Ri.dot(jc))<=this.halfSize.z}intersectsBox3(e){return this.intersectsOBB(Uee.fromBox3(e))}intersectsSphere(e){return this.clampPoint(e.center,i3),i3.distanceToSquared(e.center)<=e.radius*e.radius}intersectsOBB(e,t=Number.EPSILON){ln.c=this.center,ln.e[0]=this.halfSize.x,ln.e[1]=this.halfSize.y,ln.e[2]=this.halfSize.z,this.rotation.extractBasis(ln.u[0],ln.u[1],ln.u[2]),yn.c=e.center,yn.e[0]=e.halfSize.x,yn.e[1]=e.halfSize.y,yn.e[2]=e.halfSize.z,e.rotation.extractBasis(yn.u[0],yn.u[1],yn.u[2]);for(let s=0;s<3;s++)for(let a=0;a<3;a++)Kn[s][a]=ln.u[s].dot(yn.u[a]);Ri.subVectors(yn.c,ln.c),Gn[0]=Ri.dot(ln.u[0]),Gn[1]=Ri.dot(ln.u[1]),Gn[2]=Ri.dot(ln.u[2]);for(let s=0;s<3;s++)for(let a=0;a<3;a++)Nt[s][a]=Math.abs(Kn[s][a])+t;let i,r;for(let s=0;s<3;s++)if(i=ln.e[s],r=yn.e[0]*Nt[s][0]+yn.e[1]*Nt[s][1]+yn.e[2]*Nt[s][2],Math.abs(Gn[s])>i+r)return!1;for(let s=0;s<3;s++)if(i=ln.e[0]*Nt[0][s]+ln.e[1]*Nt[1][s]+ln.e[2]*Nt[2][s],r=yn.e[s],Math.abs(Gn[0]*Kn[0][s]+Gn[1]*Kn[1][s]+Gn[2]*Kn[2][s])>i+r)return!1;return i=ln.e[1]*Nt[2][0]+ln.e[2]*Nt[1][0],r=yn.e[1]*Nt[0][2]+yn.e[2]*Nt[0][1],!(Math.abs(Gn[2]*Kn[1][0]-Gn[1]*Kn[2][0])>i+r||(i=ln.e[1]*Nt[2][1]+ln.e[2]*Nt[1][1],r=yn.e[0]*Nt[0][2]+yn.e[2]*Nt[0][0],Math.abs(Gn[2]*Kn[1][1]-Gn[1]*Kn[2][1])>i+r||(i=ln.e[1]*Nt[2][2]+ln.e[2]*Nt[1][2],r=yn.e[0]*Nt[0][1]+yn.e[1]*Nt[0][0],Math.abs(Gn[2]*Kn[1][2]-Gn[1]*Kn[2][2])>i+r||(i=ln.e[0]*Nt[2][0]+ln.e[2]*Nt[0][0],r=yn.e[1]*Nt[1][2]+yn.e[2]*Nt[1][1],Math.abs(Gn[0]*Kn[2][0]-Gn[2]*Kn[0][0])>i+r||(i=ln.e[0]*Nt[2][1]+ln.e[2]*Nt[0][1],r=yn.e[0]*Nt[1][2]+yn.e[2]*Nt[1][0],Math.abs(Gn[0]*Kn[2][1]-Gn[2]*Kn[0][1])>i+r||(i=ln.e[0]*Nt[2][2]+ln.e[2]*Nt[0][2],r=yn.e[0]*Nt[1][1]+yn.e[1]*Nt[1][0],Math.abs(Gn[0]*Kn[2][2]-Gn[2]*Kn[0][2])>i+r||(i=ln.e[0]*Nt[1][0]+ln.e[1]*Nt[0][0],r=yn.e[1]*Nt[2][2]+yn.e[2]*Nt[2][1],Math.abs(Gn[1]*Kn[0][0]-Gn[0]*Kn[1][0])>i+r||(i=ln.e[0]*Nt[1][1]+ln.e[1]*Nt[0][1],r=yn.e[0]*Nt[2][2]+yn.e[2]*Nt[2][0],Math.abs(Gn[1]*Kn[0][1]-Gn[0]*Kn[1][1])>i+r||(i=ln.e[0]*Nt[1][2]+ln.e[1]*Nt[0][2],r=yn.e[0]*Nt[2][1]+yn.e[1]*Nt[2][0],Math.abs(Gn[1]*Kn[0][2]-Gn[0]*Kn[1][2])>i+r)))))))))}intersectsPlane(e){this.rotation.extractBasis(Wc,qc,jc);const t=this.halfSize.x*Math.abs(e.normal.dot(Wc))+this.halfSize.y*Math.abs(e.normal.dot(qc))+this.halfSize.z*Math.abs(e.normal.dot(jc)),i=e.normal.dot(this.center)-e.constant;return Math.abs(i)<=t}intersectRay(e,t){return this.getSize(n3),r3.setFromCenterAndSize(Ri.set(0,0,0),n3),_0.setFromMatrix3(this.rotation),_0.setPosition(this.center),s3.copy(_0).invert(),a3.copy(e).applyMatrix4(s3),a3.intersectBox(r3,t)?t.applyMatrix4(_0):null}intersectsRay(e){return this.intersectRay(e,Ri)!==null}fromBox3(e){return e.getCenter(this.center),e.getSize(this.halfSize).multiplyScalar(.5),this.rotation.identity(),this}equals(e){return e.center.equals(this.center)&&e.halfSize.equals(this.halfSize)&&e.rotation.equals(this.rotation)}applyMatrix4(e){const t=e.elements;let i=Ri.set(t[0],t[1],t[2]).length();const r=Ri.set(t[4],t[5],t[6]).length(),s=Ri.set(t[8],t[9],t[10]).length();e.determinant()<0&&(i=-i),ua.setFromMatrix4(e);const a=1/i,o=1/r,c=1/s;return ua.elements[0]*=a,ua.elements[1]*=a,ua.elements[2]*=a,ua.elements[3]*=o,ua.elements[4]*=o,ua.elements[5]*=o,ua.elements[6]*=c,ua.elements[7]*=c,ua.elements[8]*=c,this.rotation.multiply(ua),this.halfSize.x*=i,this.halfSize.y*=r,this.halfSize.z*=s,Ri.setFromMatrixPosition(e),this.center.add(Ri),this}}const Uee=new wy,kee=/^[og]\s*(.+)?/,Nee=/^mtllib /,Fee=/^usemtl /,Qee=/^usemap /,o3=/\s+/,l3=new B.Vector3,M_=new B.Vector3,c3=new B.Vector3,u3=new B.Vector3,Vs=new B.Vector3,w0=new B.Color;function zee(){const n={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&this.object.fromDeclaration===!1)return this.object.name=e,void(this.object.fromDeclaration=t!==!1);const i=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:t!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(r,s){const a=this._finalize(!1);a&&(a.inherited||a.groupCount<=0)&&this.materials.splice(a.index,1);const o={index:this.materials.length,name:r||"",mtllib:Array.isArray(s)&&s.length>0?s[s.length-1]:"",smooth:a!==void 0?a.smooth:this.smooth,groupStart:a!==void 0?a.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(c){const h={index:typeof c=="number"?c:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return h.clone=this.clone.bind(h),h}};return this.materials.push(o),o},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(r){const s=this.currentMaterial();if(s&&s.groupEnd===-1&&(s.groupEnd=this.geometry.vertices.length/3,s.groupCount=s.groupEnd-s.groupStart,s.inherited=!1),r&&this.materials.length>1)for(let a=this.materials.length-1;a>=0;a--)this.materials[a].groupCount<=0&&this.materials.splice(a,1);return r&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),s}},i&&i.name&&typeof i.clone=="function"){const r=i.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const i=parseInt(e,10);return 3*(i>=0?i-1:i+t/3)},parseNormalIndex:function(e,t){const i=parseInt(e,10);return 3*(i>=0?i-1:i+t/3)},parseUVIndex:function(e,t){const i=parseInt(e,10);return 2*(i>=0?i-1:i+t/2)},addVertex:function(e,t,i){const r=this.vertices,s=this.object.geometry.vertices;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[i+0],r[i+1],r[i+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,i){const r=this.normals,s=this.object.geometry.normals;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[i+0],r[i+1],r[i+2])},addFaceNormal:function(e,t,i){const r=this.vertices,s=this.object.geometry.normals;l3.fromArray(r,e),M_.fromArray(r,t),c3.fromArray(r,i),Vs.subVectors(c3,M_),u3.subVectors(l3,M_),Vs.cross(u3),Vs.normalize(),s.push(Vs.x,Vs.y,Vs.z),s.push(Vs.x,Vs.y,Vs.z),s.push(Vs.x,Vs.y,Vs.z)},addColor:function(e,t,i){const r=this.colors,s=this.object.geometry.colors;r[e]!==void 0&&s.push(r[e+0],r[e+1],r[e+2]),r[t]!==void 0&&s.push(r[t+0],r[t+1],r[t+2]),r[i]!==void 0&&s.push(r[i+0],r[i+1],r[i+2])},addUV:function(e,t,i){const r=this.uvs,s=this.object.geometry.uvs;s.push(r[e+0],r[e+1]),s.push(r[t+0],r[t+1]),s.push(r[i+0],r[i+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,i,r,s,a,o,c,h){const d=this.vertices.length;let p=this.parseVertexIndex(e,d),m=this.parseVertexIndex(t,d),A=this.parseVertexIndex(i,d);if(this.addVertex(p,m,A),this.addColor(p,m,A),o!==void 0&&o!==""){const v=this.normals.length;p=this.parseNormalIndex(o,v),m=this.parseNormalIndex(c,v),A=this.parseNormalIndex(h,v),this.addNormal(p,m,A)}else this.addFaceNormal(p,m,A);if(r!==void 0&&r!==""){const v=this.uvs.length;p=this.parseUVIndex(r,v),m=this.parseUVIndex(s,v),A=this.parseUVIndex(a,v),this.addUV(p,m,A),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let i=0,r=e.length;i<r;i++){const s=this.parseVertexIndex(e[i],t);this.addVertexPoint(s),this.addColor(s)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const i=this.vertices.length,r=this.uvs.length;for(let s=0,a=e.length;s<a;s++)this.addVertexLine(this.parseVertexIndex(e[s],i));for(let s=0,a=t.length;s<a;s++)this.addUVLine(this.parseUVIndex(t[s],r))}};return n.startObject("",!1),n}class y5 extends B.Loader{constructor(e){super(e),this.materials=null}load(e,t,i,r){const s=this,a=new B.FileLoader(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{t(s.parse(o))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}setMaterials(e){return this.materials=e,this}parse(e){const t=new zee;e.indexOf(`\r
`)!==-1&&(e=e.replace(/\r\n/g,`
`)),e.indexOf(`\\
`)!==-1&&(e=e.replace(/\\\n/g,""));const i=e.split(`
`);let r=[];for(let a=0,o=i.length;a<o;a++){const c=i[a].trimStart();if(c.length===0)continue;const h=c.charAt(0);if(h!=="#")if(h==="v"){const d=c.split(o3);switch(d[0]){case"v":t.vertices.push(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3])),d.length>=7?(w0.setRGB(parseFloat(d[4]),parseFloat(d[5]),parseFloat(d[6]),B.SRGBColorSpace),t.colors.push(w0.r,w0.g,w0.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3]));break;case"vt":t.uvs.push(parseFloat(d[1]),parseFloat(d[2]))}}else if(h==="f"){const d=c.slice(1).trim().split(o3),p=[];for(let A=0,v=d.length;A<v;A++){const y=d[A];if(y.length>0){const E=y.split("/");p.push(E)}}const m=p[0];for(let A=1,v=p.length-1;A<v;A++){const y=p[A],E=p[A+1];t.addFace(m[0],y[0],E[0],m[1],y[1],E[1],m[2],y[2],E[2])}}else if(h==="l"){const d=c.substring(1).trim().split(" ");let p=[];const m=[];if(c.indexOf("/")===-1)p=d;else for(let A=0,v=d.length;A<v;A++){const y=d[A].split("/");y[0]!==""&&p.push(y[0]),y[1]!==""&&m.push(y[1])}t.addLineGeometry(p,m)}else if(h==="p"){const d=c.slice(1).trim().split(" ");t.addPointGeometry(d)}else if((r=kee.exec(c))!==null){const d=(" "+r[0].slice(1).trim()).slice(1);t.startObject(d)}else if(Fee.test(c))t.object.startMaterial(c.substring(7).trim(),t.materialLibraries);else if(Nee.test(c))t.materialLibraries.push(c.substring(7).trim());else if(Qee.test(c))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(h==="s"){if(r=c.split(" "),r.length>1){const p=r[1].trim().toLowerCase();t.object.smooth=p!=="0"&&p!=="off"}else t.object.smooth=!0;const d=t.object.currentMaterial();d&&(d.smooth=t.object.smooth)}else{if(c==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+c+'"')}}t.finalize();const s=new B.Group;if(s.materialLibraries=[].concat(t.materialLibraries),!(t.objects.length===1&&t.objects[0].geometry.vertices.length===0))for(let a=0,o=t.objects.length;a<o;a++){const c=t.objects[a],h=c.geometry,d=c.materials,p=h.type==="Line",m=h.type==="Points";let A=!1;if(h.vertices.length===0)continue;const v=new B.BufferGeometry;v.setAttribute("position",new B.Float32BufferAttribute(h.vertices,3)),h.normals.length>0&&v.setAttribute("normal",new B.Float32BufferAttribute(h.normals,3)),h.colors.length>0&&(A=!0,v.setAttribute("color",new B.Float32BufferAttribute(h.colors,3))),h.hasUVIndices===!0&&v.setAttribute("uv",new B.Float32BufferAttribute(h.uvs,2));const y=[];for(let b=0,C=d.length;b<C;b++){const _=d[b],w=_.name+"_"+_.smooth+"_"+A;let T=t.materials[w];if(this.materials!==null)if(T=this.materials.create(_.name),!p||!T||T instanceof B.LineBasicMaterial){if(m&&T&&!(T instanceof B.PointsMaterial)){const L=new B.PointsMaterial({size:10,sizeAttenuation:!1});B.Material.prototype.copy.call(L,T),L.color.copy(T.color),L.map=T.map,T=L}}else{const L=new B.LineBasicMaterial;B.Material.prototype.copy.call(L,T),L.color.copy(T.color),T=L}T===void 0&&(T=p?new B.LineBasicMaterial:m?new B.PointsMaterial({size:1,sizeAttenuation:!1}):new B.MeshPhongMaterial,T.name=_.name,T.flatShading=!_.smooth,T.vertexColors=A,t.materials[w]=T),y.push(T)}let E;if(y.length>1){for(let b=0,C=d.length;b<C;b++){const _=d[b];v.addGroup(_.groupStart,_.groupCount,b)}E=p?new B.LineSegments(v,y):m?new B.Points(v,y):new B.Mesh(v,y)}else E=p?new B.LineSegments(v,y[0]):m?new B.Points(v,y[0]):new B.Mesh(v,y[0]);E.name=c.name,s.add(E)}else if(t.vertices.length>0){const a=new B.PointsMaterial({size:1,sizeAttenuation:!1}),o=new B.BufferGeometry;o.setAttribute("position",new B.Float32BufferAttribute(t.vertices,3)),t.colors.length>0&&t.colors[0]!==void 0&&(o.setAttribute("color",new B.Float32BufferAttribute(t.colors,3)),a.vertexColors=!0);const c=new B.Points(o,a);s.add(c)}return s}}class b5 extends B.Loader{constructor(e){super(e)}load(e,t,i,r){const s=this,a=this.path===""?B.LoaderUtils.extractUrlBase(e):this.path,o=new B.FileLoader(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(c){try{t(s.parse(c,a))}catch(h){r?r(h):console.error(h),s.manager.itemError(e)}},i,r)}setMaterialOptions(e){return this.materialOptions=e,this}parse(e,t){const i=e.split(`
`);let r={};const s=/\s+/,a={};for(let c=0;c<i.length;c++){let h=i[c];if(h=h.trim(),h.length===0||h.charAt(0)==="#")continue;const d=h.indexOf(" ");let p=d>=0?h.substring(0,d):h;p=p.toLowerCase();let m=d>=0?h.substring(d+1):"";if(m=m.trim(),p==="newmtl")r={name:m},a[m]=r;else if(p==="ka"||p==="kd"||p==="ks"||p==="ke"){const A=m.split(s,3);r[p]=[parseFloat(A[0]),parseFloat(A[1]),parseFloat(A[2])]}else r[p]=m}const o=new Hee(this.resourcePath||t,this.materialOptions);return o.setCrossOrigin(this.crossOrigin),o.setManager(this.manager),o.setMaterials(a),o}}class Hee{constructor(e="",t={}){this.baseUrl=e,this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=this.options.side!==void 0?this.options.side:B.FrontSide,this.wrap=this.options.wrap!==void 0?this.options.wrap:B.RepeatWrapping}setCrossOrigin(e){return this.crossOrigin=e,this}setManager(e){this.manager=e}setMaterials(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(e){if(!this.options)return e;const t={};for(const i in e){const r=e[i],s={};t[i]=s;for(const a in r){let o=!0,c=r[a];const h=a.toLowerCase();switch(h){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(c=[c[0]/255,c[1]/255,c[2]/255]),this.options&&this.options.ignoreZeroRGBs&&c[0]===0&&c[1]===0&&c[2]===0&&(o=!1)}o&&(s[h]=c)}}return t}preload(){for(const e in this.materialsInfo)this.create(e)}getIndex(e){return this.nameLookup[e]}getAsArray(){let e=0;for(const t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray}create(e){return this.materials[e]===void 0&&this.createMaterial_(e),this.materials[e]}createMaterial_(e){const t=this,i=this.materialsInfo[e],r={name:e,side:this.side};function s(a,o){if(r[a])return;const c=t.getTextureParams(o,r),h=t.loadTexture((d=t.baseUrl,typeof(p=c.url)!="string"||p===""?"":/^https?:\/\//i.test(p)?p:d+p));var d,p;h.repeat.copy(c.scale),h.offset.copy(c.offset),h.wrapS=t.wrap,h.wrapT=t.wrap,a!=="map"&&a!=="emissiveMap"||(h.colorSpace=B.SRGBColorSpace),r[a]=h}for(const a in i){const o=i[a];let c;if(o!=="")switch(a.toLowerCase()){case"kd":r.color=B.ColorManagement.toWorkingColorSpace(new B.Color().fromArray(o),B.SRGBColorSpace);break;case"ks":r.specular=B.ColorManagement.toWorkingColorSpace(new B.Color().fromArray(o),B.SRGBColorSpace);break;case"ke":r.emissive=B.ColorManagement.toWorkingColorSpace(new B.Color().fromArray(o),B.SRGBColorSpace);break;case"map_kd":s("map",o);break;case"map_ks":s("specularMap",o);break;case"map_ke":s("emissiveMap",o);break;case"norm":s("normalMap",o);break;case"map_bump":case"bump":s("bumpMap",o);break;case"map_d":s("alphaMap",o),r.transparent=!0;break;case"ns":r.shininess=parseFloat(o);break;case"d":c=parseFloat(o),c<1&&(r.opacity=c,r.transparent=!0);break;case"tr":c=parseFloat(o),this.options&&this.options.invertTrProperty&&(c=1-c),c>0&&(r.opacity=1-c,r.transparent=!0)}}return this.materials[e]=new B.MeshPhongMaterial(r),this.materials[e]}getTextureParams(e,t){const i={scale:new B.Vector2(1,1),offset:new B.Vector2(0,0)},r=e.split(/\s+/);let s;return s=r.indexOf("-bm"),s>=0&&(t.bumpScale=parseFloat(r[s+1]),r.splice(s,2)),s=r.indexOf("-s"),s>=0&&(i.scale.set(parseFloat(r[s+1]),parseFloat(r[s+2])),r.splice(s,4)),s=r.indexOf("-o"),s>=0&&(i.offset.set(parseFloat(r[s+1]),parseFloat(r[s+2])),r.splice(s,4)),i.url=r.join(" ").trim(),i}loadTexture(e,t,i,r,s){const a=this.manager!==void 0?this.manager:B.DefaultLoadingManager;let o=a.getHandler(e);o===null&&(o=new B.TextureLoader(a)),o.setCrossOrigin&&o.setCrossOrigin(this.crossOrigin);const c=o.load(e,i,r,s);return t!==void 0&&(c.mapping=t),c}}class E5{static fromCubeTexture(e){let t=0;const i=new B.Vector3,r=new B.Vector3,s=new B.Color,a=[0,0,0,0,0,0,0,0,0],o=new B.SphericalHarmonics3,c=o.coefficients;for(let d=0;d<6;d++){const p=e.image[d],m=p.width,A=p.height,v=document.createElement("canvas");v.width=m,v.height=A;const y=v.getContext("2d");y.drawImage(p,0,0,m,A);const E=y.getImageData(0,0,m,A),b=E.data,C=E.width,_=2/C;for(let w=0,T=b.length;w<T;w+=4){s.setRGB(b[w]/255,b[w+1]/255,b[w+2]/255),h3(s,e.colorSpace);const L=w/4,R=(L%C+.5)*_-1,P=1-(Math.floor(L/C)+.5)*_;switch(d){case 0:i.set(-1,P,-R);break;case 1:i.set(1,P,R);break;case 2:i.set(-R,1,-P);break;case 3:i.set(-R,-1,P);break;case 4:i.set(-R,P,1);break;case 5:i.set(R,P,-1)}const D=i.lengthSq(),M=4/(Math.sqrt(D)*D);t+=M,r.copy(i).normalize(),B.SphericalHarmonics3.getBasisAt(r,a);for(let k=0;k<9;k++)c[k].x+=a[k]*s.r*M,c[k].y+=a[k]*s.g*M,c[k].z+=a[k]*s.b*M}}const h=4*Math.PI/t;for(let d=0;d<9;d++)c[d].x*=h,c[d].y*=h,c[d].z*=h;return new B.LightProbe(o)}static async fromCubeRenderTarget(e,t){const i=e.coordinateSystem===B.WebGLCoordinateSystem?-1:1;let r=0;const s=new B.Vector3,a=new B.Vector3,o=new B.Color,c=[0,0,0,0,0,0,0,0,0],h=new B.SphericalHarmonics3,d=h.coefficients,p=t.texture.type,m=t.width;let A;e.isWebGLRenderer&&(A=p===B.HalfFloatType?new Uint16Array(m*m*4):new Uint8Array(m*m*4));for(let y=0;y<6;y++){e.isWebGLRenderer?await e.readRenderTargetPixelsAsync(t,0,0,m,m,A,y):A=await e.readRenderTargetPixelsAsync(t,0,0,m,m,0,y);const E=2/m;for(let b=0,C=A.length;b<C;b+=4){let _,w,T;p===B.HalfFloatType?(_=B.DataUtils.fromHalfFloat(A[b]),w=B.DataUtils.fromHalfFloat(A[b+1]),T=B.DataUtils.fromHalfFloat(A[b+2])):(_=A[b]/255,w=A[b+1]/255,T=A[b+2]/255),o.setRGB(_,w,T),h3(o,t.texture.colorSpace);const L=b/4,R=(1-(L%m+.5)*E)*i,P=1-(Math.floor(L/m)+.5)*E;switch(y){case 0:s.set(-1*i,P,R*i);break;case 1:s.set(1*i,P,-R*i);break;case 2:s.set(R,1,-P);break;case 3:s.set(R,-1,P);break;case 4:s.set(R,P,1);break;case 5:s.set(-R,P,-1)}const D=s.lengthSq(),M=4/(Math.sqrt(D)*D);r+=M,a.copy(s).normalize(),B.SphericalHarmonics3.getBasisAt(a,c);for(let k=0;k<9;k++)d[k].x+=c[k]*o.r*M,d[k].y+=c[k]*o.g*M,d[k].z+=c[k]*o.b*M}}const v=4*Math.PI/r;for(let y=0;y<9;y++)d[y].x*=v,d[y].y*=v,d[y].z*=v;return new B.LightProbe(h)}}function h3(n,e){switch(e){case B.SRGBColorSpace:n.convertSRGBToLinear();break;case B.LinearSRGBColorSpace:case B.NoColorSpace:break;default:console.warn("WARNING: LightProbeGenerator convertColorToLinear() encountered an unsupported color space.")}return n}var x5=function(n){var e=this;this.object=n,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0;var t,i,r,s,a=function(h){e.deviceOrientation=h},o=function(){e.screenOrientation=window.orientation||0},c=(t=new THREE.Vector3(0,0,1),i=new THREE.Euler,r=new THREE.Quaternion,s=new THREE.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5)),function(h,d,p,m,A){i.set(p,d,-m,"YXZ"),h.setFromEuler(i),h.multiply(s),h.multiply(r.setFromAxisAngle(t,-A))});this.connect=function(){o(),window.addEventListener("orientationchange",o,!1),window.addEventListener("deviceorientation",a,!1),e.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",o,!1),window.removeEventListener("deviceorientation",a,!1),e.enabled=!1},this.update=function(){if(e.enabled!==!1){var h=e.deviceOrientation;if(h){var d=h.alpha?THREE.MathUtils.degToRad(h.alpha)+e.alphaOffset:0,p=h.beta?THREE.MathUtils.degToRad(h.beta):0,m=h.gamma?THREE.MathUtils.degToRad(h.gamma):0,A=e.screenOrientation?THREE.MathUtils.degToRad(e.screenOrientation):0;c(e.object.quaternion,d,p,m,A)}}},this.dispose=function(){e.disconnect()},this.connect()},fa=globalThis.THREE={...B};fa.DRACOLoader=n5,fa.GLTFLoader=k2,fa.KTX2Loader=Ms,fa.OBJLoader=y5,fa.MTLLoader=b5,fa.OBB=wy,fa.BufferGeometryUtils=hw,fa.LightProbeGenerator=E5,fa.DeviceOrientationControls=x5,fa.Cache.enabled=!0;const C5=fa;var pi=window.AFRAME_CDN_ROOT||"https://cdn.aframe.io/",er="aframe-injected",Gee=xt(8878),Pm=xt.n(Gee),d3={colors:{debug:"gray",error:"red",info:"gray",warn:"orange"}};Pm().formatArgs=function(n){if(n[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+n[0]+(this.useColors?"%c ":" "),this.useColors){var e;this.color=(e=function(s){var a=s.split(":");return a[a.length-1]}(this.namespace),d3.colors&&d3.colors[e]||null);var t="color: "+this.color;n.splice(1,0,t,"color: inherit");var i=0,r=0;n[0].replace(/%[a-zA-Z%]/g,function(s){s!=="%%"&&(i++,s==="%c"&&(r=i))}),n.splice(r,0,t)}};var T_=function(){try{return window.localStorage}catch{}}();T_&&(parseInt(T_.logs,10)||T_.logs==="true")?Pm().enable("*"):Pm().enable("*:error,*:info,*:warn");const mn=Pm();var Vee=xt(1124),Wee=xt.n(Vee),f3=mn("device:error"),Sy=!1,My=!1,zb=navigator.xr!==void 0;if(zb){var jh=function(){var n=document.querySelector("a-scene");n?n.hasLoaded?n.components["xr-mode-ui"].updateEnterInterfaces():n.addEventListener("loaded",jh):window.addEventListener("DOMContentLoaded",jh)},p3=function(n){f3("WebXR session support error: "+n.message)};navigator.xr.isSessionSupported?(navigator.xr.isSessionSupported("immersive-vr").then(function(n){Sy=n,jh()}).catch(p3),navigator.xr.isSessionSupported("immersive-ar").then(function(n){My=n,jh()}).catch(function(){})):navigator.xr.supportsSession?(navigator.xr.supportsSession("immersive-vr").then(function(){Sy=!0,jh()}).catch(p3),navigator.xr.supportsSession("immersive-ar").then(function(){My=!0,jh()}).catch(function(){})):f3("WebXR has neither isSessionSupported or supportsSession?!")}function F2(){return Sy||My}function Q2(){return My}function Dw(){return Sy}var op,B_,sc=(op=!1,B_=window.navigator.userAgent||window.navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(B_)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(B_.substr(0,4)))&&(op=!0),(sA()||_5()||V2())&&(op=!0),G2()&&(op=!1),function(){return op});function _5(n){var e=n||window.navigator.userAgent;return/Nexus (7|9)|xoom|sch-i800|playbook|tablet|kindle/i.test(e)||w5()}function w5(n,e,t){var i=n||window.navigator.userAgent,r=e||window.navigator.platform,s=t||window.navigator.maxTouchPoints||0;return(r==="iPad"||r==="MacIntel")&&s>0&&/Macintosh|Intel|iPad|ipad/i.test(i)&&!window.MSStream}function S5(){var n=navigator.userAgent.includes("Macintosh"),e=navigator.maxTouchPoints===5;return n&&e&&zb}function sA(){return/iPad|iPhone|iPod/.test(window.navigator.platform)}function z2(){return!sc()&&!G2()&&window.orientation!==void 0}function H2(){return/(OculusBrowser)/i.test(window.navigator.userAgent)}function M5(){return/(Mobile VR)/i.test(window.navigator.userAgent)}function G2(){return H2()||M5()||S5()}function V2(){return/R7 Build/.test(window.navigator.userAgent)}function T5(){var n=window.orientation;return V2()&&(n+=90),n===90||n===-90}var W2=typeof process>"u"||process.browser===!0,qee=!W2,jee=Object.freeze(Object.create(null));function Xee(){return{}}function q2(n){var e=[],t=null;function i(r){var s,a;if((r=r===void 0?e.length:r)>0&&t==null&&(t=0),r>0)for(s=e.length,e.length+=Number(r),a=s;a<e.length;a++)e[a]=n();return e.length}return n=n||Xee,{grow:i,pool:e,recycle:function(r){r instanceof Object&&(t!==null&&t!==-1?e[--t]=r:e[e.length]=r)},size:function(){return e.length},use:function(){var r;return t!==null&&t!==e.length||i(e.length||5),r=e[t],e[t++]=jee,j2(r),r}}}function j2(n){var e;if(n&&n.constructor===Object)for(e in n)n[e]=void 0}function Um(n,e){var t;if(n&&n.constructor===Object)for(t in n)t in e||delete n[t]}var Yee=mn("utils:coordinates:warn"),m3=["x","y","z","w"],B5=/^\s*((-?\d*\.{0,1}\d+(e-?\d+)?)\s+){2,3}(-?\d*\.{0,1}\d+(e-?\d+)?)\s*$/,Kee=/\s+/g;function Ty(n,e,t){var i,r,s,a,o,c,h,d,p=t&&typeof t=="object"?t:{};if(n&&n instanceof Object)return o=n.x===void 0?e&&e.x:n.x,c=n.y===void 0?e&&e.y:n.y,h=n.z===void 0?e&&e.z:n.z,d=n.w===void 0?e&&e.w:n.w,o!=null&&(p.x=lp(o)),c!=null&&(p.y=lp(c)),h!=null&&(p.z=lp(h)),d!=null&&(p.w=lp(d)),p;if(n==null)return typeof e=="object"?Object.assign(p,e):e;for(i=n.trim().split(Kee),a=0;a<m3.length;a++)if(s=m3[a],i[a])p[s]=parseFloat(i[a],10);else{if((r=e&&e[s])===void 0)continue;p[s]=lp(r)}return p}function mv(n){var e;return typeof n!="object"?n:(e=n.x+" "+n.y,n.z!=null&&(e+=" "+n.z),n.w!=null&&(e+=" "+n.w),e)}function Av(n,e){return typeof n!="object"||typeof e!="object"?n===e:n.x===e.x&&n.y===e.y&&n.z===e.z&&n.w===e.w}function I5(n){return B5.test(n)}function Jee(n){return Yee("`AFRAME.utils.isCoordinate` has been renamed to `AFRAME.utils.isCoordinates`"),I5(n)}function lp(n){return n!=null&&n.constructor===String?parseFloat(n,10):n}function Zee(n){return new B.Vector3(n.x,n.y,n.z)}var Xo=function(){var n={};return function(e,t){return t in n||(n[t]={}),e in n[t]||(n[t][e]=e.split(t)),n[t][e]}}();function Hb(n,e){var t=Xo(n,e=e||".");return t.length===1?t[0]:t}function R5(n,e,t){var i;return t=t||".",e.indexOf(t)!==-1?(i=Hb(e,t)).constructor===String?n.getAttribute(i):n.getAttribute(i[0])[i[1]]:n.getAttribute(e)}function X2(n,e,t,i){var r;i=i||".",e.indexOf(i)===-1?n.setAttribute(e,t):(r=Hb(e,i)).constructor===String?n.setAttribute(r,t):n.setAttribute(r[0],r[1],t)}function D5(n){var e=n.style.width,t=n.style.height;n.style.width=parseInt(e,10)+1+"px",n.style.height=parseInt(t,10)+1+"px",setTimeout(function(){n.style.width=e,n.style.height=t},200)}var gv=mn("utils:src-loader:warn");function By(n,e,t){(function(i,r){var s;i.tagName?r(i.tagName==="IMG"):((s=new XMLHttpRequest).open("HEAD",i),s.addEventListener("load",function(a){var o;s.status>=200&&s.status<300?(o=s.getResponseHeader("Content-Type"))==null?A3(i,r):o.startsWith("image")?r(!0):r(!1):A3(i,r),s.abort()}),s.send())})(n,function(i){i?e(n):t(n)})}function Y2(n,e,t){var i,r,s,a="",o=[];if(typeof n=="string"){let c=function(h){o.push(h),o.length===6&&e(o)};for(r=0;r<5;r++)a+="(url\\((?:[^\\)]+)\\),\\s*)";if(a+="(url\\((?:[^\\)]+)\\)\\s*)",s=n.match(new RegExp(a))){for(r=1;r<7;r++)By(Lw(s[r]),c);return}if(!n.startsWith("#"))return void By(Lw(n)||n,t)}if(i=n.tagName?n:function(c){try{var h=document.querySelector(c);return h||gv('No element was found matching the selector: "%s"',c),h}catch{return void gv('"%s" is not a valid selector',c)}}(n))return i.tagName==="A-CUBEMAP"&&i.srcs?e(i.srcs):i.tagName==="IMG"?t(i):void gv('Selector "%s" does not point to <a-cubemap> or <img>',n)}function L5(n,e){return Y2(n,e,function(){gv("Expected cubemap but got image")})}function Lw(n){var e=n.match(/url\((.+)\)/);if(e)return e[1]}function A3(n,e){var t=new Image;t.addEventListener("load",function(){e(!0)}),t.addEventListener("error",function(){e(!1)}),t.src=n}var $ee=mn("utils:material:warn"),ete=new Set(["emissiveMap","envMap","map","specularMap"]);function Iy(n,e){var t=e.offset||{x:0,y:0},i=e.repeat||{x:1,y:1},r=e.npot||!1,s=e.anisotropy||B.Texture.DEFAULT_ANISOTROPY,a=n.wrapS,o=n.wrapT,c=n.magFilter,h=n.minFilter;r&&(a=B.ClampToEdgeWrapping,o=B.ClampToEdgeWrapping,c=B.LinearFilter,h=B.LinearFilter),i.x===1&&i.y===1||(a=B.RepeatWrapping,o=B.RepeatWrapping),n.offset.set(t.x,t.y),n.repeat.set(i.x,i.y),n.wrapS===a&&n.wrapT===o&&n.magFilter===c&&n.minFilter===h&&n.anisotropy===s||(n.wrapS=a,n.wrapT=o,n.magFilter=c,n.minFilter=h,n.anisotropy=s,n.needsUpdate=!0)}function Gb(n,e,t,i){var r=t.el,s=t.material,a=r.sceneEl.systems.renderer,o=i[e];if(t.materialSrcs||(t.materialSrcs={}),!o)return delete t.materialSrcs[n],void c(null);function c(h){s[n]!==h&&(s[n]&&s[n].dispose(),s[n]=h,s.needsUpdate=!0,K2(r,h))}o===t.materialSrcs[n]&&s[n]?Iy(s[n],i):(t.materialSrcs[n]=o,o instanceof B.Texture?c(o):r.sceneEl.systems.material.loadTextureSource(o,function(h){if(t.materialSrcs[n]===o){var d=s[n];!d||h!==null&&O5(d,h)||(d=null),!d&&h&&(d=J2(h)),d&&(d.source!==h&&(d.source=h,d.needsUpdate=!0),ete.has(n)&&a.applyColorCorrection(d),Iy(d,i)),c(d)}}))}function vv(n,e){return Gb("map","src",n,e)}function Ra(n,e,t){var i=n;n==="ambientOcclusion"&&(i="ao");var r={};return r.src=t[n+"Map"],r.offset=t[n+"TextureOffset"],r.repeat=t[n+"TextureRepeat"],r.wrap=t[n+"TextureWrap"],Gb(i+"Map","src",e,r)}var I_={};function Ow(n,e){var t=n.material,i=n.el,r="envMap",s=e.envMap,a=e.sphericalEnvMap,o=e.refract;if(a&&(s=a,$ee("`sphericalEnvMap` property is deprecated, using spherical map as equirectangular map instead. Use `envMap` property with a CubeMap or Equirectangular image instead.")),n.materialSrcs||(n.materialSrcs={}),!s)return delete n.materialSrcs[r],t.envMap=null,void(t.needsUpdate=!0);function c(h){n.materialSrcs[r]===s&&(t.envMap=h,t.needsUpdate=!0,K2(i,h))}n.materialSrcs[r]=s,I_[s]?I_[s].then(c):I_[s]=new Promise(function(h){Y2(s,function(d){i.sceneEl.systems.material.loadCubeMapTexture(d,function(p){p.mapping=o?B.CubeRefractionMapping:B.CubeReflectionMapping,c(p),h(p)})},function(d){i.sceneEl.systems.material.loadTexture(d,{src:d},function(p){p.mapping=o?B.EquirectangularRefractionMapping:B.EquirectangularReflectionMapping,c(p),h(p)})})})}function K2(n,e){function t(){n.emit("materialvideoloadeddata",{src:e.image,texture:e})}function i(){n.emit("materialvideoended",{src:e.image,texture:e})}e&&(n.emit("materialtextureloaded",{src:e.image,texture:e}),e.image&&e.image.tagName==="VIDEO"&&(e.image.addEventListener("loadeddata",t),e.image.addEventListener("ended",i),e.addEventListener("dispose",function(){e.image.removeEventListener("loadeddata",t),e.image.removeEventListener("ended",i)})))}function O5(n,e){return n.source===e&&(e.data instanceof HTMLCanvasElement?n.isCanvasTexture:e.data instanceof HTMLVideoElement?n.isVideoTexture:n.isTexture&&!n.isCanvasTexture&&!n.isVideoTexture)}function J2(n){var e;return(e=n.data instanceof HTMLCanvasElement?new B.CanvasTexture:n.data instanceof HTMLVideoElement?new B.VideoTexture(n.data):new B.Texture).source=n,e.needsUpdate=!0,e}var tte=/-([a-z])/g;function km(n,e){var t;return typeof n!="string"?n:(t=function(i,r){var s,a,o,c,h,d;for(r=r||{},s=ite(i),a=0;a<s.length;a++)(o=s[a])&&(c=o.indexOf(":"),h=o.substr(0,c).trim(),d=o.substr(c+1).trim(),r[P5(h)]=d);return r}(n,e),t[""]?n:t)}function nte(n){return typeof n=="string"?n:function(e){var t,i=0,r=0,s="";for(t in e)i++;for(t in e)s+=t+": "+e[t],r<i-1&&(s+="; "),r++;return s}(n)}function P5(n){return n.replace(tte,rte)}var S0,g3,ite=(S0=[],g3=/url\([^)]+$/,function(n){var e,t="",i=0;for(S0.length=0;i<n.length;)(e=n.indexOf(";",i))===-1&&(e=n.length),t+=n.substring(i,e),g3.test(t)?(t+=";",i=e+1):(S0.push(t.trim()),t="",i=e+1);return S0});function rte(n){return n[1].toUpperCase()}var ste=["x","y","z","w"];function Ps(n,e,t){var i,r,s=n.el;if((r=!!(i=U5(n,e,t)))===n.controllerPresent)return r;n.controllerPresent=r,r?(n.addEventListeners(),n.injectTrackedControls(i),s.emit("controllerconnected",{name:n.name,component:n})):(n.removeEventListeners(),s.emit("controllerdisconnected",{name:n.name,component:n}))}function U5(n,e,t){var i,r=n.el.sceneEl,s=r&&r.systems["tracked-controls"];return!!s&&!(!(i=s.controllers)||!i.length)&&Z2(i,e,t.hand,t.index,t.iterateControllerProfiles,t.handTracking)}function Z2(n,e,t,i,r,s){var a,o,c,h,d=!1;for(a=0;a<n.length;a++){if(h=(c=n[a]).profiles,s)d=c.hand;else if(r)for(o=0;o<h.length&&!(d=h[o].startsWith(e));o++);else d=h.length>0&&h[0].startsWith(e);if(d){if(c.handedness==="right"||c.handedness==="left"){if(c.handedness===t)return n[a]}else if(a===i)return n[a]}}}function ta(n,e,t){var i,r,s,a,o;for(r in e){for(i=e[r],s=!1,o=0;o<i.length;o++)t.detail.changed[i[o]]&&(s=!0);if(s){for(a={},o=0;o<i.length;o++)a[ste[o]]=t.detail.axis[i[o]];n.el.emit(r+"moved",a)}}}function Lt(n,e,t,i){var r=(i?t.mapping[i]:t.mapping).buttons[n];t.el.emit(r+e),t.updateModel&&t.updateModel(r,e)}var $2=mn("utils:warn");function ate(n){return n.bind.apply(n,Array.prototype.slice.call(arguments,1))}function ote(){return $2("`utils.checkHeadsetConnected` has moved to `utils.device.checkHeadsetConnected`"),F2()}function lte(){return $2("`utils.isIOS` has moved to `utils.device.isIOS`"),sA()}function cte(){return $2("`utils.isMobile has moved to `utils.device.isMobile`"),sc(arguments)}function ute(n,e,t){var i;return t&&(n=n.bind(t)),function(){var r=Date.now();(i===void 0||(i===void 0?e:r-i)>=e)&&(i=r,n.apply(null,arguments))}}function k5(n,e,t){var i,r,s;t&&(n=n.bind(t));var a=function(){i=Date.now(),n.apply(this,s),r=void 0};return function(){var o=Date.now(),c=i===void 0?e:o-i;c>=e?(clearTimeout(r),r=void 0,i=o,n.apply(null,arguments)):(r=r||setTimeout(a,e-c),s=arguments)}}function hte(n,e,t){var i;return t&&(n=n.bind(t)),function(r,s){var a=i===void 0?s:r-i;(i===void 0||a>=e)&&(i=r,n(r,a))}}function N5(n,e,t){var i;return function(){var r=this,s=arguments,a=t&&!i;clearTimeout(i),i=setTimeout(function(){i=null,t||n.apply(r,s)},e),a&&n.apply(r,s)}}var Zr=Object.assign,Cs=Wee();function eM(n){return JSON.parse(JSON.stringify(n))}var ha,Xc,tM=(ha=q2(function(){return[]}),function(n,e){var t,i,r,s,a,o;if(n===void 0||e===void 0||n===null||e===null||!(n&&e&&n.constructor===Object&&e.constructor===Object||n.constructor===Array&&e.constructor===Array))return n===e;for(t in i=ha.use(),r=ha.use(),i.length=0,r.length=0,n)i.push(t);for(t in e)r.push(t);if(i.length!==r.length)return ha.recycle(i),ha.recycle(r),!1;for(s=0;s<i.length;++s)if(a=n[i[s]],o=e[i[s]],typeof a=="object"||typeof o=="object"||Array.isArray(a)&&Array.isArray(o)){if(a===o)continue;if(!tM(a,o))return ha.recycle(i),ha.recycle(r),!1}else if(a!==o)return ha.recycle(i),ha.recycle(r),!1;return ha.recycle(i),ha.recycle(r),!0}),F5=(Xc=[],function(n,e,t){var i,r,s,a,o,c,h;for(o in a=t||{},Xc.length=0,n)Xc.push(o);if(!e)return a;for(s in e)Xc.indexOf(s)===-1&&Xc.push(s);for(c=0;c<Xc.length;c++)i=n[o=Xc[c]],r=e[o],((h=i&&r&&i.constructor===Object&&r.constructor===Object)&&!tM(i,r)||!h&&i!==r)&&(a[o]=r);return a});function nM(n){return!n.metaKey&&document.activeElement===document.body}function dte(n,e){e===void 0&&(e=" ");var t=new RegExp(e,"g");return(n=(n||"").replace(t,e)).split(e)}function fte(n,e){e=e||{};var t={};return Object.keys(e).forEach(function(i){n.hasAttribute(i)&&(t[i]=n.getAttribute(i))}),t}function Nm(n){n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+n+"=([^&#]*)").exec(location.search);return e===null?"":decodeURIComponent(e[1].replace(/\+/g," "))}function Q5(){return window.top!==window.self}function z5(n){for(var e=[],t=n.getElementsByTagName("*"),i=0,r=t.length;i<r;i++)t[i].isScene&&e.push(t[i]);return e}var R_,pte=[tm({name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1,shrink-to-fit=no,user-scalable=no,minimal-ui,viewport-fit=cover"}),tm({name:"mobile-web-app-capable",content:"yes"}),tm({name:"theme-color",content:"black"})],mte=[tm({name:"apple-mobile-web-app-capable",content:"yes"}),tm({name:"apple-mobile-web-app-status-bar-style",content:"black"}),(R_={rel:"apple-touch-icon",href:"https://aframe.io/images/aframe-logo-152.png"},{tagName:"link",attributes:R_,exists:function(){return document.querySelector('link[rel="'+R_.rel+'"]')}})];function tm(n){return{tagName:"meta",attributes:n,exists:function(){return document.querySelector('meta[name="'+n.name+'"]')}}}var ma,Ol,H5,Ate=xt(5928),gte=xt.n(Ate),vte=Od,v3="loading-screen";function D_(n){var e=ma.hasAttribute("embedded"),t=H5(ma.canvas,e,ma.maxCanvasSize,ma.is("vr-mode"));n.aspect=t.width/t.height,n.updateProjectionMatrix(),ma.renderer.setSize(t.width,t.height,!1)}const xu=[];var G5=Pm()("core:propertyTypes:warn"),Pw={},yte=/[,> .[\]:]/,bte=/url\((.+)\)/;function Ki(n,e,t,i,r,s){if(n in Pw)throw new Error("Property type "+n+" is already registered.");Pw[n]={default:e,parse:t||Ete,stringify:i||Ry,equals:r||V5,isCacheable:s!==!1}}function y3(n,e){if(!Array.isArray(n)||!Array.isArray(e))return n===e;if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function cp(n){var e,t;return typeof n!="string"?n:(t=n.match(bte))?t[1]:n.charAt(0)==="#"?(e=document.getElementById(n.substring(1)))?e.tagName==="CANVAS"||e.tagName==="VIDEO"||e.tagName==="IMG"?e:e.getAttribute("src"):void G5('"'+n+'" asset not found.'):n}function up(n){return n.getAttribute?n.getAttribute("id")?"#"+n.getAttribute("id"):n.getAttribute("src"):Ry(n)}function Ete(n){return n}function Ry(n){return n===null?"null":n.toString()}function V5(n,e){return n===e}function b3(n){return parseInt(n,10)}function L_(n,e,t){return Ty(n,e,t)}function O_(n,e){if(n===null)return!0;if(typeof n!="object"||Object.keys(n).length!==e)return!1;var t=n.x,i=n.y,r=n.z,s=n.w;return!(typeof t!="number"||typeof i!="number"||e>2&&typeof r!="number"||e>3&&typeof s!="number")}Ki("audio","",cp,up),Ki("array",[],function(n){return Array.isArray(n)?n:n&&typeof n=="string"?n.split(",").map(function(e){return e.trim()}):[]},function(n){return n.join(", ")},y3),Ki("asset","",cp,up),Ki("boolean",!1,function(n){return n!=="false"&&n!==!1}),Ki("color","#FFF"),Ki("int",0,b3),Ki("number",0,function(n){return parseFloat(n,10)}),Ki("map","",cp,up),Ki("model","",cp,up),Ki("selector",null,function(n){return n?typeof n!="string"?n:n[0]!=="#"||yte.test(n)?document.querySelector(n):document.getElementById(n.substring(1)):null},function(n){return n.getAttribute?"#"+n.getAttribute("id"):Ry(n)},V5,!1),Ki("selectorAll",null,function(n){return n?typeof n!="string"?n:Array.prototype.slice.call(document.querySelectorAll(n),0):null},function(n){return n instanceof Array?n.map(function(e){return"#"+e.getAttribute("id")}).join(", "):Ry(n)},y3,!1),Ki("src","",function(n){return G5("`src` property type is deprecated. Use `asset` instead."),cp(n)},up),Ki("string",""),Ki("time",0,b3),Ki("vec2",{x:0,y:0},L_,mv,Av),Ki("vec3",{x:0,y:0,z:0},L_,mv,Av),Ki("vec4",{x:0,y:0,z:0,w:1},L_,mv,Av);var xte=function(n,e){return(n!=="audio"||typeof e=="string")&&!(n==="array"&&!Array.isArray(e))&&(n!=="asset"||typeof e=="string")&&(n!=="boolean"||typeof e=="boolean")&&(n!=="color"||typeof e=="string")&&(n!=="int"||typeof e=="number")&&(n!=="number"||typeof e=="number")&&(n!=="map"||typeof e=="string")&&(n!=="model"||typeof e=="string")&&(n!=="selector"||typeof e=="string"||e===null)&&(n!=="selectorAll"||typeof e=="string"||e===null)&&(n!=="src"||typeof e=="string")&&(n!=="string"||typeof e=="string")&&(n!=="time"||typeof e=="number")&&(n==="vec2"?O_(e,2):n==="vec3"?O_(e,3):n!=="vec4"||O_(e,4))},Cte=Pw,Dy=mn("core:schema:warn");function Vb(n){return"type"in n?typeof n.type=="string":"default"in n}function aA(n,e){var t;if(Vb(n))return Uw(n,e);for(t in n)n[t]=Uw(n[t],e);return n}function Uw(n,e){var t,i,r=n.default,s=n.type;return n.type?n.type==="bool"?s="boolean":n.type==="float"&&(s="number"):s=r===void 0||typeof r!="boolean"&&typeof r!="number"?Array.isArray(r)?"array":"string":typeof r,(i=Cte[s])||Dy("Unknown property type for component `"+e+"`: "+s),t=!!n.parse,n.parse=n.parse||i.parse,n.stringify=n.stringify||i.stringify,n.equals=n.equals||i.equals,n.isCacheable=n.isCacheable===!0||i.isCacheable,n.type=s,"default"in n?t||xte(s,r)||Dy("Default value `"+r+"` does not match type `"+s+"` in component `"+e+"`"):n.default=i.default,n}var hp,W5=(hp=[],function(n,e,t,i,r){var s,a,o,c;for(a in hp.length=0,t?n:e)t&&n[a]===void 0||hp.push(a);if(n===null||typeof n!="object")return n;for(a in n)n[a]===void 0||e[a]||r||Dy("Unknown property `"+a+"` for component/system `"+i+"`.");for(s=0;s<hp.length;s++){if(o=e[a=hp[s]],c=n[a],!e[a])return;n[a]=Wb(c,o)}return n});function Wb(n,e,t){return n!=null&&n!==""||(n=e.default,Array.isArray(n)&&(n=n.slice())),e.parse(n,e.default,t)}function q5(n,e){var t,i,r,s,a={};for(t in n)i=e[t],typeof(s=r=n[t])=="object"&&(s=iM(r,i),i||Dy("Unknown component property: "+t)),s!==void 0&&(a[t]=s);return a}function iM(n,e){return typeof n!="object"?n:e&&n!==null?e.stringify(n):JSON.stringify(n)}var mi={},Dp=Wb,j5=aA,_te=Vb,wte=q5,Ste=iM,P_=Od,nm=mn("core:component:warn"),Mte=document.currentScript,Tte=new RegExp("[A-Z]+"),X5={},Bte=Object.freeze({}),Xh=[],Ite={get:function(n,e){return n.getComputedPropertyValue(e)},set:function(n,e,t){return e in n.schema?n.recomputeProperty(e,t):t!==void 0&&n.handleUnknownProperty(e,t),!0}},Fm=function(n,e,t){var i=this;if(this.sceneOnly&&!n.isScene)throw new Error("Component `"+this.name+"` can only be applied to <a-scene>");if(t&&!this.multiple)throw new Error("Trying to initialize multiple components of type `"+this.name+"`. There can only be one component of this type per entity.");this.el=n,this.id=t,this.attrName=this.name+(t?"__"+t:""),this.evtDetail={id:this.id,name:this.name},this.initialized=!1,this.el.components[this.attrName]=this,this.objectPool=X5[this.name];var r=this.events;this.events={},function(s,a){var o;for(o in a)s.events[o]=a[o].bind(s)}(this,r),this.attrValue=void 0,this.isObjectBased?(this.data=this.objectPool.use(),Um(this.data,this.schema),this.oldData=this.objectPool.use(),Um(this.oldData,this.schema),this.attrValueProxy=new Proxy(this,Ite)):(this.data=void 0,this.oldData=void 0,this.attrValueProxy=void 0),this.deferUnknownPropertyWarnings=!!this.updateSchema,this.throttledEmitComponentChanged=k5(function(){n.emit("componentchanged",i.evtDetail,!1)},200),this.updateProperties(e,!0)};Fm.prototype={schema:{},init:function(){},events:{},update:function(n){},updateSchema:void 0,tick:void 0,tock:void 0,play:function(){},pause:function(){},remove:function(){},stringify:function(n){var e=this.schema;return typeof n=="string"?n:this.isSingleProperty?Ste(n,e):(n=wte(n,e),P_.stringify(n))},flushToDOM:function(n){var e=n?this.data:this.attrValue;e!=null&&window.HTMLElement.prototype.setAttribute.call(this.el,this.attrName,this.stringify(e))},updateProperties:function(n,e){var t=this.el;this.updateData(n,e),(t.hasLoaded||t.isLoading)&&(this.initialized?this.callUpdateHandler():this.initComponent())},initComponent:function(){var n,e=this.el;e.initializingComponents[this.name]||(e.initializingComponents[this.name]=!0,this.init(),this.initialized=!0,delete e.initializingComponents[this.name],n=this.isObjectBased?Bte:void 0,this.dataChanged=!1,this.storeOldData(),this.update(n),e.isPlaying&&this.play(),e.emit("componentinitialized",this.evtDetail,!1))},updateData:function(n,e){this.isSingleProperty?this.recomputeProperty(void 0,n):(e?(j2(this.attrValue),this.recomputeData(n),this.schemaChangeRequired=!!this.updateSchema):typeof n=="string"?P_.parse(n,this.attrValueProxy):Zr(this.attrValueProxy,n),this.updateSchemaIfNeeded(n))},updateSchemaIfNeeded:function(n){if(this.schemaChangeRequired&&this.updateSchema)for(var e in Xh.length=0,this.updateSchema(this.data),Um(this.data,this.schema),this.recomputeData(n),this.schemaChangeRequired=!1,this.attrValue)this.attrValue[e]!==void 0&&Xh.indexOf(e)===-1&&(e in this.schema||nm("Unknown property `"+e+"` for component `"+this.name+"`."));for(var t=0;t<Xh.length;t++)nm("Unknown property `"+Xh[t]+"` for component `"+this.name+"`.");Xh.length=0},callUpdateHandler:function(){if(this.isPositionRotationScale||this.dataChanged){this.dataChanged=!1;var n=this.oldData;this.oldDataInUse=!0,this.update(n),n!==this.oldData&&this.objectPool.recycle(n),this.oldDataInUse=!1,this.storeOldData(),this.throttledEmitComponentChanged()}},handleMixinUpdate:function(){this.recomputeData(),this.updateSchemaIfNeeded(),this.callUpdateHandler()},resetProperty:function(n){(this.isSingleProperty||n in this.schema)&&(n?this.attrValue[n]=void 0:(this.isObjectBased&&this.objectPool.recycle(this.attrValue),this.attrValue=void 0),this.recomputeProperty(n,void 0),this.updateSchemaIfNeeded(),this.callUpdateHandler())},extendSchema:function(n){var e;e=Zr({},mi[this.name].schema),Zr(e,n),this.schema=j5(e),this.el.emit("schemachanged",this.evtDetail)},getComputedPropertyValue:function(n){var e=this.el.mixinEls,t=this.attrValue&&n?this.attrValue[n]:this.attrValue;if(t!==void 0)return t;for(var i=e.length-1;i>=0;i--){var r=e[i].getAttribute(this.attrName);if(r!==null&&(!n||n in r))return n?r[n]:r}return n?this.schema[n].default:this.schema.default},recomputeProperty:function(n,e){var t=n?this.schema[n]:this.schema;if(e!=null){this.attrValue===void 0&&this.isObjectBased&&(this.attrValue=this.objectPool.use());var i=n?this.attrValue[n]:this.attrValue;typeof(i=t.isCacheable?Dp(e,t,i):e)=="string"&&(i=e===""?void 0:e),n?this.attrValue[n]=i:this.attrValue=i}this.oldDataInUse&&(this.oldData=this.objectPool.use(),Um(this.oldData,this.schema),this.storeOldData(),this.oldDataInUse=!1);var r=n?this.oldData[n]:this.oldData,s=n?this.data[n]:this.data,a=Dp(this.getComputedPropertyValue(n),t,s);return t.type!=="array"||n||(a=eM(a)),t.equals(a,r)||(this.dataChanged=!0,t.schemaChange&&(this.schemaChangeRequired=!0)),n?this.data[n]=a:this.data=a,a},handleUnknownProperty:function(n,e){this.attrValue===void 0&&(this.attrValue=this.objectPool.use()),this.attrValue[n]=e,this.deferUnknownPropertyWarnings?Xh.push(n):this.silenceUnknownPropertyWarnings||nm("Unknown property `"+n+"` for component `"+this.name+"`.")},storeOldData:function(){var n;if(this.isObjectBased)if(this.isSingleProperty)this.oldData=Dp(this.data,this.schema,this.oldData);else for(n in this.schema)this.data[n]!==void 0&&(this.data[n]&&typeof this.data[n]=="object"?this.oldData[n]=Dp(this.data[n],this.schema[n],this.oldData[n]):this.oldData[n]=this.data[n]);else this.oldData=this.data},recomputeData:function(n){var e;if(this.isSingleProperty)this.recomputeProperty(void 0,n);else{for(e in this.schema)this.attrValueProxy[e]=void 0;n&&typeof n=="object"?Zr(this.attrValueProxy,n):typeof n=="string"&&P_.parse(n,this.attrValueProxy)}},eventsAttach:function(){var n;for(n in this.eventsDetach(),this.events)this.el.addEventListener(n,this.events[n])},eventsDetach:function(){var n;for(n in this.events)this.el.removeEventListener(n,this.events[n])},destroy:function(){this.objectPool.recycle(this.attrValue),this.objectPool.recycle(this.data),this.objectPool.recycle(this.oldData),this.attrValue=this.data=this.oldData=this.attrValueProxy=void 0}};var Y5={};function vt(n,e){var t,i,r,s,a,o={};if(document.currentScript&&document.currentScript!==Mte&&xu.forEach(function(h){h.hasLoaded||document.currentScript.compareDocumentPosition(h)!==Node.DOCUMENT_POSITION_FOLLOWING&&(nm("The component `"+n+"` was registered in a <script> tag after the scene. Component <script> tags in an HTML file should be declared *before* the scene such that the component is available to entities during scene initialization."),window.debug&&(Y5[n]=!0))}),Tte.test(n)===!0&&nm("The component name `"+n+"` contains uppercase characters, but HTML will ignore the capitalization of attribute names. Change the name to be lowercase: `"+n.toLowerCase()+"`"),n.indexOf("__")!==-1)throw new Error("The component name `"+n+"` is not allowed. The sequence __ (double underscore) is reserved to specify an id for multiple components of the same type");if(Object.keys(e).forEach(function(h){o[h]={value:e[h],writable:!0}}),mi[n])throw new Error("The component `"+n+"` has been already registered. Check that you are not loading two versions of the same component or two different components of the same name.");((t=function(h,d,p){Fm.call(this,h,d,p)}).prototype=Object.create(Fm.prototype,o)).name=n,t.prototype.isPositionRotationScale=n==="position"||n==="rotation"||n==="scale",t.prototype.constructor=t,t.prototype.system=xw&&Qo[n],t.prototype.play=(s=t.prototype.play,function(){var h=this.el.sceneEl,d=this.el.isPlaying&&!this.isPlaying;this.initialized&&d&&(s.call(this),this.isPlaying=!0,this.eventsAttach(),E3(this)&&h.addBehavior(this))}),t.prototype.pause=(a=t.prototype.pause,function(){var h=this.el.sceneEl;this.isPlaying&&(a.call(this),this.isPlaying=!1,this.eventsDetach(),E3(this)&&h.removeBehavior(this))}),i=Zr(j5(t.prototype.schema,t.prototype.name)),t.prototype.isSingleProperty=r=_te(t.prototype.schema),t.prototype.isObjectBased=!r||r&&(x3(i.default)||x3(Dp(void 0,i))),X5[n]=q2(),mi[n]={Component:t,dependencies:t.prototype.dependencies,before:t.prototype.before,after:t.prototype.after,isSingleProperty:t.prototype.isSingleProperty,isObjectBased:t.prototype.isObjectBased,multiple:t.prototype.multiple,sceneOnly:t.prototype.sceneOnly,name:n,schema:i,stringify:t.prototype.stringify};for(var c=0;c<xu.length;c++)xu[c].emit("componentregistered",{name:n},!1);return t}function E3(n){return n.tick||n.tock}function x3(n){return n&&n.constructor===Object&&!(n instanceof window.HTMLElement)}var Ly=!1;function kw(){Ly||(Ly=!0,setTimeout(function(){document.dispatchEvent(new CustomEvent("aframeready"))}))}var Rte=Od,Qo={},Oy=function(n){var e=Ew&&mi[this.name];this.el=n,this.sceneEl=n,e&&(e.Component.prototype.system=this),this.buildData(),this.init(),this.update({})};function $s(n,e){var t,i,r={},s=z5(document);if(Object.keys(e).forEach(function(a){r[a]={value:e[a],writable:!0}}),Qo[n])throw new Error("The system `"+n+"` has been already registered. Check that you are not loading two versions of the same system or two different systems of the same name.");if(i=function(a){Oy.call(this,a)},(i.prototype=Object.create(Oy.prototype,r)).name=n,i.prototype.constructor=i,i.prototype.schema=Zr(aA(i.prototype.schema)),Qo[n]=i,Ly)for(t=0;t<s.length;t++)s[t].initSystem(n)}Oy.prototype={schema:{},init:function(){},update:function(n){},updateProperties:function(n){var e=this.data;Object.keys(this.schema).length!==0&&(this.buildData(n),this.update(e))},buildData:function(n){var e=this.schema;Object.keys(e).length!==0&&(n=n||window.HTMLElement.prototype.getAttribute.call(this.sceneEl,this.name),Vb(e)?this.data=Wb(n,e):this.data=W5(Rte.parse(n)||{},e,!1,this.name))},tick:void 0,tock:void 0,play:function(){},pause:function(){}};var U_=mn("core:a-node:warn"),Nw={"a-scene":!0,"a-assets":!0,"a-assets-items":!0,"a-cubemap":!0,"a-mixin":!0,"a-node":!0,"a-entity":!0};function Dte(n){return n.tagName.toLowerCase()in Nw||n.isANode}class tr extends HTMLElement{constructor(){super(),this.computedMixinStr="",this.hasLoaded=!1,this.isANode=!0,this.mixinEls=[]}connectedCallback(){Ly?this.doConnectedCallback():document.addEventListener("aframeready",this.connectedCallback.bind(this))}doConnectedCallback(){var e;this.sceneEl=this.closestScene(),this.sceneEl||U_("You are attempting to attach <"+this.tagName+"> outside of an A-Frame scene. Append this element to `<a-scene>` instead."),this.hasLoaded=!1,this.emit("nodeready",void 0,!1),this.isMixin||(e=this.getAttribute("mixin"))&&this.updateMixins(e)}attributeChangedCallback(e,t,i){i!==this.computedMixinStr&&(e!=="mixin"||this.isMixin||this.updateMixins(i,t))}closestScene(){for(var e=this;e&&!e.isScene;)e=e.parentElement;return e}closest(e){for(var t=this.matches||this.mozMatchesSelector||this.msMatchesSelector||this.oMatchesSelector||this.webkitMatchesSelector,i=this;i&&!t.call(i,e);)i=i.parentElement;return i}disconnectedCallback(){this.hasLoaded=!1}load(e,t){var i,r=this;this.hasLoaded||(t=t||Dte,i=this.getChildren().filter(t).map(function(s){return new Promise(function(a,o){if(s.hasLoaded)return a();s.addEventListener("loaded",a),s.addEventListener("error",o)})}),Promise.allSettled(i).then(function(s){s.forEach(function(a){a.status==="rejected"&&U_("Rendering scene with errors on node: ",a.reason.target)}),r.isLoading=!0,r.setupMutationObserver(),e&&e(),r.isLoading=!1,r.hasLoaded=!0,r.emit("loaded-private",void 0,!1),r.emit("loaded",void 0,!1)}))}setupMutationObserver(){var e=this;new MutationObserver(function(t){var i;for(i=0;i<t.length;i++)if(t[i].type==="attributes"){var r=t[i].attributeName,s=window.HTMLElement.prototype.getAttribute.call(e,r),a=t[i].oldValue;e.attributeChangedCallback(r,a,s)}}).observe(this,{attributes:!0,attributeOldValue:!0})}getChildren(){return Array.prototype.slice.call(this.children,0)}updateMixins(e,t){var i,r,s,a=tr.newMixinIdArray,o=tr.oldMixinIdArray,c=tr.mixinIds;for(a.length=0,o.length=0,r=e?Xo(e.trim(),/\s+/):a,s=t?Xo(t.trim(),/\s+/):o,c.newMixinIds=r,c.oldMixinIds=s,i=0;i<s.length;i++)r.indexOf(s[i])===-1&&this.unregisterMixin(s[i]);for(this.computedMixinStr="",this.mixinEls.length=0,i=0;i<r.length;i++)this.registerMixin(r[i]);return this.computedMixinStr&&(this.computedMixinStr=this.computedMixinStr.trim(),window.HTMLElement.prototype.setAttribute.call(this,"mixin",this.computedMixinStr)),r.length===0&&window.HTMLElement.prototype.removeAttribute.call(this,"mixin"),c}registerMixin(e){var t,i,r,s=document.getElementById(e);if(s){if(r=s.getAttribute("mixin"))for(t=Xo(r.trim(),/\s+/),i=0;i<t.length;i++)this.registerMixin(t[i]);this.computedMixinStr=this.computedMixinStr+" "+s.id,this.mixinEls.push(s)}else U_("No mixin was found with id `%s`",e)}setAttribute(e,t){e==="mixin"&&this.updateMixins(t),window.HTMLElement.prototype.setAttribute.call(this,e,t)}unregisterMixin(e){var t,i=this.mixinEls;for(t=0;t<i.length;++t)if(e===i[t].id){i.splice(t,1);break}}emit(e,t,i,r){var s=tr.evtData;i===void 0&&(i=!0),s.bubbles=!!i,s.detail=t,r&&(s=Zr({},r,s)),this.dispatchEvent(new CustomEvent(e,s))}}tr.evtData={},tr.newMixinIdArray=[],tr.oldMixinIdArray=[],tr.mixinIds={},customElements.define("a-node",tr);var Lte=mn("core:a-entity:debug"),k_=mn("core:a-entity:warn"),Py="__",N_=["position","rotation","scale","visible"],Ote={once:!0};class Pi extends tr{constructor(){super(),this.components={},this.initializingComponents={},this.componentsToUpdate={},this.isEntity=!0,this.isPlaying=!1,this.object3D=new B.Group,this.object3D.rotation.order="YXZ",this.object3D.el=this,this.object3DMap={},this.parentEl=null,this.rotationObj={},this.states=[]}attributeChangedCallback(e,t,i){var r=this.components[e];super.attributeChangedCallback(),r&&r.justInitialized&&i===""?delete r.justInitialized:(r||i!==null)&&this.setEntityAttribute(e,t,i)}doConnectedCallback(){var e,t,i=this;super.doConnectedCallback(),t=this.sceneEl,this.addToParent(),this.isScene||(t?!(e=t.querySelector("a-assets"))||e.hasLoaded?this.load():e.addEventListener("loaded",function(){i.load()}):this.load())}disconnectedCallback(){var e;if(this.parentEl){for(e in this.components)this.removeComponent(e,!1);this.isScene||(this.removeFromParent(),super.disconnectedCallback(),this.object3D.el=null)}}getObject3D(e){return this.object3DMap[e]}setObject3D(e,t){var i,r=this;if(!(t instanceof B.Object3D))throw new Error("`Entity.setObject3D` was called with an object that was not an instance of THREE.Object3D.");(i=this.getObject3D(e))&&this.object3D.remove(i),t.el=this,t.children.length&&t.traverse(function(s){s.el=r}),this.object3D.add(t),this.object3DMap[e]=t,this.emit("object3dset",{object:t,type:e})}removeObject3D(e){var t=this.getObject3D(e);t?(this.object3D.remove(t),delete this.object3DMap[e],this.emit("object3dremove",{type:e})):k_("Tried to remove `Object3D` of type:",e,"which was not defined.")}getOrCreateObject3D(e,t){var i=this.getObject3D(e);return!i&&t&&(i=new t,this.setObject3D(e,i)),k_("`getOrCreateObject3D` has been deprecated. Use `setObject3D()` and `object3dset` event instead."),i}add(e){if(!e.object3D)throw new Error("Trying to add an element that doesn't have an `object3D`");this.object3D.add(e.object3D),this.emit("child-attached",{el:e})}addToParent(){var e=this.parentEl=this.parentNode;e&&e.add&&!this.attachedToParent&&(e.add(this),this.attachedToParent=!0)}removeFromParent(){var e=this.parentEl;this.parentEl.remove(this),this.attachedToParent=!1,this.parentEl=null,e.emit("child-detached",{el:this})}load(){var e=this;!this.hasLoaded&&this.parentEl&&super.load.call(this,function(){e.parentEl&&(e.updateComponents(),(e.isScene||e.parentEl.isPlaying)&&e.play())})}remove(e){e?this.object3D.remove(e.object3D):this.parentNode.removeChild(this)}getChildEntities(){for(var e=this.children,t=[],i=0;i<e.length;i++){var r=e[i];r instanceof Pi&&t.push(r)}return t}initComponent(e,t,i){var r,s,a,o;o=(a=Xo(e,Py))[0],s=a.length>2?a.slice(1).join("__"):a[1],mi[o]&&(C3(this,e)||t!==void 0||i)&&(e in this.components||(this.initComponentDependencies(o),r=new mi[o].Component(this,t,s),this.isPlaying&&r.play(),this.hasAttribute(e)||(r.justInitialized=!0,window.HTMLElement.prototype.setAttribute.call(this,e,"")),Lte("Component initialized: %s",e)))}initComponentDependencies(e){var t,i;if(mi[e]&&(t=mi[e].dependencies))for(i=0;i<t.length;i++)this.initComponent(t[i],window.HTMLElement.prototype.getAttribute.call(this,t[i])||void 0,!0)}removeComponent(e,t){var i;(i=this.components[e])&&(i.initialized?(i.pause(),i.remove(),t&&(i.destroy(),delete this.components[e],this.hasAttribute(e)&&window.HTMLElement.prototype.removeAttribute.call(this,e)),this.emit("componentremoved",i.evtDetail,!1)):this.addEventListener("componentinitialized",function r(s){s.detail.name===e&&(this.removeComponent(e,t),this.removeEventListener("componentinitialized",r))}))}updateComponents(){var e,t,i,r,s,a,o=this.componentsToUpdate;if(this.hasLoaded||this.isLoading){for(i=0;i<this.mixinEls.length;i++)for(r in this.mixinEls[i].componentCache)F_(r)&&(o[r]=!0);if(this.getExtraComponents)for(r in t=this.getExtraComponents())F_(r)&&(o[r]=!0);for(i=0;i<this.attributes.length;++i)r=this.attributes[i].name,N_.indexOf(r)===-1&&F_(r)&&(o[r]=!0);for(i=0;i<N_.length;i++)r=N_[i],this.hasAttribute(r)&&this.updateComponent(r,this.getDOMAttribute(r));for(r in o)s=this.getDOMAttribute(r),e=(a=t&&t[r])?a.constructor===Object?Zr(a,km(s||{})):s||a:s,this.updateComponent(r,e),delete o[r]}}updateComponent(e,t,i){var r=this.components[e];if(r)return t!==null||C3(this,e)?void r.updateProperties(t,i):void this.removeComponent(e,!0);this.initComponent(e,t,!1)}removeAttribute(e,t){var i=this.components[e];i&&t===void 0&&this.removeComponent(e,!0),i&&t!==void 0?i.resetProperty(t):(e==="mixin"&&this.mixinUpdate(""),window.HTMLElement.prototype.removeAttribute.call(this,e))}play(){var e,t,i;if(!this.isPlaying&&(this.hasLoaded||this.isLoading)){for(i in this.isPlaying=!0,this.components)this.components[i].play();for(e=this.getChildEntities(),t=0;t<e.length;t++)e[t].play();this.emit("play")}}pause(){var e,t,i;if(this.isPlaying){for(i in this.isPlaying=!1,this.components)this.components[i].pause();for(e=this.getChildEntities(),t=0;t<e.length;t++)e[t].pause();this.emit("pause")}}setEntityAttribute(e,t,i){if(mi[e]||this.components[e])this.updateComponent(e,i);else if(e==="mixin"){if(i===this.computedMixinStr)return;this.mixinUpdate(i,t)}}mixinUpdate(e,t,i){var r,s,a,o,c=Pi.componentsUpdated,h=this;if(i||(t=t||this.getAttribute("mixin")),this.hasLoaded){for(a=this.updateMixins(e,t),c.length=0,o=0;o<this.mixinEls.length;o++)for(r in this.mixinEls[o].componentCache)c.indexOf(r)===-1&&(this.components[r]?this.components[r].handleMixinUpdate():this.initComponent(r,null),c.push(r));for(o=0;o<a.oldMixinIds.length;o++)if(s=document.getElementById(a.oldMixinIds[o]))for(r in s.componentCache)c.indexOf(r)===-1&&this.components[r]&&(this.getDOMAttribute(r)?this.components[r].handleMixinUpdate():this.removeComponent(r,!0))}else this.addEventListener("loaded-private",function(){h.mixinUpdate(e,t,!0)},Ote)}setAttribute(e,t,i){var r,s,a,o,c,h=Pi.singlePropUpdate;if(a=(o=e.indexOf(Py))>0?e.substring(0,o):e,!mi[a])return e==="mixin"&&this.mixinUpdate(t),void super.setAttribute.call(this,e,t);if(!this.components[e]&&this.hasAttribute(e)&&this.updateComponent(e,window.HTMLElement.prototype.getAttribute.call(this,e)),i!==void 0&&typeof t=="string"&&t.length>0&&typeof km(t)=="string"){for(c in h)delete h[c];(r=h)[t]=i,s=!1}else r=t,s=i===!0;this.updateComponent(e,r,s),this.sceneEl&&this.sceneEl.getAttribute("debug")&&this.components[e].flushToDOM()}flushToDOM(e){var t,i,r,s=this.components,a=this.children;for(r in s)s[r].flushToDOM();if(e)for(i=0;i<a.length;++i)(t=a[i]).flushToDOM&&t.flushToDOM(e)}getAttribute(e){var t,i,r,s;return e==="position"?this.object3D.position:e==="rotation"?(i=B.MathUtils.radToDeg,r=this.object3D.rotation,(s=this.rotationObj).x=i(r.x),s.y=i(r.y),s.z=i(r.z),s):e==="scale"?this.object3D.scale:e==="visible"?this.object3D.visible:(t=this.components[e])?t.data:window.HTMLElement.prototype.getAttribute.call(this,e)}getDOMAttribute(e){var t=this.components[e];return t?t.attrValue:window.HTMLElement.prototype.getAttribute.call(this,e)}addState(e){this.is(e)||(this.states.push(e),this.emit("stateadded",e))}removeState(e){var t=this.states.indexOf(e);t!==-1&&(this.states.splice(t,1),this.emit("stateremoved",e))}is(e){return this.states.indexOf(e)!==-1}inspect(){this.sceneEl.components.inspector.openInspector(this)}destroy(){var e;if(this.parentNode)k_("Entity can only be destroyed if detached from scenegraph.");else for(e in this.components)this.components[e].destroy()}}function C3(n,e){return!(!n.components[e]||!n.components[e].attrValue)||function(t,i){var r,s=!1;for(r=0;r<i.length&&!(s=i[r].hasAttribute(t));++r);return s}(e,n.mixinEls)}function F_(n){return n.indexOf(Py)!==-1&&(n=Xo(n,Py)[0]),!!mi[n]}function Pte(n){if(n.data&&n.data.type==="vr")switch(n.data.data){case"enter":this.enterVR();break;case"exit":this.exitVR()}}Pi.componentsUpdated=[],Pi.singlePropUpdate={},customElements.define("a-entity",Pi),sA()&&window.addEventListener("orientationchange",function(){document.documentElement.style.height="initial",setTimeout(function(){document.documentElement.style.height="100%",setTimeout(function(){window.scrollTo(0,1)},500)},500)});var Q_=mn("core:a-scene:warn"),Ute=sA(),_3=sc(),kte=zb;class K5 extends Pi{constructor(){var e;super(),(e=this).clock=new B.Clock,e.isIOS=Ute,e.isMobile=_3,e.hasWebXR=kte,e.isAR=!1,e.isScene=!0,e.object3D=new B.Scene,e.resize=e.resize.bind(e),e.render=e.render.bind(e),e.systems={},e.systemNames=[],e.time=e.delta=0,e.usedOfferSession=!1,e.componentOrder=[],e.behaviors={},e.hasLoaded=!1,e.isPlaying=!1,e.originalHTML=e.innerHTML}addFullScreenStyles(){document.documentElement.classList.add("a-fullscreen")}removeFullScreenStyles(){document.documentElement.classList.remove("a-fullscreen")}doConnectedCallback(){var e=this,t=this.hasAttribute("embedded");this.setAttribute("inspector",""),this.setAttribute("keyboard-shortcuts",""),this.setAttribute("screenshot",""),this.setAttribute("xr-mode-ui",""),this.setAttribute("device-orientation-permission-ui",""),super.doConnectedCallback(),function(i){var r;function s(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||i.exitVR(),document.activeElement.blur(),document.body.focus()}(r=document.createElement("canvas")).classList.add("a-canvas"),r.dataset.aframeCanvas=!0,i.appendChild(r),document.addEventListener("fullscreenchange",s),document.addEventListener("mozfullscreenchange",s),document.addEventListener("webkitfullscreenchange",s),document.addEventListener("MSFullscreenChange",s),r.addEventListener("touchmove",function(a){a.preventDefault()},{passive:!1}),i.canvas=r,i.emit("render-target-loaded",{target:r}),setTimeout(i.resize.bind(i),0)}(this),this.setupRenderer(),function(i,r){H5=r;var s,a,o,c,h,d,p,m,A,v,y=(ma=i).hasAttribute(v3)?vte.parse(ma.getAttribute(v3)):void 0,E=y&&y.dotsColor||"white",b=y&&y.backgroundColor||"#24CAFF";(y===void 0||y.enabled==="true"||y.enabled===void 0)&&(s=new B.Scene,a=new B.SphereGeometry(.2,36,18,0,2*Math.PI,0,Math.PI),o=new B.MeshBasicMaterial({color:E}),c=new B.Mesh(a,o),h=c.clone(),d=c.clone(),p=new B.PerspectiveCamera(80,window.innerWidth/window.innerHeight,5e-4,1e4),m=new B.Clock,A=0,v=function(){ma.renderer.render(s,p),A=m.getElapsedTime()%4,c.visible=A>=1,h.visible=A>=2,d.visible=A>=3},s.background=new B.Color(b),s.add(p),c.position.set(-1,0,-15),h.position.set(0,0,-15),d.position.set(1,0,-15),p.add(c),p.add(h),p.add(d),(Ol=document.createElement("div")).className="a-loader-title",Ol.innerHTML=document.title,Ol.style.display="none",Ol.setAttribute(er,""),ma.appendChild(Ol),setTimeout(function(){ma.hasLoaded||(D_(p),Ol.style.display="block",window.addEventListener("resize",function(){D_(p)}),ma.renderer.setAnimationLoop(v))},200))}(this,M3),this.resize(),t||this.addFullScreenStyles(),Q5()&&window.addEventListener("message",Pte.bind(this)),function(i){var r,s=document.head,a=s.querySelector("script"),o=[];return pte.forEach(c),i.isIOS&&mte.forEach(c),o;function c(h){h&&!h.exists()&&(r=function(d){if(d&&d.tagName){var p=document.createElement(d.tagName);return p.setAttribute(er,""),Zr(p,d.attributes)}}(h),r&&(a?a.parentNode.insertBefore(r,a):s.appendChild(r),o.push(r)))}}(this),function(i){if(i.isMobile){var r=i.wakelock=new(gte());i.addEventListener("enter-vr",function(){r.request()}),i.addEventListener("exit-vr",function(){r.release()})}}(this),this.enterVRBound=function(){e.enterVR()},this.exitVRBound=function(){e.exitVR()},window.addEventListener("sessionend",this.resize),this.addEventListener("cameraready",function(){e.attachedCallbackPostCamera()}),this.initSystems(),this.componentOrder=w3(mi,this.componentOrder),this.addEventListener("componentregistered",function(){e.componentOrder=w3(mi,e.componentOrder)}),this.hasWebXR&&navigator.xr&&navigator.xr.addEventListener&&navigator.xr.addEventListener("sessiongranted",function(){e.enterVR()})}attachedCallbackPostCamera(){var e=this;window.addEventListener("load",void 0),window.addEventListener("resize",function(){e.isIOS?setTimeout(e.resize,100):e.resize()}),this.play(),xu.push(this)}initSystems(){var e;for(e in this.initSystem("camera"),Qo)e!=="camera"&&this.initSystem(e)}initSystem(e){this.systems[e]||(this.systems[e]=new Qo[e](this),this.systemNames.push(e))}disconnectedCallback(){var e=xu.indexOf(this);super.disconnectedCallback(),xu.splice(e,1),window.removeEventListener("sessionend",this.resize),this.removeFullScreenStyles(),this.renderer.dispose()}addBehavior(e){var t,i,r=this.behaviors[e.name];for(i in r||(r=this.behaviors[e.name]={tick:{inUse:!1,array:[],markedForRemoval:[]},tock:{inUse:!1,array:[],markedForRemoval:[]}}),r)if(e[i]){if((t=r[i]).inUse){var s=t.markedForRemoval.indexOf(e);s!==-1&&t.markedForRemoval.splice(s,1)}t.array.indexOf(e)===-1&&t.array.push(e)}}getPointerLockElement(){return document.pointerLockElement}checkHeadsetConnected(){return F2()}enterAR(){var e;if(!this.hasWebXR)throw e="Failed to enter AR mode, WebXR not supported.",new Error(e);if(!Q2())throw e="Failed to enter AR, WebXR immersive-ar mode not supported in your browser or device.",new Error(e);return this.enterVR(!0)}enterVR(e,t){var i,r=this,s=r.renderer.xr;if(t&&(!navigator.xr||!navigator.xr.offerSession))return Promise.resolve("OfferSession is not supported.");if(r.usedOfferSession&&t)return Promise.resolve("OfferSession was already called.");if(this.is("vr-mode"))return Promise.resolve("Already in VR.");if(this.checkHeadsetConnected()||this.isMobile){var a=r.getAttribute("renderer");if(s.enabled=!0,this.hasWebXR){this.xrSession&&this.xrSession.removeEventListener("end",this.exitVRBound);var o=this.sceneEl.systems.webxr.sessionReferenceSpaceType;s.setReferenceSpaceType(o);var c=e?"immersive-ar":"immersive-vr";return i=this.sceneEl.systems.webxr.sessionConfiguration,new Promise(function(d,p){var m=t?navigator.xr.offerSession.bind(navigator.xr):navigator.xr.requestSession.bind(navigator.xr);r.usedOfferSession|=t,m(c,i).then(function(A){t&&(r.usedOfferSession=!1),s.layersEnabled=i.requiredFeatures.indexOf("layers")!==-1,s.setSession(A).then(function(){s.setFoveation(a.foveationLevel),r.xrSession=A,r.systems.renderer.setWebXRFrameRate(A),A.addEventListener("end",r.exitVRBound),h(d)})},function(A){p(new Error("Failed to enter "+(c==="immersive-ar"?"AR":"VR")+" mode (`requestSession`)",{cause:A}))})})}throw new Error("Failed to enter "+(e?"AR":"VR")+" no WebXR")}return h(),Promise.resolve();function h(d){var p;e?r.addState("ar-mode"):r.addState("vr-mode"),r.emit("enter-vr",{target:r}),!r.hasWebXR&&r.isMobile&&screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape"),r.addFullScreenStyles(),r.isMobile||r.checkHeadsetConnected()||((p=r.canvas).requestFullscreen||p.webkitRequestFullscreen||p.mozRequestFullScreen||p.msRequestFullscreen).apply(p,[{navigationUI:"hide"}]),r.resize(),d&&d()}}exitVR(){var e=this,t=this.renderer.xr;if(!this.is("vr-mode")&&!this.is("ar-mode"))return Promise.resolve("Not in immersive mode.");if(this.checkHeadsetConnected()||this.isMobile){if(t.enabled=!1,!this.hasWebXR)throw Error("Failed to exit VR - no WebXR");this.xrSession.removeEventListener("end",this.exitVRBound),this.xrSession.end().then(function(){},function(){}),this.xrSession=void 0}else(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen());return e.removeState("vr-mode"),e.removeState("ar-mode"),e.isMobile&&screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),e.hasAttribute("embedded")&&e.removeFullScreenStyles(),e.resize(),e.isIOS&&D5(e.canvas),e.renderer.setPixelRatio(window.devicePixelRatio),e.emit("exit-vr",{target:e}),Promise.resolve()}getAttribute(e){var t=this.systems[e];return t?t.data:Pi.prototype.getAttribute.call(this,e)}getDOMAttribute(e){var t=this.systems[e];return t?t.data:Pi.prototype.getDOMAttribute.call(this,e)}setAttribute(e,t,i){if(Qo[e]){tr.prototype.setAttribute.call(this,e,t);var r=this.systems[e];r&&r.updateProperties(t)}else Pi.prototype.setAttribute.call(this,e,t,i)}removeBehavior(e){var t,i,r,s=this.behaviors[e.name];for(i in s)e[i]&&(r=(t=s[i]).array.indexOf(e))!==-1&&(t.inUse?t.markedForRemoval.indexOf(e)===-1&&t.markedForRemoval.push(e):(t.array[r]=t.array[t.array.length-1],t.array.pop()))}resize(){var e,t,i=this.camera,r=this.canvas,s=this.renderer.xr.isPresenting;e=this.renderer.xr.enabled&&s,!i||!r||this.is("vr-mode")&&(this.isMobile||e)||(t=M3(r,this.getAttribute("embedded")&&!this.is("vr-mode"),this.maxCanvasSize,this.is("vr-mode")),i.aspect=t.width/t.height,i.updateProjectionMatrix(),this.renderer.setSize(t.width,t.height,!1),this.emit("rendererresize",null,!1))}setupRenderer(){var e,t,i,r=this;i={alpha:!0,antialias:!_3,canvas:this.canvas,logarithmicDepthBuffer:!1,powerPreference:"high-performance"},this.maxCanvasSize={height:-1,width:-1},this.hasAttribute("renderer")&&((t=km(this.getAttribute("renderer"))).precision&&(i.precision=t.precision+"p"),t.antialias&&t.antialias!=="auto"&&(i.antialias=t.antialias==="true"),t.logarithmicDepthBuffer&&t.logarithmicDepthBuffer!=="auto"&&(i.logarithmicDepthBuffer=t.logarithmicDepthBuffer==="true"),t.alpha&&(i.alpha=t.alpha==="true"),t.stencil&&(i.stencil=t.stencil==="true"),t.multiviewStereo&&(i.multiviewStereo=t.multiviewStereo==="true"),this.maxCanvasSize={width:t.maxCanvasWidth?parseInt(t.maxCanvasWidth):this.maxCanvasSize.width,height:t.maxCanvasHeight?parseInt(t.maxCanvasHeight):this.maxCanvasSize.height});var s=["WebGLRenderer","WebGPURenderer"].find(function(a){return B[a]});(e=this.renderer=new B[s](i)).xr.setPoseTarget||(e.xr.setPoseTarget=function(){}),e.setPixelRatio(window.devicePixelRatio),this.camera&&e.xr.setPoseTarget(this.camera.el.object3D),this.addEventListener("camera-set-active",function(){e.xr.setPoseTarget(r.camera.el.object3D)})}play(){var e=this,t=this;this.renderStarted?Pi.prototype.play.call(this):(this.addEventListener("loaded",function(){var i=this.renderer;Pi.prototype.play.call(this),t.renderStarted||(t.resize(),t.renderer&&(window.performance&&window.performance.mark("render-started"),window.removeEventListener("resize",D_),Ol&&(Ol.style.display="none"),i.setAnimationLoop(this.render),t.renderStarted=!0,t.emit("renderstart")))}),setTimeout(function(){Pi.prototype.load.call(e)}))}updateComponent(e){e in Qo||Pi.prototype.updateComponent.apply(this,arguments)}tick(e,t){var i,r=this.systems;for(this.callComponentBehaviors("tick",e,t),i=0;i<this.systemNames.length;i++)r[this.systemNames[i]].tick&&r[this.systemNames[i]].tick(e,t)}tock(e,t,i){var r,s=this.systems;for(this.callComponentBehaviors("tock",e,t),r=0;r<this.systemNames.length;r++)s[this.systemNames[r]].tock&&s[this.systemNames[r]].tock(e,t,i)}render(e,t){var i=this.renderer;this.frame=t,this.delta=1e3*this.clock.getDelta(),this.time=1e3*this.clock.elapsedTime,this.isPlaying&&this.tick(this.time,this.delta);var r=null;if(this.is("ar-mode")&&(r=this.object3D.background,this.object3D.background=null),i.render(this.object3D,this.camera),r&&(this.object3D.background=r),this.isPlaying){var s=i.xr.isPresenting?i.xr.getCamera():this.camera;this.tock(this.time,this.delta,s)}}callComponentBehaviors(e,t,i){for(var r,s=0;s<this.componentOrder.length;s++){var a=this.behaviors[this.componentOrder[s]];if(a){var o=a[e];for(o.inUse=!0,r=0;r<o.array.length;r++)o.array[r].isPlaying&&o.array[r][e](t,i);for(o.inUse=!1,r=0;r<o.markedForRemoval.length;r++)this.removeBehavior(o.markedForRemoval[r]);o.markedForRemoval.length=0}}}}function w3(n,e){var t,i,r={},s=e||[];for(i in s.length=0,n){var a=n[i];if(a!==void 0){var o=a.before?a.before.slice(0):[],c=a.after?a.after.slice(0):[];r[i]={before:o,after:c,visited:!1,done:!1}}}for(i in r)for(t=0;t<r[i].before.length;t++){var h=r[i].before[t];h in r?r[h].after.push(i):Q_("Invalid ordering constraint, no component named `"+h+"` referenced by `"+i+"`")}function d(p){if(p in r&&!r[p].done)if(r[p].visited)Q_("Cycle detected, ignoring one or more before/after constraints. The resulting order might be incorrect");else{r[p].visited=!0;for(var m=0;m<r[p].after.length;m++){var A=r[p].after[m];A in r||Q_("Invalid before/after constraint, no component named `"+A+"` referenced in `"+p+"`"),d(A)}r[p].done=!0,s.push(p)}}for(i in r)r[i].done||d(i);return s}function S3(n,e){var t,i=window.devicePixelRatio;return!e||e.width===-1&&e.height===-1||n.width*i<e.width&&n.height*i<e.height||(t=n.width/n.height,n.width*i>e.width&&e.width!==-1&&(n.width=Math.round(e.width/i),n.height=Math.round(e.width/t/i)),n.height*i>e.height&&e.height!==-1&&(n.height=Math.round(e.height/i),n.width=Math.round(e.height*t/i))),n}function M3(n,e,t,i){return n.parentElement?e?S3({height:n.parentElement.offsetHeight,width:n.parentElement.offsetWidth},t):function(r,s){var a;return a={height:document.body.offsetHeight,width:document.body.offsetWidth},s?a:S3(a,r)}(t,i):{height:0,width:0}}customElements.define("a-scene",K5);var Nte=aA,ac={},rM=[],Fw=function(){};function Ur(n,e){var t,i={};if(Object.keys(e).forEach(function(r){i[r]={value:e[r],writable:!0}}),ac[n])throw new Error("The geometry `"+n+"` has been already registered");return((t=function(){Fw.call(this)}).prototype=Object.create(Fw.prototype,i)).name=n,t.prototype.constructor=t,ac[n]={Geometry:t,schema:Nte(t.prototype.schema)},rM.push(n),t}Fw.prototype={schema:{},init:function(n){return this.geometry=new B.BufferGeometry,this.geometry},update:function(n){}};var sM=mn,Fte=X2,Qte=sM("extras:primitives:debug"),T3=sM("extras:primitives:warn"),zte=sM("extras:primitives:error"),J5={};function Rr(n,e){if(n=n.toLowerCase(),!Nw[n]){Nw[n]=!0,Qte("Registering <%s>",n),e.defaultAttributes&&T3("The 'defaultAttributes' object is deprecated. Use 'defaultComponents' instead.");var t=e.mappings||{},i=class extends Pi{constructor(){super(),this.defaultComponentsFromPrimitive=e.defaultComponents||e.defaultAttributes||{},this.deprecated=e.deprecated||null,this.deprecatedMappings=e.deprecatedMappings||{},this.mappings=t,e.deprecated&&console.warn(e.deprecated),this.resolveMappingCollisions()}resolveMappingCollisions(){var r=this.mappings,s=this;Object.keys(r).forEach(function(a){var o;a!==a.toLowerCase()&&T3("Mapping keys should be specified in lower case. The mapping key "+a+" may not be recognized"),mi[a]&&(o=r[a].replace(".","-"),r[o]=r[a],delete r[a],console.warn("The primitive "+s.tagName.toLowerCase()+" has a mapping collision. The attribute "+a+" has the same name as a registered component and has been renamed to "+o))})}getExtraComponents(){var r,s,a,o,c,h=this;for(s=eM(this.defaultComponentsFromPrimitive),(c=this.getAttribute("mixin"))&&(c=Xo(c.trim(),/\s+/)).forEach(function(A){var v,y,E=document.getElementById(A);if(E){var b=E.rawAttributeCache,C=E.componentCache;for(var _ in b){if(o=h.mappings[_])return void B3(o,b[_],s);_ in C&&(s[_]=(v=s[_],y=C[_],d(v)?p(y):d(y)?p(v):m(v)&&m(y)?Cs(v,y):p(y)))}}}),a=0;a<this.attributes.length;a++)r=this.attributes[a],(o=this.mappings[r.name])&&B3(o,r.value,s);return s;function d(A){return A===void 0}function p(A){return m(A)?Cs({},A):A}function m(A){return A!==null&&A.constructor===Object}}attributeChangedCallback(r,s,a){var o=this.mappings[r];r in this.deprecatedMappings&&console.warn(this.deprecatedMappings[r]),r&&o?Fte(this,o,a):super.attributeChangedCallback(r,s,a)}};return customElements.define(n,i),i.mappings=t,J5[n]=i,i}zte("Trying to register primitive "+n+" that has been already previously registered")}function B3(n,e,t){var i=Hb(n);i.constructor===Array?(t[i[0]]=t[i[0]]||{},t[i[0]][i[1]]=e.trim()):t[i]=e.trim()}var Va={},Z5=[],Hte={array:"v3",color:"v3",int:"i",number:"f",map:"t",time:"f",vec2:"v2",vec3:"v3",vec4:"v4"},Qw=function(){};function Fl(n,e){var t,i={};if(Object.keys(e).forEach(function(r){i[r]={value:e[r],writable:!0}}),Va[n])throw new Error("The shader "+n+" has already been registered");return((t=function(){Qw.call(this)}).prototype=Object.create(Qw.prototype,i)).name=n,t.prototype.constructor=t,Va[n]={Shader:t,schema:aA(t.prototype.schema)},Z5.push(n),t}Qw.prototype={schema:{},vertexShader:"void main() {gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);}",fragmentShader:"void main() {gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);}",init:function(n){return this.uniforms=this.initUniforms(),this.material=new(this.raw?B.RawShaderMaterial:B.ShaderMaterial)({uniforms:this.uniforms,glslVersion:this.raw||this.glsl3?B.GLSL3:null,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader}),this.material},initUniforms:function(){var n,e,t=this.schema,i={};for(n in t)t[n].is==="uniform"&&(e=Hte[t[n].type],i[n]={type:e,value:void 0});return i},update:function(n){var e,t,i=this.schema,r=this.uniforms;for(e in n)if(i[e]&&i[e].is==="uniform")if(i[e].type!=="map")r[e].value=this.parseValue(i[e].type,n[e]),r[e].needsUpdate=!0;else{if(!r[e]||r[e].value===n[e])continue;t="_texture_"+e,this.setMapOnTextureLoad(r,e,t),Gb(t,e,this,n)}},parseValue:function(n,e){var t;switch(n){case"vec2":return new B.Vector2(e.x,e.y);case"vec3":return new B.Vector3(e.x,e.y,e.z);case"vec4":return new B.Vector4(e.x,e.y,e.z,e.w);case"color":return t=new B.Color(e),new B.Vector3(t.r,t.g,t.b);default:return e}},setMapOnTextureLoad:function(n,e,t){var i=this;this.el.addEventListener("materialtextureloaded",function(){n[e].value=i.material[t],n[e].needsUpdate=!0})}};var z_=new B.FileLoader,zw=mn("core:a-assets:warn");function Gte(n){if(n.hasAttribute("autoplay")||n.getAttribute("preload")==="auto")return new Promise(function(e,t){if(n.readyState===4)return e();if(n.error)return t();function i(){for(var r=0,s=0;s<n.buffered.length;s++)r+=n.buffered.end(s)-n.buffered.start(s);r>=n.duration&&(n.tagName==="VIDEO"&&B.Cache.add(n.getAttribute("src"),n),e())}n.addEventListener("loadeddata",i,!1),n.addEventListener("progress",i,!1),n.addEventListener("error",t,!1)})}function I3(n){var e=function(t){var i,r,s;return t.hasAttribute("crossorigin")||(i=t.getAttribute("src"))!==null&&(i.indexOf("://")===-1||(s=(r=i).indexOf("://")>-1?r.split("/")[2]:r.split("/")[0]).substring(0,s.indexOf(":"))===window.location.host)?t:(zw('Cross-origin element (e.g., <img>) was requested without `crossorigin` set. A-Frame will re-request the asset with `crossorigin` attribute set. Please set `crossorigin` on the element (e.g., <img crossorigin="anonymous">)',i),t.crossOrigin="anonymous",t.cloneNode(!0))}(n);return e.tagName&&e.tagName.toLowerCase()==="video"&&(e.setAttribute("playsinline",""),e.setAttribute("webkit-playsinline","")),e!==n&&(n.parentNode.appendChild(e),n.parentNode.removeChild(n)),e}customElements.define("a-assets",class extends tr{constructor(){super(),this.isAssets=!0,this.fileLoader=z_,this.timeout=null}doConnectedCallback(){var n,e,t,i,r,s,a=this,o=[];if(super.doConnectedCallback(),!this.parentNode.isScene)throw new Error("<a-assets> must be a child of a <a-scene>.");for(r=this.querySelectorAll("img"),n=0;n<r.length;n++)i=I3(r[n]),o.push(new Promise(function(c,h){B.Cache.add(r[n].getAttribute("src"),i),i.complete?c():(i.onload=c,i.onerror=h)}));for(t=this.querySelectorAll("audio, video"),n=0;n<t.length;n++)(e=I3(t[n])).src||e.srcObject||zw("Audio/video asset has neither `src` nor `srcObject` attributes."),o.push(Gte(e));this.getChildren().forEach(function(c){c.isAssetItem&&c.hasAttribute("src")&&o.push(new Promise(function(h,d){if(c.hasLoaded)return h();c.addEventListener("loaded",h),c.addEventListener("error",d)}))}),Promise.allSettled(o).then(function(){a.timeout!==null&&a.load()}),s=parseInt(this.getAttribute("timeout"),10)||3e3,this.timeout=setTimeout(function(){a.hasLoaded||(zw("Asset loading timed out in",s,"ms"),a.timeout=null,a.emit("timeout"),a.load())},s)}disconnectedCallback(){super.disconnectedCallback(),this.timeout&&clearTimeout(this.timeout)}load(){super.load.call(this,null,function(){return!1})}}),customElements.define("a-asset-item",class extends tr{constructor(){super(),this.data=null,this.isAssetItem=!0}connectedCallback(){var n=this,e=this.getAttribute("src");z_.setResponseType(this.getAttribute("response-type")||function(t){var i=function(s){var a=document.createElement("a");a.href=s;var o=a.search.replace(/^\?/,""),c=s.replace(o,"").replace("?","");return c.substring(c.lastIndexOf("/")+1)}(t),r=i.lastIndexOf(".");return r>=0&&i.slice(r,t.search(/\?|#|$/))===".glb"?"arraybuffer":"text"}(e)),z_.load(e,function(t){n.data=t,tr.prototype.load.call(n)},function(t){n.emit("progress",{loadedBytes:t.loaded,totalBytes:t.total,xhr:t})},function(t){n.emit("error",{xhr:t},!1)})}});var Vte=mn("core:cubemap:warn");class aM extends HTMLElement{constructor(e){return super(e)}onReadyStateChange(){document.readyState==="complete"&&this.doConnectedCallback()}connectedCallback(){document.readyState==="complete"?aM.prototype.doConnectedCallback.call(this):document.addEventListener("readystatechange",this.onReadyStateChange.bind(this))}doConnectedCallback(){this.srcs=this.validate()}validate(){var e,t=this.querySelectorAll("[src]"),i=[];if(t.length===6){for(e=0;e<t.length;e++)t[e].tagName==="IMG"?i.push(t[e]):i.push(t[e].getAttribute("src"));return i}Vte("<a-cubemap> did not contain exactly six elements each with a `src` attribute.")}}customElements.define("a-cubemap",aM),customElements.define("a-mixin",class extends tr{constructor(){super(),this.componentCache={},this.rawAttributeCache={},this.isMixin=!0}doConnectedCallback(){super.doConnectedCallback(),this.sceneEl=this.closestScene(),this.id=this.getAttribute("id"),this.cacheAttributes(),this.updateEntities(),this.load()}attributeChangedCallback(n,e,t){super.attributeChangedCallback(),this.cacheAttribute(n,t),this.updateEntities()}setAttribute(n,e){window.HTMLElement.prototype.setAttribute.call(this,n,e),this.cacheAttribute(n,e)}cacheAttribute(n,e){var t,i;i=Xo(n,"__")[0],t=mi[i],e===void 0&&(e=window.HTMLElement.prototype.getAttribute.call(this,n)),this.rawAttributeCache[n]=e,t&&(this.componentCache[n]=this.parseComponentAttrValue(t,e))}parseComponentAttrValue(n,e){var t;return typeof e!="string"?e:(n.isSingleProperty?typeof(t=n.schema.parse(e))=="string"&&(t=e):t=km(e),t)}getAttribute(n){return this.componentCache[n]||window.HTMLElement.prototype.getAttribute.call(this,n)}cacheAttributes(){var n,e,t=this.attributes;for(e=0;e<t.length;e++)n=t[e].name,this.cacheAttribute(n)}updateEntities(){var n,e,t;if(this.sceneEl)for(e=this.sceneEl.querySelectorAll("[mixin~="+this.id+"]"),t=0;t<e.length;t++)(n=e[t]).hasLoaded&&!n.isMixin&&n.mixinUpdate(this.id)}});const $5="1.7.0";var M0=new B.Color,T0=new B.Color,R3=R5,D3=X2,H_={},e8="color",L3="rotation",t8="components";function O3(n){n.x=B.MathUtils.degToRad(n.x),n.y=B.MathUtils.degToRad(n.y),n.z=B.MathUtils.degToRad(n.z)}function G_(n,e,t){var i;for(i=0;i<e.length;i++)n.addEventListener(e[i],t)}function V_(n,e,t){var i;for(i=0;i<e.length;i++)n.removeEventListener(e[i],t)}function P3(n,e){var t,i,r;for(i=Uy(e),r=n,t=0;t<i.length;t++)r=r[i[t]];if(r===void 0)throw console.log(n),new Error("[animation] property ("+e+") could not be found");return r}function U3(n,e,t,i){var r,s,a,o;for(e.startsWith("object3D.rotation")&&(t=B.MathUtils.degToRad(t)),s=Uy(e),o=n,r=0;r<s.length-1;r++)o=o[s[r]];a=s[s.length-1],i!==e8?o[a]=t:"r"in o[a]?(o[a].r=t.r,o[a].g=t.g,o[a].b=t.b):(o[a].x=t.r,o[a].y=t.g,o[a].z=t.b)}function Uy(n){return n in H_||(H_[n]=n.split(".")),H_[n]}function W_(n){return n.isRawProperty||n.property.startsWith(t8)||n.property.startsWith("object3D")}vt("animation",{schema:{autoplay:{default:!0},delay:{default:0},dir:{default:""},dur:{default:1e3},easing:{default:"easeInQuad"},elasticity:{default:400},enabled:{default:!0},from:{default:""},loop:{default:0,parse:function(n){return n===!0||n==="true"||n!==!1&&n!=="false"&&parseInt(n,10)}},property:{default:""},startEvents:{type:"array"},pauseEvents:{type:"array"},resumeEvents:{type:"array"},round:{default:!1},to:{default:""},type:{default:""},isRawProperty:{default:!1}},multiple:!0,init:function(){var n=this;this.eventDetail={name:this.attrName},this.time=0,this.animation=null,this.animationIsPlaying=!1,this.onStartEvent=this.onStartEvent.bind(this),this.beginAnimation=this.beginAnimation.bind(this),this.pauseAnimation=this.pauseAnimation.bind(this),this.resumeAnimation=this.resumeAnimation.bind(this),this.fromColor={},this.toColor={},this.targets={},this.targetsArray=[],this.updateConfigForDefault=this.updateConfigForDefault.bind(this),this.updateConfigForRawColor=this.updateConfigForRawColor.bind(this),this.config={complete:function(){n.animationIsPlaying=!1,n.el.emit("animationcomplete",n.eventDetail,!1),n.id&&n.el.emit("animationcomplete__"+n.id,n.eventDetail,!1)}}},update:function(n){var e=this.config,t=this.data;this.animationIsPlaying=!1,this.data.enabled&&t.property&&(e.autoplay=!1,e.direction=t.dir,e.duration=t.dur,e.easing=t.easing,e.elasticity=t.elasticity,e.loop=t.loop,e.round=t.round,this.createAndStartAnimation())},tick:function(n,e){this.animationIsPlaying&&(this.time+=e,this.animation.tick(this.time))},remove:function(){this.pauseAnimation(),this.removeEventListeners()},pause:function(){this.paused=!0,this.pausedWasPlaying=this.animationIsPlaying,this.pauseAnimation(),this.removeEventListeners()},play:function(){this.paused&&(this.paused=!1,this.addEventListeners(),this.pausedWasPlaying&&(this.resumeAnimation(),this.pausedWasPlaying=!1))},createAndStartAnimation:function(){var n=this.data;this.updateConfig(),this.animationIsPlaying=!1,this.animation=pv(this.config),this.animation.began=!0,this.removeEventListeners(),this.addEventListeners(),!n.autoplay||n.startEvents&&n.startEvents.length||(n.delay?setTimeout(this.beginAnimation,n.delay):this.beginAnimation())},beginAnimation:function(){this.updateConfig(),this.animation.began=!0,this.time=0,this.animationIsPlaying=!0,this.stopRelatedAnimations(),this.el.emit("animationbegin",this.eventDetail,!1)},pauseAnimation:function(){this.animationIsPlaying=!1},resumeAnimation:function(){this.animationIsPlaying=!0},onStartEvent:function(){this.data.enabled&&(this.updateConfig(),this.animation&&this.animation.pause(),this.animation=pv(this.config),this.data.delay?setTimeout(this.beginAnimation,this.data.delay):this.beginAnimation())},updateConfigForRawColor:function(){var n,e,t,i=this.config,r=this.data,s=this.el;if(!this.waitComponentInitRawProperty(this.updateConfigForRawColor)){for(e in n=r.from===""?P3(s,r.property):r.from,t=r.to,this.setColorConfig(n,t),n=this.fromColor,t=this.toColor,this.targetsArray.length=0,this.targetsArray.push(n),i.targets=this.targetsArray,t)i[e]=t[e];var a;i.update=(a={},function(o){var c;(c=o.animatables[0].target).r===a.r&&c.g===a.g&&c.b===a.b||U3(s,r.property,c,r.type)})}},updateConfigForDefault:function(){var n,e,t,i,r=this.config,s=this.data,a=this.el;this.waitComponentInitRawProperty(this.updateConfigForDefault)||(n=s.from===""?W_(s)?P3(a,s.property):R3(a,s.property):s.from,t=s.to,isNaN(n||t)?(n=n&&n.toString(),t=t&&t.toString()):(n=parseFloat(n),t=parseFloat(t)),(e=s.to==="true"||s.to==="false"||s.to===!0||s.to===!1)&&(n=s.from==="true"||s.from===!0?1:0,t=s.to==="true"||s.to===!0?1:0),this.targets.aframeProperty=n,r.targets=this.targets,r.aframeProperty=t,r.update=function(o){var c;(c=o.animatables[0].target.aframeProperty)!==i&&(i=c,e&&(c=c>=1),W_(s)?U3(a,s.property,c,s.type):D3(a,s.property,c))})},updateConfigForVector:function(){var n,e,t,i,r=this.config,s=this.data,a=this.el,o=Uy(s.property),c=o[0]==="object3D"?o[1]:o[0];for(n in e=s.from!==""?Ty(s.from):R3(a,c),t=Ty(s.to),c===L3&&(O3(e),O3(t)),this.targetsArray.length=0,this.targetsArray.push(e),r.targets=this.targetsArray,t)r[n]=t[n];r.update=c!=="position"&&c!==L3&&c!=="scale"?function(){var h={};return function(d){var p=d.animatables[0].target;p.x===h.x&&p.y===h.y&&p.z===h.z||(h.x=p.x,h.y=p.y,h.z=p.z,D3(a,s.property,p))}}():(i={},function(h){var d=h.animatables[0].target;d.x===i.x&&d.y===i.y&&d.z===i.z||(i.x=d.x,i.y=d.y,i.z=d.z,a.object3D[c].set(d.x,d.y,d.z))})},updateConfig:function(){var n;n=function(e,t){var i,r,s,a;return(s=t.split("."))[0]!=="object3D"||s[2]||s[1]!=="position"&&s[1]!=="rotation"&&s[1]!=="scale"?(r=s[0],a=s[1],(i=e.components[r]||mi[r])?a&&!i.schema[a]?null:a?i.schema[a].type:i.schema.type:null):"vec3"}(this.el,this.data.property),W_(this.data)&&this.data.type===e8?this.updateConfigForRawColor():n==="vec2"||n==="vec3"||n==="vec4"?this.updateConfigForVector():this.updateConfigForDefault()},waitComponentInitRawProperty:function(n){var e,t=this.data,i=this.el,r=this;return t.from===""&&!!t.property.startsWith(t8)&&(e=Uy(t.property)[1],!i.components[e]&&(i.addEventListener("componentinitialized",function s(a){a.detail.name===e&&(n(),r.animation=pv(r.config),i.removeEventListener("componentinitialized",s))}),!0))},stopRelatedAnimations:function(){var n,e;for(e in this.el.components)n=this.el.components[e],e!==this.attrName&&n.name==="animation"&&n.animationIsPlaying&&n.data.property===this.data.property&&(n.animationIsPlaying=!1)},addEventListeners:function(){var n=this.data,e=this.el;G_(e,n.startEvents,this.onStartEvent),G_(e,n.pauseEvents,this.pauseAnimation),G_(e,n.resumeEvents,this.resumeAnimation)},removeEventListeners:function(){var n=this.data,e=this.el;V_(e,n.startEvents,this.onStartEvent),V_(e,n.pauseEvents,this.pauseAnimation),V_(e,n.resumeEvents,this.resumeAnimation)},setColorConfig:function(n,e){M0.set(n),T0.set(e),n=this.fromColor,e=this.toColor,n.r=M0.r,n.g=M0.g,n.b=M0.b,e.r=T0.r,e.g=T0.g,e.b=T0.b}});var q_=mn("components:anchored:warn");vt("anchored",{schema:{persistent:{default:!1}},init:function(){var n=this.el.sceneEl.getAttribute("webxr"),e=n.optionalFeatures;e.indexOf("anchors")===-1&&(e.push("anchors"),this.el.sceneEl.setAttribute("webxr",n)),this.auxQuaternion=new B.Quaternion,this.onEnterVR=this.onEnterVR.bind(this),this.el.sceneEl.addEventListener("enter-vr",this.onEnterVR)},onEnterVR:function(){this.anchor=void 0,this.requestPersistentAnchorPending=this.data.persistent,this.requestAnchorPending=!this.data.persistent},tick:function(){var n,e,t,i=this.el.sceneEl,r=i.renderer.xr,s=this.el.object3D;(i.is("ar-mode")||i.is("vr-mode"))&&(!this.anchor&&this.requestPersistentAnchorPending&&this.restorePersistentAnchor(),!this.anchor&&this.requestAnchorPending&&this.createAnchor(),this.anchor&&(n=i.frame,e=r.getReferenceSpace(),t=n.getPose(this.anchor.anchorSpace,e),s.position.copy(t.transform.position),s.quaternion.copy(t.transform.orientation)))},createAnchor:async function(n,e){var t,i,r,s,a=this.el.sceneEl,o=a.renderer.xr,c=this.el.object3D;n=n||c.position,e=e||this.auxQuaternion.setFromEuler(c.rotation),function(h){var d=h.renderer.xr.getSession();return d&&d.restorePersistentAnchor}(a)?(this.anchor&&this.deleteAnchor(),t=a.frame,i=o.getReferenceSpace(),r=new XRRigidTransform({x:n.x,y:n.y,z:n.z},{x:e.x,y:e.y,z:e.z,w:e.w}),this.requestAnchorPending=!1,s=await t.createAnchor(r,i),this.data.persistent&&(this.el.id?(this.persistentHandle=await s.requestPersistentHandle(),localStorage.setItem(this.el.id,this.persistentHandle)):q_("The anchor won't be persisted because the entity has no assigned id.")),a.object3D.attach(this.el.object3D),this.anchor=s):q_("This browser doesn't support the WebXR anchors module")},restorePersistentAnchor:async function(){var n,e=this.el.sceneEl.renderer.xr.getSession(),t=e.persistentAnchors;if(this.requestPersistentAnchorPending=!1,!this.el.id)return q_("The entity associated to the persistent anchor cannot be retrieved because it doesn't have an assigned id."),void(this.requestAnchorPending=!0);if(t){n=localStorage.getItem(this.el.id);for(var i=0;i<t.length;++i)if(n===t[i]){this.anchor=await e.restorePersistentAnchor(t[i]),this.anchor&&(this.persistentHandle=t[i]);break}this.anchor||(this.requestAnchorPending=!0)}else this.requestPersistentAnchorPending=!0},deleteAnchor:function(){var n,e=this.anchor;e&&(n=this.el.sceneEl.renderer.xr.getSession(),e.delete(),this.el.sceneEl.object3D.add(this.el.object3D),this.persistentHandle&&n.deletePersistentAnchor(this.persistentHandle),this.anchor=void 0)}}),vt("camera",{schema:{active:{default:!0},far:{default:1e4},fov:{default:80,min:0},near:{default:.005,min:0},spectator:{default:!1},zoom:{default:1,min:0}},init:function(){var n,e=this.el;n=this.camera=new B.PerspectiveCamera,e.setObject3D("camera",n)},update:function(n){var e=this.data,t=this.camera;t.aspect=e.aspect||window.innerWidth/window.innerHeight,t.far=e.far,t.fov=e.fov,t.near=e.near,t.zoom=e.zoom,t.updateProjectionMatrix(),this.updateActiveCamera(n),this.updateSpectatorCamera(n)},updateActiveCamera:function(n){var e=this.data,t=this.el,i=this.system;n&&n.active===e.active||e.spectator||(e.active&&i.activeCameraEl!==t?i.setActiveCamera(t):e.active||i.activeCameraEl!==t||i.disableActiveCamera())},updateSpectatorCamera:function(n){var e=this.data,t=this.el,i=this.system;n&&n.spectator===e.spectator||(e.spectator&&i.spectatorCameraEl!==t?i.setSpectatorCamera(t):e.spectator||i.spectatorCameraEl!==t||i.disableSpectatorCamera())},remove:function(){this.el.removeObject3D("camera")}});var Pl,Yc,Ul,k3,N3="click",F3="mouseup",B0="cursor-fusing",j_="cursor-hovering",X_="cursor-hovered",I0={DOWN:["mousedown","touchstart"],UP:["mouseup","touchend"]},R0={DOWN:["selectstart"],UP:["selectend"]},Q3="a-mouse-cursor-hover",Wte=(vt("cursor",{dependencies:["raycaster"],schema:{downEvents:{default:[]},fuse:{default:sc()},fuseTimeout:{default:1500,min:0},mouseCursorStylesEnabled:{default:!0},upEvents:{default:[]},rayOrigin:{default:"entity",oneOf:["mouse","entity","xrselect"]}},after:["tracked-controls"],multiple:!0,init:function(){var n=this;this.fuseTimeout=void 0,this.cursorDownEl=null,this.intersectedEl=null,this.canvasBounds=document.body.getBoundingClientRect(),this.isCursorDown=!1,this.activeXRInput=null,this.updateCanvasBounds=N5(function(){n.canvasBounds=n.el.sceneEl.canvas.getBoundingClientRect()},500),this.eventDetail={},this.intersectedEventDetail={cursorEl:this.el},this.onCursorDown=this.onCursorDown.bind(this),this.onCursorUp=this.onCursorUp.bind(this),this.onIntersection=this.onIntersection.bind(this),this.onIntersectionCleared=this.onIntersectionCleared.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onEnterVR=this.onEnterVR.bind(this)},update:function(n){var e=this.data.rayOrigin;e!==n.rayOrigin&&(e==="entity"&&this.resetRaycaster(),this.updateMouseEventListeners(),e!=="xrselect"&&e!=="entity"||this.addWebXREventListeners(),n.rayOrigin!=="xrselect"&&n.rayOrigin!=="entity"||this.removeWebXREventListeners())},tick:function(){var n=this.el.sceneEl.frame,e=this.activeXRInput;this.data.rayOrigin==="xrselect"&&n&&e&&this.onMouseMove({frame:n,inputSource:e,type:"fakeselectevent"})},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){var n=this.el;n.removeState(j_),n.removeState(B0),clearTimeout(this.fuseTimeout),this.intersectedEl&&this.intersectedEl.removeState(X_),this.removeEventListeners()},addEventListeners:function(){var n,e=this.data,t=this.el,i=this;function r(){n=t.sceneEl.canvas,e.downEvents.length||e.upEvents.length||(I0.DOWN.forEach(function(s){n.addEventListener(s,i.onCursorDown,{passive:!1})}),I0.UP.forEach(function(s){n.addEventListener(s,i.onCursorUp,{passive:!1})}))}(n=t.sceneEl.canvas)?r():t.sceneEl.addEventListener("render-target-loaded",r),e.downEvents.forEach(function(s){t.addEventListener(s,i.onCursorDown)}),e.upEvents.forEach(function(s){t.addEventListener(s,i.onCursorUp)}),t.addEventListener("raycaster-intersection",this.onIntersection),t.addEventListener("raycaster-closest-entity-changed",this.onIntersection),t.addEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),t.sceneEl.addEventListener("rendererresize",this.updateCanvasBounds),t.sceneEl.addEventListener("enter-vr",this.onEnterVR),window.addEventListener("resize",this.updateCanvasBounds),window.addEventListener("scroll",this.updateCanvasBounds),this.updateMouseEventListeners()},removeEventListeners:function(){var n,e=this.data,t=this.el,i=this;!(n=t.sceneEl.canvas)||e.downEvents.length||e.upEvents.length||(I0.DOWN.forEach(function(r){n.removeEventListener(r,i.onCursorDown)}),I0.UP.forEach(function(r){n.removeEventListener(r,i.onCursorUp)})),e.downEvents.forEach(function(r){t.removeEventListener(r,i.onCursorDown)}),e.upEvents.forEach(function(r){t.removeEventListener(r,i.onCursorUp)}),t.removeEventListener("raycaster-intersection",this.onIntersection),t.removeEventListener("raycaster-closest-entity-changed",this.onIntersection),t.removeEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),n.removeEventListener("mousemove",this.onMouseMove),n.removeEventListener("touchstart",this.onMouseMove),n.removeEventListener("touchmove",this.onMouseMove),t.sceneEl.removeEventListener("rendererresize",this.updateCanvasBounds),t.sceneEl.removeEventListener("enter-vr",this.onEnterVR),window.removeEventListener("resize",this.updateCanvasBounds),window.removeEventListener("scroll",this.updateCanvasBounds),this.removeWebXREventListeners()},updateMouseEventListeners:function(){var n,e=this.el;(n=e.sceneEl.canvas).removeEventListener("mousemove",this.onMouseMove),n.removeEventListener("touchmove",this.onMouseMove),e.setAttribute("raycaster","useWorldCoordinates",!1),this.data.rayOrigin==="mouse"&&(n.addEventListener("mousemove",this.onMouseMove),n.addEventListener("touchmove",this.onMouseMove,{passive:!1}),e.setAttribute("raycaster","useWorldCoordinates",!0),this.updateCanvasBounds())},resetRaycaster:function(){this.el.setAttribute("raycaster",{direction:new B.Vector3().set(0,0,-1),origin:new B.Vector3})},addWebXREventListeners:function(){var n=this,e=this.el.sceneEl.xrSession;e&&(R0.DOWN.forEach(function(t){e.addEventListener(t,n.onCursorDown)}),R0.UP.forEach(function(t){e.addEventListener(t,n.onCursorUp)}))},removeWebXREventListeners:function(){var n=this,e=this.el.sceneEl.xrSession;e&&(R0.DOWN.forEach(function(t){e.removeEventListener(t,n.onCursorDown)}),R0.UP.forEach(function(t){e.removeEventListener(t,n.onCursorUp)}))},onMouseMove:(Pl=new B.Vector3,Yc=new B.Vector2,Ul=new B.Vector3,k3={origin:Ul,direction:Pl},function(n){var e,t,i,r,s,a,o,c,h,d=this.canvasBounds,p=this.el.sceneEl.camera;p.parent.updateMatrixWorld(),t=(i=n.type==="touchmove"||n.type==="touchstart"?n.touches.item(0):n).clientX-d.left,r=i.clientY-d.top,Yc.x=t/d.width*2-1,Yc.y=-r/d.height*2+1,this.data.rayOrigin!=="xrselect"||n.type!=="selectstart"&&n.type!=="fakeselectevent"?n.type==="fakeselectout"?(Pl.set(0,1,0),Ul.set(0,9999,0)):p&&p.isPerspectiveCamera?(Ul.setFromMatrixPosition(p.matrixWorld),Pl.set(Yc.x,Yc.y,.5).unproject(p).sub(Ul).normalize()):p&&p.isOrthographicCamera?(Ul.set(Yc.x,Yc.y,(p.near+p.far)/(p.near-p.far)).unproject(p),Pl.set(0,0,-1).transformDirection(p.matrixWorld)):console.error("AFRAME.Raycaster: Unsupported camera type: "+p.type):(s=n.frame,a=n.inputSource,o=this.el.sceneEl.renderer.xr.getReferenceSpace(),(c=s.getPose(a.targetRaySpace,o))&&(h=c.transform,Pl.set(0,0,-1),Pl.applyQuaternion(h.orientation),Ul.copy(h.position),(e=p.el.object3D.parent).localToWorld(Ul),Pl.transformDirection(e.matrixWorld))),this.el.setAttribute("raycaster",k3),n.type==="touchmove"&&n.preventDefault()}),onCursorDown:function(n){this.isCursorDown=!0,this.data.rayOrigin==="mouse"&&n.type==="touchstart"&&(this.onMouseMove(n),this.el.components.raycaster.checkIntersections(),n.preventDefault()),this.data.rayOrigin==="xrselect"&&n.type==="selectstart"&&(this.activeXRInput=n.inputSource,this.onMouseMove(n),this.el.components.raycaster.checkIntersections(),this.el.components.raycaster.intersectedEls.length&&this.el.sceneEl.components["ar-hit-test"]!==void 0&&this.el.sceneEl.getAttribute("ar-hit-test").enabled&&(this.el.sceneEl.setAttribute("ar-hit-test","enabled",!1),this.reenableARHitTest=!0)),this.twoWayEmit("mousedown",n),this.cursorDownEl=this.intersectedEl},onCursorUp:function(n){if(this.isCursorDown&&(this.data.rayOrigin!=="xrselect"||this.activeXRInput===n.inputSource)){this.isCursorDown=!1;var e=this.data;this.twoWayEmit(F3,n),this.reenableARHitTest===!0&&(this.el.sceneEl.setAttribute("ar-hit-test","enabled",!0),this.reenableARHitTest=void 0),this.cursorDownEl&&this.cursorDownEl!==this.intersectedEl&&(this.intersectedEventDetail.intersection=null,this.cursorDownEl.emit(F3,this.intersectedEventDetail)),e.fuse&&e.rayOrigin!=="mouse"&&e.rayOrigin!=="xrselect"||!this.intersectedEl||this.cursorDownEl!==this.intersectedEl||this.twoWayEmit(N3,n),e.rayOrigin==="xrselect"&&this.onMouseMove({type:"fakeselectout"}),this.activeXRInput=null,this.cursorDownEl=null,n.type==="touchend"&&n.preventDefault()}},onIntersection:function(n){var e,t,i,r,s=this.el;t=n.detail.els[0]===s?1:0,r=n.detail.intersections[t],(i=n.detail.els[t])&&this.intersectedEl!==i&&(this.intersectedEl&&(e=this.el.components.raycaster.getIntersection(this.intersectedEl))&&e.distance<=r.distance||(this.clearCurrentIntersection(!0),this.setIntersection(i,r)))},onIntersectionCleared:function(n){n.detail.clearedEls.indexOf(this.intersectedEl)!==-1&&this.clearCurrentIntersection()},onEnterVR:function(){var n=this.data.rayOrigin;this.clearCurrentIntersection(!0),n!=="xrselect"&&n!=="entity"||this.addWebXREventListeners()},setIntersection:function(n,e){var t=this.el,i=this.data,r=this;this.intersectedEl!==n&&(this.intersectedEl=n,t.addState(j_),n.addState(X_),this.twoWayEmit("mouseenter"),this.data.mouseCursorStylesEnabled&&this.data.rayOrigin==="mouse"&&this.el.sceneEl.canvas.classList.add(Q3),i.fuseTimeout!==0&&i.fuse&&i.rayOrigin!=="xrselect"&&i.rayOrigin!=="mouse"&&(t.addState(B0),this.twoWayEmit("fusing"),this.fuseTimeout=setTimeout(function(){t.removeState(B0),r.twoWayEmit(N3)},i.fuseTimeout)))},clearCurrentIntersection:function(n){var e,t,i=this.el;this.intersectedEl&&(this.intersectedEl.removeState(X_),i.removeState(j_),i.removeState(B0),this.twoWayEmit("mouseleave"),this.data.mouseCursorStylesEnabled&&this.data.rayOrigin==="mouse"&&this.el.sceneEl.canvas.classList.remove(Q3),this.intersectedEl=null,clearTimeout(this.fuseTimeout),n!==!0&&(t=this.el.components.raycaster.intersections).length!==0&&(e=t[t[0].object.el===i?1:0])&&this.setIntersection(e.object.el,e))},twoWayEmit:function(n,e){var t,i=this.el,r=this.intersectedEl;function s(a,o){e instanceof MouseEvent?a.mouseEvent=e:typeof TouchEvent<"u"&&e instanceof TouchEvent&&(a.touchEvent=e)}t=this.el.components.raycaster.getIntersection(r),this.eventDetail.intersectedEl=r,this.eventDetail.intersection=t,s(this.eventDetail),i.emit(n,this.eventDetail),r&&(this.intersectedEventDetail.intersection=t,s(this.intersectedEventDetail),r.emit(n,this.intersectedEventDetail))}}),new B.BufferGeometry),z3=(vt("geometry",{schema:{buffer:{default:!0},primitive:{default:"box",oneOf:rM,schemaChange:!0},skipCache:{default:!1}},init:function(){this.geometry=null},update:function(n){var e,t=this.data,i=this.el,r=this.system;this.geometry&&(r.unuseGeometry(n),this.geometry=null),this.geometry=r.getOrCreateGeometry(t),(e=i.getObject3D("mesh"))?e.geometry=this.geometry:((e=new B.Mesh).geometry=this.geometry,this.el.getAttribute("material")||(e.material=new B.MeshStandardMaterial({color:16777215*Math.random(),metalness:0,roughness:.5})),i.setObject3D("mesh",e))},remove:function(){this.system.unuseGeometry(this.data),this.el.getObject3D("mesh").geometry=Wte,this.geometry=null},updateSchema:function(n){var e=this.oldData&&this.oldData.primitive,t=n.primitive,i=ac[t]&&ac[t].schema;if(!i)throw new Error("Unknown geometry schema `"+t+"`");e&&e===t||this.extendSchema(i)}}),"generic"),qte=(vt("generic-tracked-controller-controls",{schema:{hand:{default:""},defaultModel:{default:!0},defaultModelColor:{default:"gray"},disabled:{default:!1}},after:["tracked-controls"],mapping:{axes:{touchpad:[0,1],thumbstick:[2,3]},buttons:["trigger","squeeze","touchpad","thumbstick"]},bindMethods:function(){this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var n=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(e){Lt(e.detail.id,"down",n)},this.onButtonUp=function(e){Lt(e.detail.id,"up",n)},this.onButtonTouchStart=function(e){Lt(e.detail.id,"touchstart",n)},this.onButtonTouchEnd=function(e){Lt(e.detail.id,"touchend",n)},this.controllerPresent=!1,this.wasControllerConnected=!1,this.bindMethods(),this.el.addEventListener("controllerconnected",function(e){e.detail.name!==n.name&&(n.wasControllerConnected=!0,n.removeEventListeners(),n.removeControllersUpdateListener())})},addEventListeners:function(){var n=this.el;n.addEventListener("buttonchanged",this.onButtonChanged),n.addEventListener("buttondown",this.onButtonDown),n.addEventListener("buttonup",this.onButtonUp),n.addEventListener("touchstart",this.onButtonTouchStart),n.addEventListener("touchend",this.onButtonTouchEnd),n.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var n=this.el;n.removeEventListener("buttonchanged",this.onButtonChanged),n.removeEventListener("buttondown",this.onButtonDown),n.removeEventListener("buttonup",this.onButtonUp),n.removeEventListener("touchstart",this.onButtonTouchStart),n.removeEventListener("touchend",this.onButtonTouchEnd),n.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var n=this.data,e=n.hand?n.hand:void 0;Ps(this,z3,{hand:e,iterateControllerProfiles:!0})},play:function(){this.wasControllerConnected||(this.checkIfControllerPresent(),this.addControllersUpdateListener())},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var n=this.el,e=this.data;this.el.components["tracked-controls"]?this.removeEventListeners():(n.setAttribute("tracked-controls",{hand:e.hand,idPrefix:z3,iterateControllerProfiles:!0}),this.data.defaultModel&&this.initDefaultModel())},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.wasControllerConnected&&this.checkIfControllerPresent()},onButtonChanged:function(n){var e=this.mapping.buttons[n.detail.id];e&&this.el.emit(e+"changed",n.detail.state)},onAxisMoved:function(n){ta(this,this.mapping.axes,n)},initDefaultModel:function(){var n=this.modelEl=document.createElement("a-entity");n.setAttribute("geometry",{primitive:"sphere",radius:.03}),n.setAttribute("material",{color:this.data.color}),this.el.appendChild(n),this.el.emit("controllermodelready",{name:"generic-tracked-controller-controls",model:this.modelEl,rayOrigin:{origin:{x:0,y:0,z:-.01},direction:{x:0,y:0,z:-1}}})}}),mn("components:gltf-model:warn"));vt("gltf-model",{schema:{type:"model"},init:function(){var n=this,e=this.system.getDRACOLoader(),t=this.system.getMeshoptDecoder(),i=this.system.getKTX2Loader();this.model=null,this.loader=new k2,e&&this.loader.setDRACOLoader(e),this.ready=t?t.then(function(r){n.loader.setMeshoptDecoder(r)}):Promise.resolve(),i&&this.loader.setKTX2Loader(i)},update:function(){var n=this,e=this.el,t=this.data;t&&(this.remove(),this.ready.then(function(){n.loader.load(t,function(i){n.model=i.scene||i.scenes[0],n.model.animations=i.animations,e.setObject3D("mesh",n.model),e.emit("model-loaded",{format:"gltf",model:n.model})},void 0,function(i){var r=i&&i.message?i.message:"Failed to load glTF model";qte(r),e.emit("model-error",{format:"gltf",src:t})})}))},remove:function(){this.model&&this.el.removeObject3D("mesh")}}),vt("grabbable",{init:function(){this.el.setAttribute("obb-collider","centerModel: true")}});var D0,jte=pi+"controllers/oculus-hands/v4/left.glb",Xte=pi+"controllers/oculus-hands/v4/right.glb",Y_=["wrist","thumb-metacarpal","thumb-phalanx-proximal","thumb-phalanx-distal","thumb-tip","index-finger-metacarpal","index-finger-phalanx-proximal","index-finger-phalanx-intermediate","index-finger-phalanx-distal","index-finger-tip","middle-finger-metacarpal","middle-finger-phalanx-proximal","middle-finger-phalanx-intermediate","middle-finger-phalanx-distal","middle-finger-tip","ring-finger-metacarpal","ring-finger-phalanx-proximal","ring-finger-phalanx-intermediate","ring-finger-phalanx-distal","ring-finger-tip","pinky-finger-metacarpal","pinky-finger-phalanx-proximal","pinky-finger-phalanx-intermediate","pinky-finger-phalanx-distal","pinky-finger-tip"];vt("hand-tracking-controls",{schema:{hand:{default:"right",oneOf:["left","right"]},modelStyle:{default:"mesh",oneOf:["dots","mesh"]},modelColor:{default:"white"},modelOpacity:{default:1}},after:["tracked-controls"],bindMethods:function(){this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this)},addEventListeners:function(){this.el.addEventListener("model-loaded",this.onModelLoaded);for(var n=0;n<this.jointEls.length;++n)this.jointEls[n].object3D.visible=!0},removeEventListeners:function(){this.el.removeEventListener("model-loaded",this.onModelLoaded);for(var n=0;n<this.jointEls.length;++n)this.jointEls[n].object3D.visible=!1},init:function(){var n=this.el.sceneEl,e=n.getAttribute("webxr"),t=e.optionalFeatures;t.indexOf("hand-tracking")===-1&&(t.push("hand-tracking"),n.setAttribute("webxr",e)),this.wristObject3D=new B.Object3D,this.el.sceneEl.object3D.add(this.wristObject3D),this.onModelLoaded=this.onModelLoaded.bind(this),this.onChildAttached=this.onChildAttached.bind(this),this.jointEls=[],this.controllerPresent=!1,this.isPinched=!1,this.pinchEventDetail={position:new B.Vector3,wristRotation:new B.Quaternion},this.indexTipPosition=new B.Vector3,this.hasPoses=!1,this.jointPoses=new Float32Array(16*Y_.length),this.jointRadii=new Float32Array(Y_.length),this.bindMethods(),this.updateReferenceSpace=this.updateReferenceSpace.bind(this),this.el.sceneEl.addEventListener("enter-vr",this.updateReferenceSpace),this.el.sceneEl.addEventListener("exit-vr",this.updateReferenceSpace),this.el.addEventListener("child-attached",this.onChildAttached),this.wristObject3D.visible=!1},onChildAttached:function(n){this.addChildEntity(n.detail.el)},update:function(){this.updateModelMaterial()},updateModelMaterial:function(){var n=this.jointEls,e=this.skinnedMesh,t=this.data.modelOpacity!==1;e&&(this.skinnedMesh.material.color.set(this.data.modelColor),this.skinnedMesh.material.transparent=t,this.skinnedMesh.material.opacity=this.data.modelOpacity);for(var i=0;i<n.length;i++)n[i].setAttribute("material",{color:this.data.modelColor,transparent:t,opacity:this.data.modelOpacity})},updateReferenceSpace:function(){var n=this,e=this.el.sceneEl.xrSession;if(this.referenceSpace=void 0,e){var t=n.el.sceneEl.systems.webxr.sessionReferenceSpaceType;e.requestReferenceSpace(t).then(function(i){n.referenceSpace=i}).catch(function(i){throw n.el.sceneEl.systems.webxr.warnIfFeatureNotRequested(t,"tracked-controls-webxr uses reference space "+t),i})}},checkIfControllerPresent:function(){var n=this.data;Ps(this,"",{hand:n.hand?n.hand:void 0,iterateControllerProfiles:!0,handTracking:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},tick:function(){var n=this.el.sceneEl,e=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,t=n.frame,i=this.el.components["tracked-controls"],r=this.referenceSpace;e&&t&&r&&i&&(this.hasPoses=!1,e.hand&&(this.el.object3D.position.set(0,0,0),this.el.object3D.rotation.set(0,0,0),this.hasPoses=t.fillPoses(e.hand.values(),r,this.jointPoses)&&t.fillJointRadii(e.hand.values(),this.jointRadii),this.updateHandModel(),this.detectGesture(),this.updateWristObject()))},updateWristObject:(D0=new B.Matrix4,function(){var n=this.wristObject3D;n&&this.hasPoses&&(D0.fromArray(this.jointPoses,0),n.position.setFromMatrixPosition(D0),n.quaternion.setFromRotationMatrix(D0))}),updateHandModel:function(){this.wristObject3D.visible=!0,this.el.object3D.visible=!0,this.data.modelStyle==="dots"&&this.updateHandDotsModel(),this.data.modelStyle==="mesh"&&this.updateHandMeshModel()},getBone:function(n){for(var e=this.bones,t=0;t<e.length;t++)if(e[t].name===n)return e[t];return null},updateHandMeshModel:function(){var n=new B.Matrix4;return function(){var e=0,t=this.jointPoses,i=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller;if(i&&this.mesh&&(this.mesh.visible=!1,this.hasPoses))for(var r of i.hand.values()){var s=this.getBone(r.jointName);s!=null&&(this.mesh.visible=!0,n.fromArray(t,16*e),s.position.setFromMatrixPosition(n),s.quaternion.setFromRotationMatrix(n)),e++}}}(),updateHandDotsModel:function(){for(var n,e,t=this.jointPoses,i=this.jointRadii,r=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,s=0;s<r.hand.size;s++)e=(n=this.jointEls[s]).object3D,n.object3D.visible=this.hasPoses,this.hasPoses&&(e.matrix.fromArray(t,16*s),e.matrix.decompose(e.position,e.rotation,e.scale),n.setAttribute("scale",{x:i[s],y:i[s],z:i[s]}))},detectGesture:function(){this.detectPinch()},detectPinch:function(){var n=new B.Vector3,e=new B.Matrix4;return function(){var t=this.indexTipPosition,i=this.pinchEventDetail;if(this.hasPoses){n.setFromMatrixPosition(e.fromArray(this.jointPoses,64)),t.setFromMatrixPosition(e.fromArray(this.jointPoses,144)),i.wristRotation.setFromRotationMatrix(e.fromArray(this.jointPoses,0));var r=t.distanceTo(n);r<.015&&this.isPinched===!1&&(this.isPinched=!0,i.position.copy(t).add(n).multiplyScalar(.5),this.el.emit("pinchstarted",i)),r>.02&&this.isPinched===!0&&(this.isPinched=!1,i.position.copy(t).add(n).multiplyScalar(.5),this.el.emit("pinchended",i)),this.isPinched&&(i.position.copy(t).add(n).multiplyScalar(.5),this.el.emit("pinchmoved",i))}}}(),pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var n=this.el,e=this.data;n.setAttribute("tracked-controls",{id:"",hand:e.hand,iterateControllerProfiles:!0,handTrackingEnabled:!0}),this.mesh?this.mesh!==n.getObject3D("mesh")&&n.setObject3D("mesh",this.mesh):this.initDefaultModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){var n,e=this.el;this.checkIfControllerPresent(),n=e.components["tracked-controls"]&&e.components["tracked-controls"].controller,this.mesh&&n&&n.hand&&n.hand instanceof XRHand&&e.setObject3D("mesh",this.mesh)},initDefaultModel:function(){var n=this.data;n.modelStyle==="dots"&&this.initDotsModel(),n.modelStyle==="mesh"&&this.initMeshHandModel(),this.el.object3D.visible=!0,this.wristObject3D.visible=!0},initDotsModel:function(){if(this.jointEls.length===0){for(var n=0;n<Y_.length;++n){var e=this.jointEl=document.createElement("a-entity");e.setAttribute("geometry",{primitive:"sphere",radius:1}),e.object3D.visible=!1,this.el.appendChild(e),this.jointEls.push(e)}this.updateModelMaterial()}},initMeshHandModel:function(){var n=this.data.hand==="left"?jte:Xte;this.el.setAttribute("gltf-model",n)},onModelLoaded:function(){var n=this.mesh=this.el.getObject3D("mesh").children[0],e=this.skinnedMesh=n.getObjectByProperty("type","SkinnedMesh");this.skinnedMesh&&(this.bones=e.skeleton.bones,this.el.removeObject3D("mesh"),n.position.set(0,0,0),n.rotation.set(0,0,0),e.frustumCulled=!1,e.material=new B.MeshStandardMaterial,this.updateModelMaterial(),this.setupChildrenEntities(),this.el.setObject3D("mesh",n),this.el.emit("controllermodelready",{name:"hand-tracking-controls",model:this.data.model,rayOrigin:new B.Vector3(0,0,0)}))},setupChildrenEntities:function(){for(var n=this.el.children,e=0;e<n.length;++e)n[e]instanceof Pi&&this.addChildEntity(n[e])},addChildEntity:function(n){n instanceof Pi&&this.wristObject3D.add(n.object3D)}}),vt("hand-tracking-grab-controls",{schema:{hand:{default:"right",oneOf:["left","right"]},color:{type:"color",default:"white"},hoverColor:{type:"color",default:"#538df1"},hoverEnabled:{default:!1}},init:function(){var n,e=this.el,t=this.data;n=t.hand==="right"?"components.hand-tracking-controls.bones.3":"components.hand-tracking-controls.bones.21",e.setAttribute("hand-tracking-controls",{hand:t.hand}),e.setAttribute("obb-collider",{trackedObject3D:n,size:.04}),this.auxMatrix=new B.Matrix4,this.onCollisionStarted=this.onCollisionStarted.bind(this),this.el.addEventListener("obbcollisionstarted",this.onCollisionStarted),this.onCollisionEnded=this.onCollisionEnded.bind(this),this.el.addEventListener("obbcollisionended",this.onCollisionEnded),this.onPinchStarted=this.onPinchStarted.bind(this),this.el.addEventListener("pinchstarted",this.onPinchStarted),this.onPinchEnded=this.onPinchEnded.bind(this),this.el.addEventListener("pinchended",this.onPinchEnded)},transferEntityOwnership:function(){for(var n,e=this.el.sceneEl.querySelectorAll("[hand-tracking-grab-controls]"),t=0;t<e.length;++t)(n=e[t].components["hand-tracking-grab-controls"])!==this&&this.grabbedEl&&this.grabbedEl===n.grabbedEl&&n.releaseGrabbedEntity();return!1},onCollisionStarted:function(n){var e=n.detail.withEl;this.collidedEl||e.getAttribute("grabbable")&&(this.collidedEl=e,this.grabbingObject3D=n.detail.trackedObject3D,this.data.hoverEnabled&&this.el.setAttribute("hand-tracking-controls","modelColor",this.data.hoverColor))},onCollisionEnded:function(){this.collidedEl=void 0,this.grabbedEl||(this.grabbingObject3D=void 0,this.data.hoverEnabled&&this.el.setAttribute("hand-tracking-controls","modelColor",this.data.color))},onPinchStarted:function(n){this.collidedEl&&(this.grabbedEl=this.collidedEl,this.transferEntityOwnership(),this.grab())},onPinchEnded:function(){this.releaseGrabbedEntity()},releaseGrabbedEntity:function(){var n=this.grabbedEl;if(n){var e=n.object3D,t=e.parent,i=this.originalParent;e.applyMatrix4(t.matrixWorld),e.applyMatrix4(this.auxMatrix.copy(i.matrixWorld).invert()),t.remove(e),i.add(e),this.el.emit("grabended",{grabbedEl:n}),this.grabbedEl=void 0,this.originalParent=void 0}},grab:function(){var n=this.grabbedEl,e=n.object3D,t=e.parent;this.originalParent=t;var i=this.el.components["hand-tracking-controls"].wristObject3D;e.applyMatrix4(t.matrixWorld),e.applyMatrix4(this.auxMatrix.copy(i.matrixWorld).invert()),t.remove(e),i.add(e),this.el.emit("grabstarted",{grabbedEl:n})}});var Yte={toonLeft:pi+"controllers/hands/leftHand.glb",toonRight:pi+"controllers/hands/rightHand.glb",lowPolyLeft:pi+"controllers/hands/leftHandLow.glb",lowPolyRight:pi+"controllers/hands/rightHandLow.glb",highPolyLeft:pi+"controllers/hands/leftHandHigh.glb",highPolyRight:pi+"controllers/hands/rightHandHigh.glb"},K_="Point",J_="Fist",H3="Thumb Up",yv={};function G3(n,e){var t;if(n)return(t=yv[n])==="grip"?t+(e?"close":"open"):t==="point"?t+(e?"up":"down"):t==="pointing"||t==="pistol"?t+(e?"start":"end"):void 0}yv[J_]="grip",yv[H3]="pistol",yv[K_]="pointing",vt("hand-controls",{schema:{color:{default:"white",type:"color"},hand:{default:"left"},handModelStyle:{default:"lowPoly",oneOf:["lowPoly","highPoly","toon"]}},after:["tracked-controls"],init:function(){var n=this,e=this.el;this.pressedButtons={},this.touchedButtons={},this.loader=new k2,this.loader.setCrossOrigin("anonymous"),this.onGripDown=function(){n.handleButton("grip","down")},this.onGripUp=function(){n.handleButton("grip","up")},this.onTrackpadDown=function(){n.handleButton("trackpad","down")},this.onTrackpadUp=function(){n.handleButton("trackpad","up")},this.onTrackpadTouchStart=function(){n.handleButton("trackpad","touchstart")},this.onTrackpadTouchEnd=function(){n.handleButton("trackpad","touchend")},this.onTriggerDown=function(){n.handleButton("trigger","down")},this.onTriggerUp=function(){n.handleButton("trigger","up")},this.onTriggerTouchStart=function(){n.handleButton("trigger","touchstart")},this.onTriggerTouchEnd=function(){n.handleButton("trigger","touchend")},this.onGripTouchStart=function(){n.handleButton("grip","touchstart")},this.onGripTouchEnd=function(){n.handleButton("grip","touchend")},this.onThumbstickDown=function(){n.handleButton("thumbstick","down")},this.onThumbstickUp=function(){n.handleButton("thumbstick","up")},this.onAorXTouchStart=function(){n.handleButton("AorX","touchstart")},this.onAorXTouchEnd=function(){n.handleButton("AorX","touchend")},this.onBorYTouchStart=function(){n.handleButton("BorY","touchstart")},this.onBorYTouchEnd=function(){n.handleButton("BorY","touchend")},this.onSurfaceTouchStart=function(){n.handleButton("surface","touchstart")},this.onSurfaceTouchEnd=function(){n.handleButton("surface","touchend")},this.onControllerConnected=this.onControllerConnected.bind(this),this.onControllerDisconnected=this.onControllerDisconnected.bind(this),e.addEventListener("controllerconnected",this.onControllerConnected),e.addEventListener("controllerdisconnected",this.onControllerDisconnected),e.object3D.visible=!1},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},tick:function(n,e){var t=this.el.getObject3D("mesh");t&&t.mixer&&t.mixer.update(e/1e3)},onControllerConnected:function(n){var e=this.el,t=this.data.hand,i=this.el.getObject3D("mesh");e.object3D.visible=!0;var r=t==="left"?Math.PI/2:-Math.PI/2,s=e.sceneEl.hasWebXR?-Math.PI/2:0;n.detail.name==="pico-controls"&&(s+=Math.PI/4),i.position.set(0,0,0),i.rotation.set(s,0,r)},onControllerDisconnected:function(){this.el.object3D.visible=!1},addEventListeners:function(){var n=this.el;n.addEventListener("gripdown",this.onGripDown),n.addEventListener("gripup",this.onGripUp),n.addEventListener("trackpaddown",this.onTrackpadDown),n.addEventListener("trackpadup",this.onTrackpadUp),n.addEventListener("trackpadtouchstart",this.onTrackpadTouchStart),n.addEventListener("trackpadtouchend",this.onTrackpadTouchEnd),n.addEventListener("triggerdown",this.onTriggerDown),n.addEventListener("triggerup",this.onTriggerUp),n.addEventListener("triggertouchstart",this.onTriggerTouchStart),n.addEventListener("triggertouchend",this.onTriggerTouchEnd),n.addEventListener("griptouchstart",this.onGripTouchStart),n.addEventListener("griptouchend",this.onGripTouchEnd),n.addEventListener("thumbstickdown",this.onThumbstickDown),n.addEventListener("thumbstickup",this.onThumbstickUp),n.addEventListener("abuttontouchstart",this.onAorXTouchStart),n.addEventListener("abuttontouchend",this.onAorXTouchEnd),n.addEventListener("bbuttontouchstart",this.onBorYTouchStart),n.addEventListener("bbuttontouchend",this.onBorYTouchEnd),n.addEventListener("xbuttontouchstart",this.onAorXTouchStart),n.addEventListener("xbuttontouchend",this.onAorXTouchEnd),n.addEventListener("ybuttontouchstart",this.onBorYTouchStart),n.addEventListener("ybuttontouchend",this.onBorYTouchEnd),n.addEventListener("surfacetouchstart",this.onSurfaceTouchStart),n.addEventListener("surfacetouchend",this.onSurfaceTouchEnd)},removeEventListeners:function(){var n=this.el;n.removeEventListener("gripdown",this.onGripDown),n.removeEventListener("gripup",this.onGripUp),n.removeEventListener("trackpaddown",this.onTrackpadDown),n.removeEventListener("trackpadup",this.onTrackpadUp),n.removeEventListener("trackpadtouchstart",this.onTrackpadTouchStart),n.removeEventListener("trackpadtouchend",this.onTrackpadTouchEnd),n.removeEventListener("triggerdown",this.onTriggerDown),n.removeEventListener("triggerup",this.onTriggerUp),n.removeEventListener("triggertouchstart",this.onTriggerTouchStart),n.removeEventListener("triggertouchend",this.onTriggerTouchEnd),n.removeEventListener("griptouchstart",this.onGripTouchStart),n.removeEventListener("griptouchend",this.onGripTouchEnd),n.removeEventListener("thumbstickdown",this.onThumbstickDown),n.removeEventListener("thumbstickup",this.onThumbstickUp),n.removeEventListener("abuttontouchstart",this.onAorXTouchStart),n.removeEventListener("abuttontouchend",this.onAorXTouchEnd),n.removeEventListener("bbuttontouchstart",this.onBorYTouchStart),n.removeEventListener("bbuttontouchend",this.onBorYTouchEnd),n.removeEventListener("xbuttontouchstart",this.onAorXTouchStart),n.removeEventListener("xbuttontouchend",this.onAorXTouchEnd),n.removeEventListener("ybuttontouchstart",this.onBorYTouchStart),n.removeEventListener("ybuttontouchend",this.onBorYTouchEnd),n.removeEventListener("surfacetouchstart",this.onSurfaceTouchStart),n.removeEventListener("surfacetouchend",this.onSurfaceTouchEnd)},update:function(n){var e,t=this.el,i=this.data.hand,r=this.data.handModelStyle,s=this.data.color,a=this;if(e={hand:i,model:!1},i!==n){var o=Yte[r+i.charAt(0).toUpperCase()+i.slice(1)];this.loader.load(o,function(c){var h=c.scene.children[0];h.mixer=new B.AnimationMixer(h),a.clips=c.animations,t.setObject3D("mesh",h),h.traverse(function(d){d.isMesh&&(d.material.color=new B.Color(s))}),t.setAttribute("magicleap-controls",e),t.setAttribute("vive-controls",e),t.setAttribute("meta-touch-controls",e),t.setAttribute("pico-controls",e),t.setAttribute("windows-motion-controls",e),t.setAttribute("hp-mixed-reality-controls",e)})}},remove:function(){this.el.removeObject3D("mesh")},handleButton:function(n,e){var t,i=e==="down",r=e==="touchstart";if(e.indexOf("touch")===0){if(r===this.touchedButtons[n])return;this.touchedButtons[n]=r}else{if(i===this.pressedButtons[n])return;this.pressedButtons[n]=i}t=this.gesture,this.gesture=this.determineGesture(),this.gesture!==t&&(this.animateGesture(this.gesture,t),this.emitGestureEvents(this.gesture,t))},determineGesture:function(){var n,e,t,i=this.pressedButtons.grip,r=this.pressedButtons.surface||this.touchedButtons.surface,s=this.pressedButtons.trackpad||this.touchedButtons.trackpad,a=this.pressedButtons.trigger||this.touchedButtons.trigger,o=this.touchedButtons.AorX||this.touchedButtons.BorY;return e=this.el.components["tracked-controls"],(t=e&&e.controller)&&(t.id&&t.id.indexOf("OpenVR ")===0||t.profiles&&t.profiles[0]&&t.profiles[0]==="htc-vive")?i||a?n=J_:s&&(n=K_):i?n=r||o||s?a?J_:K_:a?H3:"Point + Thumb":a&&(n="Hold"),n},getClip:function(n){var e,t;for(t=0;t<this.clips.length;t++)if((e=this.clips[t]).name===n)return e},animateGesture:function(n,e){n?this.playAnimation(n||"Open",e,!1):this.playAnimation(e,e,!0)},emitGestureEvents:function(n,e){var t,i=this.el;e!==n&&((t=G3(e,!1))&&i.emit(t),(t=G3(n,!0))&&i.emit(t))},playAnimation:function(n,e,t){var i,r,s=this.el.getObject3D("mesh");if(s){if(i=this.getClip(n),r=s.mixer.clipAction(i),t)return r.paused=!1,void(r.timeScale=-1);if(r.clampWhenFinished=!0,r.loop=B.LoopOnce,r.repetitions=0,r.timeScale=1,r.time=0,r.weight=1,!e)return s.mixer.stopAllAction(),void r.play();i=this.getClip(e),r.reset(),r.play(),s.mixer.clipAction(i).crossFadeTo(r,.15,!0)}}}),vt("hide-on-enter-ar",{init:function(){var n=this;this.el.sceneEl.addEventListener("enter-vr",function(){n.el.sceneEl.is("ar-mode")&&(n.el.object3D.visible=!1)}),this.el.sceneEl.addEventListener("exit-vr",function(){n.el.object3D.visible=!0})}}),vt("hide-on-enter-vr",{init:function(){var n=this;this.el.sceneEl.addEventListener("enter-vr",function(){n.el.sceneEl.is("vr-mode")&&(n.el.object3D.visible=!1)}),this.el.sceneEl.addEventListener("exit-vr",function(){n.el.object3D.visible=!0})}});var V3="hp-mixed-reality",Kte=pi+"controllers/hp/mixed-reality/",Jte={x:0,y:0,z:.06},Zte={_x:Math.PI/4,_y:0,_z:0,_order:"XYZ"},$te=(vt("hp-mixed-reality-controls",{schema:{hand:{default:"none"},model:{default:!0}},mapping:{left:{axes:{touchpad:[2,3]},buttons:["trigger","grip","none","thumbstick","xbutton","ybutton"]},right:{axes:{touchpad:[2,3]},buttons:["trigger","grip","none","thumbstick","abutton","bbutton"]}},init:function(){var n=this;this.controllerPresent=!1,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(e){Lt(e.detail.id,"down",n,n.data.hand)},this.onButtonUp=function(e){Lt(e.detail.id,"up",n,n.data.hand)},this.onButtonTouchEnd=function(e){Lt(e.detail.id,"touchend",n,n.data.hand)},this.onButtonTouchStart=function(e){Lt(e.detail.id,"touchstart",n,n.data.hand)},this.previousButtonValues={},this.bindMethods()},update:function(){var n=this.data;this.controllerIndex=n.hand==="right"?0:n.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var n=this.el;n.addEventListener("buttonchanged",this.onButtonChanged),n.addEventListener("buttondown",this.onButtonDown),n.addEventListener("buttonup",this.onButtonUp),n.addEventListener("touchstart",this.onButtonTouchStart),n.addEventListener("touchend",this.onButtonTouchEnd),n.addEventListener("axismove",this.onAxisMoved),n.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var n=this.el;n.removeEventListener("buttonchanged",this.onButtonChanged),n.removeEventListener("buttondown",this.onButtonDown),n.removeEventListener("buttonup",this.onButtonUp),n.removeEventListener("touchstart",this.onButtonTouchStart),n.removeEventListener("touchend",this.onButtonTouchEnd),n.removeEventListener("axismove",this.onAxisMoved),n.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var n=this.data;Ps(this,V3,{index:this.controllerIndex,hand:n.hand})},injectTrackedControls:function(){var n=this.el,e=this.data;n.setAttribute("tracked-controls",{idPrefix:V3,hand:e.hand,controller:this.controllerIndex}),this.data.model&&this.el.setAttribute("gltf-model",Kte+this.data.hand+".glb")},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(n){var e,t=this.mapping[this.data.hand].buttons[n.detail.id];t&&(t==="trigger"&&(e=n.detail.state.value,console.log("analog value of trigger press: "+e)),this.el.emit(t+"changed",n.detail.state))},onModelLoaded:function(n){var e=n.detail.model;this.data.model&&(e.position.copy(Jte),e.rotation.copy(Zte),this.el.emit("controllermodelready",{name:"hp-mixed-reality-controls",model:this.data.model,rayOrigin:new B.Vector3(0,0,0)}))},onAxisMoved:function(n){ta(this,this.mapping.axes,n)}}),mn("components:layer:warn"));function W3(n,e,t){return(e.dot(n)-e.dot(t))/e.length()}vt("layer",{schema:{type:{default:"quad",oneOf:["quad","monocubemap","stereocubemap"]},src:{type:"map"},rotateCubemap:{default:!1},width:{default:0},height:{default:0}},init:function(){var n=this.el.sceneEl.renderer.getContext();this.quaternion=new B.Quaternion,this.position=new B.Vector3,this.bindMethods(),this.needsRedraw=!1,this.frameBuffer=n.createFramebuffer();var e=this.el.sceneEl.getAttribute("webxr"),t=e.requiredFeatures;t.indexOf("layers")===-1&&(t.push("layers"),this.el.sceneEl.setAttribute("webxr",e)),this.el.sceneEl.addEventListener("enter-vr",this.onEnterVR),this.el.sceneEl.addEventListener("exit-vr",this.onExitVR)},bindMethods:function(){this.onRequestedReferenceSpace=this.onRequestedReferenceSpace.bind(this),this.onEnterVR=this.onEnterVR.bind(this),this.onExitVR=this.onExitVR.bind(this)},update:function(n){this.data.src!==n.src&&this.updateSrc()},updateSrc:function(){var n=this.data.type;this.texture=void 0,n!=="quad"?n!=="monocubemap"&&n!=="stereocubemap"||this.loadCubeMapImages():this.loadQuadImage()},loadCubeMapImages:function(){var n,e=this.xrGLFactory,t=this.el.sceneEl.frame,i=this.data.src,r=this.data.type;this.visibilityChanged=!1,this.layer&&(r!=="monocubemap"&&r!=="stereocubemap"||(i.complete?this.pendingCubeMapUpdate=!1:this.pendingCubeMapUpdate=!0,this.loadingScreen?this.loadingScreen=!1:this.loadingScreen=!0,r==="monocubemap"?(n=e.getSubImage(this.layer,t),this.loadCubeMapImage(n.colorTexture,i,0)):(n=e.getSubImage(this.layer,t,"left"),this.loadCubeMapImage(n.colorTexture,i,0),n=e.getSubImage(this.layer,t,"right"),this.loadCubeMapImage(n.colorTexture,i,6))))},loadQuadImage:function(){var n=this.data.src,e=this;this.el.sceneEl.systems.material.loadTexture(n,{src:n},function(t){e.el.sceneEl.renderer.initTexture(t),e.texture=t,n.tagName==="VIDEO"&&setTimeout(function(){e.textureIsVideo=!0},1e3),e.layer&&(e.layer.height=e.data.height/2||e.texture.image.height/1e3,e.layer.width=e.data.width/2||e.texture.image.width/1e3,e.needsRedraw=!0),e.updateQuadPanel()})},preGenerateCubeMapTextures:function(n,e){this.data.type==="monocubemap"?this.generateCubeMapTextures(n,0,e):(this.generateCubeMapTextures(n,0,e),this.generateCubeMapTextures(n,6,e))},generateCubeMapTextures:function(n,e,t){for(var i,r,s=this.data,a=this.cubeFaceSize,o=Math.min(n.width,n.height),c=[],h=0;h<6;h++){var d=document.createElement("CANVAS");d.width=d.height=a;var p=d.getContext("2d");s.rotateCubemap&&(h!==2&&h!==3||(p.save(),p.translate(a,a),p.rotate(Math.PI))),p.drawImage(n,(h+e)*o,0,o,o,0,0,a,a),p.restore(),t&&t(),c.push(d)}return s.rotateCubemap&&(i=c[0],r=c[1],c[0]=r,c[1]=i,i=c[4],r=c[5],c[4]=r,c[5]=i),t&&t(),c},loadCubeMapImage:function(n,e,t){var i,r=this.el.sceneEl.renderer.getContext();r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),r.bindTexture(r.TEXTURE_CUBE_MAP,n),i=!e.complete||this.loadingScreen?this.loadingScreenImages:this.generateCubeMapTextures(e,t);var s=0;i.forEach(function(a,o){r.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,0,0,r.RGBA,r.UNSIGNED_BYTE,a),s=r.getError()}),s!==0&&console.log("renderingError, WebGL Error Code: "+s),r.bindTexture(r.TEXTURE_CUBE_MAP,null)},tick:function(){this.el.sceneEl.xrSession&&this.referenceSpace&&(this.layer||!this.el.sceneEl.is("vr-mode")&&!this.el.sceneEl.is("ar-mode")||this.initLayer(),this.updateTransform(),this.data.src.complete&&(this.pendingCubeMapUpdate||this.loadingScreen||this.visibilityChanged)&&this.loadCubeMapImages(),(this.needsRedraw||this.layer.needsRedraw||this.textureIsVideo)&&(this.data.type==="quad"&&this.draw(),this.needsRedraw=!1))},initLayer:function(){var n=this,e=this.data.type;this.el.sceneEl.xrSession.onvisibilitychange=function(t){n.visibilityChanged=t.session.visibilityState!=="hidden"},e!=="quad"?e!=="monocubemap"&&e!=="stereocubemap"||this.initCubeMapLayer():this.initQuadLayer()},initQuadLayer:function(){var n=this.el.sceneEl,e=n.renderer.getContext(),t=this.xrGLFactory=new XRWebGLBinding(n.xrSession,e);this.texture&&(this.layer=t.createQuadLayer({space:this.referenceSpace,viewPixelHeight:2048,viewPixelWidth:2048,height:this.data.height/2||this.texture.image.height/1e3,width:this.data.width/2||this.texture.image.width/1e3}),this.initLoadingScreenImages(),n.renderer.xr.addLayer(this.layer))},initCubeMapLayer:function(){var n=this.data.src,e=this.el.sceneEl,t=e.renderer.getContext(),i=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),r=this.cubeFaceSize=Math.min(i,Math.min(n.width,n.height)),s=this.xrGLFactory=new XRWebGLBinding(e.xrSession,t);this.layer=s.createCubeLayer({space:this.referenceSpace,viewPixelWidth:r,viewPixelHeight:r,layout:this.data.type==="monocubemap"?"mono":"stereo",isStatic:!1}),this.initLoadingScreenImages(),this.loadCubeMapImages(),e.renderer.xr.addLayer(this.layer)},initLoadingScreenImages:function(){for(var n=this.cubeFaceSize,e=this.loadingScreenImages=[],t=0;t<6;t++){var i=document.createElement("CANVAS");i.width=i.height=n;var r=i.getContext("2d");i.width=i.height=n,r.fillStyle="black",r.fillRect(0,0,n,n),t!==2&&t!==3&&(r.translate(n,0),r.scale(-1,1),r.fillStyle="white",r.font="30px Arial",r.fillText("Loading",n/2,n/2)),e.push(i)}},destroyLayer:function(){this.layer&&(this.el.sceneEl.renderer.xr.removeLayer(this.layer),this.layer.destroy(),this.layer=void 0)},toggleCompositorLayer:function(){this.enableCompositorLayer(!this.layerEnabled)},enableCompositorLayer:function(n){this.layerEnabled=n,this.quadPanelEl.object3D.visible=!this.layerEnabled},updateQuadPanel:function(){var n=this.quadPanelEl;this.quadPanelEl||(n=this.quadPanelEl=document.createElement("a-entity"),this.el.appendChild(n)),n.setAttribute("material",{shader:"flat",src:this.data.src,transparent:!0}),n.setAttribute("geometry",{primitive:"plane",height:this.data.height||this.texture.image.height/1e3,width:this.data.width||this.texture.image.height/1e3})},draw:function(){var n=this.el.sceneEl,e=this.el.sceneEl.renderer.getContext(),t=this.xrGLFactory.getSubImage(this.layer,n.frame),i=n.renderer.properties.get(this.texture).__webglTexture,r=e.getParameter(e.FRAMEBUFFER_BINDING);e.viewport(t.viewport.x,t.viewport.y,t.viewport.width,t.viewport.height),e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.colorTexture,0),function(s,a,o,c){var h=s.createFramebuffer(),d=o.viewport.x,p=o.viewport.y,m=o.viewport.x+o.viewport.width,A=o.viewport.y+o.viewport.height;c.tagName==="VIDEO"&&(s.bindTexture(s.TEXTURE_2D,a),s.texSubImage2D(s.TEXTURE_2D,0,0,0,c.width,c.height,s.RGB,s.UNSIGNED_BYTE,c)),s.bindFramebuffer(s.READ_FRAMEBUFFER,h),s.framebufferTexture2D(s.READ_FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,a,0),s.readBuffer(s.COLOR_ATTACHMENT0),s.blitFramebuffer(0,0,c.width,c.height,d,p,m,A,s.COLOR_BUFFER_BIT,s.NEAREST),s.bindFramebuffer(s.READ_FRAMEBUFFER,null),s.deleteFramebuffer(h)}(e,i,t,this.data.src),e.bindFramebuffer(e.FRAMEBUFFER,r)},updateTransform:function(){var n=this.el,e=this.position,t=this.quaternion;n.object3D.updateMatrixWorld(),e.setFromMatrixPosition(n.object3D.matrixWorld),t.setFromRotationMatrix(n.object3D.matrixWorld),this.layerEnabled||e.set(0,0,1e8),this.layer.transform=new XRRigidTransform(e,t)},onEnterVR:function(){var n=this.el.sceneEl,e=n.xrSession;n.hasWebXR&&XRWebGLBinding&&e?(e.requestReferenceSpace("local-floor").then(this.onRequestedReferenceSpace),this.layerEnabled=!0,this.quadPanelEl&&(this.quadPanelEl.object3D.visible=!1),this.data.src.play&&this.data.src.play()):$te("The layer component requires WebXR and the layers API enabled")},onExitVR:function(){this.quadPanelEl&&(this.quadPanelEl.object3D.visible=!0),this.destroyLayer()},onRequestedReferenceSpace:function(n){this.referenceSpace=n}}),vt("laser-controls",{schema:{hand:{default:"right"},model:{default:!0},defaultModelColor:{type:"color",default:"grey"}},init:function(){var n=this.config,e=this.data,t=this.el,i=this,r={hand:e.hand,model:e.model};function s(a){var o=n[a.detail.name];if(o){var c=Zr({showLine:!0},o.raycaster||{});a.detail.rayOrigin&&(c.origin=a.detail.rayOrigin.origin,c.direction=a.detail.rayOrigin.direction,c.showLine=!0),a.detail.rayOrigin||!i.modelReady?t.setAttribute("raycaster",c):t.setAttribute("raycaster","showLine",!0),t.setAttribute("cursor",Zr({fuse:!1},o.cursor))}}t.setAttribute("hp-mixed-reality-controls",r),t.setAttribute("magicleap-controls",r),t.setAttribute("oculus-go-controls",r),t.setAttribute("meta-touch-controls",r),t.setAttribute("pico-controls",r),t.setAttribute("valve-index-controls",r),t.setAttribute("vive-controls",r),t.setAttribute("vive-focus-controls",r),t.setAttribute("windows-motion-controls",r),t.setAttribute("generic-tracked-controller-controls",{hand:r.hand}),t.addEventListener("controllerconnected",s),t.addEventListener("controllerdisconnected",function(a){n[a.detail.name]&&t.setAttribute("raycaster","showLine",!1)}),t.addEventListener("controllermodelready",function(a){s(a),i.modelReady=!0})},config:{"generic-tracked-controller-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"hp-mixed-reality-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:0,z:0}}},"magicleap-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"oculus-go-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:5e-4,z:0}}},"meta-touch-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:0,z:0}}},"pico-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"valve-index-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"vive-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"vive-focus-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"windows-motion-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{showLine:!1}}}});var Z_,L0,O0,P0,To,q3,$_,dp,fp,U0,j3=B.MathUtils.degToRad,ene=mn("components:light:warn"),tne=new B.CubeTextureLoader,Kc={};function X3(n,e){return!(!n||!e)&&n.x===e.x&&n.y===e.y&&n.z===e.z}vt("light",{schema:{angle:{default:60,if:{type:["spot"]}},color:{type:"color",if:{type:["ambient","directional","hemisphere","point","spot"]}},envMap:{default:"",if:{type:["probe"]}},groundColor:{type:"color",if:{type:["hemisphere"]}},decay:{default:1,if:{type:["point","spot"]}},distance:{default:0,min:0,if:{type:["point","spot"]}},intensity:{default:3.14,min:0,if:{type:["ambient","directional","hemisphere","point","spot","probe"]}},penumbra:{default:0,min:0,max:1,if:{type:["spot"]}},type:{default:"directional",oneOf:["ambient","directional","hemisphere","point","spot","probe"],schemaChange:!0},target:{type:"selector",if:{type:["spot","directional"]}},castShadow:{default:!1,if:{type:["point","spot","directional"]}},shadowBias:{default:0,if:{castShadow:!0}},shadowCameraFar:{default:500,if:{castShadow:!0}},shadowCameraFov:{default:90,if:{castShadow:!0}},shadowCameraNear:{default:.5,if:{castShadow:!0}},shadowCameraTop:{default:5,if:{castShadow:!0}},shadowCameraRight:{default:5,if:{castShadow:!0}},shadowCameraBottom:{default:-5,if:{castShadow:!0}},shadowCameraLeft:{default:-5,if:{castShadow:!0}},shadowCameraVisible:{default:!1,if:{castShadow:!0}},shadowCameraAutomatic:{default:"",if:{type:["directional"]}},shadowMapHeight:{default:512,if:{castShadow:!0}},shadowMapWidth:{default:512,if:{castShadow:!0}},shadowRadius:{default:1,if:{castShadow:!0}}},init:function(){var n=this.el;this.light=null,this.defaultTarget=null,this.system.registerLight(n)},update:function(n){var e=this.data,t=F5(e,n),i=this.light,r=this;if(!i||"type"in t)this.setLight(this.data),this.updateShadow();else{var s=!1;Object.keys(t).forEach(function(a){var o=e[a];switch(a){case"color":i.color.set(o);break;case"groundColor":i.groundColor.set(o);break;case"angle":i.angle=j3(o);break;case"target":o===null?e.type!=="spot"&&e.type!=="directional"||(i.target=r.defaultTarget):o.hasLoaded?r.onSetTarget(o,i):o.addEventListener("loaded",r.onSetTarget.bind(r,o,i));break;case"envMap":r.updateProbeMap(e,i);break;case"castShadow":case"shadowBias":case"shadowCameraFar":case"shadowCameraFov":case"shadowCameraNear":case"shadowCameraTop":case"shadowCameraRight":case"shadowCameraBottom":case"shadowCameraLeft":case"shadowCameraVisible":case"shadowMapHeight":case"shadowMapWidth":case"shadowRadius":s||(r.updateShadow(),s=!0);break;case"shadowCameraAutomatic":e.shadowCameraAutomatic?r.shadowCameraAutomaticEls=Array.from(document.querySelectorAll(e.shadowCameraAutomatic)):r.shadowCameraAutomaticEls=[];break;default:i[a]=o}})}},tick:(Z_=new B.Box3,L0=new B.Vector3,O0=new B.Vector3,P0=new B.Matrix4,To=new B.Sphere,q3=new B.Vector3,function(){if(this.data.type==="directional"&&this.light.shadow&&this.light.shadow.camera instanceof B.OrthographicCamera&&this.shadowCameraAutomaticEls.length){var n=this.light.shadow.camera;n.getWorldDirection(L0),n.getWorldPosition(O0),P0.copy(n.matrixWorld),P0.invert(),n.near=1,n.left=1e5,n.right=-1e5,n.top=-1e5,n.bottom=1e5,this.shadowCameraAutomaticEls.forEach(function(e){Z_.setFromObject(e.object3D),Z_.getBoundingSphere(To);var t,i,r,s,a,o=W3(O0,L0,To.center),c=(t=O0,i=L0,r=To.center,s=q3,a=W3(t,i,r),s.copy(i),s.multiplyScalar(a),s.add(r),s).applyMatrix4(P0);n.near=Math.min(-o-To.radius-1,n.near),n.left=Math.min(-To.radius+c.x,n.left),n.right=Math.max(To.radius+c.x,n.right),n.top=Math.max(To.radius+c.y,n.top),n.bottom=Math.min(-To.radius+c.y,n.bottom)}),n.updateProjectionMatrix()}}),setLight:function(n){var e=this.el,t=this.getLight(n);t&&(this.light&&e.removeObject3D("light"),this.light=t,this.light.el=e,e.setObject3D("light",this.light),n.type!=="spot"&&n.type!=="directional"&&n.type!=="hemisphere"||e.getObject3D("light").translateY(-1),n.type==="spot"&&(e.setObject3D("light-target",this.defaultTarget),e.getObject3D("light-target").position.set(0,0,-1)),n.shadowCameraAutomatic?this.shadowCameraAutomaticEls=Array.from(document.querySelectorAll(n.shadowCameraAutomatic)):this.shadowCameraAutomaticEls=[])},updateShadow:function(){var n=this.el,e=this.data,t=this.light;t.castShadow=e.castShadow;var i=n.getObject3D("cameraHelper");if(e.shadowCameraVisible&&!i?(i=new B.CameraHelper(t.shadow.camera),n.setObject3D("cameraHelper",i)):!e.shadowCameraVisible&&i&&n.removeObject3D("cameraHelper"),!e.castShadow)return t;t.shadow.bias=e.shadowBias,t.shadow.radius=e.shadowRadius,t.shadow.mapSize.height=e.shadowMapHeight,t.shadow.mapSize.width=e.shadowMapWidth,t.shadow.camera.near=e.shadowCameraNear,t.shadow.camera.far=e.shadowCameraFar,t.shadow.camera instanceof B.OrthographicCamera?(t.shadow.camera.top=e.shadowCameraTop,t.shadow.camera.right=e.shadowCameraRight,t.shadow.camera.bottom=e.shadowCameraBottom,t.shadow.camera.left=e.shadowCameraLeft):t.shadow.camera.fov=e.shadowCameraFov,t.shadow.camera.updateProjectionMatrix(),i&&i.update()},getLight:function(n){var e=n.angle,t=new B.Color(n.color);t=t.getHex();var i=n.decay,r=n.distance,s=new B.Color(n.groundColor);s=s.getHex();var a=n.intensity,o=n.type,c=n.target,h=null;switch(o.toLowerCase()){case"ambient":return new B.AmbientLight(t,a);case"directional":return h=new B.DirectionalLight(t,a),this.defaultTarget=h.target,c&&(c.hasLoaded?this.onSetTarget(c,h):c.addEventListener("loaded",this.onSetTarget.bind(this,c,h))),h;case"hemisphere":return new B.HemisphereLight(t,s,a);case"point":return new B.PointLight(t,a,r,i);case"spot":return h=new B.SpotLight(t,a,r,j3(e),n.penumbra,i),this.defaultTarget=h.target,c&&(c.hasLoaded?this.onSetTarget(c,h):c.addEventListener("loaded",this.onSetTarget.bind(this,c,h))),h;case"probe":return h=new B.LightProbe,this.updateProbeMap(n,h),h;default:ene("%s is not a valid light type. Choose from ambient, directional, hemisphere, point, spot.",o)}},updateProbeMap:function(n,e){n.envMap?(Kc[n.envMap]===void 0&&(Kc[n.envMap]=new window.Promise(function(t){L5(n.envMap,function(i){tne.load(i,function(r){var s=E5.fromCubeTexture(r);Kc[n.envMap]=s,t(s)})})})),Kc[n.envMap]instanceof window.Promise?Kc[n.envMap].then(function(t){e.copy(t)}):Kc[n.envMap]instanceof B.LightProbe&&e.copy(Kc[n.envMap])):e.copy(new B.LightProbe)},onSetTarget:function(n,e){e.target=n.object3D},remove:function(){var n=this.el;n.removeObject3D("light"),n.getObject3D("cameraHelper")&&n.removeObject3D("cameraHelper")}}),vt("line",{schema:{start:{type:"vec3",default:{x:0,y:0,z:0}},end:{type:"vec3",default:{x:0,y:0,z:0}},color:{type:"color",default:"#74BEC1"},opacity:{type:"number",default:1},visible:{default:!0}},multiple:!0,init:function(){var n,e,t=this.data;e=this.material=new B.LineBasicMaterial({color:t.color,opacity:t.opacity,transparent:t.opacity<1,visible:t.visible}),(n=this.geometry=new B.BufferGeometry).setAttribute("position",new B.BufferAttribute(new Float32Array(6),3)),this.line=new B.Line(n,e),this.el.setObject3D(this.attrName,this.line)},update:function(n){var e=this.data,t=this.geometry,i=!1,r=this.material,s=t.attributes.position.array;X3(e.start,n.start)||(s[0]=e.start.x,s[1]=e.start.y,s[2]=e.start.z,i=!0),X3(e.end,n.end)||(s[3]=e.end.x,s[4]=e.end.y,s[5]=e.end.z,i=!0),i&&(t.attributes.position.needsUpdate=!0,t.computeBoundingSphere()),r.color.setStyle(e.color),r.opacity=e.opacity,r.transparent=e.opacity<1,r.visible=e.visible},remove:function(){this.el.removeObject3D(this.attrName,this.line)}}),vt("link",{schema:{backgroundColor:{default:"red",type:"color"},borderColor:{default:"white",type:"color"},highlighted:{default:!1},highlightedColor:{default:"#24CAFF",type:"color"},href:{default:""},image:{type:"asset"},on:{default:"click"},peekMode:{default:!1},title:{default:""},titleColor:{default:"white",type:"color"},visualAspectEnabled:{default:!1}},init:function(){this.navigate=this.navigate.bind(this),this.previousQuaternion=void 0,this.quaternionClone=new B.Quaternion,this.hiddenEls=[]},update:function(n){var e,t,i=this.data,r=this.el;if(i.visualAspectEnabled){var s=this.el.getAttribute("scale");this.previewDistance=15*(s.x+s.y)/2,this.initVisualAspect(),e=i.highlighted?i.highlightedColor:i.backgroundColor,t=i.highlighted?i.highlightedColor:i.borderColor,r.setAttribute("material","backgroundColor",e),r.setAttribute("material","strokeColor",t),i.on!==n.on&&this.updateEventListener(),n.peekMode!==void 0&&i.peekMode!==n.peekMode&&this.updatePeekMode(),i.image&&n.image!==i.image&&r.setAttribute("material","pano",typeof i.image=="string"?i.image:i.image.src)}},updatePeekMode:function(){var n=this.el,e=this.sphereEl;this.data.peekMode?(this.hideAll(),n.getObject3D("mesh").visible=!1,e.setAttribute("visible",!0)):(this.showAll(),n.getObject3D("mesh").visible=!0,e.setAttribute("visible",!1))},play:function(){this.updateEventListener()},pause:function(){this.removeEventListener()},updateEventListener:function(){var n=this.el;n.isPlaying&&(this.removeEventListener(),n.addEventListener(this.data.on,this.navigate))},removeEventListener:function(){var n=this.data.on;n&&this.el.removeEventListener(n,this.navigate)},initVisualAspect:function(){var n,e,t,i=this.el;this.data.visualAspectEnabled&&!this.visualAspectInitialized&&(t=this.textEl=this.textEl||document.createElement("a-entity"),e=this.sphereEl=this.sphereEl||document.createElement("a-entity"),n=this.semiSphereEl=this.semiSphereEl||document.createElement("a-entity"),i.setAttribute("geometry",{primitive:"circle",radius:1,segments:64}),i.setAttribute("material",{shader:"portal",pano:this.data.image,side:"double",previewDistance:this.previewDistance}),t.setAttribute("text",{color:this.data.titleColor,align:"center",font:"kelsonsans",value:this.data.title||this.data.href,width:4}),t.setAttribute("position","0 1.5 0"),i.appendChild(t),n.setAttribute("geometry",{primitive:"sphere",radius:1,phiStart:0,segmentsWidth:64,segmentsHeight:64,phiLength:180,thetaStart:0,thetaLength:360}),n.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back",previewDistance:this.previewDistance}),n.setAttribute("rotation","0 180 0"),n.setAttribute("position","0 0 0"),n.setAttribute("visible",!1),i.appendChild(n),e.setAttribute("geometry",{primitive:"sphere",radius:10,segmentsWidth:64,segmentsHeight:64}),e.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back",previewDistance:this.previewDistance}),e.setAttribute("visible",!1),i.appendChild(e),this.visualAspectInitialized=!0)},navigate:function(){window.location=this.data.href},tick:function(){var n=new B.Vector3,e=new B.Vector3,t=new B.Quaternion,i=new B.Vector3;return function(){var r,s,a=this.el,o=a.object3D,c=a.sceneEl.camera,h=this.textEl;if(this.data.visualAspectEnabled)if(o.updateMatrixWorld(),c.parent.updateMatrixWorld(),c.updateMatrixWorld(),o.matrix.decompose(e,t,i),e.setFromMatrixPosition(o.matrixWorld),n.setFromMatrixPosition(c.matrixWorld),(s=e.distanceTo(n))>1.33333*this.previewDistance)this.previousQuaternion||(this.quaternionClone.copy(t),this.previousQuaternion=this.quaternionClone),o.lookAt(n);else{if(r=this.calculateCameraPortalOrientation(),s<.5){if(this.semiSphereEl.getAttribute("visible")===!0)return;h.setAttribute("text","width",1.5),r<=0?(h.setAttribute("position","0 0 0.75"),h.setAttribute("rotation","0 180 0"),this.semiSphereEl.setAttribute("rotation","0 0 0")):(h.setAttribute("position","0 0 -0.75"),h.setAttribute("rotation","0 0 0"),this.semiSphereEl.setAttribute("rotation","0 180 0")),a.getObject3D("mesh").visible=!1,this.semiSphereEl.setAttribute("visible",!0),this.peekCameraPortalOrientation=r}else r<=0?h.setAttribute("rotation","0 180 0"):h.setAttribute("rotation","0 0 0"),h.setAttribute("text","width",5),h.setAttribute("position","0 1.5 0"),a.getObject3D("mesh").visible=!0,this.semiSphereEl.setAttribute("visible",!1),this.peekCameraPortalOrientation=void 0;this.previousQuaternion&&(o.quaternion.copy(this.previousQuaternion),this.previousQuaternion=void 0)}}}(),hideAll:function(){var n=this.el,e=this.hiddenEls,t=this;e.length>0||n.sceneEl.object3D.traverse(function(i){i&&i.el&&i.el.hasAttribute("link-controls")||i.el&&i!==n.sceneEl.object3D&&i.el!==n&&i.el!==t.sphereEl&&i.el!==n.sceneEl.cameraEl&&i.el.getAttribute("visible")!==!1&&i.el!==t.textEl&&i.el!==t.semiSphereEl&&(i.el.setAttribute("visible",!1),e.push(i.el))})},showAll:function(){this.hiddenEls.forEach(function(n){n.setAttribute("visible",!0)}),this.hiddenEls=[]},calculateCameraPortalOrientation:($_=new B.Matrix4,dp=new B.Vector3,fp=new B.Vector3(0,0,1),U0=new B.Vector3(0,0,0),function(){var n=this.el,e=n.sceneEl.camera;return dp.set(0,0,0),fp.set(0,0,1),U0.set(0,0,0),n.object3D.matrixWorld.extractRotation($_),fp.applyMatrix4($_),n.object3D.updateMatrixWorld(),n.object3D.localToWorld(U0),e.parent.parent.updateMatrixWorld(),e.parent.updateMatrixWorld(),e.updateMatrixWorld(),e.localToWorld(dp),dp.sub(U0).normalize(),fp.normalize(),Math.sign(fp.dot(dp))}),remove:function(){this.removeEventListener()}}),Fl("portal",{schema:{borderEnabled:{default:1,type:"int",is:"uniform"},backgroundColor:{default:"red",type:"color",is:"uniform"},pano:{type:"map",is:"uniform"},strokeColor:{default:"white",type:"color",is:"uniform"},previewDistance:{default:15,type:"float",is:"uniform"}},vertexShader:["vec3 portalPosition;","varying vec3 vWorldPosition;","varying float vDistanceToCenter;","varying float vDistance;","void main() {","vDistanceToCenter = clamp(length(position - vec3(0.0, 0.0, 0.0)), 0.0, 1.0);","portalPosition = (modelMatrix * vec4(0.0, 0.0, 0.0, 1.0)).xyz;","vDistance = length(portalPosition - cameraPosition);","vWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;","gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","}"].join(`
`),fragmentShader:["#define RECIPROCAL_PI2 0.15915494","uniform sampler2D pano;","uniform vec3 strokeColor;","uniform vec3 backgroundColor;","uniform float borderEnabled;","uniform float previewDistance;","varying float vDistanceToCenter;","varying float vDistance;","varying vec3 vWorldPosition;","void main() {","vec3 direction = normalize(vWorldPosition - cameraPosition);","vec2 sampleUV;","float borderThickness = clamp(exp(-vDistance / 50.0), 0.6, 0.95);","sampleUV.y = clamp(direction.y * 0.5  + 0.5, 0.0, 1.0);","sampleUV.x = atan(direction.z, -direction.x) * -RECIPROCAL_PI2 + 0.5;","if (vDistanceToCenter > borderThickness && borderEnabled == 1.0) {","gl_FragColor = vec4(strokeColor, 1.0);","} else {","gl_FragColor = mix(texture2D(pano, sampleUV), vec4(backgroundColor, 1.0), clamp(pow((vDistance / previewDistance), 2.0), 0.0, 1.0));","}","}"].join(`
`)});var Y3="logitech-mx-ink",nne=pi+"controllers/logitech/",K3=(vt("logitech-mx-ink-controls",{schema:{hand:{default:"left"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:{left:{buttons:["front","back","none","none","none","tip"]},right:{buttons:["front","back","none","none","none","tip"]}},init:function(){var n=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(e){Lt(e.detail.id,"down",n,n.data.hand)},this.onButtonUp=function(e){Lt(e.detail.id,"up",n,n.data.hand)},this.onButtonTouchEnd=function(e){Lt(e.detail.id,"touchend",n,n.data.hand)},this.onButtonTouchStart=function(e){Lt(e.detail.id,"touchstart",n,n.data.hand)},this.bindMethods()},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var n=this.el;n.addEventListener("buttonchanged",this.onButtonChanged),n.addEventListener("buttondown",this.onButtonDown),n.addEventListener("buttonup",this.onButtonUp),n.addEventListener("touchstart",this.onButtonTouchStart),n.addEventListener("touchend",this.onButtonTouchEnd),n.addEventListener("axismove",this.onAxisMoved),n.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var n=this.el;n.removeEventListener("buttonchanged",this.onButtonChanged),n.removeEventListener("buttondown",this.onButtonDown),n.removeEventListener("buttonup",this.onButtonUp),n.removeEventListener("touchstart",this.onButtonTouchStart),n.removeEventListener("touchend",this.onButtonTouchEnd),n.removeEventListener("axismove",this.onAxisMoved),n.removeEventListener("model-loaded",this.onModelLoaded),n.sceneEl.removeEventListener("enter-vr",this.onEnterVR),n.sceneEl.removeEventListener("exit-vr",this.onExitVR),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var n=this.controllerObject3D;n&&(n.visible=!1),Ps(this,Y3,{hand:this.data.hand,iterateControllerProfiles:!0})},injectTrackedControls:function(){var n=this.el,e=this.data,t=Y3;n.setAttribute("tracked-controls",{id:t,hand:e.hand,handTrackingEnabled:!1,iterateControllerProfiles:!0,orientationOffset:e.orientationOffset}),this.loadModel()},loadModel:function(){var n=this.controllerObject3D;if(this.data.model)return n?(n.visible=this.el.sceneEl.is("vr-mode"),void this.el.setObject3D("mesh",n)):void this.el.setAttribute("gltf-model",nne+"logitech-mx-ink.glb")},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(n){var e,t=this.mapping[this.data.hand].buttons[n.detail.id];t&&(t==="trigger"&&(e=n.detail.state.value,console.log("analog value of trigger press: "+e)),this.el.emit(t+"changed",n.detail.state))},onModelLoaded:function(n){n.target===this.el&&this.data.model&&(this.el.emit("controllermodelready",{name:"logitech-mx-ink-controls",model:this.data.model,rayOrigin:new B.Vector3(0,0,0)}),this.controllerObject3D=this.el.getObject3D("mesh"),this.controllerObject3D.visible=this.el.sceneEl.is("vr-mode"))},onAxisMoved:function(n){ta(this,this.mapping.axes,n)}}),Math.PI/2),J3=(vt("look-controls",{dependencies:["position","rotation"],schema:{enabled:{default:!0},magicWindowTrackingEnabled:{default:!0},pointerLockEnabled:{default:!1},reverseMouseDrag:{default:!1},reverseTouchDrag:{default:!1},touchEnabled:{default:!0},mouseEnabled:{default:!0}},init:function(){this.deltaYaw=0,this.previousHMDPosition=new B.Vector3,this.hmdQuaternion=new B.Quaternion,this.magicWindowAbsoluteEuler=new B.Euler,this.magicWindowDeltaEuler=new B.Euler,this.position=new B.Vector3,this.magicWindowObject=new B.Object3D,this.rotation={},this.deltaRotation={},this.savedPose=null,this.pointerLocked=!1,this.setupMouseControls(),this.bindMethods(),this.previousMouseEvent={},this.setupMagicWindowControls(),this.savedPose={position:new B.Vector3,rotation:new B.Euler},(this.el.sceneEl.is("vr-mode")||this.el.sceneEl.is("ar-mode"))&&this.onEnterVR()},setupMagicWindowControls:function(){var n,e=this.data;(sc()||z2())&&(n=this.magicWindowControls=new x5(this.magicWindowObject),typeof DeviceOrientationEvent<"u"&&DeviceOrientationEvent.requestPermission&&(n.enabled=!1,this.el.sceneEl.components["device-orientation-permission-ui"].permissionGranted?n.enabled=e.magicWindowTrackingEnabled:this.el.sceneEl.addEventListener("deviceorientationpermissiongranted",function(){n.enabled=e.magicWindowTrackingEnabled})))},update:function(n){var e=this.data;e.enabled!==n.enabled&&this.updateGrabCursor(e.enabled),n&&!e.magicWindowTrackingEnabled&&n.magicWindowTrackingEnabled&&(this.magicWindowAbsoluteEuler.set(0,0,0),this.magicWindowDeltaEuler.set(0,0,0)),this.magicWindowControls&&(this.magicWindowControls.enabled=e.magicWindowTrackingEnabled),n&&!e.pointerLockEnabled!==n.pointerLockEnabled&&(this.removeEventListeners(),this.addEventListeners(),this.pointerLocked&&this.exitPointerLock())},tick:function(n){this.data.enabled&&this.updateOrientation()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners(),this.pointerLocked&&this.exitPointerLock()},remove:function(){this.removeEventListeners(),this.pointerLocked&&this.exitPointerLock()},bindMethods:function(){this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onEnterVR=this.onEnterVR.bind(this),this.onExitVR=this.onExitVR.bind(this),this.onPointerLockChange=this.onPointerLockChange.bind(this),this.onPointerLockError=this.onPointerLockError.bind(this)},setupMouseControls:function(){this.mouseDown=!1,this.pitchObject=new B.Object3D,this.yawObject=new B.Object3D,this.yawObject.position.y=10,this.yawObject.add(this.pitchObject)},addEventListeners:function(){var n=this.el.sceneEl,e=n.canvas;e?(e.addEventListener("mousedown",this.onMouseDown,!1),window.addEventListener("mousemove",this.onMouseMove,!1),window.addEventListener("mouseup",this.onMouseUp,!1),e.addEventListener("touchstart",this.onTouchStart,{passive:!0}),window.addEventListener("touchmove",this.onTouchMove,{passive:!0}),window.addEventListener("touchend",this.onTouchEnd,{passive:!0}),n.addEventListener("enter-vr",this.onEnterVR),n.addEventListener("exit-vr",this.onExitVR),this.data.pointerLockEnabled&&(document.addEventListener("pointerlockchange",this.onPointerLockChange,!1),document.addEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.addEventListener("pointerlockerror",this.onPointerLockError,!1))):n.addEventListener("render-target-loaded",this.addEventListeners.bind(this))},removeEventListeners:function(){var n=this.el.sceneEl,e=n&&n.canvas;e&&(e.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),e.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd),n.removeEventListener("enter-vr",this.onEnterVR),n.removeEventListener("exit-vr",this.onExitVR),document.removeEventListener("pointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("pointerlockerror",this.onPointerLockError,!1))},updateOrientation:function(){var n=this.el.object3D,e=this.pitchObject,t=this.yawObject,i=this.el.sceneEl;(i.is("vr-mode")||i.is("ar-mode"))&&i.checkHeadsetConnected()||(this.updateMagicWindowOrientation(),n.rotation.x=this.magicWindowDeltaEuler.x+e.rotation.x,n.rotation.y=this.magicWindowDeltaEuler.y+t.rotation.y,n.rotation.z=this.magicWindowDeltaEuler.z)},updateMagicWindowOrientation:function(){var n=this.magicWindowAbsoluteEuler,e=this.magicWindowDeltaEuler;this.magicWindowControls&&this.magicWindowControls.enabled&&(this.magicWindowControls.update(),n.setFromQuaternion(this.magicWindowObject.quaternion,"YXZ"),this.previousMagicWindowYaw||n.y===0||(this.previousMagicWindowYaw=n.y),this.previousMagicWindowYaw&&(e.x=n.x,e.y+=n.y-this.previousMagicWindowYaw,e.z=n.z,this.previousMagicWindowYaw=n.y))},onMouseMove:function(n){var e,t,i,r=this.pitchObject,s=this.previousMouseEvent,a=this.yawObject;this.data.enabled&&(this.mouseDown||this.pointerLocked)&&(this.pointerLocked?(t=n.movementX||n.mozMovementX||0,i=n.movementY||n.mozMovementY||0):(t=n.screenX-s.screenX,i=n.screenY-s.screenY),this.previousMouseEvent.screenX=n.screenX,this.previousMouseEvent.screenY=n.screenY,e=this.data.reverseMouseDrag?1:-1,a.rotation.y+=.002*t*e,r.rotation.x+=.002*i*e,r.rotation.x=Math.max(-K3,Math.min(K3,r.rotation.x)))},onMouseDown:function(n){var e=this.el.sceneEl;if(this.data.enabled&&this.data.mouseEnabled&&(!e.is("vr-mode")&&!e.is("ar-mode")||!e.checkHeadsetConnected())&&n.button===0){var t=e&&e.canvas;this.mouseDown=!0,this.previousMouseEvent.screenX=n.screenX,this.previousMouseEvent.screenY=n.screenY,this.showGrabbingCursor(),this.data.pointerLockEnabled&&!this.pointerLocked&&(t.requestPointerLock?t.requestPointerLock():t.mozRequestPointerLock&&t.mozRequestPointerLock())}},showGrabbingCursor:function(){this.el.sceneEl.canvas.style.cursor="grabbing"},hideGrabbingCursor:function(){this.el.sceneEl.canvas.style.cursor=""},onMouseUp:function(){this.mouseDown=!1,this.hideGrabbingCursor()},onTouchStart:function(n){n.touches.length!==1||!this.data.touchEnabled||this.el.sceneEl.is("vr-mode")||this.el.sceneEl.is("ar-mode")||(this.touchStart={x:n.touches[0].pageX,y:n.touches[0].pageY},this.touchStarted=!0)},onTouchMove:function(n){var e,t,i=this.el.sceneEl.canvas,r=this.yawObject;this.touchStarted&&this.data.touchEnabled&&(t=2*Math.PI*(n.touches[0].pageX-this.touchStart.x)/i.clientWidth,e=this.data.reverseTouchDrag?1:-1,r.rotation.y-=.5*t*e,this.touchStart={x:n.touches[0].pageX,y:n.touches[0].pageY})},onTouchEnd:function(){this.touchStarted=!1},onEnterVR:function(){var n=this.el.sceneEl;n.checkHeadsetConnected()&&(this.saveCameraPose(),this.el.object3D.position.set(0,0,0),this.el.object3D.rotation.set(0,0,0),n.hasWebXR&&(this.el.object3D.matrixAutoUpdate=!1,this.el.object3D.updateMatrix()))},onExitVR:function(){this.el.sceneEl.checkHeadsetConnected()&&(this.restoreCameraPose(),this.previousHMDPosition.set(0,0,0),this.el.object3D.matrixAutoUpdate=!0)},onPointerLockChange:function(){this.pointerLocked=!(!document.pointerLockElement&&!document.mozPointerLockElement)},onPointerLockError:function(){this.pointerLocked=!1},exitPointerLock:function(){document.exitPointerLock(),this.pointerLocked=!1},updateGrabCursor:function(n){var e=this.el.sceneEl;function t(){e.canvas.classList.add("a-grab-cursor")}function i(){e.canvas.classList.remove("a-grab-cursor")}e.canvas?n?t():i():n?e.addEventListener("render-target-loaded",t):e.addEventListener("render-target-loaded",i)},saveCameraPose:function(){var n=this.el;this.savedPose.position.copy(n.object3D.position),this.savedPose.rotation.copy(n.object3D.rotation),this.hasSavedPose=!0},restoreCameraPose:function(){var n=this.el,e=this.savedPose;this.hasSavedPose&&(n.object3D.position.copy(e.position),n.object3D.rotation.copy(e.rotation),this.hasSavedPose=!1)}}),"magicleap-one"),ine=pi+"controllers/magicleap/magicleap-one-controller.glb",rne=(vt("magicleap-controls",{schema:{hand:{default:"none"},model:{default:!0}},mapping:{axes:{touchpad:[0,1]},buttons:["trigger","grip","touchpad","menu"]},init:function(){var n=this;this.controllerPresent=!1,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(e){Lt(e.detail.id,"down",n)},this.onButtonUp=function(e){Lt(e.detail.id,"up",n)},this.onButtonTouchEnd=function(e){Lt(e.detail.id,"touchend",n)},this.onButtonTouchStart=function(e){Lt(e.detail.id,"touchstart",n)},this.previousButtonValues={},this.bindMethods()},update:function(){var n=this.data;this.controllerIndex=n.hand==="right"?0:n.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var n=this.el;n.addEventListener("buttonchanged",this.onButtonChanged),n.addEventListener("buttondown",this.onButtonDown),n.addEventListener("buttonup",this.onButtonUp),n.addEventListener("touchstart",this.onButtonTouchStart),n.addEventListener("touchend",this.onButtonTouchEnd),n.addEventListener("axismove",this.onAxisMoved),n.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var n=this.el;n.removeEventListener("buttonchanged",this.onButtonChanged),n.removeEventListener("buttondown",this.onButtonDown),n.removeEventListener("buttonup",this.onButtonUp),n.removeEventListener("touchstart",this.onButtonTouchStart),n.removeEventListener("touchend",this.onButtonTouchEnd),n.removeEventListener("axismove",this.onAxisMoved),n.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var n=this.data;Ps(this,J3,{index:this.controllerIndex,hand:n.hand})},injectTrackedControls:function(){var n=this.el,e=this.data;n.setAttribute("tracked-controls",{idPrefix:J3,hand:e.hand,controller:this.controllerIndex}),this.data.model&&this.el.setAttribute("gltf-model",ine)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(n){var e,t=this.mapping.buttons[n.detail.id];t&&(t==="trigger"&&(e=n.detail.state.value,console.log("analog value of trigger press: "+e)),this.el.emit(t+"changed",n.detail.state))},onModelLoaded:function(n){n.detail.model.scale.set(.01,.01,.01)},onAxisMoved:function(n){ta(this,this.mapping.axes,n)},updateModel:function(n,e){},setButtonColor:function(n,e){}}),mn("components:material:error"));function Z3(n,e){n.dispose(),e.unregisterMaterial(n),Object.keys(n).filter(function(t){return n[t]&&n[t].isTexture}).forEach(function(t){n[t].dispose()})}vt("material",{schema:{alphaTest:{default:0,min:0,max:1},depthTest:{default:!0},depthWrite:{default:!0},flatShading:{default:!1},npot:{default:!1},offset:{type:"vec2",default:{x:0,y:0}},opacity:{default:1,min:0,max:1},repeat:{type:"vec2",default:{x:1,y:1}},shader:{default:"standard",oneOf:Z5,schemaChange:!0},side:{default:"front",oneOf:["front","back","double"]},transparent:{default:!1},vertexColorsEnabled:{default:!1},visible:{default:!0},blending:{default:"normal",oneOf:["none","normal","additive","subtractive","multiply"]},dithering:{default:!0},anisotropy:{default:0,min:0}},init:function(){this.material=null},update:function(n){var e=this.data;this.shader&&e.shader===n.shader||this.updateShader(e.shader),this.shader.update(this.data),this.updateMaterial(n)},updateSchema:function(n){var e,t,i,r;t=n&&n.shader,e=this.oldData&&this.oldData.shader,(i=Va[r=t||e]&&Va[r].schema)||rne("Unknown shader schema "+r),e&&t===e||(this.extendSchema(i),this.updateBehavior())},updateBehavior:function(){var n,e,t=this.el.sceneEl,i=this.schema,r=this;function s(a,o){var c;for(c in e)e[c]=a;r.shader.update(e)}for(n in this.tick=void 0,e={},i)i[n].type==="time"&&(this.tick=s,e[n]=!0);t&&(this.tick?t.addBehavior(this):t.removeBehavior(this))},updateShader:function(n){var e,t=this.data,i=Va[n]&&Va[n].Shader;if(!i)throw new Error("Unknown shader "+n);(e=this.shader=new i).el=this.el,e.init(t),this.setMaterial(e.material),this.updateSchema(t)},updateMaterial:function(n){var e,t=this.data,i=this.material;for(e in i.alphaTest=t.alphaTest,i.depthTest=t.depthTest!==!1,i.depthWrite=t.depthWrite!==!1,i.opacity=t.opacity,i.flatShading=t.flatShading,i.side=function(r){switch(r){case"back":return B.BackSide;case"double":return B.DoubleSide;default:return B.FrontSide}}(t.side),i.transparent=t.transparent!==!1||t.opacity<1,i.vertexColors=t.vertexColorsEnabled,i.visible=t.visible,i.blending=function(r){switch(r){case"none":return B.NoBlending;case"additive":return B.AdditiveBlending;case"subtractive":return B.SubtractiveBlending;case"multiply":return B.MultiplyBlending;default:return B.NormalBlending}}(t.blending),i.dithering=t.dithering,n)break;!e||n.alphaTest===t.alphaTest&&n.side===t.side&&n.vertexColorsEnabled===t.vertexColorsEnabled||(i.needsUpdate=!0)},remove:function(){var n=new B.MeshBasicMaterial,e=this.material,t=this.el.getObject3D("mesh");t&&(t.material=n),Z3(e,this.system)},setMaterial:function(n){var e,t=this.el,i=this.system;this.material&&Z3(this.material,i),this.material=n,i.registerMaterial(n),(e=t.getObject3D("mesh"))?e.material=n:t.addEventListener("object3dset",function r(s){s.detail.type==="mesh"&&s.target===t&&(t.getObject3D("mesh").material=n,t.removeEventListener("object3dset",r))})}});var k0,N0,e1,$3,t1,eO="oculus-touch",hd=pi+"controllers/oculus/oculus-touch-controller-",F0=pi+"controllers/meta/",sne={left:{modelUrl:hd+"left.gltf",rayOrigin:{origin:{x:.002,y:-.005,z:-.03},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new B.Vector3(-.005,.036,-.037),modelPivotRotation:new B.Euler(Math.PI/4.5,0,0)},right:{modelUrl:hd+"right.gltf",rayOrigin:{origin:{x:-.002,y:-.005,z:-.03},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new B.Vector3(.005,.036,-.037),modelPivotRotation:new B.Euler(Math.PI/4.5,0,0)}},tO="oculus-touch",Jc={"oculus-touch":sne,"oculus-touch-v2":{left:{modelUrl:hd+"gen2-left.gltf",rayOrigin:{origin:{x:-.006,y:-.03,z:-.04},direction:{x:0,y:-.9,z:-1}},modelPivotOffset:new B.Vector3(0,-.007,-.021),modelPivotRotation:new B.Euler(-Math.PI/4,0,0)},right:{modelUrl:hd+"gen2-right.gltf",rayOrigin:{origin:{x:.006,y:-.03,z:-.04},direction:{x:0,y:-.9,z:-1}},modelPivotOffset:new B.Vector3(0,-.007,-.021),modelPivotRotation:new B.Euler(-Math.PI/4,0,0)}},"oculus-touch-v3":{left:{modelUrl:hd+"v3-left.glb",rayOrigin:{origin:{x:.0065,y:-.0186,z:-.05},direction:{x:.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new B.Vector3(0,0,0),modelPivotRotation:new B.Euler(0,0,0)},right:{modelUrl:hd+"v3-right.glb",rayOrigin:{origin:{x:-.0065,y:-.0186,z:-.05},direction:{x:-.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new B.Vector3(0,0,0),modelPivotRotation:new B.Euler(0,0,0)}},"meta-quest-touch-pro":{left:{modelUrl:F0+"quest-touch-pro-left.glb",rayOrigin:{origin:{x:.0065,y:-.0186,z:-.05},direction:{x:.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new B.Vector3(0,0,0),modelPivotRotation:new B.Euler(0,0,0)},right:{modelUrl:F0+"quest-touch-pro-right.glb",rayOrigin:{origin:{x:-.0065,y:-.0186,z:-.05},direction:{x:-.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new B.Vector3(0,0,0),modelPivotRotation:new B.Euler(0,0,0)}},"meta-quest-touch-plus":{left:{modelUrl:F0+"quest-touch-plus-left.glb",rayOrigin:{origin:{x:.0065,y:-.0186,z:-.05},direction:{x:.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new B.Vector3(0,0,0),modelPivotRotation:new B.Euler(0,0,0)},right:{modelUrl:F0+"quest-touch-plus-right.glb",rayOrigin:{origin:{x:-.0065,y:-.0186,z:-.05},direction:{x:-.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new B.Vector3(0,0,0),modelPivotRotation:new B.Euler(0,0,0)}}},nO={schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#999"},buttonTouchColor:{type:"color",default:"#8AB"},buttonHighlightColor:{type:"color",default:"#2DF"},model:{default:!0},controllerType:{default:"auto",oneOf:["auto","oculus-touch","oculus-touch-v2","oculus-touch-v3"]}},after:["tracked-controls"],mapping:{left:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","xbutton","ybutton","surface"]},right:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","abutton","bbutton","surface"]}},bindMethods:function(){this.onButtonChanged=this.onButtonChanged.bind(this),this.onThumbstickMoved=this.onThumbstickMoved.bind(this),this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var n=this;this.onButtonDown=function(e){Lt(e.detail.id,"down",n,n.data.hand)},this.onButtonUp=function(e){Lt(e.detail.id,"up",n,n.data.hand)},this.onButtonTouchStart=function(e){Lt(e.detail.id,"touchstart",n,n.data.hand)},this.onButtonTouchEnd=function(e){Lt(e.detail.id,"touchend",n,n.data.hand)},this.controllerPresent=!1,this.previousButtonValues={},this.bindMethods(),this.triggerEuler=new B.Euler},addEventListeners:function(){var n=this.el;n.addEventListener("buttonchanged",this.onButtonChanged),n.addEventListener("buttondown",this.onButtonDown),n.addEventListener("buttonup",this.onButtonUp),n.addEventListener("touchstart",this.onButtonTouchStart),n.addEventListener("touchend",this.onButtonTouchEnd),n.addEventListener("axismove",this.onAxisMoved),n.addEventListener("model-loaded",this.onModelLoaded),n.addEventListener("thumbstickmoved",this.onThumbstickMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var n=this.el;n.removeEventListener("buttonchanged",this.onButtonChanged),n.removeEventListener("buttondown",this.onButtonDown),n.removeEventListener("buttonup",this.onButtonUp),n.removeEventListener("touchstart",this.onButtonTouchStart),n.removeEventListener("touchend",this.onButtonTouchEnd),n.removeEventListener("axismove",this.onAxisMoved),n.removeEventListener("model-loaded",this.onModelLoaded),n.removeEventListener("thumbstickmoved",this.onThumbstickMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var n=this.controllerObject3D;n&&(n.visible=!1),Ps(this,eO,{hand:this.data.hand,iterateControllerProfiles:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},loadModel:function(n){var e,t=this.data;if(t.model){if(this.controllerObject3D)return this.controllerObject3D.visible=!0,void this.el.setObject3D("mesh",this.controllerObject3D);if(this.displayModel=Jc[t.controllerType]||Jc[tO],t.controllerType==="auto"){e=tO;for(var i=Object.keys(Jc),r=0;r<n.profiles.length;r++)if(i.indexOf(n.profiles[r])!==-1){e=n.profiles[r];break}this.displayModel=Jc[e]}var s=this.displayModel[t.hand].modelUrl;this.isTouchV3orPROorPlus=this.displayModel===Jc["oculus-touch-v3"]||this.displayModel===Jc["meta-quest-touch-pro"]||this.displayModel===Jc["meta-quest-touch-plus"],this.el.setAttribute("gltf-model",s)}},injectTrackedControls:function(n){var e=this.data,t=eO;this.el.setAttribute("tracked-controls",{id:t,hand:e.hand,handTrackingEnabled:!1,iterateControllerProfiles:!0}),this.loadModel(n)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(n){var e=this.mapping[this.data.hand].buttons[n.detail.id];if(e){if(this.isTouchV3orPROorPlus)this.onButtonChangedV3orPROorPlus(n);else{var t,i=this.buttonMeshes;e!=="trigger"&&e!=="grip"||(t=n.detail.state.value),i&&(e==="trigger"&&i.trigger&&(i.trigger.rotation.x=this.originalXRotationTrigger-t*(Math.PI/26)),e==="grip"&&i.grip&&(t*=this.data.hand==="left"?-1:1,i.grip.position.x=this.originalXPositionGrip+.004*t))}this.el.emit(e+"changed",n.detail.state)}},onButtonChangedV3orPROorPlus:function(n){var e,t=this.mapping[this.data.hand].buttons[n.detail.id],i=this.buttonObjects;i&&i[t]&&(e=n.detail.state.value,i[t].quaternion.slerpQuaternions(this.buttonRanges[t].min.quaternion,this.buttonRanges[t].max.quaternion,e),i[t].position.lerpVectors(this.buttonRanges[t].min.position,this.buttonRanges[t].max.position,e))},onModelLoaded:function(n){if(n.target===this.el&&this.data.model){if(this.isTouchV3orPROorPlus)this.onTouchV3orPROorPlusModelLoaded(n);else{var e,t=this.controllerObject3D=n.detail.model;(e=this.buttonMeshes={}).grip=t.getObjectByName("buttonHand"),this.originalXPositionGrip=e.grip&&e.grip.position.x,e.trigger=t.getObjectByName("buttonTrigger"),this.originalXRotationTrigger=e.trigger&&e.trigger.rotation.x,e.thumbstick=t.getObjectByName("stick"),e.xbutton=t.getObjectByName("buttonX"),e.abutton=t.getObjectByName("buttonA"),e.ybutton=t.getObjectByName("buttonY"),e.bbutton=t.getObjectByName("buttonB")}for(var i in this.buttonMeshes)this.buttonMeshes[i]&&ane(this.buttonMeshes[i]);this.applyOffset(n.detail.model),this.el.emit("controllermodelready",{name:"meta-touch-controls",model:this.data.model,rayOrigin:this.displayModel[this.data.hand].rayOrigin})}},applyOffset:function(n){n.position.copy(this.displayModel[this.data.hand].modelPivotOffset),n.rotation.copy(this.displayModel[this.data.hand].modelPivotRotation)},onTouchV3orPROorPlusModelLoaded:function(n){var e=this.controllerObject3D=n.detail.model,t=this.buttonObjects={},i=this.buttonMeshes={},r=this.buttonRanges={};i.grip=e.getObjectByName("squeeze"),t.grip=e.getObjectByName("xr_standard_squeeze_pressed_value"),r.grip={min:e.getObjectByName("xr_standard_squeeze_pressed_min"),max:e.getObjectByName("xr_standard_squeeze_pressed_max")},t.grip.minX=t.grip.position.x,i.thumbstick=e.getObjectByName("thumbstick"),t.thumbstick=e.getObjectByName("xr_standard_thumbstick_pressed_value"),r.thumbstick={min:e.getObjectByName("xr_standard_thumbstick_pressed_min"),max:e.getObjectByName("xr_standard_thumbstick_pressed_max")},t.thumbstickXAxis=e.getObjectByName("xr_standard_thumbstick_xaxis_pressed_value"),r.thumbstickXAxis={min:e.getObjectByName("xr_standard_thumbstick_xaxis_pressed_min"),max:e.getObjectByName("xr_standard_thumbstick_xaxis_pressed_max")},t.thumbstickYAxis=e.getObjectByName("xr_standard_thumbstick_yaxis_pressed_value"),r.thumbstickYAxis={min:e.getObjectByName("xr_standard_thumbstick_yaxis_pressed_min"),max:e.getObjectByName("xr_standard_thumbstick_yaxis_pressed_max")},i.trigger=e.getObjectByName("trigger"),t.trigger=e.getObjectByName("xr_standard_trigger_pressed_value"),r.trigger={min:e.getObjectByName("xr_standard_trigger_pressed_min"),max:e.getObjectByName("xr_standard_trigger_pressed_max")},r.trigger.diff={x:Math.abs(r.trigger.max.rotation.x)-Math.abs(r.trigger.min.rotation.x),y:Math.abs(r.trigger.max.rotation.y)-Math.abs(r.trigger.min.rotation.y),z:Math.abs(r.trigger.max.rotation.z)-Math.abs(r.trigger.min.rotation.z)};var s=this.data.hand==="left"?"x":"a",a=this.data.hand==="left"?"y":"b",o=s+"button",c=a+"button";i[o]=e.getObjectByName(s+"_button"),t[o]=e.getObjectByName(s+"_button_pressed_value"),r[o]={min:e.getObjectByName(s+"_button_pressed_min"),max:e.getObjectByName(s+"_button_pressed_max")},i[c]=e.getObjectByName(a+"_button"),t[c]=e.getObjectByName(a+"_button_pressed_value"),r[c]={min:e.getObjectByName(a+"_button_pressed_min"),max:e.getObjectByName(a+"_button_pressed_max")}},onAxisMoved:function(n){ta(this,this.mapping[this.data.hand].axes,n)},onThumbstickMoved:function(n){if(this.buttonMeshes&&this.buttonMeshes.thumbstick)if(this.isTouchV3orPROorPlus)this.updateThumbstickTouchV3orPROorPlus(n);else for(var e in n.detail)this.buttonObjects.thumbstick.rotation[this.axisMap[e]]=this.buttonRanges.thumbstick.originalRotation[this.axisMap[e]]-Math.PI/8*n.detail[e]*(e==="y"||this.data.hand==="right"?-1:1)},axisMap:{y:"x",x:"z"},updateThumbstickTouchV3orPROorPlus:function(n){var e=(n.detail.x+1)/2;this.buttonObjects.thumbstickXAxis.quaternion.slerpQuaternions(this.buttonRanges.thumbstickXAxis.min.quaternion,this.buttonRanges.thumbstickXAxis.max.quaternion,e);var t=(n.detail.y+1)/2;this.buttonObjects.thumbstickYAxis.quaternion.slerpQuaternions(this.buttonRanges.thumbstickYAxis.min.quaternion,this.buttonRanges.thumbstickYAxis.max.quaternion,t)},updateModel:function(n,e){this.data.model&&this.updateButtonModel(n,e)},updateButtonModel:function(n,e){var t,i=this.buttonMeshes;i&&i[n]&&(t=e==="up"||e==="touchend"?i[n].originalColor||this.data.buttonColor:e==="touchstart"?this.data.buttonTouchColor:this.data.buttonHighlightColor,i[n].material.color.set(t))}};function ane(n){n.traverse(function(e){var t;e.type==="Mesh"&&(t=e.material.clone(),n.originalColor=e.material.color,e.material.dispose(),e.material=t)})}vt("oculus-touch-controls",nO),vt("meta-touch-controls",nO),vt("obb-collider",{schema:{size:{default:0},trackedObject3D:{default:""},minimumColliderDimension:{default:.02},centerModel:{default:!1}},init:function(){this.previousScale=new B.Vector3().copy(this.el.object3D.scale),this.auxEuler=new B.Euler,this.boundingBox=new B.Box3,this.boundingBoxSize=new B.Vector3,this.updateCollider=this.updateCollider.bind(this),this.onModelLoaded=this.onModelLoaded.bind(this),this.updateBoundingBox=this.updateBoundingBox.bind(this),this.el.addEventListener("model-loaded",this.onModelLoaded),this.updateCollider(),this.system.addCollider(this.el)},remove:function(){this.system.removeCollider(this.el)},update:function(){this.data.trackedObject3D&&(this.trackedObject3DPath=this.data.trackedObject3D.split("."))},onModelLoaded:function(){this.data.centerModel&&this.centerModel(),this.updateCollider()},centerModel:function(){var n,e=this.el,t=e.components["gltf-model"]&&e.components["gltf-model"].model;t&&(this.el.removeObject3D("mesh"),n=new B.Box3().setFromObject(t).getCenter(new B.Vector3),t.position.x+=t.position.x-n.x,t.position.y+=t.position.y-n.y,t.position.z+=t.position.z-n.z,this.el.setObject3D("mesh",t))},updateCollider:function(){var n=this.el,e=this.boundingBoxSize,t=this.aabb=this.aabb||new wy;this.obb=this.obb||new wy,n.hasLoaded?(this.updateBoundingBox(),t.halfSize.copy(e).multiplyScalar(.5),this.el.sceneEl.systems["obb-collider"].data.showColliders&&this.showCollider()):n.addEventListener("loaded",this.updateCollider)},showCollider:function(){this.updateColliderMesh(),this.renderColliderMesh.visible=!0},updateColliderMesh:function(){var n=this.renderColliderMesh,e=this.boundingBoxSize;n?(n.geometry.dispose(),n.geometry=new B.BoxGeometry(e.x,e.y,e.z)):this.initColliderMesh()},hideCollider:function(){this.renderColliderMesh&&(this.renderColliderMesh.visible=!1)},initColliderMesh:function(){var n,e,t;n=this.boundingBoxSize,e=this.renderColliderGeometry=new B.BoxGeometry(n.x,n.y,n.z),(t=this.renderColliderMesh=new B.Mesh(e,new B.MeshLambertMaterial({color:65280,side:B.DoubleSide}))).matrixAutoUpdate=!1,t.matrixWorldAutoUpdate=!1,t.updateMatrixWorld=function(){},this.el.sceneEl.object3D.add(t)},updateBoundingBox:(k0=new B.Vector3,N0=new B.Vector3,e1=new B.Quaternion,$3=new B.Quaternion,t1=new B.Matrix4,function(){var n=this.auxEuler,e=this.boundingBox,t=this.data.size,i=this.trackedObject3D||this.el.object3D,r=this.boundingBoxSize,s=this.data.minimumColliderDimension;if(t)return this.boundingBoxSize.x=t,this.boundingBoxSize.y=t,void(this.boundingBoxSize.z=t);n.copy(i.rotation),i.rotation.set(0,0,0),i.parent.matrixWorld.decompose(k0,e1,N0),t1.compose(k0,$3,N0),i.parent.matrixWorld.copy(t1),e.setFromObject(i,!0),e.getSize(r),r.x=r.x<s?s:r.x,r.y=r.y<s?s:r.y,r.z=r.z<s?s:r.z,i.parent.matrixWorld.compose(k0,e1,N0),this.el.object3D.rotation.copy(n)}),checkTrackedObject:function(){var n,e=this.trackedObject3DPath;if(e&&e.length&&!this.trackedObject3D){n=this.el;for(var t=0;t<e.length&&(n=n[e[t]]);t++);n&&(this.trackedObject3D=n,this.updateCollider())}return this.trackedObject3D},tick:function(){var n=new B.Vector3,e=new B.Vector3,t=new B.Quaternion,i=new B.Matrix4;return function(){var r=this.obb,s=this.renderColliderMesh,a=this.checkTrackedObject()||this.el.object3D;a&&(a.updateMatrix(),a.updateMatrixWorld(!0),a.matrixWorld.decompose(n,t,e),(Math.abs(e.x-this.previousScale.x)>1e-4||Math.abs(e.y-this.previousScale.y)>1e-4||Math.abs(e.z-this.previousScale.z)>1e-4)&&this.updateCollider(),this.previousScale.copy(e),e.set(1,1,1),i.compose(n,t,e),s&&s.matrixWorld.copy(i),r.copy(this.aabb),r.applyMatrix4(i))}}()});var one=mn("components:obj-model:warn"),lne=(vt("obj-model",{schema:{mtl:{type:"model"},obj:{type:"model"}},init:function(){var n=this;this.model=null,this.objLoader=new y5,this.mtlLoader=new b5(this.objLoader.manager),this.mtlLoader.crossOrigin="",this.el.addEventListener("componentinitialized",function(e){n.model&&e.detail.name==="material"&&n.applyMaterial()})},update:function(){var n=this.data;n.obj&&(this.resetMesh(),this.loadObj(n.obj,n.mtl))},remove:function(){this.resetMesh()},resetMesh:function(){this.model&&this.el.removeObject3D("mesh")},loadObj:function(n,e){var t=this,i=this.el,r=this.mtlLoader,s=this.objLoader,a=this.el.sceneEl.systems.renderer,o=e.substr(0,e.lastIndexOf("/")+1);if(e)return i.hasAttribute("material")&&one("Material component properties are ignored when a .MTL is provided"),r.setResourcePath(o),void r.load(e,function(c){c.preload(),s.setMaterials(c),s.load(n,function(h){t.model=h,t.model.traverse(function(d){if(d.isMesh){var p=d.material;p.map&&a.applyColorCorrection(p.map),p.emissiveMap&&a.applyColorCorrection(p.emissiveMap)}}),i.setObject3D("mesh",h),i.emit("model-loaded",{format:"obj",model:h})})});s.load(n,function(c){t.model=c,t.applyMaterial(),i.setObject3D("mesh",c),i.emit("model-loaded",{format:"obj",model:c})})},applyMaterial:function(){var n=this.el.components.material;n&&this.model.traverse(function(e){e instanceof B.Mesh&&(e.material=n.material)})}}),pi+"controllers/oculus/go/oculus-go-controller.gltf"),iO="oculus-go",rO=(vt("oculus-go-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#FFFFFF"},buttonTouchedColor:{type:"color",default:"#BBBBBB"},buttonHighlightColor:{type:"color",default:"#7A7A7A"},model:{default:!0}},mapping:{axes:{touchpad:[0,1]},buttons:["trigger","none","touchpad"]},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var n=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(e){Lt(e.detail.id,"down",n)},this.onButtonUp=function(e){Lt(e.detail.id,"up",n)},this.onButtonTouchStart=function(e){Lt(e.detail.id,"touchstart",n)},this.onButtonTouchEnd=function(e){Lt(e.detail.id,"touchend",n)},this.controllerPresent=!1,this.bindMethods()},addEventListeners:function(){var n=this.el;n.addEventListener("buttonchanged",this.onButtonChanged),n.addEventListener("buttondown",this.onButtonDown),n.addEventListener("buttonup",this.onButtonUp),n.addEventListener("touchstart",this.onButtonTouchStart),n.addEventListener("touchend",this.onButtonTouchEnd),n.addEventListener("model-loaded",this.onModelLoaded),n.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var n=this.el;n.removeEventListener("buttonchanged",this.onButtonChanged),n.removeEventListener("buttondown",this.onButtonDown),n.removeEventListener("buttonup",this.onButtonUp),n.removeEventListener("touchstart",this.onButtonTouchStart),n.removeEventListener("touchend",this.onButtonTouchEnd),n.removeEventListener("model-loaded",this.onModelLoaded),n.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){Ps(this,iO,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var n=this.el,e=this.data;n.setAttribute("tracked-controls",{hand:e.hand,idPrefix:iO}),this.data.model&&this.el.setAttribute("gltf-model",lne)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(n){var e,t=n.detail.model;n.target===this.el&&this.data.model&&((e=this.buttonMeshes={}).trigger=t.getObjectByName("oculus_go_button_trigger"),e.trackpad=t.getObjectByName("oculus_go_touchpad"),e.touchpad=t.getObjectByName("oculus_go_touchpad"))},onButtonChanged:function(n){var e=this.mapping.buttons[n.detail.id];e&&this.el.emit(e+"changed",n.detail.state)},onAxisMoved:function(n){ta(this,this.mapping.axes,n)},updateModel:function(n,e){this.data.model&&this.updateButtonModel(n,e)},updateButtonModel:function(n,e){var t=this.buttonMeshes;if(t&&t[n]){var i;switch(e){case"down":i=this.data.buttonHighlightColor;break;case"touchstart":i=this.data.buttonTouchedColor;break;default:i=this.data.buttonColor}t[n].material.color.set(i)}}}),"pico-4"),cne=pi+"controllers/pico/pico4/",sO=(vt("pico-controls",{schema:{hand:{default:"none"},model:{default:!0}},mapping:{left:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","xbutton","ybutton"]},right:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","abutton","bbutton"]}},init:function(){var n=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(e){Lt(e.detail.id,"down",n,n.data.hand)},this.onButtonUp=function(e){Lt(e.detail.id,"up",n,n.data.hand)},this.onButtonTouchEnd=function(e){Lt(e.detail.id,"touchend",n,n.data.hand)},this.onButtonTouchStart=function(e){Lt(e.detail.id,"touchstart",n,n.data.hand)},this.bindMethods()},update:function(){var n=this.data;this.controllerIndex=n.hand==="right"?0:n.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var n=this.el;n.addEventListener("buttonchanged",this.onButtonChanged),n.addEventListener("buttondown",this.onButtonDown),n.addEventListener("buttonup",this.onButtonUp),n.addEventListener("touchstart",this.onButtonTouchStart),n.addEventListener("touchend",this.onButtonTouchEnd),n.addEventListener("axismove",this.onAxisMoved),n.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var n=this.el;n.removeEventListener("buttonchanged",this.onButtonChanged),n.removeEventListener("buttondown",this.onButtonDown),n.removeEventListener("buttonup",this.onButtonUp),n.removeEventListener("touchstart",this.onButtonTouchStart),n.removeEventListener("touchend",this.onButtonTouchEnd),n.removeEventListener("axismove",this.onAxisMoved),n.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var n=this.data;Ps(this,rO,{index:this.controllerIndex,hand:n.hand})},injectTrackedControls:function(){var n=this.el,e=this.data;n.setAttribute("tracked-controls",{idPrefix:rO,hand:e.hand,controller:this.controllerIndex}),this.data.model&&this.el.setAttribute("gltf-model",cne+this.data.hand+".glb")},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(n){var e,t=this.mapping[this.data.hand].buttons[n.detail.id];t&&(t==="trigger"&&(e=n.detail.state.value,console.log("analog value of trigger press: "+e)),this.el.emit(t+"changed",n.detail.state))},onModelLoaded:function(n){n.target===this.el&&this.data.model&&this.el.emit("controllermodelready",{name:"pico-controls",model:this.data.model,rayOrigin:new B.Vector3(0,0,0)})},onAxisMoved:function(n){ta(this,this.mapping[this.data.hand].axes,n)}}),vt("position",{schema:{type:"vec3"},update:function(){var n=this.el.object3D,e=this.data;n.position.set(e.x,e.y,e.z)},remove:function(){this.el.object3D.position.set(0,0,0)}}),mn("components:raycaster:warn")),une=/^[\w\s-.,[\]#]*$/,hne={childList:!0,attributes:!0,subtree:!0},aO="raycaster-intersected-cleared",oO="raycaster-intersection-cleared";function lO(n,e){var t;for(n.length=e.length,t=0;t<e.length;t++)n[t]=e[t]}vt("raycaster",{schema:{autoRefresh:{default:!0},direction:{type:"vec3",default:{x:0,y:0,z:-1}},enabled:{default:!0},far:{default:1e3},interval:{default:0},near:{default:0},objects:{default:""},origin:{type:"vec3"},showLine:{default:!1},lineColor:{default:"white"},lineOpacity:{default:1},useWorldCoordinates:{default:!1}},multiple:!0,init:function(){this.clearedIntersectedEls=[],this.unitLineEndVec3=new B.Vector3,this.intersectedEls=[],this.intersections=[],this.newIntersectedEls=[],this.newIntersections=[],this.objects=[],this.prevCheckTime=void 0,this.prevIntersectedEls=[],this.rawIntersections=[],this.raycaster=new B.Raycaster,this.updateOriginDirection(),this.setDirty=this.setDirty.bind(this),this.updateLine=this.updateLine.bind(this),this.observer=new MutationObserver(this.setDirty),this.dirty=!0,this.lineEndVec3=new B.Vector3,this.otherLineEndVec3=new B.Vector3,this.lineData={end:this.lineEndVec3},this.getIntersection=this.getIntersection.bind(this),this.intersectedDetail={el:this.el,getIntersection:this.getIntersection},this.intersectedClearedDetail={el:this.el},this.intersectionClearedDetail={clearedEls:this.clearedIntersectedEls},this.intersectionDetail={}},update:function(n){var e=this.data,t=this.el,i=this.raycaster;i.far=e.far,i.near=e.near,!e.showLine||e.far===n.far&&e.origin===n.origin&&e.direction===n.direction&&n.showLine||(this.unitLineEndVec3.copy(e.direction).normalize(),this.drawLine()),!e.showLine&&n.showLine&&t.removeAttribute("line"),e.objects===n.objects||une.test(e.objects)||sO('[raycaster] Selector "'+e.objects+'" may not update automatically with DOM changes.'),e.objects||sO('[raycaster] For performance, please define raycaster.objects when using raycaster or cursor components to whitelist which entities to intersect with. e.g., raycaster="objects: [data-raycastable]".'),e.autoRefresh!==n.autoRefresh&&t.isPlaying&&(e.autoRefresh?this.addEventListeners():this.removeEventListeners()),n.enabled&&!e.enabled&&this.clearAllIntersections(),e.objects!==n.objects&&this.setDirty()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){this.data.showLine&&this.el.removeAttribute("line"),this.clearAllIntersections()},addEventListeners:function(){this.data.autoRefresh&&(this.observer.observe(this.el.sceneEl,hne),this.el.sceneEl.addEventListener("object3dset",this.setDirty),this.el.sceneEl.addEventListener("object3dremove",this.setDirty))},removeEventListeners:function(){this.observer.disconnect(),this.el.sceneEl.removeEventListener("object3dset",this.setDirty),this.el.sceneEl.removeEventListener("object3dremove",this.setDirty)},setDirty:function(){this.dirty=!0},refreshObjects:function(){var n,e=this.data;n=e.objects?this.el.sceneEl.querySelectorAll(e.objects):this.el.sceneEl.querySelectorAll("*"),this.objects=this.flattenObject3DMaps(n),this.dirty=!1},tock:function(n){var e=this.data,t=this.prevCheckTime;e.enabled&&(t&&n-t<e.interval||(this.prevCheckTime=n,this.checkIntersections()))},checkIntersections:function(){var n,e,t=this.clearedIntersectedEls,i=this.el,r=this.data,s=this.intersectedEls,a=this.intersections,o=this.newIntersectedEls,c=this.newIntersections,h=this.prevIntersectedEls,d=this.rawIntersections;for(this.dirty&&this.refreshObjects(),lO(this.prevIntersectedEls,this.intersectedEls),this.updateOriginDirection(),d.length=0,this.raycaster.intersectObjects(this.objects,!0,d),a.length=0,s.length=0,n=0;n<d.length;n++)e=d[n],r.showLine&&e.object===i.getObject3D("line")||e.object.el&&(a.push(e),s.push(e.object.el));for(c.length=0,o.length=0,n=0;n<a.length;n++)h.indexOf(a[n].object.el)===-1&&(c.push(a[n]),o.push(a[n].object.el));for(t.length=0,n=0;n<h.length;n++)s.indexOf(h[n])===-1&&(h[n].emit(aO,this.intersectedClearedDetail),t.push(h[n]));for(t.length&&i.emit(oO,this.intersectionClearedDetail),n=0;n<o.length;n++)o[n].emit("raycaster-intersected",this.intersectedDetail);c.length&&(this.intersectionDetail.els=o,this.intersectionDetail.intersections=c,i.emit("raycaster-intersection",this.intersectionDetail)),(h.length===0&&a.length>0||h.length>0&&a.length===0||h.length&&a.length&&h[0]!==a[0].object.el)&&(this.intersectionDetail.els=this.intersectedEls,this.intersectionDetail.intersections=a,i.emit("raycaster-closest-entity-changed",this.intersectionDetail)),r.showLine&&setTimeout(this.updateLine)},updateLine:function(){var n,e=this.el,t=this.intersections;t.length&&(n=t[0].object.el===e&&t[1]?t[1].distance:t[0].distance),this.drawLine(n)},getIntersection:function(n){var e,t;for(e=0;e<this.intersections.length;e++)if((t=this.intersections[e]).object.el===n)return t;return null},updateOriginDirection:function(){var n=new B.Vector3,e=new B.Vector3;return function(){var t=this.el,i=this.data;i.useWorldCoordinates?this.raycaster.set(i.origin,i.direction):(t.object3D.updateMatrixWorld(),e.setFromMatrixPosition(t.object3D.matrixWorld),i.origin.x===0&&i.origin.y===0&&i.origin.z===0||(e=t.object3D.localToWorld(e.copy(i.origin))),n.copy(i.direction).transformDirection(t.object3D.matrixWorld).normalize(),this.raycaster.set(e,n))}}(),drawLine:function(n){var e,t=this.data,i=this.el;e=this.lineData.end===this.lineEndVec3?this.otherLineEndVec3:this.lineEndVec3,n===void 0&&(n=t.far===1/0?1e3:t.far),this.lineData.start=t.origin,this.lineData.end=e.copy(this.unitLineEndVec3).multiplyScalar(n).add(t.origin),this.lineData.color=t.lineColor,this.lineData.opacity=t.lineOpacity,i.setAttribute("line",this.lineData)},flattenObject3DMaps:function(n){var e,t,i=this.objects,r=this.el.sceneEl.object3D;function s(o){return o.parent?s(o.parent):o===r}for(i.length=0,t=0;t<n.length;t++){var a=n[t];if(a.isEntity&&a.object3D&&s(a.object3D))for(e in a.object3DMap)i.push(a.getObject3D(e))}return i},clearAllIntersections:function(){var n;for(n=0;n<this.intersectedEls.length;n++)this.intersectedEls[n].emit(aO,this.intersectedClearedDetail);lO(this.clearedIntersectedEls,this.intersectedEls),this.intersectedEls.length=0,this.intersections.length=0,this.el.emit(oO,this.intersectionClearedDetail)}});var cO,Yh,uO,hO,n1=B.MathUtils.degToRad,i1=(vt("rotation",{schema:{type:"vec3"},update:function(){var n=this.data;this.el.object3D.rotation.set(n1(n.x),n1(n.y),n1(n.z),"YXZ")},remove:function(){this.el.object3D.rotation.set(0,0,0)}}),vt("scale",{schema:{type:"vec3",default:{x:1,y:1,z:1}},update:function(){var n=this.data;this.el.object3D.scale.set(n.x,n.y,n.z)},remove:function(){this.el.object3D.scale.set(1,1,1)}}),vt("shadow",{schema:{cast:{default:!0},receive:{default:!0}},init:function(){this.onMeshChanged=this.update.bind(this),this.el.addEventListener("object3dset",this.onMeshChanged),this.system.setShadowMapEnabled(!0)},update:function(){var n=this.data;this.updateDescendants(n.cast,n.receive)},remove:function(){this.el.removeEventListener("object3dset",this.onMeshChanged),this.updateDescendants(!1,!1)},updateDescendants:function(n,e){var t=this.el.sceneEl;this.el.object3D.traverse(function(i){if(i instanceof B.Mesh&&(i.castShadow=n,i.receiveShadow=e,t.hasLoaded&&i.material))for(var r=Array.isArray(i.material)?i.material:[i.material],s=0;s<r.length;s++)r[s].needsUpdate=!0})}}),mn("components:sound:warn")),dne=(vt("sound",{schema:{autoplay:{default:!1},distanceModel:{default:"inverse",oneOf:["linear","inverse","exponential"]},loop:{default:!1},loopStart:{default:0},loopEnd:{default:0},maxDistance:{default:1e4},on:{default:""},poolSize:{default:1},positional:{default:!0},refDistance:{default:1},rolloffFactor:{default:1},src:{type:"audio"},volume:{default:1}},multiple:!0,init:function(){var n=this;this.listener=null,this.audioLoader=new B.AudioLoader,this.pool=new B.Group,this.loaded=!1,this.mustPlay=!1,this.playSoundBound=function(){n.playSound()}},update:function(n){var e,t,i=this.data,r=i.src!==n.src;if(r){if(!i.src)return;this.setupSound()}for(e=0;e<this.pool.children.length;e++)t=this.pool.children[e],i.positional&&(t.setDistanceModel(i.distanceModel),t.setMaxDistance(i.maxDistance),t.setRefDistance(i.refDistance),t.setRolloffFactor(i.rolloffFactor)),t.setLoop(i.loop),t.setLoopStart(i.loopStart),i.loopStart!==0&&i.loopEnd===0?t.setLoopEnd(t.buffer.duration):t.setLoopEnd(i.loopEnd),t.setVolume(i.volume),t.isPaused=!1;if(i.on!==n.on&&this.updateEventListener(n.on),r){var s=this;this.loaded=!1,this.audioLoader.load(i.src,function(a){for(e=0;e<s.pool.children.length;e++)(t=s.pool.children[e]).setBuffer(a);s.loaded=!0,B.Cache.remove(i.src),(s.data.autoplay||s.mustPlay)&&s.playSound(s.processSound),s.el.emit("sound-loaded",s.evtDetail,!1)})}},pause:function(){this.stopSound(),this.removeEventListener()},play:function(){this.data.autoplay&&this.playSound(),this.updateEventListener()},remove:function(){var n;this.removeEventListener(),this.el.getObject3D(this.attrName)&&this.el.removeObject3D(this.attrName);try{for(n=0;n<this.pool.children.length;n++)this.pool.children[n].disconnect()}catch{i1("Audio source not properly disconnected")}},updateEventListener:function(n){var e=this.el;n&&e.removeEventListener(n,this.playSoundBound),e.addEventListener(this.data.on,this.playSoundBound)},removeEventListener:function(){this.el.removeEventListener(this.data.on,this.playSoundBound)},setupSound:function(){var n,e,t=this.el,i=t.sceneEl,r=this;this.pool.children.length>0&&(this.stopSound(),t.removeObject3D("sound"));var s=this.listener=i.audioListener||new B.AudioListener;for(i.audioListener=s,i.camera&&i.camera.add(s),i.addEventListener("camera-set-active",function(a){a.detail.cameraEl.getObject3D("camera").add(s)}),this.pool=new B.Group,n=0;n<this.data.poolSize;n++)e=this.data.positional?new B.PositionalAudio(s):new B.Audio(s),this.pool.add(e);for(t.setObject3D(this.attrName,this.pool),n=0;n<this.pool.children.length;n++)(e=this.pool.children[n]).onEnded=function(){this.isPlaying=!1,r.el.emit("sound-ended",r.evtDetail,!1)}},pauseSound:function(){var n,e;for(this.isPlaying=!1,n=0;n<this.pool.children.length;n++)(e=this.pool.children[n]).source&&e.source.buffer&&e.isPlaying&&!e.isPaused&&(e.isPaused=!0,e.pause())},playSound:function(n){var e,t,i;if(!this.loaded)return i1("Sound not loaded yet. It will be played once it finished loading"),this.mustPlay=!0,void(this.processSound=n);for(e=!1,this.isPlaying=!0,t=0;t<this.pool.children.length;t++)(i=this.pool.children[t]).isPlaying||!i.buffer||e||(n&&n(i),i.play(),i.isPaused=!1,e=!0);e?(this.mustPlay=!1,this.processSound=void 0):i1("All the sounds are playing. If you need to play more sounds simultaneously consider increasing the size of pool with the `poolSize` attribute.",this.el)},stopSound:function(){var n,e;for(this.isPlaying=!1,n=0;n<this.pool.children.length;n++){if(!(e=this.pool.children[n]).source||!e.source.buffer)return;e.stop()}}}),xt(4433)),fne=xt.n(dne),pne=xt(5751),mne=xt.n(pne),Kh=mn("components:text:error"),Ane=mn("components:text:warn"),Bo=pi+"fonts/",dO={aileronsemibold:Bo+"Aileron-Semibold.fnt",dejavu:Bo+"DejaVu-sdf.fnt",exo2bold:Bo+"Exo2Bold.fnt",exo2semibold:Bo+"Exo2SemiBold.fnt",kelsonsans:Bo+"KelsonSans.fnt",monoid:Bo+"Monoid.fnt",mozillavr:Bo+"mozillavr.fnt",roboto:Bo+"Roboto-msdf.json",sourcecodepro:Bo+"SourceCodePro.fnt"},fO=["roboto"],r1="roboto",pO=new function(){var n=this.cache={};this.get=function(e,t){return e in n||(n[e]=t()),n[e]}},mO={},Q0={},gne=/^\w+:/;function AO(n,e,t){return n||(.5+e)*t}vt("text",{multiple:!0,schema:{align:{type:"string",default:"left",oneOf:["left","right","center"]},alphaTest:{default:.5},anchor:{default:"center",oneOf:["left","right","center","align"]},baseline:{default:"center",oneOf:["top","center","bottom"]},color:{type:"color",default:"#FFF"},font:{type:"string",default:r1},fontImage:{type:"string"},height:{type:"number"},letterSpacing:{type:"number",default:0},lineHeight:{type:"number"},negate:{type:"boolean",default:!0},opacity:{type:"number",default:1},shader:{default:"sdf",oneOf:Va},side:{default:"front",oneOf:["front","back","double"]},tabSize:{default:4},transparent:{default:!0},value:{type:"string"},whiteSpace:{default:"normal",oneOf:["normal","pre","nowrap"]},width:{type:"number"},wrapCount:{type:"number",default:40},wrapPixels:{type:"number"},xOffset:{type:"number",default:0},yOffset:{type:"number",default:0},zOffset:{type:"number",default:.001}},init:function(){this.shaderData={},this.geometry=fne()(),this.createOrUpdateMaterial(),this.explicitGeoDimensionsChecked=!1},update:function(n){var e=this.data,t=this.currentFont;Q0[e.font]?this.texture=Q0[e.font]:(this.texture=Q0[e.font]=new B.Texture,this.texture.anisotropy=16),this.createOrUpdateMaterial(),n.font===e.font?t&&(this.updateGeometry(this.geometry,t),this.updateLayout()):this.updateFont()},remove:function(){this.geometry.dispose(),this.geometry=null,this.el.removeObject3D(this.attrName),this.material.dispose(),this.material=null,this.texture.dispose(),this.texture=null,this.shaderObject&&delete this.shaderObject},createOrUpdateMaterial:function(){var n,e,t,i=this.data,r=this.material,s=this.shaderData;if(t=i.shader,fO.indexOf(i.font)!==-1||i.font.indexOf("-msdf.")>=0?t="msdf":i.font in dO&&fO.indexOf(i.font)===-1&&(t="sdf"),n=(this.shaderObject&&this.shaderObject.name)!==t,s.alphaTest=i.alphaTest,s.color=i.color,s.map=this.texture,s.opacity=i.opacity,s.side=function(a){switch(a){case"back":return B.FrontSide;case"double":return B.DoubleSide;default:return B.BackSide}}(i.side),s.transparent=i.transparent,s.negate=i.negate,!n)return this.shaderObject.update(s),r.transparent=s.transparent,void(r.side=s.side);e=function(a,o,c){var h,d;return(d=new Va[o].Shader).el=a,d.init(c),d.update(c),(h=d.material).transparent=c.transparent,{material:h,shader:d}}(this.el,t,s),this.material=e.material,this.shaderObject=e.shader,this.material.side=s.side,this.mesh&&(this.mesh.material=this.material)},updateFont:function(){var n,e=this.data,t=this.el,i=this.geometry,r=this;e.font||Ane("No font specified. Using the default font."),this.mesh&&(this.mesh.visible=!1),n=this.lookupFont(e.font||r1)||e.font,pO.get(n,function(){return function(s,a){return new Promise(function(o,c){mne()(s,function(h,d){if(h)return Kh("Error loading font",s),void c(h);s.indexOf("/Roboto-msdf.json")>=0&&(a=30),a&&d.chars.forEach(function(p){p.yoffset+=a}),o(d)})})}(n,e.yOffset)}).then(function(s){var a;if(s.pages.length!==1)throw new Error("Currently only single-page bitmap fonts are supported.");mO[n]||(s.widthFactor=mO[s]=function(o){var c=0,h=0,d=0;return o.chars.forEach(function(p){c+=p.xadvance,p.id>=48&&p.id<=57&&(d++,h+=p.xadvance)}),d?h/d:c/o.chars.length}(s)),r.currentFont=s,a=r.getFontImageSrc(),pO.get(a,function(){return function(o){return new Promise(function(c,h){new B.ImageLoader().load(o,function(d){c(d)},void 0,function(){Kh("Error loading font image",o),h(null)})})}(a)}).then(function(o){var c=r.texture;c&&(c.image=o,c.needsUpdate=!0,Q0[e.font]=c,r.texture=c,r.initMesh(),r.currentFont=s,r.updateGeometry(i,s),r.updateLayout(),r.mesh.visible=!0,t.emit("textfontset",{font:e.font,fontObj:s}))}).catch(function(o){Kh(o.message),Kh(o.stack)})}).catch(function(s){Kh(s.message),Kh(s.stack)})},initMesh:function(){this.mesh||(this.mesh=new B.Mesh(this.geometry,this.material),this.el.setObject3D(this.attrName,this.mesh))},getFontImageSrc:function(){if(this.data.fontImage)return this.data.fontImage;var n=this.lookupFont(this.data.font||r1)||this.data.font,e=this.currentFont.pages[0];return e.match(gne)&&e.indexOf("http")!==0?n.replace(/(\.fnt)|(\.json)/,".png"):B.LoaderUtils.extractUrlBase(n)+e},updateLayout:function(){var n,e,t,i,r,s,a,o,c,h=this.el,d=this.data,p=this.geometry,m=this.mesh;if(m&&p.layout){if(t=h.getAttribute("geometry"),i=(s=(a=d.width||t&&t.width||1)/AO(d.wrapPixels,d.wrapCount,this.currentFont.widthFactor))*((r=p.layout).height+r.descender),t&&t.primitive==="plane"&&(this.explicitGeoDimensionsChecked||(this.explicitGeoDimensionsChecked=!0,this.hasExplicitGeoWidth=!!t.width,this.hasExplicitGeoHeight=!!t.height),this.hasExplicitGeoWidth||h.setAttribute("geometry","width",a),this.hasExplicitGeoHeight||h.setAttribute("geometry","height",i)),(n=d.anchor==="align"?d.align:d.anchor)==="left")o=0;else if(n==="right")o=-1*r.width;else{if(n!=="center")throw new TypeError("Invalid text.anchor property value",n);o=-1*r.width/2}if((e=d.baseline)==="bottom")c=0;else if(e==="top")c=-1*r.height+r.ascender;else{if(e!=="center")throw new TypeError("Invalid text.baseline property value",e);c=-1*r.height/2}m.position.x=o*s+d.xOffset,m.position.y=c*s,m.position.z=d.zOffset,m.scale.set(s,-1*s,s)}},lookupFont:function(n){return dO[n]},updateGeometry:(cO={},Yh={},uO=/\\n/g,hO=/\\t/g,function(n,e){var t=this.data;Yh.font=e,Yh.lineHeight=t.lineHeight&&isFinite(t.lineHeight)?t.lineHeight:e.common.lineHeight,Yh.text=t.value.toString().replace(uO,`
`).replace(hO,"	"),Yh.width=AO(t.wrapPixels,t.wrapCount,e.widthFactor),n.update(Zr(cO,t,Yh))})});var Jh,s1,gO=(vt("tracked-controls",{schema:{id:{type:"string",default:""},controller:{default:-1},autoHide:{default:!0},hand:{type:"string",default:""},handTrackingEnabled:{default:!1},iterateControllerProfiles:{default:!1}},init:function(){this.buttonEventDetails={},this.buttonStates=this.el.components["tracked-controls"].buttonStates={},this.axis=this.el.components["tracked-controls"].axis=[0,0,0],this.changedAxes=[],this.axisMoveEventDetail={axis:this.axis,changed:this.changedAxes},this.updateController=this.updateController.bind(this)},update:function(){this.updateController()},play:function(){var n=this.el.sceneEl;this.updateController(),n.addEventListener("controllersupdated",this.updateController)},pause:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.updateController)},isControllerPresent:function(n){return!(!this.controller||this.controller.gamepad||n.inputSource.handedness!=="none"&&n.inputSource.handedness!==this.data.hand)},updateController:function(){this.controller=Z2(this.system.controllers,this.data.id,this.data.hand,this.data.controller,this.data.iterateControllerProfiles,this.data.handTrackingEnabled),this.el.components["tracked-controls"].controller=this.controller},tick:function(){var n=this.el.sceneEl,e=this.controller,t=n.frame;this.data.autoHide&&(this.el.object3D.visible=!!e),e&&n.frame&&this.system.referenceSpace&&(e.hand||(this.pose=t.getPose(e.gripSpace,this.system.referenceSpace),this.updatePose(),this.updateButtons()))},updatePose:function(){var n=this.el.object3D,e=this.pose;e&&(n.matrix.elements=e.transform.matrix,n.matrix.decompose(n.position,n.rotation,n.scale))},updateButtons:function(){var n,e,t,i=this.controller;if(i&&i.gamepad){for(t=i.gamepad,e=0;e<t.buttons.length;++e)this.buttonStates[e]||(this.buttonStates[e]={pressed:!1,touched:!1,value:0}),this.buttonEventDetails[e]||(this.buttonEventDetails[e]={id:e,state:this.buttonStates[e]}),n=t.buttons[e],this.handleButton(e,n);this.handleAxes()}},handleButton:function(n,e){return!!(this.handlePress(n,e)|this.handleTouch(n,e)|this.handleValue(n,e))&&(this.el.emit("buttonchanged",this.buttonEventDetails[n],!1),!0)},handleAxes:function(){var n,e=!1,t=this.controller.gamepad.axes,i=this.axis,r=this.changedAxes;for(this.changedAxes.splice(0,this.changedAxes.length),n=0;n<t.length;++n)r.push(i[n]!==t[n]),r[n]&&(e=!0);if(!e)return!1;for(this.axis.splice(0,this.axis.length),n=0;n<t.length;n++)this.axis.push(t[n]);return this.el.emit("axismove",this.axisMoveEventDetail,!1),!0},handlePress:function(n,e){var t,i=this.buttonStates[n];return e.pressed!==i.pressed&&(t=e.pressed?"buttondown":"buttonup",this.el.emit(t,this.buttonEventDetails[n],!1),i.pressed=e.pressed,!0)},handleTouch:function(n,e){var t,i=this.buttonStates[n];return e.touched!==i.touched&&(t=e.touched?"touchstart":"touchend",this.el.emit(t,this.buttonEventDetails[n],!1),i.touched=e.touched,!0)},handleValue:function(n,e){var t=this.buttonStates[n];return e.value!==t.value&&(t.value=e.value,!0)}}),vt("visible",{schema:{default:!0},update:function(){this.el.object3D.visible=this.data}}),pi+"controllers/valve/index/valve-index-"),vne={left:gO+"left.glb",right:gO+"right.glb"},vO="valve",yne={left:{x:0,y:-.05,z:.06},right:{x:0,y:-.05,z:.06}},bne={left:{_x:Math.PI/3,_y:0,_z:0,_order:"XYZ"},right:{_x:Math.PI/3,_y:0,_z:0,_order:"XYZ"}},Ene=(vt("valve-index-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0}},after:["tracked-controls"],mapping:{axes:{trackpad:[0,1],thumbstick:[2,3]},buttons:["trigger","grip","trackpad","thumbstick","abutton"]},init:function(){var n=this;this.controllerPresent=!1,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(e){Lt(e.detail.id,"down",n)},this.onButtonUp=function(e){Lt(e.detail.id,"up",n)},this.onButtonTouchEnd=function(e){Lt(e.detail.id,"touchend",n)},this.onButtonTouchStart=function(e){Lt(e.detail.id,"touchstart",n)},this.previousButtonValues={},this.bindMethods()},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var n=this.el;n.addEventListener("buttonchanged",this.onButtonChanged),n.addEventListener("buttondown",this.onButtonDown),n.addEventListener("buttonup",this.onButtonUp),n.addEventListener("touchend",this.onButtonTouchEnd),n.addEventListener("touchstart",this.onButtonTouchStart),n.addEventListener("model-loaded",this.onModelLoaded),n.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var n=this.el;n.removeEventListener("buttonchanged",this.onButtonChanged),n.removeEventListener("buttondown",this.onButtonDown),n.removeEventListener("buttonup",this.onButtonUp),n.removeEventListener("touchend",this.onButtonTouchEnd),n.removeEventListener("touchstart",this.onButtonTouchStart),n.removeEventListener("model-loaded",this.onModelLoaded),n.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var n=this.data,e=n.hand==="right"?0:n.hand==="left"?1:2;Ps(this,vO,{index:e,iterateControllerProfiles:!0,hand:n.hand})},injectTrackedControls:function(){var n=this.el,e=this.data;n.setAttribute("tracked-controls",{idPrefix:vO,controller:e.hand==="right"?1:e.hand==="left"?0:2,hand:e.hand}),this.loadModel()},loadModel:function(){var n=this.data;n.model&&this.el.setAttribute("gltf-model",""+vne[n.hand])},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(n){var e,t=this.mapping.buttons[n.detail.id],i=this.buttonMeshes;t&&(t==="trigger"&&(e=n.detail.state.value,i&&i.trigger&&(i.trigger.rotation.x=this.triggerOriginalRotationX-e*(Math.PI/40))),this.el.emit(t+"changed",n.detail.state))},onModelLoaded:function(n){var e,t=n.detail.model,i=this;n.target===this.el&&this.data.model&&((e=this.buttonMeshes={}).grip={left:t.getObjectByName("leftgrip"),right:t.getObjectByName("rightgrip")},e.menu=t.getObjectByName("menubutton"),e.system=t.getObjectByName("systembutton"),e.trackpad=t.getObjectByName("touchpad"),e.trigger=t.getObjectByName("trigger"),this.triggerOriginalRotationX=e.trigger.rotation.x,Object.keys(e).forEach(function(r){i.setButtonColor(r,i.data.buttonColor)}),t.position.copy(bne[this.data.hand]),t.rotation.copy(yne[this.data.hand]),this.el.emit("controllermodelready",{name:"valve-index-controls",model:this.data.model,rayOrigin:new B.Vector3(0,0,0)}))},onAxisMoved:function(n){ta(this,this.mapping.axes,n)},updateModel:function(n,e){var t;this.data.model&&(e.indexOf("touch")!==-1||(t=e==="up"?this.data.buttonColor:this.data.buttonHighlightColor,this.setButtonColor(n,t)))},setButtonColor:function(n,e){}}),pi+"controllers/vive/vr_controller_vive.obj"),xne=pi+"controllers/vive/vr_controller_vive.mtl",yO="htc-vive",Cne=(vt("vive-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0}},after:["tracked-controls"],mapping:{axes:{touchpad:[0,1]},buttons:["trigger","grip","touchpad","none"]},init:function(){var n=this;this.controllerPresent=!1,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(e){Lt(e.detail.id,"down",n)},this.onButtonUp=function(e){Lt(e.detail.id,"up",n)},this.onButtonTouchEnd=function(e){Lt(e.detail.id,"touchend",n)},this.onButtonTouchStart=function(e){Lt(e.detail.id,"touchstart",n)},this.previousButtonValues={},this.bindMethods()},update:function(){var n=this.data;this.controllerIndex=n.hand==="right"?0:n.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var n=this.el;n.addEventListener("buttonchanged",this.onButtonChanged),n.addEventListener("buttondown",this.onButtonDown),n.addEventListener("buttonup",this.onButtonUp),n.addEventListener("touchend",this.onButtonTouchEnd),n.addEventListener("touchstart",this.onButtonTouchStart),n.addEventListener("model-loaded",this.onModelLoaded),n.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var n=this.el;n.removeEventListener("buttonchanged",this.onButtonChanged),n.removeEventListener("buttondown",this.onButtonDown),n.removeEventListener("buttonup",this.onButtonUp),n.removeEventListener("touchend",this.onButtonTouchEnd),n.removeEventListener("touchstart",this.onButtonTouchStart),n.removeEventListener("model-loaded",this.onModelLoaded),n.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var n=this.data;Ps(this,yO,{index:this.controllerIndex,hand:n.hand})},injectTrackedControls:function(){var n=this.el,e=this.data;n.setAttribute("tracked-controls",{idPrefix:yO,hand:e.hand,controller:this.controllerIndex}),this.data.model&&this.el.setAttribute("obj-model",{obj:Ene,mtl:xne})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(n){var e,t=this.mapping.buttons[n.detail.id],i=this.buttonMeshes;t&&(t==="trigger"&&(e=n.detail.state.value,i&&i.trigger&&(i.trigger.rotation.x=-e*(Math.PI/12))),this.el.emit(t+"changed",n.detail.state))},onModelLoaded:function(n){var e,t=n.detail.model,i=this;n.target===this.el&&this.data.model&&((e=this.buttonMeshes={}).grip={left:t.getObjectByName("leftgrip"),right:t.getObjectByName("rightgrip")},e.menu=t.getObjectByName("menubutton"),e.system=t.getObjectByName("systembutton"),e.trackpad=t.getObjectByName("touchpad"),e.touchpad=t.getObjectByName("touchpad"),e.trigger=t.getObjectByName("trigger"),Object.keys(e).forEach(function(r){i.setButtonColor(r,i.data.buttonColor)}),t.position.set(0,-.015,.04))},onAxisMoved:function(n){ta(this,this.mapping.axes,n)},updateModel:function(n,e){var t;this.data.model&&(e.indexOf("touch")!==-1||(t=e==="up"?this.data.buttonColor:this.data.buttonHighlightColor,this.setButtonColor(n,t)))},setButtonColor:function(n,e){var t=this.buttonMeshes;if(t)return n==="grip"?(t.grip.left.material.color.set(e),void t.grip.right.material.color.set(e)):void t[n].material.color.set(e)}}),pi+"controllers/vive/focus-controller/focus-controller.gltf"),bO="htc-vive-focus",EO=(vt("vive-focus-controls",{schema:{hand:{default:""},buttonTouchedColor:{type:"color",default:"#BBBBBB"},buttonHighlightColor:{type:"color",default:"#7A7A7A"},model:{default:!0}},after:["tracked-controls"],mapping:{axes:{touchpad:[0,1]},buttons:["trigger","none","touchpad","none","menu"]},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var n=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(e){Lt(e.detail.id,"down",n)},this.onButtonUp=function(e){Lt(e.detail.id,"up",n)},this.onButtonTouchStart=function(e){Lt(e.detail.id,"touchstart",n)},this.onButtonTouchEnd=function(e){Lt(e.detail.id,"touchend",n)},this.controllerPresent=!1,this.bindMethods()},addEventListeners:function(){var n=this.el;n.addEventListener("buttonchanged",this.onButtonChanged),n.addEventListener("buttondown",this.onButtonDown),n.addEventListener("buttonup",this.onButtonUp),n.addEventListener("touchstart",this.onButtonTouchStart),n.addEventListener("touchend",this.onButtonTouchEnd),n.addEventListener("model-loaded",this.onModelLoaded),n.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0,this.addControllersUpdateListener()},removeEventListeners:function(){var n=this.el;n.removeEventListener("buttonchanged",this.onButtonChanged),n.removeEventListener("buttondown",this.onButtonDown),n.removeEventListener("buttonup",this.onButtonUp),n.removeEventListener("touchstart",this.onButtonTouchStart),n.removeEventListener("touchend",this.onButtonTouchEnd),n.removeEventListener("model-loaded",this.onModelLoaded),n.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1,this.removeControllersUpdateListener()},checkIfControllerPresent:function(){Ps(this,bO,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){this.el.setAttribute("tracked-controls",{idPrefix:bO}),this.data.model&&this.el.setAttribute("gltf-model",Cne)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(n){var e,t=n.detail.model;n.target===this.el&&this.data.model&&((e=this.buttonMeshes={}).trigger=t.getObjectByName("BumperKey"),e.triggerPressed=t.getObjectByName("BumperKey_Press"),e.triggerPressed&&(e.triggerPressed.visible=!1),e.touchpad=t.getObjectByName("TouchPad"),e.touchpadPressed=t.getObjectByName("TouchPad_Press"),e.trackpad=t.getObjectByName("TouchPad"),e.trackpadPressed=t.getObjectByName("TouchPad_Press"),e.trackpadPressed&&(e.trackpadPressed.visible=!1))},onButtonChanged:function(n){var e=this.mapping.buttons[n.detail.id];e&&this.el.emit(e+"changed",n.detail.state)},onAxisMoved:function(n){ta(this,this.mapping.axes,n)},updateModel:function(n,e){this.data.model&&this.updateButtonModel(n,e)},updateButtonModel:function(n,e){var t=this.buttonMeshes,i=n+"Pressed";if(t&&t[n]&&t[i]){var r;switch(e){case"down":r=this.data.buttonHighlightColor;break;case"touchstart":r=this.data.buttonTouchedColor}r&&t[i].material.color.set(r),t[i].visible=!!r,t[n].visible=!r}}}),{38:"ArrowUp",37:"ArrowLeft",40:"ArrowDown",39:"ArrowRight",87:"KeyW",65:"KeyA",83:"KeyS",68:"KeyD"}),_ne=nM,xO=1e-5,wne=["KeyW","KeyA","KeyS","KeyD","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"];vt("wasd-controls",{schema:{acceleration:{default:65},adAxis:{default:"x",oneOf:["x","y","z"]},adEnabled:{default:!0},adInverted:{default:!1},enabled:{default:!0},fly:{default:!1},wsAxis:{default:"z",oneOf:["x","y","z"]},wsEnabled:{default:!0},wsInverted:{default:!1}},after:["look-controls"],init:function(){this.keys={},this.easing=1.1,this.velocity=new B.Vector3,this.onBlur=this.onBlur.bind(this),this.onContextMenu=this.onContextMenu.bind(this),this.onFocus=this.onFocus.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.onVisibilityChange=this.onVisibilityChange.bind(this),this.attachVisibilityEventListeners()},tick:function(n,e){var t=this.data,i=this.el,r=this.velocity;(r[t.adAxis]||r[t.wsAxis]||!function(s){var a;for(a in s)return!1;return!0}(this.keys))&&(e/=1e3,this.updateVelocity(e),(r[t.adAxis]||r[t.wsAxis])&&i.object3D.position.add(this.getMovementVector(e)))},update:function(n){n.adAxis!==this.data.adAxis&&(this.velocity[n.adAxis]=0),n.wsAxis!==this.data.wsAxis&&(this.velocity[n.wsAxis]=0)},remove:function(){this.removeKeyEventListeners(),this.removeVisibilityEventListeners()},play:function(){this.attachKeyEventListeners()},pause:function(){this.keys={},this.removeKeyEventListeners()},updateVelocity:function(n){var e,t,i,r,s,a=this.data,o=this.keys,c=this.velocity;if(t=a.adAxis,r=a.wsAxis,n>.2)return c[t]=0,void(c[r]=0);var h=Math.pow(1/this.easing,60*n);c[t]!==0&&(c[t]=c[t]*h),c[r]!==0&&(c[r]=c[r]*h),Math.abs(c[t])<xO&&(c[t]=0),Math.abs(c[r])<xO&&(c[r]=0),a.enabled&&(e=a.acceleration,a.adEnabled&&(i=a.adInverted?-1:1,(o.KeyA||o.ArrowLeft)&&(c[t]-=i*e*n),(o.KeyD||o.ArrowRight)&&(c[t]+=i*e*n)),a.wsEnabled&&(s=a.wsInverted?-1:1,(o.KeyW||o.ArrowUp)&&(c[r]-=s*e*n),(o.KeyS||o.ArrowDown)&&(c[r]+=s*e*n)))},getMovementVector:(Jh=new B.Vector3(0,0,0),s1=new B.Euler(0,0,0,"YXZ"),function(n){var e,t=this.el.getAttribute("rotation"),i=this.velocity;return Jh.copy(i),Jh.multiplyScalar(n),t&&(e=this.data.fly?t.x:0,s1.set(B.MathUtils.degToRad(e),B.MathUtils.degToRad(t.y),0),Jh.applyEuler(s1)),Jh}),attachVisibilityEventListeners:function(){window.oncontextmenu=this.onContextMenu,window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus),document.addEventListener("visibilitychange",this.onVisibilityChange)},removeVisibilityEventListeners:function(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),document.removeEventListener("visibilitychange",this.onVisibilityChange)},attachKeyEventListeners:function(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)},removeKeyEventListeners:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)},onContextMenu:function(){for(var n=Object.keys(this.keys),e=0;e<n.length;e++)delete this.keys[n[e]]},onBlur:function(){this.pause()},onFocus:function(){this.play()},onVisibilityChange:function(){document.hidden?this.onBlur():this.onFocus()},onKeyDown:function(n){var e;_ne(n)&&(e=n.code||EO[n.keyCode],wne.indexOf(e)!==-1&&(this.keys[e]=!0))},onKeyUp:function(n){var e;e=n.code||EO[n.keyCode],delete this.keys[e]}});var a1,z0,pp,mp=mn("components:windows-motion-controls:debug"),Zh=mn("components:windows-motion-controls:warn"),Sne=pi+"controllers/microsoft/",CO={left:"left.glb",right:"right.glb",default:"universal.glb"},_O="windows-mixed-reality",$h=(vt("windows-motion-controls",{schema:{hand:{default:"right"},pair:{default:0},model:{default:!0}},after:["tracked-controls"],mapping:{axes:{touchpad:[0,1],thumbstick:[2,3]},buttons:["trigger","squeeze","touchpad","thumbstick","menu"],axisMeshNames:["TOUCHPAD_TOUCH_X","TOUCHPAD_TOUCH_X","THUMBSTICK_X","THUMBSTICK_Y"],buttonMeshNames:{trigger:"SELECT",menu:"MENU",squeeze:"GRASP",thumbstick:"THUMBSTICK_PRESS",touchpad:"TOUCHPAD_PRESS"},pointingPoseMeshName:"POINTING_POSE"},bindMethods:function(){this.onModelError=this.onModelError.bind(this),this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var n=this,e=this.el;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(t){Lt(t.detail.id,"down",n)},this.onButtonUp=function(t){Lt(t.detail.id,"up",n)},this.onButtonTouchStart=function(t){Lt(t.detail.id,"touchstart",n)},this.onButtonTouchEnd=function(t){Lt(t.detail.id,"touchend",n)},this.onControllerConnected=function(){n.setModelVisibility(!0)},this.onControllerDisconnected=function(){n.setModelVisibility(!1)},this.controllerPresent=!1,this.previousButtonValues={},this.bindMethods(),this.loadedMeshInfo={buttonMeshes:null,axisMeshes:null},this.rayOrigin={origin:new B.Vector3,direction:new B.Vector3(0,0,-1),createdFromMesh:!1},e.addEventListener("controllerconnected",this.onControllerConnected),e.addEventListener("controllerdisconnected",this.onControllerDisconnected)},addEventListeners:function(){var n=this.el;n.addEventListener("buttonchanged",this.onButtonChanged),n.addEventListener("buttondown",this.onButtonDown),n.addEventListener("buttonup",this.onButtonUp),n.addEventListener("touchstart",this.onButtonTouchStart),n.addEventListener("touchend",this.onButtonTouchEnd),n.addEventListener("axismove",this.onAxisMoved),n.addEventListener("model-error",this.onModelError),n.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var n=this.el;n.removeEventListener("buttonchanged",this.onButtonChanged),n.removeEventListener("buttondown",this.onButtonDown),n.removeEventListener("buttonup",this.onButtonUp),n.removeEventListener("touchstart",this.onButtonTouchStart),n.removeEventListener("touchend",this.onButtonTouchEnd),n.removeEventListener("axismove",this.onAxisMoved),n.removeEventListener("model-error",this.onModelError),n.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){Ps(this,_O,{hand:this.data.hand,index:this.data.pair,iterateControllerProfiles:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},updateControllerModel:function(){if(this.data.model&&!this.rayOrigin.createdFromMesh){var n=this.createControllerModelUrl();this.loadModel(n)}else this.modelReady()},createControllerModelUrl:function(n){var e=this.data.hand;return Sne+"default/"+(CO[e]||CO.default)},injectTrackedControls:function(){var n=this.data;this.el.setAttribute("tracked-controls",{idPrefix:_O,controller:n.pair,hand:n.hand}),this.updateControllerModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelError:function(n){var e=this.createControllerModelUrl(!0);n.detail.src!==e?(Zh("Failed to load controller model for device, attempting to load default."),this.loadModel(e)):Zh("Failed to load default controller model.")},loadModel:function(n){this.el.setAttribute("gltf-model","url("+n+")")},onModelLoaded:function(n){var e,t,i,r,s=this.controllerModel=n.detail.model,a=this.loadedMeshInfo;if(n.target===this.el){if(mp("Processing model"),a.buttonMeshes={},a.axisMeshes={},s){for(e=0;e<this.mapping.buttons.length;e++)(t=this.mapping.buttonMeshNames[this.mapping.buttons[e]])?(i=s.getObjectByName(t))?(r={index:e,value:o(i,"VALUE"),pressed:o(i,"PRESSED"),unpressed:o(i,"UNPRESSED")}).value&&r.pressed&&r.unpressed?a.buttonMeshes[this.mapping.buttons[e]]=r:Zh("Missing button submesh under mesh with name: "+t+"(VALUE: "+!!r.value+", PRESSED: "+!!r.pressed+", UNPRESSED:"+!!r.unpressed+")"):Zh("Missing button mesh with name: "+t):mp("Skipping unknown button at index: "+e+" with mapped name: "+this.mapping.buttons[e]);for(e=0;e<this.mapping.axisMeshNames.length;e++)(t=this.mapping.axisMeshNames[e])?(i=s.getObjectByName(t))?(r={index:e,value:o(i,"VALUE"),min:o(i,"MIN"),max:o(i,"MAX")}).value&&r.min&&r.max?a.axisMeshes[e]=r:Zh("Missing axis submesh under mesh with name: "+t+"(VALUE: "+!!r.value+", MIN: "+!!r.min+", MAX:"+!!r.max+")"):Zh("Missing axis mesh with name: "+t):mp("Skipping unknown axis at index: "+e);this.calculateRayOriginFromMesh(s),this.setModelVisibility()}mp("Model load complete.")}function o(c,h){for(var d=0,p=c.children.length;d<p;d++){var m=c.children[d];if(m&&m.name===h)return m}}},calculateRayOriginFromMesh:function(){var n=new B.Quaternion;return function(e){var t;if(this.rayOrigin.origin.set(0,0,0),this.rayOrigin.direction.set(0,0,-1),this.rayOrigin.createdFromMesh=!0,t=e.getObjectByName(this.mapping.pointingPoseMeshName)){var i=e.parent;i&&(e.parent=null,e.updateMatrixWorld(!0),e.parent=i),t.getWorldPosition(this.rayOrigin.origin),t.getWorldQuaternion(n),this.rayOrigin.direction.applyQuaternion(n),i&&e.updateMatrixWorld(!0)}else mp("Mesh does not contain pointing origin data, defaulting to none.");this.modelReady()}}(),lerpAxisTransform:function(){var n=new B.Quaternion;return function(e,t){var i=this.loadedMeshInfo.axisMeshes[e];if(i){var r=i.min,s=i.max,a=i.value,o=.5*t+.5;a.setRotationFromQuaternion(n.copy(r.quaternion).slerp(s.quaternion,o)),a.position.lerpVectors(r.position,s.position,o)}}}(),lerpButtonTransform:function(){var n=new B.Quaternion;return function(e,t){var i=this.loadedMeshInfo.buttonMeshes[e];if(i){var r=i.unpressed,s=i.pressed,a=i.value;a.setRotationFromQuaternion(n.copy(r.quaternion).slerp(s.quaternion,t)),a.position.lerpVectors(r.position,s.position,t)}}}(),modelReady:function(){this.el.emit("controllermodelready",{name:"windows-motion-controls",model:this.data.model,rayOrigin:this.rayOrigin})},onButtonChanged:function(n){var e=this.mapping.buttons[n.detail.id];e&&(this.loadedMeshInfo&&this.loadedMeshInfo.buttonMeshes&&this.lerpButtonTransform(e,n.detail.state.value),this.el.emit(e+"changed",n.detail.state))},onAxisMoved:function(n){var e=this.mapping.axisMeshNames.length;if(this.loadedMeshInfo&&this.loadedMeshInfo.axisMeshes)for(var t=0;t<e;t++)this.lerpAxisTransform(t,n.detail.axis[t]||0);ta(this,this.mapping.axes,n)},setModelVisibility:function(n){var e=this.el.getObject3D("mesh");this.controllerPresent&&(n=n!==void 0?n:this.modelVisible,this.modelVisible=n,e&&(e.visible=n))}}),a1=new B.Quaternion,z0=new B.Vector3,function(n,e,t){e.position.copy(n.transform.position),e.quaternion.copy(n.transform.orientation),z0.copy(t),a1.copy(n.transform.orientation),z0.applyQuaternion(a1),e.position.sub(z0)});function ur(n,e){this.renderer=n,this.xrHitTestSource=null,n.xr.addEventListener("sessionend",(function(){this.xrHitTestSource=null}).bind(this)),n.xr.addEventListener("sessionstart",(function(){this.sessionStart(e)}).bind(this)),this.renderer.xr.isPresenting&&this.sessionStart(e)}function o1(n){console.warn(n.message),console.warn('Cannot requestHitTestSource Are you missing: webxr="optionalFeatures: hit-test;" from <a-scene>?')}$h.tempFakePose={transform:{orientation:new B.Quaternion,position:new B.Vector3}},ur.prototype.previousFrameAnchors=new Set,ur.prototype.anchorToObject3D=new Map,ur.prototype.sessionStart=function(n){this.session=this.renderer.xr.getSession(),"requestHitTestSource"in this.session?n.space?this.session.requestHitTestSource(n).then((function(e){this.xrHitTestSource=e}).bind(this)).catch(o1):n.profile&&this.session.requestHitTestSourceForTransientInput(n).then((function(e){this.xrHitTestSource=e,this.transient=!0}).bind(this)).catch(o1):o1({message:"No requestHitTestSource on the session."})},ur.prototype.anchorFromLastHitTestResult=function(n,e){var t=this.lastHitTest;if(t){var i={object3D:n,offset:e};Array.from(this.anchorToObject3D.entries()).forEach((function(r){var s=r[1].object3D,a=r[0];s===n&&(this.anchorToObject3D.delete(a),a.delete())}).bind(this)),t.createAnchor&&t.createAnchor().then((function(r){this.anchorToObject3D.set(r,i)}).bind(this)).catch(function(r){console.warn(r.message),console.warn('Cannot create anchor, are you missing: webxr="optionalFeatures: anchors;" from <a-scene>?')})}},ur.prototype.doHit=function(n){if(this.renderer.xr.isPresenting){var e,t,i=this.renderer.xr.getReferenceSpace(),r=n.getViewerPose(i);return this.xrHitTestSource&&r?this.transient?(e=n.getHitTestResultsForTransientInput(this.xrHitTestSource)).length>0&&(t=e[0].results).length>0&&(this.lastHitTest=t[0],t[0].getPose(i)):(e=n.getHitTestResults(this.xrHitTestSource)).length>0&&(this.lastHitTest=e[0],e[0].getPose(i)):void 0}},ur.updateAnchorPoses=function(n,e){var t=n.trackedAnchors||ur.prototype.previousFrameAnchors;ur.prototype.previousFrameAnchors.forEach(function(i){t.has(i)||ur.prototype.anchorToObject3D.delete(i)}),t.forEach(function(i){var r,s,a,o;try{if(r=n.getPose(i.anchorSpace,e)){if(!(s=ur.prototype.anchorToObject3D.get(i)))return;a=s.offset,o=s.object3D,$h(r,o,a)}}catch(c){console.error("while updating anchor poses:",c)}}),ur.prototype.previousFrameAnchors=t},vt("ar-hit-test",{schema:{target:{type:"selector"},enabled:{default:!0},src:{default:"data:image/webp;base64,UklGRkQHAABXRUJQVlA4WAoAAAAQAAAA/wEA/wEAQUxQSL0DAAARDzD/ERGCjrY9sYYFfgo6aa1kJ7K0w9Lo3AadLSVeFxevQwj5kuM8RfR/Atw/C0+ozB/oUBrloFZs6ElSW88j1KA4yExNWQaqRZquIDF0JYmlq0hAuUDTFu66tng3teW7pa3cQf1V1edvur54M/Slm6Wv3Gx9zw0MXlQLntcsBN6wkHjTQuYtC4W3LTw8mGRVG57TbAROtxHfZNhInGkjc5aNwtk2Hg6Mvki14k+NkZzCwQgCxalcAv3kddRTPI1DcUrXId1FLf1uHpzaQz4tquhZVLlKesbVpqKeTj0n0F5PpXDlFN9UqmhalL/ImuZFo6KmToWLoKlddMprqlS8cKovBvHo2kTiFV2LN4msaxKZl3QNiair8xYRdDWivIvXVXmbcMqJ51UebZuFXxZt6xd4laxtciqRtA3Cv0nU1t+kEUFbI8JvCa+tvkm3FDlO/W+OR99+kWEp/YYo+tYfTVnf/K8cE/F///3vv//993eeL+a+uvjawLcX3xjYvJotBFY3kVjTRGFtE+BU2AiMbiQyhpHMWEYeBozAH5qNBYRDB5KBCaTDBKKBAZTDBoKBDjwHAN5ABeCJBsAZcAAC0YHHxAYSMYBiYgGZWEA2MYFCbCCZGAAIANFEB+AnYgMQTDQAYSJ2AN5EBZAm4gDgTDgAeSIu4DGygTIRN1CMLOCZiACykQlg4jsAycgA8AO+BxCNdJyDkcbwRirDGXGnx8w+FDPrkM3MQ9JQZMYhiiwV/RDMtIM3U1/DmXHUo+IR2kSR2ToWkQ1NIn2qf2J8LCqJKiDUiSADHY3whirhdHgZ94HKaR97PhE+twEUJUFoAcgyTct8hfSxSkShASDKdMJ/ritKHwgyQ0sD4D/miCxU5SbhOOUDTnZpccCjYP/i0bZ/8bAgtVGEoGapWIQXyzKVKLwgNJFk2rtMIgoNRJlOZF7SNSSyUEeQmbxBFKEmtYjEe8S8zOZ1AkJVCmS88FJOtF40Ksg4oUaFiygk3C8qlTVNyl8UTevCUdAE2t14PfVqU1FPp57TopKeQZWromddTQp6QOfTOEQt/ZDuipZ11w/wOiqO8dRORcc6BQEkDQMClaHcn5wV9yLbxsNZNgpn2sicYSNxuo34Js1G4FQbnuNsOPa28PCWhcKbFjJvWEi8ZiHwqgXPcxbc5db33Cx95WboSzddX7yp+vyN0+eul7ZyN7Xlu64t3jVt4c5pc4JLV5EYupJE0xUknC4nOjVlmaYpyLit53HCQ0+ScnqceNcS5dzUkd0/CwMAVlA4IGADAAAQXwCdASoAAgACP8ne6Wy/tjCpqJ/IA/A5CWlu4XYBG/Pz8AfwD8APz//f3v8E1fuHZnxKYACtfuHZnxKYACrYTb5mOslhxu843ecbvON3nG7zjd3a0VCn7G1MABVxwH/Xd25gAK1+4dmfEpe2+PHhQaj75++riG6FuYACtfuHZnxKYACRrK3q9xO8Ss3uWKnMhs/rDF1hi6wxdYYusMXWGI5QRcCFDZog5OgqNlse1NDuz/UoFa/cOzPiUwAEsAOK4/nu5eZHK2tlXxJfNYlMABWv3Dsz4bvNJ5YA/LtxJ38SmAArX7h2Z8Sk5vdZUYv7mZPiUwAFa/cOzPh21s5OgZxf1mfEpemRyFr/rM+JS9noA/LtxJ38SmAAlUJIotzAASn6TjdhK+D3Dsz4dyvB7h2Z8O2tnJ0DOL+sz4lL2nKLT4lL/+iSLOocxq639w7M34MNZdm55uJ8v8ra2cpVZnxKTq2F3PN/cNksAfl24k7+JTAASqrD37h2Z7b1W+VtbOUqsz4lJ1bC7nm/uGyWAPy7cSd/EpgAJVVh79w7M9t6rfK2tnKVWZ8Sk6thdzzf3DZLAH5duJO/iUwAEqqw9+4dme29VvlbWzlKrM+JSdWwu55v7hslgD8u3EnfxKYACVVYe/cOzPbeq3ytrZylVme0kYJ8557FLerqFrzIbPrrf3DZLAH5duJO/iUvaVMS9BoaF4p7pSDFTP1XMyfElelrM0DOL+sz4eBJ13nV1OppBGPuKb4YzXQgq9uH19uS/0+JS9t9fr6ZUlQBelDG6GMgq97otb5QMPJwtKyBTbFp8Sl7b6/X0ykkawEOsgdiE6Fi0vb/Eve6xkwsmug0Z4nGNHQO8839bpTsjpz7SWIJxKagvd1QWMa6FYT1KEw3j4XDT6vJ9Xk+nyfT5Pq8n1eEmk5dinMM/9Fcfz4Z3Dsz3KD2dw7LxBRxKrqUUGQPH/7zxr1KIfNpLEJ0MZB2ITM/0Z2EFoh12NlXnEcpYcbvON3nG7zjd5xu84vfcNIAAP7+y8ceyzbVxkakPYY4lcr72fqOnDwipv+yxC71wAADBrjKnAAAAAAAAAAAAAAw7oNGHttqWONcoFN/2WIDc2pa6WVFtFYROlsaMaTXdcOjXHz93+YxAglKa4AAAAA=",type:"map"},type:{default:"footprint",oneOf:["footprint","map"]},footprintDepth:{default:.1},mapSize:{type:"vec2",default:{x:.5,y:.5}}},sceneOnly:!0,init:function(){this.hitTest=null,this.imageDataArray=new Uint8ClampedArray(1048576),this.imageData=new ImageData(this.imageDataArray,512,512),this.textureCache=new Map,this.orthoCam=new B.OrthographicCamera,this.orthoCam.layers.set(21),this.textureTarget=new B.WebGLRenderTarget(512,512,{}),this.basicMaterial=new B.MeshBasicMaterial({color:0,side:B.DoubleSide}),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.context.imageSmoothingEnabled=!1,this.canvas.width=512,this.canvas.height=512,this.canvasTexture=new B.CanvasTexture(this.canvas,{alpha:!0}),this.canvasTexture.flipY=!1;var n=this.el.getAttribute("webxr"),e=n.optionalFeatures;e.includes("hit-test")&&e.includes("anchors")||(e.push("hit-test"),e.push("anchors"),this.el.setAttribute("webxr",n)),this.el.sceneEl.renderer.xr.addEventListener("sessionend",(function(){this.hitTest=null}).bind(this)),this.el.sceneEl.addEventListener("enter-vr",(function(){if(this.el.is("ar-mode")){var t=this.el.sceneEl.renderer,i=this.session=t.xr.getSession();this.hasPosedOnce=!1,this.bboxMesh.visible=!1,pp||(pp=new Map),i.requestReferenceSpace("viewer").then((function(o){this.viewerHitTest=this.hitTest=new ur(t,{space:o}),this.el.emit("ar-hit-test-start")}).bind(this));var r=this;this.el.sceneEl.addEventListener("controllersupdated",function(){var o=this.xrSession&&this.xrSession.inputSources;if(o){for(var c=0;c<o.length;++c)if(o[c].targetRayMode==="tracked-pointer"){r.hitTest=new ur(t,{space:o[c].targetRaySpace}),pp.set(o[c],r.hitTest),r.viewerHitTest&&typeof r.viewerHitTest.cancel=="function"&&(r.viewerHitTest.cancel(),r.viewerHitTest=null);break}}});var s="generic-touchscreen",a=new ur(t,{profile:s});i.addEventListener("selectstart",(function(o){if(this.data.enabled===!0){var c=o.inputSource;this.bboxMesh.visible=!0,this.hasPosedOnce===!0&&(this.el.emit("ar-hit-test-select-start",{inputSource:c,position:this.bboxMesh.position,orientation:this.bboxMesh.quaternion}),c.profiles[0]===s?this.hitTest=a:(this.hitTest=pp.get(c)||new ur(t,{space:c.targetRaySpace}),pp.set(c,this.hitTest)))}}).bind(this)),i.addEventListener("selectend",(function(o){if(this.hitTest&&this.data.enabled===!0){var c,h=o.inputSource;this.hasPosedOnce===!0&&(this.bboxMesh.visible=!1,this.data.target&&(c=this.data.target.object3D)&&($h.tempFakePose.transform.position.copy(this.bboxMesh.position),$h.tempFakePose.transform.orientation.copy(this.bboxMesh.quaternion),$h($h.tempFakePose,c,this.bboxOffset),c.visible=!0,this.hitTest.anchorFromLastHitTestResult(c,this.bboxOffset)),this.el.emit("ar-hit-test-select",{inputSource:h,position:this.bboxMesh.position,orientation:this.bboxMesh.quaternion}),this.hitTest=null)}else this.hitTest=null}).bind(this))}}).bind(this)),this.bboxOffset=new B.Vector3,this.update=this.update.bind(this),this.makeBBox()},update:function(){this.data.enabled===!1&&(this.hitTest=null,this.bboxMesh.visible=!1),this.data.target&&(this.data.target.object3D?(this.data.target.addEventListener("model-loaded",this.update),this.data.target.object3D.layers.enable(21),this.data.target.object3D.traverse(function(n){n.layers.enable(21)})):this.data.target.addEventListener("loaded",this.update,{once:!0})),this.bboxNeedsUpdate=!0},makeBBox:function(){var n=new B.PlaneGeometry(1,1),e=new B.MeshBasicMaterial({transparent:!0,color:16777215});n.rotateX(-Math.PI/2),n.rotateY(-Math.PI/2),this.bbox=new B.Box3,this.bboxMesh=new B.Mesh(n,e),this.el.setObject3D("ar-hit-test",this.bboxMesh),this.bboxMesh.visible=!1},updateFootprint:function(){var n,e,t,i=this.el.sceneEl.renderer,r=i.xr.enabled;this.bboxMesh.material.map=this.canvasTexture,this.bboxMesh.material.needsUpdate=!0,this.orthoCam.rotation.set(-Math.PI/2,0,-Math.PI/2),this.orthoCam.position.copy(this.bboxMesh.position),this.orthoCam.position.y-=this.bboxMesh.scale.y/2,this.orthoCam.near=.1,this.orthoCam.far=this.orthoCam.near+this.data.footprintDepth*this.bboxMesh.scale.y,this.orthoCam.position.y+=this.orthoCam.far,this.orthoCam.right=this.bboxMesh.scale.z/2,this.orthoCam.left=-this.bboxMesh.scale.z/2,this.orthoCam.top=this.bboxMesh.scale.x/2,this.orthoCam.bottom=-this.bboxMesh.scale.x/2,this.orthoCam.updateProjectionMatrix(),e=i.getRenderTarget(),i.setRenderTarget(this.textureTarget),i.xr.enabled=!1,t=this.el.object3D.background,this.el.object3D.overrideMaterial=this.basicMaterial,this.el.object3D.background=null,i.render(this.el.object3D,this.orthoCam),this.el.object3D.background=t,this.el.object3D.overrideMaterial=null,i.xr.enabled=r,i.setRenderTarget(e),i.readRenderTargetPixels(this.textureTarget,0,0,512,512,this.imageDataArray),this.context.putImageData(this.imageData,0,0),this.context.shadowColor="white",this.context.shadowBlur=10,this.context.drawImage(this.canvas,0,0),n=this.context.getImageData(0,0,512,512);for(var s=0;s<262144;s++)n.data[4*s+3]!==0&&n.data[4*s+3]!==255&&(n.data[4*s+3]=128);this.context.putImageData(n,0,0),this.canvasTexture.needsUpdate=!0},tick:function(){var n,e,t=this.el.sceneEl.frame,i=this.el.sceneEl.renderer;t&&ur.updateAnchorPoses(t,i.xr.getReferenceSpace()),this.bboxNeedsUpdate&&(this.bboxNeedsUpdate=!1,this.data.target&&this.data.type!=="map"||(this.textureCache.has(this.data.src)?e=this.textureCache.get(this.data.src):(e=new B.TextureLoader().load(this.data.src),this.textureCache.set(this.data.src,e)),this.bboxMesh.material.map=e,this.bboxMesh.material.needsUpdate=!0),this.data.target&&this.data.target.object3D?(this.bbox.setFromObject(this.data.target.object3D),this.bbox.getCenter(this.bboxMesh.position),this.bbox.getSize(this.bboxMesh.scale),this.data.type==="footprint"&&(this.bboxMesh.scale.x*=1.04,this.bboxMesh.scale.z*=1.04,this.updateFootprint()),this.bboxMesh.position.y-=this.bboxMesh.scale.y/2,this.bboxOffset.copy(this.bboxMesh.position),this.bboxOffset.sub(this.data.target.object3D.position)):this.bboxMesh.scale.set(this.data.mapSize.x,1,this.data.mapSize.y)),this.hitTest&&(n=this.hitTest.doHit(t))&&(this.hasPosedOnce!==!0&&(this.hasPosedOnce=!0,this.el.emit("ar-hit-test-achieved")),this.bboxMesh.visible=!0,this.bboxMesh.position.copy(n.transform.position),this.bboxMesh.quaternion.copy(n.transform.orientation))}}),vt("background",{schema:{color:{type:"color",default:"black"},transparent:{default:!1}},sceneOnly:!0,update:function(){var n=this.data,e=this.el.object3D;n.transparent?e.background=null:e.background=new B.Color(n.color)},remove:function(){this.el.object3D.background=null}}),vt("debug",{schema:{default:!0},sceneOnly:!0});var wO="a-dialog-buttons-container",l1="a-dialog-button";function SO(n,e){var t,i,r,s;return(t=document.createElement("div")).classList.add("a-modal"),t.setAttribute(er,""),(i=document.createElement("div")).className="a-dialog",i.setAttribute(er,""),t.appendChild(i),(r=document.createElement("div")).classList.add("a-dialog-text-container"),i.appendChild(r),(s=document.createElement("div")).classList.add("a-dialog-text"),s.innerHTML=n,r.appendChild(s),i.appendChild(e),t}vt("device-orientation-permission-ui",{schema:{enabled:{default:!0},deviceMotionMessage:{default:"This immersive website requires access to your device motion sensors."},httpsMessage:{default:"Access this site over HTTPS to enter VR mode and grant access to the device sensors."},denyButtonText:{default:"Deny"},allowButtonText:{default:"Allow"},cancelButtonText:{default:"Cancel"}},sceneOnly:!0,init:function(){var n=this;this.data.enabled&&(window.isSecureContext||this.showHTTPAlert(),typeof DeviceOrientationEvent<"u"&&DeviceOrientationEvent.requestPermission?(this.onDeviceMotionDialogAllowClicked=this.onDeviceMotionDialogAllowClicked.bind(this),this.onDeviceMotionDialogDenyClicked=this.onDeviceMotionDialogDenyClicked.bind(this),DeviceOrientationEvent.requestPermission().then(function(){n.el.emit("deviceorientationpermissiongranted"),n.permissionGranted=!0}).catch(function(){var e,t,i,r,s,a,o,c;n.devicePermissionDialogEl=(e=n.data.denyButtonText,t=n.data.allowButtonText,i=n.data.deviceMotionMessage,r=n.onDeviceMotionDialogAllowClicked,s=n.onDeviceMotionDialogDenyClicked,(a=document.createElement("div")).classList.add(wO),(o=document.createElement("button")).classList.add(l1,"a-dialog-deny-button"),o.setAttribute(er,""),o.innerHTML=e,a.appendChild(o),(c=document.createElement("button")).classList.add(l1,"a-dialog-allow-button"),c.setAttribute(er,""),c.innerHTML=t,a.appendChild(c),c.addEventListener("click",function(h){h.stopPropagation(),r()}),o.addEventListener("click",function(h){h.stopPropagation(),s()}),SO(i,a)),n.el.appendChild(n.devicePermissionDialogEl)})):this.permissionGranted=!0)},remove:function(){this.devicePermissionDialogEl&&this.el.removeChild(this.devicePermissionDialogEl)},onDeviceMotionDialogDenyClicked:function(){this.remove()},showHTTPAlert:function(){var n,e,t,i,r,s=this,a=(n=s.data.cancelButtonText,e=s.data.httpsMessage,t=function(){s.el.removeChild(a)},(i=document.createElement("div")).classList.add(wO),(r=document.createElement("button")).classList.add(l1,"a-dialog-ok-button"),r.setAttribute(er,""),r.innerHTML=n,i.appendChild(r),r.addEventListener("click",function(o){o.stopPropagation(),t()}),SO(e,i));this.el.appendChild(a)},onDeviceMotionDialogAllowClicked:function(){var n=this;this.el.emit("deviceorientationpermissionrequested"),DeviceOrientationEvent.requestPermission().then(function(e){e==="granted"?(n.el.emit("deviceorientationpermissiongranted"),n.permissionGranted=!0):n.el.emit("deviceorientationpermissionrejected"),n.remove()}).catch(console.error)}}),vt("embedded",{dependencies:["xr-mode-ui"],schema:{default:!0},sceneOnly:!0,update:function(){var n=this.el,e=n.querySelector(".a-enter-vr");this.data===!0?(e&&e.classList.add("embedded"),n.removeFullScreenStyles()):(e&&e.classList.remove("embedded"),n.addFullScreenStyles())}});var Mne="https://unpkg.com/aframe-inspector@"+function(){var n=$5.split(".");return n[2]="x",n.join(".")}()+"/dist/aframe-inspector.min.js";vt("inspector",{schema:{url:{default:Mne}},sceneOnly:!0,init:function(){this.firstPlay=!0,this.onKeydown=this.onKeydown.bind(this),this.onMessage=this.onMessage.bind(this),this.initOverlay(),window.addEventListener("keydown",this.onKeydown),window.addEventListener("message",this.onMessage)},play:function(){var n;this.firstPlay&&(n=Nm("inspector"))!=="false"&&n&&(this.openInspector(),this.firstPlay=!1)},initOverlay:function(){this.loadingMessageEl=document.createElement("div"),this.loadingMessageEl.classList.add("a-inspector-loader"),this.loadingMessageEl.innerHTML='Loading Inspector<span class="dots"><span>.</span><span>.</span><span>.</span></span>'},remove:function(){this.removeEventListeners()},onKeydown:function(n){n.keyCode===73&&(n.ctrlKey&&n.altKey||n.getModifierState("AltGraph"))&&this.openInspector()},showLoader:function(){document.body.appendChild(this.loadingMessageEl)},hideLoader:function(){document.body.removeChild(this.loadingMessageEl)},onMessage:function(n){n.data==="INJECT_AFRAME_INSPECTOR"&&this.openInspector()},openInspector:function(n){var e,t=this;AFRAME.INSPECTOR||AFRAME.inspectorInjected?AFRAME.INSPECTOR.open(n):(this.showLoader(),(e=document.createElement("script")).src=this.data.url,e.setAttribute("data-name","aframe-inspector"),e.setAttribute(er,""),e.onload=function(){AFRAME.INSPECTOR.open(n),t.hideLoader(),t.removeEventListeners()},e.onerror=function(){t.loadingMessageEl.innerHTML="Error loading Inspector"},document.head.appendChild(e),AFRAME.inspectorInjected=!0)},removeEventListeners:function(){window.removeEventListener("keydown",this.onKeydown),window.removeEventListener("message",this.onMessage)}}),vt("fog",{schema:{color:{type:"color",default:"#000"},density:{default:25e-5},far:{default:1e3,min:0},near:{default:1,min:0},type:{default:"linear",oneOf:["linear","exponential"]}},sceneOnly:!0,update:function(){var n=this.data,e=this.el,t=this.el.object3D.fog;t&&n.type===t.name?Object.keys(this.schema).forEach(function(i){var r=n[i];i==="color"&&(r=new B.Color(r)),t[i]=r}):e.object3D.fog=function(i){var r;return(r=i.type==="exponential"?new B.FogExp2(i.color,i.density):new B.Fog(i.color,i.near,i.far)).name=i.type,r}(n)},remove:function(){var n=this.el;this.el.object3D.fog&&(n.object3D.fog=null)}}),vt("keyboard-shortcuts",{schema:{enterVR:{default:!0},exitVR:{default:!0}},sceneOnly:!0,init:function(){this.onKeyup=this.onKeyup.bind(this)},play:function(){window.addEventListener("keyup",this.onKeyup,!1)},pause:function(){window.removeEventListener("keyup",this.onKeyup)},onKeyup:function(n){var e=this.el;nM(n)&&(this.data.enterVR&&n.keyCode===70&&e.enterVR(),this.data.exitVR&&n.keyCode===27&&e.exitVR())}});var Ap=mn("components:pool:warn");vt("pool",{schema:{container:{default:""},mixin:{default:""},size:{default:0},dynamic:{default:!1}},sceneOnly:!0,multiple:!0,initPool:function(){var n;for(this.availableEls=[],this.usedEls=[],this.data.mixin||Ap("No mixin provided for pool component."),this.data.container&&(this.container=document.querySelector(this.data.container),this.container||Ap("Container "+this.data.container+" not found.")),this.container=this.container||this.el,n=0;n<this.data.size;++n)this.createEntity()},update:function(n){var e=this.data;n.mixin===e.mixin&&n.size===e.size||this.initPool()},createEntity:function(){var n;(n=document.createElement("a-entity")).play=this.wrapPlay(n.play),n.setAttribute("mixin",this.data.mixin),n.object3D.visible=!1,n.pause(),this.container.appendChild(n),this.availableEls.push(n);var e=this.usedEls;n.addEventListener("loaded",function(){e.indexOf(n)===-1&&(n.object3DParent=n.object3D.parent,n.object3D.parent.remove(n.object3D))})},wrapPlay:function(n){var e=this.usedEls;return function(){e.indexOf(this)!==-1&&n.call(this)}},requestEntity:function(){var n;if(this.availableEls.length===0){if(this.data.dynamic===!1)return void Ap("Requested entity from empty pool: "+this.attrName);Ap("Requested entity from empty pool. This pool is dynamic and will resize automatically. You might want to increase its initial size: "+this.attrName),this.createEntity()}return n=this.availableEls.shift(),this.usedEls.push(n),n.object3DParent&&(n.object3DParent.add(n.object3D),this.updateRaycasters()),n.object3D.visible=!0,n},returnEntity:function(n){var e=this.usedEls.indexOf(n);if(e!==-1)return this.usedEls.splice(e,1),this.availableEls.push(n),n.object3DParent=n.object3D.parent,n.object3D.parent.remove(n.object3D),this.updateRaycasters(),n.object3D.visible=!1,n.pause(),n;Ap("The returned entity was not previously pooled from "+this.attrName)},updateRaycasters:function(){document.querySelectorAll("[raycaster]").forEach(function(n){n.components.raycaster.setDirty()})}}),vt("real-world-meshing",{schema:{filterLabels:{type:"array"},meshesEnabled:{default:!0},meshMixin:{default:!0},planesEnabled:{default:!0},planeMixin:{default:""}},sceneOnly:!0,init:function(){var n=this.el.getAttribute("webxr"),e=n.requiredFeatures;e.indexOf("mesh-detection")===-1&&(e.push("mesh-detection"),this.el.setAttribute("webxr",n)),e.indexOf("plane-detection")===-1&&(e.push("plane-detection"),this.el.setAttribute("webxr",n)),this.meshEntities=[],this.initWorldMeshEntity=this.initWorldMeshEntity.bind(this)},tick:function(){this.el.is("ar-mode")&&(this.detectMeshes(),this.updateMeshes())},detectMeshes:function(){var n,e,t,i=this.data,r=this.el,s=this.meshEntities,a=!1,o=[],c=this.data.filterLabels;n=(t=r.frame).detectedMeshes,e=t.detectedPlanes;for(var h=0;h<s.length;h++)s[h].present=!1;if(i.meshesEnabled){for(var d of n.values())if(!c.length||c.indexOf(d.semanticLabel)!==-1){for(h=0;h<s.length;h++)if(d===s[h].mesh){a=!0,s[h].present=!0,s[h].lastChangedTime<d.lastChangedTime&&this.updateMeshGeometry(s[h].el,d),s[h].lastChangedTime=d.lastChangedTime;break}a||o.push(d),a=!1}}if(i.planesEnabled){for(d of e.values())if(!c.length||c.indexOf(d.semanticLabel)!==-1){for(h=0;h<s.length;h++)if(d===s[h].mesh){a=!0,s[h].present=!0,s[h].lastChangedTime<d.lastChangedTime&&this.updateMeshGeometry(s[h].el,d),s[h].lastChangedTime=d.lastChangedTime;break}a||o.push(d),a=!1}}this.deleteMeshes(),this.createNewMeshes(o)},updateMeshes:function(){var n=new B.Matrix4;return function(){for(var e,t,i,r=this.el,s=r.frame,a=this.meshEntities,o=r.renderer.xr.getReferenceSpace(),c=0;c<a.length;c++)i=a[c].mesh.meshSpace||a[c].mesh.planeSpace,e=s.getPose(i,o),(t=a[c].el).hasLoaded&&(n.fromArray(e.transform.matrix),n.decompose(t.object3D.position,t.object3D.quaternion,t.object3D.scale))}}(),deleteMeshes:function(){for(var n=this.meshEntities,e=[],t=0;t<n.length;t++)n[t].present?e.push(n[t]):this.el.removeChild(n[t]);this.meshEntities=e},createNewMeshes:function(n){for(var e,t=0;t<n.length;t++)e=document.createElement("a-entity"),this.meshEntities.push({mesh:n[t],el:e}),e.addEventListener("loaded",this.initWorldMeshEntity),this.el.appendChild(e)},initMeshGeometry:function(n){var e,t,i;if(n instanceof XRPlane){t=new B.Shape,i=n.polygon;for(var r=0;r<i.length;++r)r===0?t.moveTo(i[r].x,i[r].z):t.lineTo(i[r].x,i[r].z);return(e=new B.ShapeGeometry(t)).rotateX(Math.PI/2),e}return(e=new B.BufferGeometry).setAttribute("position",new B.BufferAttribute(n.vertices,3)),e.setIndex(new B.BufferAttribute(n.indices,1)),e},initWorldMeshEntity:function(n){for(var e,t,i,r=n.target,s=this.meshEntities,a=0;a<s.length;a++)if(s[a].el===r){i=s[a];break}e=this.initMeshGeometry(i.mesh),t=new B.Mesh(e,new B.MeshBasicMaterial({color:16777215*Math.random(),side:B.DoubleSide})),r.setObject3D("mesh",t),i.mesh instanceof XRPlane&&this.data.planeMixin?r.setAttribute("mixin",this.data.planeMixin):this.data.meshMixin&&r.setAttribute("mixin",this.data.meshMixin),r.setAttribute("data-world-mesh",i.mesh.semanticLabel)},updateMeshGeometry:function(n,e){var t=n.getObject3D("mesh");t.geometry.dispose(),t.geometry=this.initMeshGeometry(e)}}),vt("reflection",{schema:{directionalLight:{type:"selector"}},sceneOnly:!0,init:function(){var n=this;this.cubeRenderTarget=new B.WebGLCubeRenderTarget(16),this.cubeCamera=new B.CubeCamera(.1,1e3,this.cubeRenderTarget),this.lightingEstimationTexture=new B.WebGLCubeRenderTarget(16).texture,this.needsVREnvironmentUpdate=!0;var e=this.el.getAttribute("webxr"),t=e.optionalFeatures;t.includes("light-estimation")||(t.push("light-estimation"),this.el.setAttribute("webxr",e)),this.el.addEventListener("enter-vr",function(){n.el.is("ar-mode")&&n.el.renderer.xr.getSession().requestLightProbe&&n.startLightProbe()}),this.el.addEventListener("exit-vr",function(){n.xrLightProbe&&n.stopLightProbe()}),this.el.object3D.environment=this.cubeRenderTarget.texture},stopLightProbe:function(){this.xrLightProbe=null,this.probeLight&&(this.probeLight.components.light.light.intensity=0),this.needsVREnvironmentUpdate=!0,this.el.object3D.environment=this.cubeRenderTarget.texture},startLightProbe:function(){this.needsLightProbeUpdate=!0},setupLightProbe:function(){var n=this.el.renderer,e=n.xr.getSession(),t=this,i=n.getContext();if(!this.probeLight){var r=document.createElement("a-light");r.setAttribute("type","probe"),r.setAttribute("intensity",0),this.el.appendChild(r),this.probeLight=r}switch(e.preferredReflectionFormat){case"srgba8":i.getExtension("EXT_sRGB");break;case"rgba16f":i.getExtension("OES_texture_half_float")}this.glBinding=new XRWebGLBinding(e,i),i.getExtension("EXT_sRGB"),i.getExtension("OES_texture_half_float"),e.requestLightProbe().then(function(s){t.xrLightProbe=s,s.addEventListener("reflectionchange",t.updateXRCubeMap.bind(t))}).catch(function(s){console.warn("Lighting estimation not supported: "+s.message),console.warn('Are you missing: webxr="optionalFeatures: light-estimation;" from <a-scene>?')})},updateXRCubeMap:function(){var n=this.el.renderer,e=this.glBinding.getReflectionCubeMap(this.xrLightProbe);e&&(n.properties.get(this.lightingEstimationTexture).__webglTexture=e,this.lightingEstimationTexture.needsPMREMUpdate=!0,this.el.object3D.environment=this.lightingEstimationTexture)},tick:function(){var n=this.el.object3D,e=this.el.renderer,t=this.el.frame;if(t&&this.xrLightProbe){var i=t.getLightEstimate(this.xrLightProbe);i&&function(r,s,a,o){var c=Math.max(r.primaryLightIntensity.x,Math.max(r.primaryLightIntensity.y,r.primaryLightIntensity.z));s.sh.fromArray(r.sphericalHarmonicsCoefficients),s.intensity=3.14,a&&(a.color.setRGB(r.primaryLightIntensity.x/c,r.primaryLightIntensity.y/c,r.primaryLightIntensity.z/c),a.intensity=c,o.copy(r.primaryLightDirection))}(i,this.probeLight.components.light.light,this.data.directionalLight&&this.data.directionalLight.components.light.light,this.data.directionalLight&&this.data.directionalLight.object3D.position)}this.needsVREnvironmentUpdate&&(n.environment=null,this.needsVREnvironmentUpdate=!1,this.cubeCamera.position.set(0,1.6,0),this.cubeCamera.update(e,n),n.environment=this.cubeRenderTarget.texture),this.needsLightProbeUpdate&&t&&(this.setupLightProbe(),this.needsLightProbeUpdate=!1)},remove:function(){this.el.object3D.environment=null,this.probeLight&&this.el.removeChild(this.probeLight)}});var Tne=["attribute vec3 position;","attribute vec2 uv;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUv;","void main()  {","  vUv = vec2( 1.- uv.x, uv.y );","  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),Bne=["precision mediump float;","uniform samplerCube map;","varying vec2 vUv;","#define M_PI 3.141592653589793238462643383279","void main() {","  vec2 uv = vUv;","  float longitude = uv.x * 2. * M_PI - M_PI + M_PI / 2.;","  float latitude = uv.y * M_PI;","  vec3 dir = vec3(","    - sin( longitude ) * sin( latitude ),","    cos( latitude ),","    - cos( longitude ) * sin( latitude )","  );","  normalize( dir );","  gl_FragColor = vec4( textureCube( map, dir ).rgb, 1.0 );","}"].join(`
`),Ine=(vt("screenshot",{schema:{width:{default:4096},height:{default:2048},camera:{type:"selector"}},sceneOnly:!0,setup:function(){var n=this.el;if(!this.canvas){var e=n.renderer.getContext();e&&(this.cubeMapSize=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),this.material=new B.RawShaderMaterial({uniforms:{map:{type:"t",value:null}},vertexShader:Tne,fragmentShader:Bne,side:B.DoubleSide}),this.quad=new B.Mesh(new B.PlaneGeometry(1,1),this.material),this.quad.visible=!1,this.camera=new B.OrthographicCamera(-.5,.5,.5,-.5,-1e4,1e4),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),n.object3D.add(this.quad),this.onKeyDown=this.onKeyDown.bind(this))}},getRenderTarget:function(n,e){return new B.WebGLRenderTarget(n,e,{colorSpace:this.el.sceneEl.renderer.outputColorSpace,minFilter:B.LinearFilter,magFilter:B.LinearFilter,wrapS:B.ClampToEdgeWrapping,wrapT:B.ClampToEdgeWrapping,format:B.RGBAFormat,type:B.UnsignedByteType})},resize:function(n,e){this.quad.scale.set(n,e,1),this.camera.left=-1*n/2,this.camera.right=n/2,this.camera.top=e/2,this.camera.bottom=-1*e/2,this.camera.updateProjectionMatrix(),this.canvas.width=n,this.canvas.height=e},play:function(){window.addEventListener("keydown",this.onKeyDown)},onKeyDown:function(n){var e=n.keyCode===83&&n.ctrlKey&&n.altKey;if(this.data&&e){var t=n.shiftKey?"equirectangular":"perspective";this.capture(t)}},setCapture:function(n){var e,t,i,r,s=this.el;return n==="perspective"?(this.quad.visible=!1,t=this.data.camera&&this.data.camera.components.camera.camera||s.camera,e={width:this.data.width,height:this.data.height}):(t=this.camera,r=new B.WebGLCubeRenderTarget(Math.min(this.cubeMapSize,2048),{format:B.RGBFormat,generateMipmaps:!0,minFilter:B.LinearMipmapLinearFilter,colorSpace:B.SRGBColorSpace}),i=new B.CubeCamera(s.camera.near,s.camera.far,r),s.camera.getWorldPosition(i.position),s.camera.getWorldQuaternion(i.quaternion),i.update(s.renderer,s.object3D),this.quad.material.uniforms.map.value=i.renderTarget.texture,e={width:this.data.width,height:this.data.height},this.quad.visible=!0),{camera:t,size:e,projection:n}},capture:function(n){var e,t=this.el.renderer.xr.enabled,i=this.el.renderer;this.setup(),i.xr.enabled=!1,e=this.setCapture(n),this.renderCapture(e.camera,e.size,e.projection),this.saveCapture(),i.xr.enabled=t},getCanvas:function(n){var e=this.el.renderer.xr.enabled,t=this.el.renderer;this.setup();var i=this.setCapture(n);return t.xr.enabled=!1,this.renderCapture(i.camera,i.size,i.projection),t.xr.enabled=e,this.canvas},renderCapture:function(n,e,t){var i,r,s,a=this.el.renderer.autoClear,o=this.el,c=o.renderer;r=this.getRenderTarget(e.width,e.height),s=new Uint8Array(4*e.width*e.height),this.resize(e.width,e.height),c.autoClear=!0,c.clear(),c.setRenderTarget(r),c.render(o.object3D,n),c.autoClear=a,c.readRenderTargetPixels(r,0,0,e.width,e.height,s),c.setRenderTarget(null),t==="perspective"&&(s=this.flipPixelsVertically(s,e.width,e.height)),i=new ImageData(new Uint8ClampedArray(s),e.width,e.height),this.quad.visible=!1,this.ctx.putImageData(i,0,0)},flipPixelsVertically:function(n,e,t){for(var i=n.slice(0),r=0;r<e;++r)for(var s=0;s<t;++s)i[4*r+s*e*4]=n[4*r+(t-s)*e*4],i[4*r+1+s*e*4]=n[4*r+1+(t-s)*e*4],i[4*r+2+s*e*4]=n[4*r+2+(t-s)*e*4],i[4*r+3+s*e*4]=n[4*r+3+(t-s)*e*4];return i},saveCapture:function(){this.canvas.toBlob(function(n){var e="screenshot-"+document.title.toLowerCase()+"-"+Date.now()+".png",t=document.createElement("a"),i=URL.createObjectURL(n);t.href=i,t.setAttribute("download",e),t.innerHTML="downloading...",t.style.display="none",document.body.appendChild(t),setTimeout(function(){t.click(),document.body.removeChild(t)},1)},"image/png")}}),xt(282)),Rne=xt.n(Ine),Dne=(xt(3729),xt(8132),window.aframeStats),MO="a-hidden",Lne=window.threeStats;vt("stats",{schema:{default:!0},sceneOnly:!0,init:function(){var n=this.el;Nm("stats")!=="false"&&(this.stats=function(e){var t=new Lne(e.renderer),i=new Dne(e),r=e.isMobile?[]:[t,i];return new(Rne())({css:[],values:{fps:{caption:"fps",below:30}},groups:[{caption:"Framerate",values:["fps","raf"]}],plugins:r})}(n),this.statsEl=document.querySelector(".rs-base"),this.hideBound=this.hide.bind(this),this.showBound=this.show.bind(this),n.addEventListener("enter-vr",this.hideBound),n.addEventListener("exit-vr",this.showBound))},update:function(){if(this.stats)return this.data?this.show():this.hide()},remove:function(){this.el.removeEventListener("enter-vr",this.hideBound),this.el.removeEventListener("exit-vr",this.showBound),this.statsEl&&this.statsEl.parentNode.removeChild(this.statsEl)},tick:function(){var n=this.stats;n&&(n("rAF").tick(),n("FPS").frame(),n().update())},hide:function(){this.statsEl.classList.add(MO)},show:function(){this.statsEl.classList.remove(MO)}});var Zc="a-hidden";function TO(n){n.addEventListener("touchstart",function(){n.classList.remove("resethover")},{passive:!0}),n.addEventListener("touchend",function(){n.classList.add("resethover")},{passive:!0})}vt("xr-mode-ui",{dependencies:["canvas"],schema:{enabled:{default:!0},enterVRButton:{default:""},enterVREnabled:{default:!0},enterARButton:{default:""},enterAREnabled:{default:!0},XRMode:{default:"vr",oneOf:["vr","ar","xr"]}},sceneOnly:!0,init:function(){var n=this,e=this.el;Nm("ui")!=="false"&&(this.insideLoader=!1,this.enterVREl=null,this.enterAREl=null,this.orientationModalEl=null,this.bindMethods(),e.addEventListener("enter-vr",this.updateEnterInterfaces),e.addEventListener("exit-vr",this.updateEnterInterfaces),e.addEventListener("update-vr-devices",this.updateEnterInterfaces),window.addEventListener("message",function(t){t.data.type==="loaderReady"&&(n.insideLoader=!0,n.remove())}),window.addEventListener("orientationchange",this.toggleOrientationModalIfNeeded))},bindMethods:function(){this.onEnterVRButtonClick=this.onEnterVRButtonClick.bind(this),this.onEnterARButtonClick=this.onEnterARButtonClick.bind(this),this.onModalClick=this.onModalClick.bind(this),this.toggleOrientationModalIfNeeded=this.toggleOrientationModalIfNeeded.bind(this),this.updateEnterInterfaces=this.updateEnterInterfaces.bind(this)},onModalClick:function(){this.el.exitVR()},onEnterVRButtonClick:function(){this.el.enterVR()},onEnterARButtonClick:function(){this.el.enterAR()},update:function(){var n,e,t,i=this.data,r=this.el;if(!i.enabled||this.insideLoader||Nm("ui")==="false")return this.remove();this.enterVREl||this.enterAREl||this.orientationModalEl||(this.enterVREl||!i.enterVREnabled||i.XRMode!=="xr"&&i.XRMode!=="vr"||(i.enterVRButton?(this.enterVREl=document.querySelector(i.enterVRButton),this.enterVREl.addEventListener("click",this.onEnterVRButtonClick)):(this.enterVREl=(n=this.onEnterVRButtonClick,(t=document.createElement("div")).classList.add("a-enter-vr"),t.setAttribute(er,""),(e=document.createElement("button")).className="a-enter-vr-button",e.setAttribute("title","Enter VR mode with a headset or fullscreen without"),e.setAttribute(er,""),sc()&&TO(e),t.appendChild(e),e.addEventListener("click",function(s){n(),s.stopPropagation()}),t),r.appendChild(this.enterVREl))),this.enterAREl||!i.enterAREnabled||i.XRMode!=="xr"&&i.XRMode!=="ar"||(i.enterARButton?(this.enterAREl=document.querySelector(i.enterARButton),this.enterAREl.addEventListener("click",this.onEnterARButtonClick)):(this.enterAREl=function(s,a){var o,c;return(c=document.createElement("div")).classList.add("a-enter-ar"),a&&c.classList.add("xr"),c.setAttribute(er,""),(o=document.createElement("button")).className="a-enter-ar-button",o.setAttribute("title","Enter AR mode with a headset or handheld device."),o.setAttribute(er,""),sc()&&TO(o),c.appendChild(o),o.addEventListener("click",function(h){s(),h.stopPropagation()}),c}(this.onEnterARButtonClick,i.XRMode==="xr"),r.appendChild(this.enterAREl))),this.orientationModalEl=function(s){var a=document.createElement("div");a.className="a-orientation-modal",a.classList.add(Zc),a.setAttribute(er,"");var o=document.createElement("button");return o.setAttribute(er,""),o.innerHTML="Exit VR",o.addEventListener("click",s),a.appendChild(o),a}(this.onModalClick),r.appendChild(this.orientationModalEl),this.updateEnterInterfaces())},remove:function(){[this.enterVREl,this.enterAREl,this.orientationModalEl].forEach(function(n){n&&n.parentNode&&n.parentNode.removeChild(n)}),this.enterVREl=void 0,this.enterAREl=void 0,this.orientationModalEl=void 0},updateEnterInterfaces:function(){this.toggleEnterVRButtonIfNeeded(),this.toggleEnterARButtonIfNeeded(),this.toggleOrientationModalIfNeeded()},toggleEnterVRButtonIfNeeded:function(){var n=this.el;this.enterVREl&&(n.is("vr-mode")||(n.isMobile||z2())&&!Dw()?this.enterVREl.classList.add(Zc):(Dw()||this.enterVREl.classList.add("fullscreen"),this.enterVREl.classList.remove(Zc),n.enterVR(!1,!0)))},toggleEnterARButtonIfNeeded:function(){var n=this.el;this.enterAREl&&(n.is("vr-mode")||!Q2()?this.enterAREl.classList.add(Zc):(this.enterAREl.classList.remove(Zc),n.enterVR(!0,!0)))},toggleOrientationModalIfNeeded:function(){var n=this.el,e=this.orientationModalEl;e&&n.isMobile&&(!T5()&&n.is("vr-mode")?e.classList.remove(Zc):e.classList.add(Zc))}}),Ur("box",{schema:{depth:{default:1,min:0},height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"},segmentsDepth:{default:1,min:1,max:20,type:"int"}},init:function(n){this.geometry=new B.BoxGeometry(n.width,n.height,n.depth,n.segmentsWidth,n.segmentsHeight,n.segmentsDepth)}});var BO=B.MathUtils.degToRad;Ur("circle",{schema:{radius:{default:1,min:0},segments:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(n){this.geometry=new B.CircleGeometry(n.radius,n.segments,BO(n.thetaStart),BO(n.thetaLength))}});var IO=B.MathUtils.degToRad;Ur("cone",{schema:{height:{default:1,min:0},openEnded:{default:!1},radiusBottom:{default:1,min:0},radiusTop:{default:.01,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(n){this.geometry=new B.CylinderGeometry(n.radiusTop,n.radiusBottom,n.height,n.segmentsRadial,n.segmentsHeight,n.openEnded,IO(n.thetaStart),IO(n.thetaLength))}});var RO=B.MathUtils.degToRad;Ur("cylinder",{schema:{height:{default:1,min:0},openEnded:{default:!1},radius:{default:1,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(n){this.geometry=new B.CylinderGeometry(n.radius,n.radius,n.height,n.segmentsRadial,n.segmentsHeight,n.openEnded,RO(n.thetaStart),RO(n.thetaLength))}}),Ur("dodecahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(n){this.geometry=new B.DodecahedronGeometry(n.radius,n.detail)}}),Ur("icosahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(n){this.geometry=new B.IcosahedronGeometry(n.radius,n.detail)}}),Ur("octahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(n){this.geometry=new B.OctahedronGeometry(n.radius,n.detail)}}),Ur("plane",{schema:{height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"}},init:function(n){this.geometry=new B.PlaneGeometry(n.width,n.height,n.segmentsWidth,n.segmentsHeight)}});var DO=B.MathUtils.degToRad;Ur("ring",{schema:{radiusInner:{default:.8,min:0},radiusOuter:{default:1.2,min:0},segmentsPhi:{default:10,min:1,type:"int"},segmentsTheta:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(n){this.geometry=new B.RingGeometry(n.radiusInner,n.radiusOuter,n.segmentsTheta,n.segmentsPhi,DO(n.thetaStart),DO(n.thetaLength))}});var H0=B.MathUtils.degToRad;Ur("sphere",{schema:{radius:{default:1,min:0},phiLength:{default:360},phiStart:{default:0,min:0},thetaLength:{default:180,min:0},thetaStart:{default:0},segmentsHeight:{default:18,min:2,type:"int"},segmentsWidth:{default:36,min:3,type:"int"}},init:function(n){this.geometry=new B.SphereGeometry(n.radius,n.segmentsWidth,n.segmentsHeight,H0(n.phiStart),H0(n.phiLength),H0(n.thetaStart),H0(n.thetaLength))}}),Ur("tetrahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(n){this.geometry=new B.TetrahedronGeometry(n.radius,n.detail)}});var One=B.MathUtils.degToRad;Ur("torus",{schema:{arc:{default:360},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:36,min:2,type:"int"},segmentsTubular:{default:32,min:3,type:"int"}},init:function(n){this.geometry=new B.TorusGeometry(n.radius,2*n.radiusTubular,n.segmentsRadial,n.segmentsTubular,One(n.arc))}}),Ur("torusKnot",{schema:{p:{default:2,min:1},q:{default:3,min:1},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:8,min:3,type:"int"},segmentsTubular:{default:100,min:3,type:"int"}},init:function(n){this.geometry=new B.TorusKnotGeometry(n.radius,2*n.radiusTubular,n.segmentsTubular,n.segmentsRadial,n.p,n.q)}});var G0=new B.Quaternion,Pne=new B.Vector3(0,0,1),gp=new B.Vector2,LO=new B.Vector2,V0=new B.Vector2;function OO(n,e){return e.color.set(n.color),e.fog=n.fog,e.wireframe=n.wireframe,e.toneMapped=n.toneMapped,e.wireframeLinewidth=n.wireframeLinewidth,e}function PO(n,e){return e.color.set(n.color),e.emissive.set(n.emissive),e.emissiveIntensity=n.emissiveIntensity,e.fog=n.fog,e.metalness=n.metalness,e.roughness=n.roughness,e.wireframe=n.wireframe,e.wireframeLinewidth=n.wireframeLinewidth,n.normalMap&&(e.normalScale=n.normalScale),n.ambientOcclusionMap&&(e.aoMapIntensity=n.ambientOcclusionMapIntensity),n.displacementMap&&(e.displacementScale=n.displacementScale,e.displacementBias=n.displacementBias),e}function UO(n,e){switch(e.color.set(n.color),e.specular.set(n.specular),e.emissive.set(n.emissive),e.emissiveIntensity=n.emissiveIntensity,e.fog=n.fog,e.transparent=n.transparent,e.wireframe=n.wireframe,e.wireframeLinewidth=n.wireframeLinewidth,e.shininess=n.shininess,e.flatShading=n.flatShading,e.wireframe=n.wireframe,e.wireframeLinewidth=n.wireframeLinewidth,e.reflectivity=n.reflectivity,e.refractionRatio=n.refractionRatio,n.combine){case"mix":e.combine=B.MixOperation;break;case"multiply":e.combine=B.MultiplyOperation;break;case"add":e.combine=B.AddOperation}return n.normalMap&&(e.normalScale=n.normalScale),n.ambientOcclusionMap&&(e.aoMapIntensity=n.ambientOcclusionMapIntensity),n.bumpMap&&(e.bumpScale=n.bumpMapScale),n.displacementMap&&(e.displacementScale=n.displacementScale,e.displacementBias=n.displacementBias),e}Ur("triangle",{schema:{vertexA:{type:"vec3",default:{x:0,y:.5,z:0}},vertexB:{type:"vec3",default:{x:-.5,y:-.5,z:0}},vertexC:{type:"vec3",default:{x:.5,y:-.5,z:0}}},init:function(n){var e,t,i,r,s,a,o,c,h;(i=new B.Triangle).a.set(n.vertexA.x,n.vertexA.y,n.vertexA.z),i.b.set(n.vertexB.x,n.vertexB.y,n.vertexB.z),i.c.set(n.vertexC.x,n.vertexC.y,n.vertexC.z),t=i.getNormal(new B.Vector3),G0.setFromUnitVectors(t,Pne),r=i.a.clone().applyQuaternion(G0),s=i.b.clone().applyQuaternion(G0),a=i.c.clone().applyQuaternion(G0),gp.set(Math.min(r.x,s.x,a.x),Math.min(r.y,s.y,a.y)),LO.set(Math.max(r.x,s.x,a.x),Math.max(r.y,s.y,a.y)),V0.set(0,0).subVectors(LO,gp),r=new B.Vector2().subVectors(r,gp).divide(V0),s=new B.Vector2().subVectors(s,gp).divide(V0),a=new B.Vector2().subVectors(a,gp).divide(V0),e=this.geometry=new B.BufferGeometry,o=[i.a.x,i.a.y,i.a.z,i.b.x,i.b.y,i.b.z,i.c.x,i.c.y,i.c.z],c=[t.x,t.y,t.z,t.x,t.y,t.z,t.x,t.y,t.z],h=[r.x,r.y,s.x,s.y,a.x,a.y],e.setAttribute("position",new B.Float32BufferAttribute(o,3)),e.setAttribute("normal",new B.Float32BufferAttribute(c,3)),e.setAttribute("uv",new B.Float32BufferAttribute(h,2))}}),Fl("flat",{schema:{color:{type:"color"},fog:{default:!0},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},src:{type:"map"},wireframe:{default:!1},wireframeLinewidth:{default:2},toneMapped:{default:!0}},init:function(n){this.materialData={color:new B.Color},OO(n,this.materialData),this.material=new B.MeshBasicMaterial(this.materialData)},update:function(n){this.updateMaterial(n),vv(this,n)},updateMaterial:function(n){var e;for(e in OO(n,this.materialData),this.materialData)this.material[e]=this.materialData[e]}}),Fl("standard",{schema:{ambientOcclusionMap:{type:"map"},ambientOcclusionMapIntensity:{default:1},ambientOcclusionTextureOffset:{type:"vec2"},ambientOcclusionTextureRepeat:{type:"vec2",default:{x:1,y:1}},color:{type:"color"},displacementMap:{type:"map"},displacementScale:{default:1},displacementBias:{default:.5},displacementTextureOffset:{type:"vec2"},displacementTextureRepeat:{type:"vec2",default:{x:1,y:1}},emissive:{type:"color",default:"#000"},emissiveIntensity:{default:1},envMap:{default:""},fog:{default:!0},metalness:{default:0,min:0,max:1},metalnessMap:{type:"map"},metalnessTextureOffset:{type:"vec2"},metalnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},normalMap:{type:"map"},normalScale:{type:"vec2",default:{x:1,y:1}},normalTextureOffset:{type:"vec2"},normalTextureRepeat:{type:"vec2",default:{x:1,y:1}},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},roughness:{default:.5,min:0,max:1},roughnessMap:{type:"map"},roughnessTextureOffset:{type:"vec2"},roughnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},sphericalEnvMap:{type:"map"},src:{type:"map"},wireframe:{default:!1},wireframeLinewidth:{default:2}},init:function(n){this.materialData={color:new B.Color,emissive:new B.Color},PO(n,this.materialData),this.material=new B.MeshStandardMaterial(this.materialData)},update:function(n){this.updateMaterial(n),vv(this,n),Ra("normal",this,n),Ra("displacement",this,n),Ra("ambientOcclusion",this,n),Ra("metalness",this,n),Ra("roughness",this,n),Ow(this,n)},updateMaterial:function(n){var e,t=this.material;for(e in PO(n,this.materialData),this.materialData)t[e]=this.materialData[e]}}),Fl("phong",{schema:{color:{type:"color"},emissive:{type:"color",default:"black"},emissiveIntensity:{default:1},specular:{type:"color",default:"#111111"},transparent:{default:!1},fog:{default:!0},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},src:{type:"map"},envMap:{default:""},sphericalEnvMap:{type:"map"},shininess:{default:30},flatShading:{default:!1},wireframe:{default:!1},wireframeLinewidth:{default:2},combine:{oneOF:["multiply","mix","add"],default:"mix"},reflectivity:{default:.9},refractionRatio:{default:.98},refract:{default:!1},normalMap:{type:"map"},normalScale:{type:"vec2",default:{x:1,y:1}},normalTextureOffset:{type:"vec2"},normalTextureRepeat:{type:"vec2",default:{x:1,y:1}},ambientOcclusionMap:{type:"map"},ambientOcclusionMapIntensity:{default:1},displacementMap:{type:"map"},displacementScale:{default:1},displacementBias:{default:.5},displacementTextureOffset:{type:"vec2"},displacementTextureRepeat:{type:"vec2",default:{x:1,y:1}},bumpMap:{type:"map"},bumpMapScale:{default:1},bumpTextureOffset:{type:"vec2"},bumpTextureRepeat:{type:"vec2",default:{x:1,y:1}}},init:function(n){this.materialData={color:new B.Color,specular:new B.Color,emissive:new B.Color},UO(n,this.materialData),this.material=new B.MeshPhongMaterial(this.materialData);var e=this.el.sceneEl;Object.defineProperty(this.material,"envMap",{get:function(){return this._envMap||e.object3D.environment},set:function(t){this._envMap=t}})},update:function(n){this.updateMaterial(n),vv(this,n),Ra("normal",this,n),Ra("displacement",this,n),Ra("ambientOcclusion",this,n),Ra("bump",this,n),Ow(this,n)},updateMaterial:function(n){var e;for(e in UO(n,this.materialData),this.materialData)this.material[e]=this.materialData[e]}}),Fl("sdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},vertexShader:["#include <common>","#include <fog_pars_vertex>","#include <logdepthbuf_pars_vertex>","out vec2 vUV;","void main(void) {","  vUV = uv;","  #include <begin_vertex>","  #include <project_vertex>","  #include <logdepthbuf_vertex>","  #include <fog_vertex>","}"].join(`
`),fragmentShader:["#include <common>","#include <fog_pars_fragment>","#include <logdepthbuf_pars_fragment>","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","in vec2 vUV;","float contour(float width, float value) {","  return smoothstep(0.5 - value, 0.5 + value, width);","}","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","void main() {","  vec2 uv = vUV;","  vec4 texColor = texture(map, uv);","  float dist = texColor.a;","  float width = fwidth(dist);","  float alpha = contour(dist, width);","  float dscale = 0.353505;","  vec2 duv = dscale * (dFdx(uv) + dFdy(uv));","  float isBigEnough = max(abs(duv.x), abs(duv.y));","  if (isBigEnough > BIG_ENOUGH) {","    float ratio = BIG_ENOUGH / isBigEnough;","    alpha = ratio * alpha + (1.0 - ratio) * dist;","  }","  if (isBigEnough <= BIG_ENOUGH) {","    vec4 box = vec4 (uv - duv, uv + duv);","    alpha = (alpha + 0.5 * (","      contour(texture(map, box.xy).a, width)","      + contour(texture(map, box.zw).a, width)","      + contour(texture(map, box.xw).a, width)","      + contour(texture(map, box.zy).a, width)","    )) / 3.0;","  }","  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  gl_FragColor = vec4(color, opacity * alpha);","  #include <logdepthbuf_fragment>","  #include <tonemapping_fragment>","  #include <colorspace_fragment>","  #include <fog_fragment>","}"].join(`
`),init:function(){return this.uniforms=this.initUniforms(),B.UniformsUtils&&(this.uniforms=B.UniformsUtils.merge([B.UniformsLib.fog,this.uniforms])),this.material=new B.ShaderMaterial({uniforms:this.uniforms,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader,fog:!0}),this.material}}),Fl("msdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},negate:{type:"boolean",is:"uniform",default:!0},opacity:{type:"number",is:"uniform",default:1}},vertexShader:["#include <common>","#include <fog_pars_vertex>","#include <logdepthbuf_pars_vertex>","out vec2 vUV;","void main(void) {","  vUV = uv;","  #include <begin_vertex>","  #include <project_vertex>","  #include <logdepthbuf_vertex>","  #include <fog_vertex>","}"].join(`
`),fragmentShader:["#include <common>","#include <fog_pars_fragment>","#include <logdepthbuf_pars_fragment>","uniform bool negate;","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","in vec2 vUV;","float median(float r, float g, float b) {","  return max(min(r, g), min(max(r, g), b));","}","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","void main() {","  vec3 sampleColor = texture(map, vUV).rgb;","  if (negate) { sampleColor = 1.0 - sampleColor; }","  float sigDist = median(sampleColor.r, sampleColor.g, sampleColor.b) - 0.5;","  float alpha = clamp(sigDist / fwidth(sigDist) + 0.5, 0.0, 1.0);","  float dscale = 0.353505;","  vec2 duv = dscale * (dFdx(vUV) + dFdy(vUV));","  float isBigEnough = max(abs(duv.x), abs(duv.y));","  // Do modified alpha test.","  if (isBigEnough > BIG_ENOUGH) {","    float ratio = BIG_ENOUGH / isBigEnough;","    alpha = ratio * alpha + (1.0 - ratio) * (sigDist + 0.5);","  }","  // Do modified alpha test.","  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  gl_FragColor = vec4(color.xyz, alpha * opacity);","  #include <logdepthbuf_fragment>","  #include <tonemapping_fragment>","  #include <colorspace_fragment>","  #include <fog_fragment>","}"].join(`
`),init:function(){return this.uniforms=this.initUniforms(),B.UniformsUtils&&(this.uniforms=B.UniformsUtils.merge([B.UniformsLib.fog,this.uniforms])),this.material=new B.ShaderMaterial({uniforms:this.uniforms,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader,fog:!0}),this.material}}),Fl("shadow",{schema:{opacity:{default:.5},transparent:{default:!0},alphaToCoverage:{default:!0}},init:function(n){this.material=new B.ShadowMaterial},update:function(n){this.material.opacity=n.opacity,this.material.alphaToCoverage=n.alphaToCoverage,this.material.transparent=n.transparent}});var kO="data-aframe-default-camera";function NO(n){var e=n.primitive,t=ac[e]&&ac[e].Geometry,i=new t;if(!t)throw new Error("Unknown geometry `"+e+"`");return i.init(n),i.geometry}$s("camera",{init:function(){this.activeCameraEl=null,this.render=this.render.bind(this),this.unwrapRender=this.unwrapRender.bind(this),this.wrapRender=this.wrapRender.bind(this),this.initialCameraFound=!1,this.numUserCameras=0,this.numUserCamerasChecked=0,this.setupInitialCamera()},setupInitialCamera:function(){var n,e,t=this.sceneEl,i=this;if(!t.camera||t.camera.el.getAttribute("camera").spectator)if((n=t.querySelectorAll("a-camera, :not(a-mixin)[camera]")).length)for(this.numUserCameras=n.length,e=0;e<n.length;e++)n[e].addEventListener("object3dset",function(r){r.detail.type==="camera"&&i.checkUserCamera(this)}),n[e].isANode?n[e].load():n[e].addEventListener("nodeready",function(){this.load()});else this.createDefaultCamera();else t.emit("cameraready",{cameraEl:t.camera.el})},checkUserCamera:function(n){var e,t=this.el.sceneEl;this.numUserCamerasChecked++,this.initialCameraFound||((e=n.getAttribute("camera")).active&&!e.spectator?(this.initialCameraFound=!0,t.camera=n.getObject3D("camera"),t.emit("cameraready",{cameraEl:n})):this.numUserCamerasChecked===this.numUserCameras&&this.createDefaultCamera())},createDefaultCamera:function(){var n,e=this.sceneEl;(n=document.createElement("a-entity")).setAttribute("camera",{active:!0}),n.setAttribute("position",{x:0,y:1.6,z:0}),n.setAttribute("wasd-controls",""),n.setAttribute("look-controls",""),n.setAttribute(er,""),n.addEventListener("object3dset",function(t){t.detail.type==="camera"&&(e.camera=t.detail.object,e.emit("cameraready",{cameraEl:n}))}),e.appendChild(n)},disableActiveCamera:function(){var n;(n=this.sceneEl.querySelectorAll(":not(a-mixin)[camera]"))[n.length-1].setAttribute("camera","active",!0)},setActiveCamera:function(n){var e,t,i,r,s=this.activeCameraEl,a=this.sceneEl;if((r=n.getObject3D("camera"))&&n!==this.activeCameraEl){var o=a.querySelector("["+kO+"]");for(n!==(o&&o.querySelector(":not(a-mixin)[camera]"))&&function(c){var h;c.camera&&(h=c.querySelector("["+kO+"]"))&&c.removeChild(h)}(a),this.activeCameraEl=n,this.activeCameraEl.play(),a.camera=r,s&&s.setAttribute("camera","active",!1),t=a.querySelectorAll(":not(a-mixin)[camera]"),i=0;i<t.length;i++)(e=t[i]).isEntity&&n!==e&&(e.setAttribute("camera","active",!1),e.pause());a.emit("camera-set-active",{cameraEl:n})}},setSpectatorCamera:function(n){var e,t=this.spectatorCameraEl,i=this.sceneEl;n.getObject3D("camera")&&n!==this.spectatorCameraEl&&(t&&t.setAttribute("camera","spectator",!1),e=this.spectatorCameraEl=n,i.addEventListener("enter-vr",this.wrapRender),i.addEventListener("exit-vr",this.unwrapRender),e.setAttribute("camera","active",!1),e.play(),i.emit("camera-set-spectator",{cameraEl:n}))},disableSpectatorCamera:function(){this.spectatorCameraEl=void 0},wrapRender:function(){this.spectatorCameraEl&&!this.originalRender&&(this.originalRender=this.sceneEl.renderer.render,this.sceneEl.renderer.render=this.render)},unwrapRender:function(){this.originalRender&&(this.sceneEl.renderer.render=this.originalRender,this.originalRender=void 0)},render:function(n,e){var t,i,r=this.sceneEl;t=r.renderer.xr.enabled,this.originalRender.call(r.renderer,n,e),this.spectatorCameraEl&&!r.isMobile&&t&&(i=this.spectatorCameraEl.components.camera.camera,r.renderer.xr.enabled=!1,this.originalRender.call(r.renderer,n,i),r.renderer.xr.enabled=t)}}),$s("geometry",{init:function(){this.cache={},this.cacheCount={}},clearCache:function(){this.cache={},this.cacheCount={}},getOrCreateGeometry:function(n){var e,t,i=this.cache;return n.skipCache?NO(n):(e=i[t=this.hash(n)],function(r,s){r[s]=r[s]===void 0?1:r[s]+1}(this.cacheCount,t),e||(e=NO(n),i[t]=e,e))},unuseGeometry:function(n){var e,t=this.cache,i=this.cacheCount;n.skipCache||t[e=this.hash(n)]&&(function(r,s){r[s]--}(i,e),i[e]>0||(t[e].dispose(),delete t[e],delete i[e]))},hash:function(n){return JSON.stringify(n)}}),$s("gltf-model",{schema:{dracoDecoderPath:{default:"https://www.gstatic.com/draco/versioned/decoders/1.5.7/"},basisTranscoderPath:{default:""},meshoptDecoderPath:{default:""}},init:function(){this.update()},update:function(){var n=this.data.dracoDecoderPath,e=this.data.basisTranscoderPath,t=this.data.meshoptDecoderPath;!this.dracoLoader&&n&&(this.dracoLoader=new n5,this.dracoLoader.setDecoderPath(n)),!this.ktx2Loader&&e&&(this.ktx2Loader=new Ms,this.ktx2Loader.setTranscoderPath(e).detectSupport(this.el.renderer)),!this.meshoptDecoder&&t&&(this.meshoptDecoder=function(i){return new Promise(function(r,s){var a=document.createElement("script");document.body.appendChild(a),a.onload=r,a.onerror=s,a.async=!0,a.src=i})}(t).then(function(){return window.MeshoptDecoder.ready}).then(function(){return window.MeshoptDecoder}))},getDRACOLoader:function(){return this.dracoLoader},getKTX2Loader:function(){return this.ktx2Loader},getMeshoptDecoder:function(){return this.meshoptDecoder}});var W0="data-aframe-default-light",n8=($s("light",{schema:{defaultLightsEnabled:{default:!0}},init:function(){this.defaultLights=!1,this.userDefinedLights=!1,this.sceneEl.addEventListener("loaded",this.setupDefaultLights.bind(this))},registerLight:function(n){n.hasAttribute(W0)||(this.removeDefaultLights(),this.userDefinedLights=!0)},removeDefaultLights:function(){var n,e=this.sceneEl;if(this.defaultLights){n=document.querySelectorAll("["+W0+"]");for(var t=0;t<n.length;t++)e.removeChild(n[t]);this.defaultLights=!1}},setupDefaultLights:function(){var n,e,t=this.sceneEl;this.userDefinedLights||this.defaultLights||!this.data.defaultLightsEnabled||((n=document.createElement("a-entity")).setAttribute("light",{color:"#BBB",type:"ambient"}),n.setAttribute(W0,""),n.setAttribute(er,""),t.appendChild(n),(e=document.createElement("a-entity")).setAttribute("light",{color:"#FFF",intensity:1.884,castShadow:!0}),e.setAttribute("position",{x:-.5,y:1,z:1}),e.setAttribute(W0,""),e.setAttribute(er,""),t.appendChild(e),this.defaultLights=!0)}}),mn),Une=n8("components:texture:error"),FO=n8("components:texture:warn"),kne=new B.ImageLoader;$s("material",{init:function(){this.materials={},this.sourceCache={}},clearTextureSourceCache:function(){this.sourceCache={}},loadTexture:function(n,e,t){this.loadTextureSource(n,function(i){var r=J2(i);Iy(r,e),t(r)})},loadTextureSource:function(n,e){var t=this,i=this.sourceCache,r=this.hash(n);function s(a){i[r]=Promise.resolve(a),i[r].then(e)}i[r]?i[r].then(e):n.tagName!=="CANVAS"?s(new Promise(function(a,o){By(n,function(c){t.loadImage(c,a)},function(c){t.loadVideo(c,a)})})):s(new B.Source(n))},loadCubeMapTexture:function(n,e){var t=this,i=0,r=new B.CubeTexture;function s(o){t.loadTextureSource(n[o],function(c){r.images[o]=c.data,++i==6&&(r.needsUpdate=!0,e(r))})}if(r.colorSpace=B.SRGBColorSpace,n.length===6)for(var a=0;a<n.length;a++)s(a);else FO("Cube map texture requires exactly 6 sources, got only %s sources",n.length)},loadImage:function(n,e){e(typeof n=="string"?function(t){return new Promise(function(i,r){kne.load(t,function(s){i(new B.Source(s))},function(){},function(s){Une("`$s` could not be fetched (Error code: %s; Response: %s)",s.status,s.statusText)})})}(n):new B.Source(n))},loadVideo:function(n,e){var t;typeof n!="string"&&function(i){i.autoplay=i.hasAttribute("autoplay")&&i.getAttribute("autoplay")!=="false",i.controls=i.hasAttribute("controls")&&i.getAttribute("controls")!=="false",i.getAttribute("loop")==="false"&&i.removeAttribute("loop"),i.getAttribute("preload")==="false"&&(i.preload="none"),i.crossOrigin=i.crossOrigin||"anonymous",i.setAttribute("playsinline",""),i.setAttribute("webkit-playsinline","")}(t=n),t=t||function(i){var r=document.createElement("video");return r.setAttribute("playsinline",""),r.setAttribute("webkit-playsinline",""),r.autoplay=!0,r.loop=!0,r.crossOrigin="anonymous",r.addEventListener("error",function(){FO("`%s` is not a valid video",i)},!0),r.src=i,r}(n),e(new B.Source(t))},hash:function(n){return n.tagName&&(n.id||n.src)||n},registerMaterial:function(n){this.materials[n.uuid]=n},unregisterMaterial:function(n){delete this.materials[n.uuid]}}),$s("obb-collider",{schema:{showColliders:{default:!1}},init:function(){this.collisions=[],this.colliderEls=[]},addCollider:function(n){this.colliderEls.push(n),this.data.showColliders?n.components["obb-collider"].showCollider():n.components["obb-collider"].hideCollider(),this.tick=this.detectCollisions},removeCollider:function(n){var e=this.colliderEls,t=e.indexOf(n);n.components["obb-collider"].hideCollider(),t>-1&&e.splice(t,1),e.length===0&&(this.tick=void 0)},registerCollision:function(n,e){var t=this.collisions,i=!1,r=n.obb,s=e.obb,a=n.renderColliderMesh,o=e.renderColliderMesh;a&&a.material.color.set(16711680),o&&o.material.color.set(16711680);for(var c=0;c<t.length;c++)if(t[c].componentA.obb===r&&t[c].componentB.obb===s||t[c].componentA.obb===s&&t[c].componentB.obb===r){i=!0,t[c].detected=!0;break}i||(t.push({componentA:n,componentB:e,detected:!0}),n.el.emit("obbcollisionstarted",{trackedObject3D:n.trackedObject3D,withEl:e.el}),e.el.emit("obbcollisionstarted",{trackedObject3D:e.trackedObject3D,withEl:n.el}))},resetCollisions:function(){for(var n=this.collisions,e=0;e<n.length;e++)n[e].detected=!1},clearCollisions:function(){for(var n,e,t,i,r=this.collisions,s=[],a=0;a<r.length;a++)r[a].detected?s.push(r[a]):(n=r[a].componentA,e=r[a].componentB,t=n.renderColliderMesh,i=e.renderColliderMesh,t&&t.material.color.set(65280),n.el.emit("obbcollisionended",{trackedObject3D:this.trackedObject3D,withEl:e.el}),i&&i.material.color.set(65280),e.el.emit("obbcollisionended",{trackedObject3D:this.trackedObject3D,withEl:n.el}));this.collisions=s},detectCollisions:function(){var n,e,t,i,r=this.colliderEls;if(!(r.length<2)){this.resetCollisions();for(var s=0;s<r.length;s++)if(t=r[s].components["obb-collider"],(n=r[s].components["obb-collider"].obb).halfSize.x!==0&&n.halfSize.y!==0&&n.halfSize.z!==0)for(var a=s+1;a<r.length;a++)(e=(i=r[a].components["obb-collider"]).obb).halfSize.x!==0&&e.halfSize.y!==0&&e.halfSize.z!==0&&n.intersectsOBB(e)&&this.registerCollision(t,i);this.clearCollisions()}}});var c1=mn("components:renderer:warn");function Nne(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z-e.z}function Fne(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder-e.renderOrder}function Qne(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:e.z-n.z}$s("renderer",{schema:{antialias:{default:"auto",oneOf:["true","false","auto"]},highRefreshRate:{default:H2()},logarithmicDepthBuffer:{default:"auto",oneOf:["true","false","auto"]},maxCanvasWidth:{default:-1},maxCanvasHeight:{default:-1},multiviewStereo:{default:!1},exposure:{default:1,if:{toneMapping:["ACESFilmic","linear","reinhard","cineon","AgX","neutral"]}},toneMapping:{default:"no",oneOf:["no","ACESFilmic","linear","reinhard","cineon","AgX","neutral"]},precision:{default:"high",oneOf:["high","medium","low"]},anisotropy:{default:1},sortTransparentObjects:{default:!1},colorManagement:{default:!0},alpha:{default:!0},stencil:{default:!1},foveationLevel:{default:1}},init:function(){var n=this.data,e=this.el,t=this.data.toneMapping.charAt(0).toUpperCase()+this.data.toneMapping.slice(1),i=e.renderer;i.toneMapping=B[t+"ToneMapping"],B.Texture.DEFAULT_ANISOTROPY=n.anisotropy,B.ColorManagement.enabled=n.colorManagement,i.outputColorSpace=n.colorManagement?B.SRGBColorSpace:B.LinearSRGBColorSpace,e.hasAttribute("antialias")&&c1('Component `antialias` is deprecated. Use `renderer="antialias: true"` instead.'),e.hasAttribute("logarithmicDepthBuffer")&&c1('Component `logarithmicDepthBuffer` is deprecated. Use `renderer="logarithmicDepthBuffer: true"` instead.'),i.sortObjects=!0,i.setOpaqueSort(Nne)},update:function(){var n=this.data,e=this.el.renderer,t=this.data.toneMapping.charAt(0).toUpperCase()+this.data.toneMapping.slice(1);e.toneMapping=B[t+"ToneMapping"],e.toneMappingExposure=n.exposure,e.xr.setFoveation(n.foveationLevel),n.sortObjects&&c1('`sortObjects` property is deprecated. Use `renderer="sortTransparentObjects: true"` instead.'),n.sortTransparentObjects?e.setTransparentSort(Qne):e.setTransparentSort(Fne)},applyColorCorrection:function(n){this.data.colorManagement&&n&&n.isTexture&&n.colorSpace!==B.SRGBColorSpace&&(n.colorSpace=B.SRGBColorSpace,n.needsUpdate=!0)},setWebXRFrameRate:function(n){var e,t=this.data,i=n.supportedFrameRates;i&&n.updateTargetFrameRate&&(e=i.includes(90)?t.highRefreshRate?90:72:t.highRefreshRate?72:60,n.updateTargetFrameRate(e).catch(function(r){console.warn("failed to set target frame rate of "+e+". Error info: "+r)}))}});var zne={basic:B.BasicShadowMap,pcf:B.PCFShadowMap,pcfsoft:B.PCFSoftShadowMap};$s("shadow",{schema:{enabled:{default:!0},autoUpdate:{default:!0},type:{default:"pcf",oneOf:["basic","pcf","pcfsoft"]}},init:function(){var n=this.sceneEl,e=this.data;this.shadowMapEnabled=!1,n.renderer.shadowMap.type=zne[e.type],n.renderer.shadowMap.autoUpdate=e.autoUpdate},update:function(n){n.enabled!==this.data.enabled&&this.setShadowMapEnabled(this.shadowMapEnabled)},setShadowMapEnabled:function(n){var e=this.sceneEl,t=this.sceneEl.renderer;this.shadowMapEnabled=n;var i=this.data.enabled&&this.shadowMapEnabled;t&&i!==t.shadowMap.enabled&&(t.shadowMap.enabled=i,function(r){r.hasLoaded&&r.object3D.traverse(function(s){if(s.material)for(var a=Array.isArray(s.material)?s.material:[s.material],o=0;o<a.length;o++)a[o].needsUpdate=!0})}(e))}}),$s("tracked-controls",{init:function(){this.controllers=[],this.onInputSourcesChange=this.onInputSourcesChange.bind(this),this.onEnterVR=this.onEnterVR.bind(this),this.el.addEventListener("enter-vr",this.onEnterVR),this.onExitVR=this.onExitVR.bind(this),this.el.addEventListener("exit-vr",this.onExitVR)},onEnterVR:function(){this.el.xrSession&&this.el.xrSession.addEventListener("inputsourceschange",this.onInputSourcesChange)},onExitVR:function(){this.referenceSpace=void 0,this.controllers=[],this.el.emit("controllersupdated",void 0,!1)},onInputSourcesChange:function(){var n=this,e=this.el.xrSession,t=this.el.sceneEl.systems.webxr.sessionReferenceSpaceType;e.requestReferenceSpace(t).then(function(i){n.referenceSpace=i}).catch(function(i){throw n.el.sceneEl.systems.webxr.warnIfFeatureNotRequested(t,'tracked-controls uses reference space "'+t+'".'),i}),this.controllers=e.inputSources,this.el.emit("controllersupdated",void 0,!1)}});var Hne=mn("systems:webxr:warn"),i8=($s("webxr",{schema:{referenceSpaceType:{type:"string",default:"local-floor"},requiredFeatures:{type:"array",default:["local-floor"]},optionalFeatures:{type:"array",default:["bounded-floor"]},overlayElement:{type:"selector"}},update:function(){var n=this.data;this.sessionConfiguration={requiredFeatures:n.requiredFeatures,optionalFeatures:n.optionalFeatures},this.sessionReferenceSpaceType=n.referenceSpaceType,n.overlayElement&&(n.overlayElement.classList.remove("a-dom-overlay"),n.optionalFeatures.includes("dom-overlay")||(n.optionalFeatures.push("dom-overlay"),this.el.setAttribute("webxr",n)),this.warnIfFeatureNotRequested("dom-overlay"),this.sessionConfiguration.domOverlay={root:n.overlayElement},n.overlayElement.classList.add("a-dom-overlay"))},wasFeatureRequested:function(n){return n==="viewer"||n==="local"||!(!this.sessionConfiguration.requiredFeatures.includes(n)&&!this.sessionConfiguration.optionalFeatures.includes(n))},warnIfFeatureNotRequested:function(n,e){this.wasFeatureRequested(n)||Hne((e?e+" ":"")+'Please add the feature "'+n+`" to a-scene's webxr system options in requiredFeatures/optionalFeatures.`)}}),{});function QO(n){var e=n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();n==="fog"&&(e="material-fog"),n==="visible"&&(e="material-visible"),i8[e]="material."+n}function zo(){return{defaultComponents:{material:{}},mappings:Zr({},i8)}}Object.keys(mi.material.schema).forEach(QO),Object.keys(Va.standard.schema).forEach(QO);var q0=new B.Vector3,Gne=new B.Vector3;vt("pivot",{dependencies:["position"],schema:{type:"vec3"},init:function(){var n=this.data,e=this.el,t=e.object3D.parent,i=e.object3D,r=new B.Group;q0.copy(i.position),Gne.copy(i.rotation),t.remove(i),r.add(i),t.add(r),e.object3D=r,i.position.set(-1*n.x,-1*n.y,-1*n.z),r.position.set(n.x+q0.x,n.y+q0.y,n.z+q0.z),r.rotation.copy(i.rotation),i.rotation.set(0,0,0)}}),Rr("a-camera",{defaultComponents:{camera:{},"look-controls":{},"wasd-controls":{},position:{x:0,y:1.6,z:0}},mappings:{active:"camera.active",far:"camera.far",fov:"camera.fov","look-controls-enabled":"look-controls.enabled",near:"camera.near","pointer-lock-enabled":"look-controls.pointerLockEnabled","wasd-controls-enabled":"wasd-controls.enabled","reverse-mouse-drag":"look-controls.reverseMouseDrag",zoom:"camera.zoom"}}),Rr("a-cursor",Cs({},zo(),{defaultComponents:{cursor:{},geometry:{primitive:"ring",radiusOuter:.016,radiusInner:.01,segmentsTheta:32},material:{color:"#000",shader:"flat",opacity:.8},position:{x:0,y:0,z:-1}},mappings:{far:"raycaster.far",fuse:"cursor.fuse","fuse-timeout":"cursor.fuseTimeout",interval:"raycaster.interval",objects:"raycaster.objects"}})),Rr("a-curvedimage",Cs({},zo(),{defaultComponents:{geometry:{height:1,primitive:"cylinder",radius:2,segmentsRadial:48,thetaLength:270,openEnded:!0,thetaStart:0},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0,repeat:"-1 1"}},mappings:{height:"geometry.height","open-ended":"geometry.openEnded",radius:"geometry.radius",segments:"geometry.segmentsRadial",start:"geometry.thetaStart","theta-length":"geometry.thetaLength","theta-start":"geometry.thetaStart",width:"geometry.thetaLength"}})),Rr("a-gltf-model",{mappings:{src:"gltf-model"}}),Rr("a-image",Cs({},zo(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}})),Rr("a-light",{defaultComponents:{light:{}},mappings:{angle:"light.angle",color:"light.color","ground-color":"light.groundColor",decay:"light.decay",distance:"light.distance",intensity:"light.intensity",penumbra:"light.penumbra",type:"light.type",target:"light.target",envmap:"light.envMap","shadow-camera-automatic":"light.shadowCameraAutomatic"}}),Rr("a-link",{defaultComponents:{link:{visualAspectEnabled:!0}},mappings:{href:"link.href",image:"link.image",title:"link.title"}}),Rr("a-obj-model",Cs({},zo(),{defaultComponents:{"obj-model":{}},mappings:{src:"obj-model.obj",mtl:"obj-model.mtl"}}));const r8={},Vne=r8;function zO(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}var u1,j0;rM.forEach(function(n){var e=ac[n],t=zO(n),i={};Object.keys(e.schema).forEach(function(a){i[zO(a)]="geometry."+a});var r="a-"+t,s=Rr(r,Cs({},zo(),{defaultComponents:{geometry:{primitive:n}},mappings:i}));r8[r]=s}),Rr("a-sky",Cs({},zo(),{defaultComponents:{geometry:{primitive:"sphere",radius:500,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",side:"back",shader:"flat",npot:!0},scale:"-1 1 1"},mappings:Cs({},Vne["a-sphere"].mappings)})),Rr("a-sound",{defaultComponents:{sound:{}},mappings:{src:"sound.src",on:"sound.on",autoplay:"sound.autoplay",loop:"sound.loop",volume:"sound.volume"}}),u1={text:{anchor:"align",width:5}},j0=j0||{},Object.keys(u1).forEach(function(n){(function(e,t){var i=mi[e].schema;Object.keys(i).forEach(function(r){var s=r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();t[s]!==void 0&&(s=e+"-"+r),t[s]=e+"."+r})})(n,j0)}),Rr("a-text",Cs({},null,{defaultComponents:u1,mappings:j0})),Rr("a-video",Cs({},zo(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}})),Rr("a-videosphere",Cs({},zo(),{defaultComponents:{geometry:{primitive:"sphere",radius:500,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",shader:"flat",side:"back",npot:!0},scale:"-1 1 1"},mappings:{radius:"geometry.radius","segments-height":"geometry.segmentsHeight","segments-width":"geometry.segmentsWidth"}}));var oM=mn,Wne=oM("A-Frame:error"),qne=oM("A-Frame:warn");window.document.currentScript&&window.document.currentScript.parentNode!==window.document.head&&!window.debug&&qne("Put the A-Frame <script> tag in the <head> of the HTML *before* the scene to ensure everything for A-Frame is properly registered before they are used from HTML."),window.cordova||window.location.protocol!=="file:"||Wne("This HTML file is currently being served via the file:// protocol. Assets, textures, and models WILL NOT WORK due to cross-origin policy! Please use a local or hosted server: https://aframe.io/docs/1.4.0/introduction/installation.html#use-a-local-server."),W2&&(window.logs=oM,xt(7180),xt(9379)),console.log("A-Frame Version: 1.7.0 (Date 2025-03-12, Commit #1b9650f1)"),console.log("THREE Version (https://github.com/supermedium/three.js):",C5.REVISION),window.AFRAME_ASYNC||(document.readyState!=="complete"?document.addEventListener("readystatechange",function n(){document.readyState==="complete"&&(document.removeEventListener("readystatechange",n),kw())}):kw());const jne=globalThis.AFRAME={AComponent:Fm,AEntity:Pi,ANode:tr,ANIME:pv,AScene:K5,components:mi,coreComponents:Object.keys(mi),geometries:ac,registerComponent:vt,registerGeometry:Ur,registerPrimitive:Rr,registerShader:Fl,registerSystem:$s,primitives:{getMeshMixin:zo,primitives:J5},scenes:xu,schema:bw,shaders:Va,systems:Qo,emitReady:kw,THREE:C5,utils:yw,version:$5};zF.A;var HO={},GO={},VO;function Xne(){return VO||(VO=1,AFRAME.registerComponent("three-ar",{schema:{takeOverCamera:{default:!0},cameraUserHeight:{default:!1}},init:function(){this.posePosition=new THREE.Vector3,this.poseQuaternion=new THREE.Quaternion,this.poseEuler=new THREE.Euler(0,0,0,"YXZ"),this.poseRotation=new THREE.Vector3,this.projectionMatrix=new THREE.Matrix4,this.onceSceneLoaded=this.onceSceneLoaded.bind(this),this.el.sceneEl.hasLoaded?setTimeout(this.onceSceneLoaded):this.el.sceneEl.addEventListener("loaded",this.onceSceneLoaded)},tick:function(n,e){if(!(!this.arDisplay||!this.arDisplay.getFrameData)){this.arView&&this.arView.render(),this.frameData||(this.frameData=new VRFrameData),this.arDisplay.getFrameData(this.frameData),this.posePosition.fromArray(this.frameData.pose.position),this.poseQuaternion.fromArray(this.frameData.pose.orientation),this.poseEuler.setFromQuaternion(this.poseQuaternion),this.poseRotation.set(THREE.Math.RAD2DEG*this.poseEuler.x,THREE.Math.RAD2DEG*this.poseEuler.y,THREE.Math.RAD2DEG*this.poseEuler.z),this.arCamera&&this.data.cameraUserHeight&&(this.posePosition.y+=this.arCamera.el.components.camera.data.userHeight);var t=this.posePosition.x||this.posePosition.y||this.posePosition.z||this.poseQuaternion.x||this.poseQuaternion.y||this.poseQuaternion.z;t?this.poseLost!==!1&&(this.poseLost=!1,this.el.emit("poseFound")):this.poseLost!==!0&&(this.poseLost=!0,this.el.emit("poseLost",!1)),this.projectionMatrix.fromArray(this.frameData.leftProjectionMatrix)}},takeOverCamera:function(n){this.arCamera=n,n.isARPerspectiveCamera=!0,n.vrDisplay=this.arDisplay,n.el.setAttribute("ar-camera","enabled",!0)},onceSceneLoaded:function(){var n=this;window.addEventListener("ardisplayconnect",function(){n.arDisplay||n.checkForARDisplay()}),this.checkForARDisplay()},checkForARDisplay:function(){var n=this;THREE.ARUtils.getARDisplay().then(function(e){if(n.arDisplay=e,!!e){var t=n.el.sceneEl;n.data.takeOverCamera&&setTimeout(function(){n.takeOverCamera(t.camera)}),t.renderer.alpha=!0,t.renderer.autoClearColor=THREE.ARUtils.isARKit(e)&&!window.WebARonARKitSendsCameraFrames,t.renderer.autoClearDepth=!0,n.arView=new THREE.ARView(e,t.renderer)}})},getPosition:function(){return!this.arDisplay||!this.arDisplay.getFrameData?null:this.posePosition},getOrientation:function(){return!this.arDisplay||!this.arDisplay.getFrameData?null:this.poseQuaternion},getRotation:function(){return!this.arDisplay||!this.arDisplay.getFrameData?null:this.poseRotation},getProjectionMatrix:function(){return!this.arDisplay||!this.arDisplay.getFrameData?null:this.projectionMatrix},hitAR:function(){var n=new THREE.Matrix4,e=new THREE.Vector3,t=new THREE.Quaternion,i=new THREE.Vector3,r=new THREE.Vector3;return function(s,a,o,c){if(!this.arDisplay||!this.arDisplay.hitTest)return[];for(var h=this.arDisplay.hitTest(s,a),d=[],p=0;h&&p<h.length;p++)n.fromArray(h[0].modelMatrix),n.decompose(e,t,i),c.object3D.getWorldPosition(r),d.push({distance:e.distanceTo(r),point:e,object:o&&o.object3D||this.el.sceneEl.object3D});return d}}()})),GO}var WO={},qO;function Yne(){return qO||(qO=1,AFRAME.registerComponent("mozilla-xr-ar",{schema:{takeOverCamera:{default:!0},cameraUserHeight:{default:!1}},init:function(){this.onInit=this.onInit.bind(this),this.onWatch=this.onWatch.bind(this),this.poseMatrix=new THREE.Matrix4,this.posePosition=new THREE.Vector3,this.poseQuaternion=new THREE.Quaternion,this.poseEuler=new THREE.Euler(0,0,0,"YXZ"),this.poseRotation=new THREE.Vector3,this.projectionMatrix=new THREE.Matrix4,this.viewMatrix=new THREE.Matrix4,this.onceSceneLoaded=this.onceSceneLoaded.bind(this),this.el.sceneEl.hasLoaded?(console.log("mozilla-xr-ar: hasLoaded, setTimeout"),setTimeout(this.onceSceneLoaded)):(console.log("mozilla-xr-ar: !hasLoaded, addEventListener"),this.el.sceneEl.addEventListener("loaded",this.onceSceneLoaded)),this.planes_=new Map,this.anchors_=new Map},takeOverCamera:function(n){this.arCamera=n,n.el.setAttribute("ar-camera","enabled",!0)},onceSceneLoaded:function(){if(!(!window.webkit||!window.webkit.messageHandlers)&&window.webkit.messageHandlers.initAR){setTimeout(function(){var e=AFRAME.scenes[0];e.canvas.style.position="absolute !important",e.canvas.style.width="100% !important",e.canvas.style.height="100% !important",setTimeout(function(){e.resize()})},1e3),window.arkitCallback0=this.onInit,window.arkitCallback1=this.onWatch;var n={options:{ui:{browser:!0,points:!0,focus:!1,rec:!0,rec_time:!0,mic:!1,build:!1,plane:!0,warnings:!0,anchors:!1,debug:!0,statistics:!1}},callback:"arkitCallback0"};window.webkit.messageHandlers.initAR.postMessage(n)}},checkForARDisplay:function(){if(!(!window.webkit||!window.webkit.messageHandlers)&&window.webkit.messageHandlers.watchAR){this.arDisplay=!0;var n={options:{location:!0,camera:!0,objects:!0,light_intensity:!0},callback:"arkitCallback1"};window.arkitWindowResize=function(){setTimeout(function(){AFRAME.scenes[0].resize()},100)},window.webkit.messageHandlers.watchAR.postMessage(n);var e=this,t=e.el.sceneEl;e.data.takeOverCamera&&setTimeout(function(){e.takeOverCamera(t.camera)}),t.renderer.setPixelRatio(1),t.renderer.autoClear=!1,t.renderer.setClearColor("#000",0),t.renderer.alpha=!0}},onInit:function(n){this.checkForARDisplay()},onWatch:function(n){this.frameData=n,this.handleFrame(n)},handleFrame:function(n){this.el.sceneEl,this.poseMatrix.fromArray(n.camera_transform),this.poseMatrix.decompose(this.posePosition,this.poseQuaternion,this.poseRotation),this.poseEuler.setFromQuaternion(this.poseQuaternion),this.poseRotation.set(THREE.Math.RAD2DEG*this.poseEuler.x,THREE.Math.RAD2DEG*this.poseEuler.y,THREE.Math.RAD2DEG*this.poseEuler.z),this.projectionMatrix.fromArray(n.projection_camera),this.viewMatrix.fromArray(n.camera_view),this.arCamera&&this.data.cameraUserHeight&&(this.posePosition.y+=this.arCamera.el.components.camera.data.userHeight);var e=this.posePosition.x||this.posePosition.y||this.posePosition.z||this.poseQuaternion.x||this.poseQuaternion.y||this.poseQuaternion.z;e?this.poseLost!==!1&&(this.poseLost=!1,this.el.emit("poseFound")):this.poseLost!==!0&&(this.poseLost=!0,this.el.emit("poseLost",!1));var t;if(n.newObjects&&n.newObjects.length)for(t=0;t<n.newObjects.length;t++){var i=n.newObjects[t];i.h_plane_center?this.planes_.set(i.uuid,{id:i.uuid,center:i.h_plane_center,extent:[i.h_plane_extent.x,i.h_plane_extent.z],modelMatrix:i.transform}):this.anchors_.set(i.uuid,{id:i.uuid,modelMatrix:i.transform})}if(n.removedObjects&&n.removedObjects.length)for(t=0;t<n.removedObjects.length;t++){var i=n.removedObjects[t];i.h_plane_center?this.planes_.delete(i.uuid):this.anchors_.delete(i.uuid)}if(n.objects&&n.objects.length)for(t=0;t<n.objects.length;t++){var i=n.objects[t];if(i.h_plane_center){var r=this.planes_.get(i.uuid);r?(r.center=i.h_plane_center,r.extent=[i.h_plane_extent.x,i.h_plane_extent.z],r.transform=i.transform):this.planes_.set(i.uuid,{id:i.uuid,center:i.h_plane_center,extent:[i.h_plane_extent.x,i.h_plane_extent.z],transform:i.transform})}else{var s=this.anchors_.get(i.uuid);s?s.transform=i.transform:this.anchors_.set(i.uuid,{id:i.uuid,transform:i.transform})}}},getPosition:function(){return this.arDisplay?this.posePosition:null},getOrientation:function(){return this.arDisplay?this.poseQuaternion:null},getRotation:function(){return this.arDisplay?this.poseRotation:null},getProjectionMatrix:function(){return this.arDisplay?this.projectionMatrix:null},getPlanes:function(){return Array.from(this.planes_.values())},hitTestNoAnchor:function(){function n(){return this.modelMatrix=new Float32Array(16),this}var e={rayStart:new THREE.Vector3,rayEnd:new THREE.Vector3,cameraPosition:new THREE.Vector3,cameraQuaternion:new THREE.Quaternion,projViewMatrix:new THREE.Matrix4,worldRayStart:new THREE.Vector3,worldRayEnd:new THREE.Vector3,worldRayDir:new THREE.Vector3,planeMatrix:new THREE.Matrix4,planeMatrixInverse:new THREE.Matrix4,planeExtent:new THREE.Vector3,planePosition:new THREE.Vector3,planeCenter:new THREE.Vector3,planeNormal:new THREE.Vector3,planeIntersection:new THREE.Vector3,planeIntersectionLocal:new THREE.Vector3,planeHit:new THREE.Matrix4},t=function(){var r=new THREE.Vector3;return function(s,a,o,c){var h=s.dot(c);return r.subVectors(a,o),r.dot(s)/h}}(),i=function(r,s){e.planeMatrix.fromArray(r.modelMatrix),e.planeIntersection.setFromMatrixPosition(e.planeMatrix);var a=e.planeIntersection.distanceTo(e.cameraPosition);e.planeMatrix.fromArray(s.modelMatrix),e.planeIntersection.setFromMatrixPosition(e.planeMatrix);var o=e.planeIntersection.distanceTo(e.cameraPosition);return a<o?-1:1};return function(r,s){if(r<0||r>1||s<0||s>1)throw new Error("hitTest - x and y values must be normalized [0,1]!");var a=[],o=this.getPlanes();if(!o||o.length==0)return a;e.rayStart.set(2*r-1,2*(1-s)-1,0),e.rayEnd.set(2*r-1,2*(1-s)-1,1),e.planeMatrix.multiplyMatrices(this.projectionMatrix,this.viewMatrix),e.projViewMatrix.getInverse(e.planeMatrix),e.worldRayStart.copy(e.rayStart).applyMatrix4(e.projViewMatrix),e.worldRayEnd.copy(e.rayEnd).applyMatrix4(e.projViewMatrix),e.worldRayDir.subVectors(e.worldRayEnd,e.worldRayStart).normalize();for(var c=0;c<o.length;c++){var h=o[c];e.planeMatrix.fromArray(h.modelMatrix),e.planeCenter.set(0,0,0),e.planePosition.copy(e.planeCenter).applyMatrix4(e.planeMatrix),e.planeNormal.set(0,1,0);var d=t(e.planeNormal,e.planePosition,e.worldRayStart,e.worldRayDir);if(!(d<0)){e.planeIntersectionLocal.copy(e.worldRayDir).multiplyScalar(d),e.planeIntersection.addVectors(e.worldRayStart,e.planeIntersectionLocal),e.planeExtent.set(h.extent[0],0,h.extent[1]),e.planeMatrixInverse.getInverse(e.planeMatrix),e.planeIntersectionLocal.copy(e.planeIntersection).applyMatrix4(e.planeMatrixInverse);var p=.0075;if(!(Math.abs(e.planeIntersectionLocal.x)>e.planeExtent.x/2+p)&&!(Math.abs(e.planeIntersectionLocal.z)>e.planeExtent.z/2+p)){e.planeHit.makeTranslation(e.planeIntersection.x,e.planeIntersection.y,e.planeIntersection.z);for(var m=new n,A=0;A<16;A++)m.modelMatrix[A]=e.planeHit.elements[A];m.i=c,a.push(m)}}}return a.sort(i),a}}(),hitAR:function(){var n=new THREE.Matrix4,e=new THREE.Vector3,t=new THREE.Quaternion,i=new THREE.Vector3,r=new THREE.Vector3;return function(s,a,o,c){if(!this.arDisplay)return[];for(var h=this.hitTestNoAnchor(s,a),d=[],p=0;h&&p<h.length;p++)n.fromArray(h[0].modelMatrix),n.decompose(e,t,i),c.object3D.getWorldPosition(r),d.push({distance:e.distanceTo(r),point:e,object:o&&o.object3D||this.el.sceneEl.object3D});return d}}()})),WO}var jO={},XO;function Kne(){return XO||(XO=1,AFRAME.registerComponent("ar-planes",{getPlaneSource:function(){var n;return this.planeSource||(n=this.el.sceneEl.components["three-ar"],n&&n.arDisplay&&(this.planeSource=n.arDisplay)),this.planeSource||(n=this.el.sceneEl.components["mozilla-xr-ar"],n&&n.arDisplay&&(this.planeSource=n)),this.planeSource},getPlanes:function(){var n=this.getPlaneSource();if(!(!n||!n.getPlanes))return n.getPlanes()},init:function(){this.planes={},this.anchorsAdded=[],this.anchorsAddedDetail={type:"added",anchors:this.anchorsAdded},this.anchorsUpdated=[],this.anchorsUpdatedDetail={type:"updated",anchors:this.anchorsUpdated},this.anchorsRemoved=[],this.anchorsRemovedDetail={type:"removed",anchors:this.anchorsRemoved}},tick:function(n,e){var t=new THREE.Vector3(1,1,1);new THREE.Vector3;var i=new THREE.Matrix4,r=new THREE.Vector3;new THREE.Vector3;var s=new THREE.Quaternion;return new THREE.Euler(0,0,0,"YXZ"),function(a,o){var c=this.getPlanes();if(c){var h=[],d=[],p=[],m={},A;for(A=0;c&&A<c.length;A++){var v=c[A],_,y=(v.identifier!==void 0?v.identifier:v.id).toString(),E=v.timestamp;m[y]=!0;var b=!this.planes[y],C=E!==void 0;if(!(!b&&C&&E===this.planes[y].timestamp)){var _={identifier:y};if(E!==void 0&&(_.timestamp=E),v.modelMatrix||v.transform?_.modelMatrix=v.modelMatrix||v.transform:(r.fromArray(v.position),s.fromArray(v.orientation),t.set(1,1,1),i.compose(r,s,t),_.modelMatrix=i.elements.slice()),_.extent=v.extent,v.center&&(_.center=v.center),v.polygon?_.vertices=v.polygon:v.vertices&&(_.vertices=v.vertices),b)h.push(_);else if(C)d.push(_);else{if(AFRAME.utils.deepEqual(_,this.planes[y]))continue;d.push(_)}C?this.planes[y]=_:(this.planes[y]={identifier:_.identifier,modelMatrix:_.modelMatrix.slice(),extent:_.extent.slice()},_.vertices&&(this.planes[y].vertices=_.vertices.slice()))}}var w=this;Object.keys(w.planes).forEach(function(T){m[T]||(p.push(w.planes[T]),delete w.planes[T])}),this.anchorsAdded=h,h.length>0&&(this.anchorsAddedDetail.anchors=h,this.el.emit("anchorsadded",this.anchorsAddedDetail)),this.anchorsUpdated=d,d.length>0&&(this.anchorsUpdatedDetail.anchors=d,this.el.emit("anchorsupdated",this.anchorsUpdatedDetail)),this.anchorsRemoved=p,p.length>0&&(this.anchorsRemovedDetail.anchors=p,this.el.emit("anchorsremoved",this.anchorsRemovedDetail))}}}()})),jO}var YO={},KO;function Jne(){return KO||(KO=1,AFRAME.registerComponent("ar",{schema:{takeOverCamera:{default:!0},cameraUserHeight:{default:!1},hideUI:{default:!0}},dependencies:["three-ar","mozilla-xr-ar","ar-planes"],init:function(){this.el.setAttribute("three-ar",{takeOverCamera:this.data.takeOverCamera,cameraUserHeight:this.data.cameraUserHeight}),this.el.setAttribute("mozilla-xr-ar",{takeOverCamera:this.data.takeOverCamera,cameraUserHeight:this.data.cameraUserHeight}),this.data.hideUI&&this.el.sceneEl.setAttribute("vr-mode-ui",{enabled:!1}),document.head.insertAdjacentHTML("beforeend","<style>html,body {background-color: transparent !important;}</style>")}})),YO}var JO={},ZO;function Zne(){return ZO||(ZO=1,AFRAME.registerComponent("ar-camera",{schema:{enabled:{default:!0}},init:function(){this.wasLookControlsEnabled=this.el.getAttribute("look-controls","enabled")},update:function(n){(!n||n.enabled!==this.data.enabled)&&(this.data.enabled?(this.wasLookControlsEnabled=this.el.getAttribute("look-controls","enabled"),this.el.setAttribute("look-controls","enabled",!1)):this.el.setAttribute("look-controls","enabled",this.wasLookControlsEnabled===!0))},tick:function(n,e){if(this.data.enabled){var t=this.checkWhichAR();t&&(this.el.setAttribute("position",t.getPosition()),this.el.setAttribute("rotation",t.getRotation()),this.el.sceneEl.is("vr-mode")||(this.el.components.camera.camera.projectionMatrix=t.getProjectionMatrix()))}},checkWhichAR:function(){if(!this.whichar){var n=this.el.sceneEl.components["three-ar"];if((!n||!n.arDisplay)&&(n=this.el.sceneEl.components["mozilla-xr-ar"]),!n||!n.arDisplay)return;this.whichar=n}return this.whichar}})),JO}var $O={},eP;function $ne(){return eP||(eP=1,AFRAME.registerComponent("ar-raycaster",{dependencies:["raycaster"],schema:{x:{default:.5},y:{default:.5},el:{type:"selector"}},init:function(){this.raycaster=this.el.components.raycaster.raycaster,this.raycasterIntersectObjects=this.raycaster.intersectObjects.bind(this.raycaster),this.raycaster.intersectObjects=this.intersectObjects.bind(this)},update:function(n){this.data.el||this.el.sceneEl.object3D.el||(this.el.sceneEl.object3D.el=this.el.sceneEl)},intersectObjects:function(n,e){var t=this.raycasterIntersectObjects(n,e);return t.concat(this.hitAR())},hitAR:function(){var n=this.checkWhichAR();if(!n||!n.arDisplay)return[];var e=this.data.x,t=this.data.y;return arguments.length>=2&&(e=arguments[0],t=arguments[1]),n.hitAR(e,t,this.data.el,this.el)},checkWhichAR:function(){if(!this.whichar){var n=this.el.sceneEl.components["three-ar"];if((!n||!n.arDisplay)&&(n=this.el.sceneEl.components["mozilla-xr-ar"]),!n||!n.arDisplay)return;this.whichar=n}return this.whichar}})),$O}var tP;function eie(){return tP||(tP=1,Xne(),Yne(),Kne(),Jne(),Zne(),$ne()),HO}eie();const tie=({onClose:n})=>{const[e,t]=ie.useState(null);return ie.useEffect(()=>{const i=document.createElement("div");i.id="ar-portal-container",i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%",i.style.zIndex="1000",document.body.appendChild(i);const r=document.createElement("iframe");return r.style.width="100%",r.style.height="100%",r.style.border="none",r.allow="camera; geolocation; accelerometer; gyroscope; magnetometer",i.appendChild(r),r.onload=()=>{const s=r.contentDocument;if(!s)return;s.body.innerHTML=`
        <style>
          body { margin: 0; overflow: hidden; }
          .close-button {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 1001;
            padding: 12px 20px;
            background: rgba(255, 255, 255, 0.8);
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
          }
          .instructions {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 10px 20px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            border-radius: 5px;
            text-align: center;
            z-index: 1001;
          }
        </style>
        <a-scene embedded vr-mode-ui="enabled: false">
          <a-marker type="pattern" url="/marker-patterns/pattern-ar-marker-5.patt">
            <a-box position="0 0.5 0" color="red" scale="0.5 0.5 0.5"></a-box>
            <a-entity animation="property: rotation; to: 0 360 0; loop: true; dur: 2000"></a-entity>
            <a-text value="AR Demo" position="0 1 0" align="center" color="white" scale="0.5 0.5 0.5"></a-text>
          </a-marker>
          <a-entity camera></a-entity>
        </a-scene>
        <button class="close-button" id="close-button">Close AR Demo</button>
        <div class="instructions">Point your camera at Marker #5 to see the AR content</div>
      `;const a=s.getElementById("close-button");a&&a.addEventListener("click",()=>{document.body.contains(i)&&document.body.removeChild(i),n()})},r.src="about:blank",t(i),()=>{document.body.contains(i)&&document.body.removeChild(i)}},[n]),null},nie=({onComplete:n})=>{const{permissionsState:e,initialize:t,requestPermission:i,updatePermissionState:r,isPermissionGranted:s,completeOnboarding:a}=JU(),[o,c]=ie.useState(0),[h,d]=ie.useState(!1),[p,m]=ie.useState(null),A=ie.useMemo(()=>e==null?void 0:e.allGranted,[e==null?void 0:e.allGranted]);ie.useEffect(()=>{console.log(`Current step changed to: ${o}`),o===0&&t()},[t,o]),ie.useEffect(()=>{A&&o>0&&e&&(a(),o<2&&c(2))},[A,a,e,o]),ie.useEffect(()=>{if(p){console.log("Disabling GSAP ScrollTrigger for AR experience");const _=window.gsap,w=_==null?void 0:_.ScrollTrigger,T=[];return w&&(w.getAll().forEach(R=>{R.enabled()&&(T.push(R),R.disable())}),console.log(`Disabled ${T.length} ScrollTrigger instances`)),()=>{console.log("Re-enabling GSAP ScrollTrigger instances"),T.forEach(L=>{L&&typeof L.enable=="function"&&L.enable()})}}},[p]),ie.useCallback(async _=>{try{let w=!1;_===en.LOCATION?(w=await new Promise(T=>{navigator.geolocation.getCurrentPosition(L=>{T(!0)},L=>{T(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}),w&&r(_,Aa.GRANTED)):w=await i(_)}catch(w){console.error("Error requesting permission:",w)}},[i,r]);const v=ie.useCallback(()=>de.jsx("button",{onClick:()=>{"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(()=>{},()=>{})},style:{position:"absolute",top:60,right:10,padding:"8px 16px",background:"#4CAF50",color:"white",border:"none",borderRadius:"4px",zIndex:9999},children:"Debug Permissions"}),[]),y=ie.useCallback(()=>{a(),n()},[a,n]),E=ie.useCallback(()=>{m(null)},[]),b=ie.useCallback(_=>{switch(_){case 1:return de.jsxs("div",{className:"card-content welcome",children:[de.jsx("h1",{children:"Welcome to the Park AR Experience"}),de.jsx("p",{children:"Explore interactive augmented reality features throughout the park!"}),de.jsx("button",{className:"primary-button",onClick:()=>c(1),children:"Get Started"})]});case 2:return de.jsxs("div",{className:"card-content permissions",children:[de.jsx("h2",{children:"Required Permissions"}),de.jsx("p",{children:"The following permissions are needed for the AR experience:"}),de.jsx("div",{className:"permissions-summary",style:{margin:"1rem 0"},children:de.jsx(GS,{})}),de.jsx("button",{className:"primary-button",onClick:()=>c(2),disabled:!A,children:"Continue"})]});case 3:return de.jsxs("div",{className:"card-content ready",style:{height:"100%",display:"flex",flexDirection:"column"},children:[de.jsx("h2",{children:"Camera and AR Demo"}),de.jsx("p",{children:"This demo shows how the camera and AR elements will work in the app."}),de.jsx("div",{style:{flex:1,minHeight:"60vh",marginBottom:"1rem",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.1)",borderRadius:"8px"},children:p?de.jsx("div",{style:{textAlign:"center",color:"white",backgroundColor:"rgba(0, 0, 0, 0.5)",padding:"20px",borderRadius:"8px"},children:"AR Experience Running"}):de.jsx("button",{className:"primary-button",onClick:()=>m("demo"),children:"Launch AR Demo"})}),de.jsx("button",{className:"primary-button",onClick:y,children:"Start Experience"})]});default:return null}},[p,y,A,c]),C=ie.useMemo(()=>null,[v]);return de.jsxs("div",{className:"onboarding-route",children:[C,de.jsx(yU,{color:"gradient(var(--color-dark), var(--color-pink), var(--color-blue), var(--color-dark), var(--color-green))",gradientType:"blocks",blockSize:200,children:de.jsxs(DH,{id:"carousel1",title:"onboarding",background:"",currentCard:o+1,children:[de.jsx(AC,{title:"",subtitle:"",color:"var(--color-dark)",index:1,height:"90%",children:b(1)}),de.jsx(AC,{title:"",subtitle:"",color:"var(--color-dark)",index:2,height:"90%",children:b(2)}),de.jsx(AC,{title:"",subtitle:"",color:"var(--color-dark)",index:3,height:"100%",children:b(3)})]})}),p==="demo"&&de.jsx(tie,{onClose:E})]})},iie=()=>de.jsx("div",{className:"map-route",children:de.jsx(xS,{id:"mapSection",title:"Map",color:"var(--color-dark)",children:de.jsxs("div",{className:"map-content",style:{padding:"1rem"},children:[de.jsx("p",{children:"Map content will be displayed here..."}),de.jsx(GS,{compact:!0})]})})}),rie=()=>de.jsxs("div",{className:"water-level-route",children:[de.jsx("div",{style:{position:"absolute",top:"20px",right:"20px",zIndex:100,backgroundColor:"rgba(0, 0, 0, 0.5)",padding:"0.5rem",borderRadius:"0.5rem"},children:de.jsx(GS,{compact:!0,showCamera:!1,showLocation:!0,showOrientation:!1})}),de.jsx(xS,{id:"waterLevelSection",title:"Water Level",color:"var(--color-dark)",children:de.jsxs("div",{style:{padding:"1rem"},children:[de.jsx("p",{children:"Water level data requires location permissions to show relevant information for your area."}),de.jsx("div",{style:{height:"200px",marginTop:"20px",backgroundColor:"rgba(0, 100, 255, 0.2)",borderRadius:"5px",display:"flex",justifyContent:"center",alignItems:"center"},children:"Water level visualization will appear here"})]})})]}),sie={palette:{mode:"dark",primary:{main:"#4889C8"},secondary:{main:"#BE69A9"},background:{default:"#282C35",paper:"#282C35"},success:{main:"#009449",light:"rgba(0, 148, 73, 0.15)"},error:{main:"#BE69A9",light:"rgba(190, 105, 169, 0.15)"},text:{primary:"#FFFFF0",secondary:"rgba(255, 255, 240, 0.7)"}},typography:{fontFamily:"'rigby', 'Roboto', 'Arial', sans-serif",fontWeightRegular:400,fontWeightBold:700},components:{MuiCard:{styleOverrides:{root:{borderRadius:8,backgroundImage:"none"}}},MuiChip:{styleOverrides:{root:{borderRadius:4,transition:"0.4s"}}},MuiButton:{styleOverrides:{root:{textTransform:"none",borderRadius:6,transition:"0.4s"}}}}},aie=rb(sie),oie=({children:n})=>de.jsxs(b7,{theme:aie,children:[de.jsx(Z7,{}),n]});function lie(){const n=hP(),e=()=>{n("/map")};return de.jsx(nie,{onComplete:e})}function cie(){return ie.useEffect(()=>{console.log("App mounted - initializing permissions")},[]),de.jsx("div",{className:"App",children:de.jsx(oie,{children:de.jsx(KU,{children:de.jsx(D6,{children:de.jsxs(l6,{children:[de.jsx(vp,{path:"/",element:de.jsx(RH,{})}),de.jsx(vp,{path:"/onboarding",element:de.jsx(lie,{})}),de.jsx(vp,{path:"/map",element:de.jsx(iie,{})}),de.jsx(vp,{path:"/water-level",element:de.jsx(rie,{})})]})})})})})}console.log("Base URL:","/wayside-app/");Es.registerPlugin(Qt);Qt.defaults({markers:!1});vz.createRoot(document.getElementById("root")).render(de.jsx(KU,{children:de.jsx(uH,{children:de.jsx(cie,{})})}));
